var D4=Object.defineProperty;var W0=e=>{throw TypeError(e)};var U4=(e,t,r)=>t in e?D4(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var Gt=(e,t,r)=>U4(e,typeof t!="symbol"?t+"":t,r),K0=(e,t,r)=>t.has(e)||W0("Cannot "+r);var _e=(e,t,r)=>(K0(e,t,"read from private field"),r?r.call(e):t.get(e)),gs=(e,t,r)=>t.has(e)?W0("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),ua=(e,t,r,i)=>(K0(e,t,"write to private field"),i?i.call(e,r):t.set(e,r),r);function F4(e,t){for(var r=0;r<t.length;r++){const i=t[r];if(typeof i!="string"&&!Array.isArray(i)){for(const o in i)if(o!=="default"&&!(o in e)){const a=Object.getOwnPropertyDescriptor(i,o);a&&Object.defineProperty(e,o,a.get?a:{enumerable:!0,get:()=>i[o]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const u of a.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function r(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(o){if(o.ep)return;o.ep=!0;const a=r(o);fetch(o.href,a)}})();function M4(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Da(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var t=e.default;if(typeof t=="function"){var r=function i(){return this instanceof i?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(i){var o=Object.getOwnPropertyDescriptor(e,i);Object.defineProperty(r,i,o.get?o:{enumerable:!0,get:function(){return e[i]}})}),r}var Ed={exports:{}},ca={},Sd={exports:{}},Ee={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var H0;function $4(){if(H0)return Ee;H0=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),u=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),v=Symbol.iterator;function _(P){return P===null||typeof P!="object"?null:(P=v&&P[v]||P["@@iterator"],typeof P=="function"?P:null)}var E={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,k={};function T(P,U,$){this.props=P,this.context=U,this.refs=k,this.updater=$||E}T.prototype.isReactComponent={},T.prototype.setState=function(P,U){if(typeof P!="object"&&typeof P!="function"&&P!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,P,U,"setState")},T.prototype.forceUpdate=function(P){this.updater.enqueueForceUpdate(this,P,"forceUpdate")};function A(){}A.prototype=T.prototype;function I(P,U,$){this.props=P,this.context=U,this.refs=k,this.updater=$||E}var R=I.prototype=new A;R.constructor=I,S(R,T.prototype),R.isPureReactComponent=!0;var D=Array.isArray,V=Object.prototype.hasOwnProperty,F={current:null},B={key:!0,ref:!0,__self:!0,__source:!0};function M(P,U,$){var Y,q={},me=null,we=null;if(U!=null)for(Y in U.ref!==void 0&&(we=U.ref),U.key!==void 0&&(me=""+U.key),U)V.call(U,Y)&&!B.hasOwnProperty(Y)&&(q[Y]=U[Y]);var he=arguments.length-2;if(he===1)q.children=$;else if(1<he){for(var Pe=Array(he),ot=0;ot<he;ot++)Pe[ot]=arguments[ot+2];q.children=Pe}if(P&&P.defaultProps)for(Y in he=P.defaultProps,he)q[Y]===void 0&&(q[Y]=he[Y]);return{$$typeof:e,type:P,key:me,ref:we,props:q,_owner:F.current}}function te(P,U){return{$$typeof:e,type:P.type,key:U,ref:P.ref,props:P.props,_owner:P._owner}}function ve(P){return typeof P=="object"&&P!==null&&P.$$typeof===e}function Ae(P){var U={"=":"=0",":":"=2"};return"$"+P.replace(/[=:]/g,function($){return U[$]})}var je=/\/+/g;function kt(P,U){return typeof P=="object"&&P!==null&&P.key!=null?Ae(""+P.key):U.toString(36)}function bt(P,U,$,Y,q){var me=typeof P;(me==="undefined"||me==="boolean")&&(P=null);var we=!1;if(P===null)we=!0;else switch(me){case"string":case"number":we=!0;break;case"object":switch(P.$$typeof){case e:case t:we=!0}}if(we)return we=P,q=q(we),P=Y===""?"."+kt(we,0):Y,D(q)?($="",P!=null&&($=P.replace(je,"$&/")+"/"),bt(q,U,$,"",function(ot){return ot})):q!=null&&(ve(q)&&(q=te(q,$+(!q.key||we&&we.key===q.key?"":(""+q.key).replace(je,"$&/")+"/")+P)),U.push(q)),1;if(we=0,Y=Y===""?".":Y+":",D(P))for(var he=0;he<P.length;he++){me=P[he];var Pe=Y+kt(me,he);we+=bt(me,U,$,Pe,q)}else if(Pe=_(P),typeof Pe=="function")for(P=Pe.call(P),he=0;!(me=P.next()).done;)me=me.value,Pe=Y+kt(me,he++),we+=bt(me,U,$,Pe,q);else if(me==="object")throw U=String(P),Error("Objects are not valid as a React child (found: "+(U==="[object Object]"?"object with keys {"+Object.keys(P).join(", ")+"}":U)+"). If you meant to render a collection of children, use an array instead.");return we}function Ke(P,U,$){if(P==null)return P;var Y=[],q=0;return bt(P,Y,"","",function(me){return U.call($,me,q++)}),Y}function ht(P){if(P._status===-1){var U=P._result;U=U(),U.then(function($){(P._status===0||P._status===-1)&&(P._status=1,P._result=$)},function($){(P._status===0||P._status===-1)&&(P._status=2,P._result=$)}),P._status===-1&&(P._status=0,P._result=U)}if(P._status===1)return P._result.default;throw P._result}var be={current:null},G={transition:null},ce={ReactCurrentDispatcher:be,ReactCurrentBatchConfig:G,ReactCurrentOwner:F};function J(){throw Error("act(...) is not supported in production builds of React.")}return Ee.Children={map:Ke,forEach:function(P,U,$){Ke(P,function(){U.apply(this,arguments)},$)},count:function(P){var U=0;return Ke(P,function(){U++}),U},toArray:function(P){return Ke(P,function(U){return U})||[]},only:function(P){if(!ve(P))throw Error("React.Children.only expected to receive a single React element child.");return P}},Ee.Component=T,Ee.Fragment=r,Ee.Profiler=o,Ee.PureComponent=I,Ee.StrictMode=i,Ee.Suspense=d,Ee.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ce,Ee.act=J,Ee.cloneElement=function(P,U,$){if(P==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+P+".");var Y=S({},P.props),q=P.key,me=P.ref,we=P._owner;if(U!=null){if(U.ref!==void 0&&(me=U.ref,we=F.current),U.key!==void 0&&(q=""+U.key),P.type&&P.type.defaultProps)var he=P.type.defaultProps;for(Pe in U)V.call(U,Pe)&&!B.hasOwnProperty(Pe)&&(Y[Pe]=U[Pe]===void 0&&he!==void 0?he[Pe]:U[Pe])}var Pe=arguments.length-2;if(Pe===1)Y.children=$;else if(1<Pe){he=Array(Pe);for(var ot=0;ot<Pe;ot++)he[ot]=arguments[ot+2];Y.children=he}return{$$typeof:e,type:P.type,key:q,ref:me,props:Y,_owner:we}},Ee.createContext=function(P){return P={$$typeof:u,_currentValue:P,_currentValue2:P,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},P.Provider={$$typeof:a,_context:P},P.Consumer=P},Ee.createElement=M,Ee.createFactory=function(P){var U=M.bind(null,P);return U.type=P,U},Ee.createRef=function(){return{current:null}},Ee.forwardRef=function(P){return{$$typeof:h,render:P}},Ee.isValidElement=ve,Ee.lazy=function(P){return{$$typeof:y,_payload:{_status:-1,_result:P},_init:ht}},Ee.memo=function(P,U){return{$$typeof:p,type:P,compare:U===void 0?null:U}},Ee.startTransition=function(P){var U=G.transition;G.transition={};try{P()}finally{G.transition=U}},Ee.unstable_act=J,Ee.useCallback=function(P,U){return be.current.useCallback(P,U)},Ee.useContext=function(P){return be.current.useContext(P)},Ee.useDebugValue=function(){},Ee.useDeferredValue=function(P){return be.current.useDeferredValue(P)},Ee.useEffect=function(P,U){return be.current.useEffect(P,U)},Ee.useId=function(){return be.current.useId()},Ee.useImperativeHandle=function(P,U,$){return be.current.useImperativeHandle(P,U,$)},Ee.useInsertionEffect=function(P,U){return be.current.useInsertionEffect(P,U)},Ee.useLayoutEffect=function(P,U){return be.current.useLayoutEffect(P,U)},Ee.useMemo=function(P,U){return be.current.useMemo(P,U)},Ee.useReducer=function(P,U,$){return be.current.useReducer(P,U,$)},Ee.useRef=function(P){return be.current.useRef(P)},Ee.useState=function(P){return be.current.useState(P)},Ee.useSyncExternalStore=function(P,U,$){return be.current.useSyncExternalStore(P,U,$)},Ee.useTransition=function(){return be.current.useTransition()},Ee.version="18.3.1",Ee}var G0;function Uf(){return G0||(G0=1,Sd.exports=$4()),Sd.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var q0;function B4(){if(q0)return ca;q0=1;var e=Uf(),t=Symbol.for("react.element"),r=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,o=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function u(h,d,p){var y,v={},_=null,E=null;p!==void 0&&(_=""+p),d.key!==void 0&&(_=""+d.key),d.ref!==void 0&&(E=d.ref);for(y in d)i.call(d,y)&&!a.hasOwnProperty(y)&&(v[y]=d[y]);if(h&&h.defaultProps)for(y in d=h.defaultProps,d)v[y]===void 0&&(v[y]=d[y]);return{$$typeof:t,type:h,key:_,ref:E,props:v,_owner:o.current}}return ca.Fragment=r,ca.jsx=u,ca.jsxs=u,ca}var J0;function z4(){return J0||(J0=1,Ed.exports=B4()),Ed.exports}var g=z4(),x=Uf(),ru={},kd={exports:{}},or={},bd={exports:{}},xd={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var X0;function V4(){return X0||(X0=1,(function(e){function t(G,ce){var J=G.length;G.push(ce);e:for(;0<J;){var P=J-1>>>1,U=G[P];if(0<o(U,ce))G[P]=ce,G[J]=U,J=P;else break e}}function r(G){return G.length===0?null:G[0]}function i(G){if(G.length===0)return null;var ce=G[0],J=G.pop();if(J!==ce){G[0]=J;e:for(var P=0,U=G.length,$=U>>>1;P<$;){var Y=2*(P+1)-1,q=G[Y],me=Y+1,we=G[me];if(0>o(q,J))me<U&&0>o(we,q)?(G[P]=we,G[me]=J,P=me):(G[P]=q,G[Y]=J,P=Y);else if(me<U&&0>o(we,J))G[P]=we,G[me]=J,P=me;else break e}}return ce}function o(G,ce){var J=G.sortIndex-ce.sortIndex;return J!==0?J:G.id-ce.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var u=Date,h=u.now();e.unstable_now=function(){return u.now()-h}}var d=[],p=[],y=1,v=null,_=3,E=!1,S=!1,k=!1,T=typeof setTimeout=="function"?setTimeout:null,A=typeof clearTimeout=="function"?clearTimeout:null,I=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function R(G){for(var ce=r(p);ce!==null;){if(ce.callback===null)i(p);else if(ce.startTime<=G)i(p),ce.sortIndex=ce.expirationTime,t(d,ce);else break;ce=r(p)}}function D(G){if(k=!1,R(G),!S)if(r(d)!==null)S=!0,ht(V);else{var ce=r(p);ce!==null&&be(D,ce.startTime-G)}}function V(G,ce){S=!1,k&&(k=!1,A(M),M=-1),E=!0;var J=_;try{for(R(ce),v=r(d);v!==null&&(!(v.expirationTime>ce)||G&&!Ae());){var P=v.callback;if(typeof P=="function"){v.callback=null,_=v.priorityLevel;var U=P(v.expirationTime<=ce);ce=e.unstable_now(),typeof U=="function"?v.callback=U:v===r(d)&&i(d),R(ce)}else i(d);v=r(d)}if(v!==null)var $=!0;else{var Y=r(p);Y!==null&&be(D,Y.startTime-ce),$=!1}return $}finally{v=null,_=J,E=!1}}var F=!1,B=null,M=-1,te=5,ve=-1;function Ae(){return!(e.unstable_now()-ve<te)}function je(){if(B!==null){var G=e.unstable_now();ve=G;var ce=!0;try{ce=B(!0,G)}finally{ce?kt():(F=!1,B=null)}}else F=!1}var kt;if(typeof I=="function")kt=function(){I(je)};else if(typeof MessageChannel<"u"){var bt=new MessageChannel,Ke=bt.port2;bt.port1.onmessage=je,kt=function(){Ke.postMessage(null)}}else kt=function(){T(je,0)};function ht(G){B=G,F||(F=!0,kt())}function be(G,ce){M=T(function(){G(e.unstable_now())},ce)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(G){G.callback=null},e.unstable_continueExecution=function(){S||E||(S=!0,ht(V))},e.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):te=0<G?Math.floor(1e3/G):5},e.unstable_getCurrentPriorityLevel=function(){return _},e.unstable_getFirstCallbackNode=function(){return r(d)},e.unstable_next=function(G){switch(_){case 1:case 2:case 3:var ce=3;break;default:ce=_}var J=_;_=ce;try{return G()}finally{_=J}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(G,ce){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var J=_;_=G;try{return ce()}finally{_=J}},e.unstable_scheduleCallback=function(G,ce,J){var P=e.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?P+J:P):J=P,G){case 1:var U=-1;break;case 2:U=250;break;case 5:U=1073741823;break;case 4:U=1e4;break;default:U=5e3}return U=J+U,G={id:y++,callback:ce,priorityLevel:G,startTime:J,expirationTime:U,sortIndex:-1},J>P?(G.sortIndex=J,t(p,G),r(d)===null&&G===r(p)&&(k?(A(M),M=-1):k=!0,be(D,J-P))):(G.sortIndex=U,t(d,G),S||E||(S=!0,ht(V))),G},e.unstable_shouldYield=Ae,e.unstable_wrapCallback=function(G){var ce=_;return function(){var J=_;_=ce;try{return G.apply(this,arguments)}finally{_=J}}}})(xd)),xd}var Y0;function W4(){return Y0||(Y0=1,bd.exports=V4()),bd.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Q0;function K4(){if(Q0)return or;Q0=1;var e=Uf(),t=W4();function r(n){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+n,l=1;l<arguments.length;l++)s+="&args[]="+encodeURIComponent(arguments[l]);return"Minified React error #"+n+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,o={};function a(n,s){u(n,s),u(n+"Capture",s)}function u(n,s){for(o[n]=s,n=0;n<s.length;n++)i.add(s[n])}var h=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),d=Object.prototype.hasOwnProperty,p=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,y={},v={};function _(n){return d.call(v,n)?!0:d.call(y,n)?!1:p.test(n)?v[n]=!0:(y[n]=!0,!1)}function E(n,s,l,c){if(l!==null&&l.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return c?!1:l!==null?!l.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function S(n,s,l,c){if(s===null||typeof s>"u"||E(n,s,l,c))return!0;if(c)return!1;if(l!==null)switch(l.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function k(n,s,l,c,f,m,w){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=c,this.attributeNamespace=f,this.mustUseProperty=l,this.propertyName=n,this.type=s,this.sanitizeURL=m,this.removeEmptyString=w}var T={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){T[n]=new k(n,0,!1,n,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var s=n[0];T[s]=new k(s,1,!1,n[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(n){T[n]=new k(n,2,!1,n.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){T[n]=new k(n,2,!1,n,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){T[n]=new k(n,3,!1,n.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(n){T[n]=new k(n,3,!0,n,null,!1,!1)}),["capture","download"].forEach(function(n){T[n]=new k(n,4,!1,n,null,!1,!1)}),["cols","rows","size","span"].forEach(function(n){T[n]=new k(n,6,!1,n,null,!1,!1)}),["rowSpan","start"].forEach(function(n){T[n]=new k(n,5,!1,n.toLowerCase(),null,!1,!1)});var A=/[\-:]([a-z])/g;function I(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var s=n.replace(A,I);T[s]=new k(s,1,!1,n,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var s=n.replace(A,I);T[s]=new k(s,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(n){var s=n.replace(A,I);T[s]=new k(s,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(n){T[n]=new k(n,1,!1,n.toLowerCase(),null,!1,!1)}),T.xlinkHref=new k("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(n){T[n]=new k(n,1,!1,n.toLowerCase(),null,!0,!0)});function R(n,s,l,c){var f=T.hasOwnProperty(s)?T[s]:null;(f!==null?f.type!==0:c||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(S(s,l,f,c)&&(l=null),c||f===null?_(s)&&(l===null?n.removeAttribute(s):n.setAttribute(s,""+l)):f.mustUseProperty?n[f.propertyName]=l===null?f.type===3?!1:"":l:(s=f.attributeName,c=f.attributeNamespace,l===null?n.removeAttribute(s):(f=f.type,l=f===3||f===4&&l===!0?"":""+l,c?n.setAttributeNS(c,s,l):n.setAttribute(s,l))))}var D=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,V=Symbol.for("react.element"),F=Symbol.for("react.portal"),B=Symbol.for("react.fragment"),M=Symbol.for("react.strict_mode"),te=Symbol.for("react.profiler"),ve=Symbol.for("react.provider"),Ae=Symbol.for("react.context"),je=Symbol.for("react.forward_ref"),kt=Symbol.for("react.suspense"),bt=Symbol.for("react.suspense_list"),Ke=Symbol.for("react.memo"),ht=Symbol.for("react.lazy"),be=Symbol.for("react.offscreen"),G=Symbol.iterator;function ce(n){return n===null||typeof n!="object"?null:(n=G&&n[G]||n["@@iterator"],typeof n=="function"?n:null)}var J=Object.assign,P;function U(n){if(P===void 0)try{throw Error()}catch(l){var s=l.stack.trim().match(/\n( *(at )?)/);P=s&&s[1]||""}return`
`+P+n}var $=!1;function Y(n,s){if(!n||$)return"";$=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch(L){var c=L}Reflect.construct(n,[],s)}else{try{s.call()}catch(L){c=L}n.call(s.prototype)}else{try{throw Error()}catch(L){c=L}n()}}catch(L){if(L&&c&&typeof L.stack=="string"){for(var f=L.stack.split(`
`),m=c.stack.split(`
`),w=f.length-1,b=m.length-1;1<=w&&0<=b&&f[w]!==m[b];)b--;for(;1<=w&&0<=b;w--,b--)if(f[w]!==m[b]){if(w!==1||b!==1)do if(w--,b--,0>b||f[w]!==m[b]){var C=`
`+f[w].replace(" at new "," at ");return n.displayName&&C.includes("<anonymous>")&&(C=C.replace("<anonymous>",n.displayName)),C}while(1<=w&&0<=b);break}}}finally{$=!1,Error.prepareStackTrace=l}return(n=n?n.displayName||n.name:"")?U(n):""}function q(n){switch(n.tag){case 5:return U(n.type);case 16:return U("Lazy");case 13:return U("Suspense");case 19:return U("SuspenseList");case 0:case 2:case 15:return n=Y(n.type,!1),n;case 11:return n=Y(n.type.render,!1),n;case 1:return n=Y(n.type,!0),n;default:return""}}function me(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case B:return"Fragment";case F:return"Portal";case te:return"Profiler";case M:return"StrictMode";case kt:return"Suspense";case bt:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case Ae:return(n.displayName||"Context")+".Consumer";case ve:return(n._context.displayName||"Context")+".Provider";case je:var s=n.render;return n=n.displayName,n||(n=s.displayName||s.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case Ke:return s=n.displayName||null,s!==null?s:me(n.type)||"Memo";case ht:s=n._payload,n=n._init;try{return me(n(s))}catch{}}return null}function we(n){var s=n.type;switch(n.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=s.render,n=n.displayName||n.name||"",s.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return me(s);case 8:return s===M?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function he(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Pe(n){var s=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function ot(n){var s=Pe(n)?"checked":"value",l=Object.getOwnPropertyDescriptor(n.constructor.prototype,s),c=""+n[s];if(!n.hasOwnProperty(s)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var f=l.get,m=l.set;return Object.defineProperty(n,s,{configurable:!0,get:function(){return f.call(this)},set:function(w){c=""+w,m.call(this,w)}}),Object.defineProperty(n,s,{enumerable:l.enumerable}),{getValue:function(){return c},setValue:function(w){c=""+w},stopTracking:function(){n._valueTracker=null,delete n[s]}}}}function xn(n){n._valueTracker||(n._valueTracker=ot(n))}function tt(n){if(!n)return!1;var s=n._valueTracker;if(!s)return!0;var l=s.getValue(),c="";return n&&(c=Pe(n)?n.checked?"true":"false":n.value),n=c,n!==l?(s.setValue(n),!0):!1}function Tn(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function Rn(n,s){var l=s.checked;return J({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:l??n._wrapperState.initialChecked})}function Rr(n,s){var l=s.defaultValue==null?"":s.defaultValue,c=s.checked!=null?s.checked:s.defaultChecked;l=he(s.value!=null?s.value:l),n._wrapperState={initialChecked:c,initialValue:l,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function Ne(n,s){s=s.checked,s!=null&&R(n,"checked",s,!1)}function dt(n,s){Ne(n,s);var l=he(s.value),c=s.type;if(l!=null)c==="number"?(l===0&&n.value===""||n.value!=l)&&(n.value=""+l):n.value!==""+l&&(n.value=""+l);else if(c==="submit"||c==="reset"){n.removeAttribute("value");return}s.hasOwnProperty("value")?Dt(n,s.type,l):s.hasOwnProperty("defaultValue")&&Dt(n,s.type,he(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(n.defaultChecked=!!s.defaultChecked)}function Hr(n,s,l){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var c=s.type;if(!(c!=="submit"&&c!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+n._wrapperState.initialValue,l||s===n.value||(n.value=s),n.defaultValue=s}l=n.name,l!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,l!==""&&(n.name=l)}function Dt(n,s,l){(s!=="number"||Tn(n.ownerDocument)!==n)&&(l==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+l&&(n.defaultValue=""+l))}var jt=Array.isArray;function Zt(n,s,l,c){if(n=n.options,s){s={};for(var f=0;f<l.length;f++)s["$"+l[f]]=!0;for(l=0;l<n.length;l++)f=s.hasOwnProperty("$"+n[l].value),n[l].selected!==f&&(n[l].selected=f),f&&c&&(n[l].defaultSelected=!0)}else{for(l=""+he(l),s=null,f=0;f<n.length;f++){if(n[f].value===l){n[f].selected=!0,c&&(n[f].defaultSelected=!0);return}s!==null||n[f].disabled||(s=n[f])}s!==null&&(s.selected=!0)}}function Wt(n,s){if(s.dangerouslySetInnerHTML!=null)throw Error(r(91));return J({},s,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function er(n,s){var l=s.value;if(l==null){if(l=s.children,s=s.defaultValue,l!=null){if(s!=null)throw Error(r(92));if(jt(l)){if(1<l.length)throw Error(r(93));l=l[0]}s=l}s==null&&(s=""),l=s}n._wrapperState={initialValue:he(l)}}function bo(n,s){var l=he(s.value),c=he(s.defaultValue);l!=null&&(l=""+l,l!==n.value&&(n.value=l),s.defaultValue==null&&n.defaultValue!==l&&(n.defaultValue=l)),c!=null&&(n.defaultValue=""+c)}function ui(n){var s=n.textContent;s===n._wrapperState.initialValue&&s!==""&&s!==null&&(n.value=s)}function Ga(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Oc(n,s){return n==null||n==="http://www.w3.org/1999/xhtml"?Ga(s):n==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var qa,sm=(function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,l,c,f){MSApp.execUnsafeLocalFunction(function(){return n(s,l,c,f)})}:n})(function(n,s){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=s;else{for(qa=qa||document.createElement("div"),qa.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=qa.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;s.firstChild;)n.appendChild(s.firstChild)}});function xo(n,s){if(s){var l=n.firstChild;if(l&&l===n.lastChild&&l.nodeType===3){l.nodeValue=s;return}}n.textContent=s}var To={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},$3=["Webkit","ms","Moz","O"];Object.keys(To).forEach(function(n){$3.forEach(function(s){s=s+n.charAt(0).toUpperCase()+n.substring(1),To[s]=To[n]})});function im(n,s,l){return s==null||typeof s=="boolean"||s===""?"":l||typeof s!="number"||s===0||To.hasOwnProperty(n)&&To[n]?(""+s).trim():s+"px"}function om(n,s){n=n.style;for(var l in s)if(s.hasOwnProperty(l)){var c=l.indexOf("--")===0,f=im(l,s[l],c);l==="float"&&(l="cssFloat"),c?n.setProperty(l,f):n[l]=f}}var B3=J({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Nc(n,s){if(s){if(B3[n]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(r(137,n));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(r(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(r(61))}if(s.style!=null&&typeof s.style!="object")throw Error(r(62))}}function Ic(n,s){if(n.indexOf("-")===-1)return typeof s.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Lc=null;function Dc(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Uc=null,ci=null,hi=null;function am(n){if(n=qo(n)){if(typeof Uc!="function")throw Error(r(280));var s=n.stateNode;s&&(s=yl(s),Uc(n.stateNode,n.type,s))}}function lm(n){ci?hi?hi.push(n):hi=[n]:ci=n}function um(){if(ci){var n=ci,s=hi;if(hi=ci=null,am(n),s)for(n=0;n<s.length;n++)am(s[n])}}function cm(n,s){return n(s)}function hm(){}var Fc=!1;function dm(n,s,l){if(Fc)return n(s,l);Fc=!0;try{return cm(n,s,l)}finally{Fc=!1,(ci!==null||hi!==null)&&(hm(),um())}}function Ro(n,s){var l=n.stateNode;if(l===null)return null;var c=yl(l);if(c===null)return null;l=c[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(n=n.type,c=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!c;break e;default:n=!1}if(n)return null;if(l&&typeof l!="function")throw Error(r(231,s,typeof l));return l}var Mc=!1;if(h)try{var Co={};Object.defineProperty(Co,"passive",{get:function(){Mc=!0}}),window.addEventListener("test",Co,Co),window.removeEventListener("test",Co,Co)}catch{Mc=!1}function z3(n,s,l,c,f,m,w,b,C){var L=Array.prototype.slice.call(arguments,3);try{s.apply(l,L)}catch(W){this.onError(W)}}var Ao=!1,Ja=null,Xa=!1,$c=null,V3={onError:function(n){Ao=!0,Ja=n}};function W3(n,s,l,c,f,m,w,b,C){Ao=!1,Ja=null,z3.apply(V3,arguments)}function K3(n,s,l,c,f,m,w,b,C){if(W3.apply(this,arguments),Ao){if(Ao){var L=Ja;Ao=!1,Ja=null}else throw Error(r(198));Xa||(Xa=!0,$c=L)}}function Os(n){var s=n,l=n;if(n.alternate)for(;s.return;)s=s.return;else{n=s;do s=n,(s.flags&4098)!==0&&(l=s.return),n=s.return;while(n)}return s.tag===3?l:null}function fm(n){if(n.tag===13){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function pm(n){if(Os(n)!==n)throw Error(r(188))}function H3(n){var s=n.alternate;if(!s){if(s=Os(n),s===null)throw Error(r(188));return s!==n?null:n}for(var l=n,c=s;;){var f=l.return;if(f===null)break;var m=f.alternate;if(m===null){if(c=f.return,c!==null){l=c;continue}break}if(f.child===m.child){for(m=f.child;m;){if(m===l)return pm(f),n;if(m===c)return pm(f),s;m=m.sibling}throw Error(r(188))}if(l.return!==c.return)l=f,c=m;else{for(var w=!1,b=f.child;b;){if(b===l){w=!0,l=f,c=m;break}if(b===c){w=!0,c=f,l=m;break}b=b.sibling}if(!w){for(b=m.child;b;){if(b===l){w=!0,l=m,c=f;break}if(b===c){w=!0,c=m,l=f;break}b=b.sibling}if(!w)throw Error(r(189))}}if(l.alternate!==c)throw Error(r(190))}if(l.tag!==3)throw Error(r(188));return l.stateNode.current===l?n:s}function mm(n){return n=H3(n),n!==null?gm(n):null}function gm(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var s=gm(n);if(s!==null)return s;n=n.sibling}return null}var ym=t.unstable_scheduleCallback,vm=t.unstable_cancelCallback,G3=t.unstable_shouldYield,q3=t.unstable_requestPaint,at=t.unstable_now,J3=t.unstable_getCurrentPriorityLevel,Bc=t.unstable_ImmediatePriority,wm=t.unstable_UserBlockingPriority,Ya=t.unstable_NormalPriority,X3=t.unstable_LowPriority,_m=t.unstable_IdlePriority,Qa=null,ln=null;function Y3(n){if(ln&&typeof ln.onCommitFiberRoot=="function")try{ln.onCommitFiberRoot(Qa,n,void 0,(n.current.flags&128)===128)}catch{}}var Gr=Math.clz32?Math.clz32:e_,Q3=Math.log,Z3=Math.LN2;function e_(n){return n>>>=0,n===0?32:31-(Q3(n)/Z3|0)|0}var Za=64,el=4194304;function jo(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function tl(n,s){var l=n.pendingLanes;if(l===0)return 0;var c=0,f=n.suspendedLanes,m=n.pingedLanes,w=l&268435455;if(w!==0){var b=w&~f;b!==0?c=jo(b):(m&=w,m!==0&&(c=jo(m)))}else w=l&~f,w!==0?c=jo(w):m!==0&&(c=jo(m));if(c===0)return 0;if(s!==0&&s!==c&&(s&f)===0&&(f=c&-c,m=s&-s,f>=m||f===16&&(m&4194240)!==0))return s;if((c&4)!==0&&(c|=l&16),s=n.entangledLanes,s!==0)for(n=n.entanglements,s&=c;0<s;)l=31-Gr(s),f=1<<l,c|=n[l],s&=~f;return c}function t_(n,s){switch(n){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function r_(n,s){for(var l=n.suspendedLanes,c=n.pingedLanes,f=n.expirationTimes,m=n.pendingLanes;0<m;){var w=31-Gr(m),b=1<<w,C=f[w];C===-1?((b&l)===0||(b&c)!==0)&&(f[w]=t_(b,s)):C<=s&&(n.expiredLanes|=b),m&=~b}}function zc(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function Em(){var n=Za;return Za<<=1,(Za&4194240)===0&&(Za=64),n}function Vc(n){for(var s=[],l=0;31>l;l++)s.push(n);return s}function Po(n,s,l){n.pendingLanes|=s,s!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,s=31-Gr(s),n[s]=l}function n_(n,s){var l=n.pendingLanes&~s;n.pendingLanes=s,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=s,n.mutableReadLanes&=s,n.entangledLanes&=s,s=n.entanglements;var c=n.eventTimes;for(n=n.expirationTimes;0<l;){var f=31-Gr(l),m=1<<f;s[f]=0,c[f]=-1,n[f]=-1,l&=~m}}function Wc(n,s){var l=n.entangledLanes|=s;for(n=n.entanglements;l;){var c=31-Gr(l),f=1<<c;f&s|n[c]&s&&(n[c]|=s),l&=~f}}var Ie=0;function Sm(n){return n&=-n,1<n?4<n?(n&268435455)!==0?16:536870912:4:1}var km,Kc,bm,xm,Tm,Hc=!1,rl=[],Yn=null,Qn=null,Zn=null,Oo=new Map,No=new Map,es=[],s_="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Rm(n,s){switch(n){case"focusin":case"focusout":Yn=null;break;case"dragenter":case"dragleave":Qn=null;break;case"mouseover":case"mouseout":Zn=null;break;case"pointerover":case"pointerout":Oo.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":No.delete(s.pointerId)}}function Io(n,s,l,c,f,m){return n===null||n.nativeEvent!==m?(n={blockedOn:s,domEventName:l,eventSystemFlags:c,nativeEvent:m,targetContainers:[f]},s!==null&&(s=qo(s),s!==null&&Kc(s)),n):(n.eventSystemFlags|=c,s=n.targetContainers,f!==null&&s.indexOf(f)===-1&&s.push(f),n)}function i_(n,s,l,c,f){switch(s){case"focusin":return Yn=Io(Yn,n,s,l,c,f),!0;case"dragenter":return Qn=Io(Qn,n,s,l,c,f),!0;case"mouseover":return Zn=Io(Zn,n,s,l,c,f),!0;case"pointerover":var m=f.pointerId;return Oo.set(m,Io(Oo.get(m)||null,n,s,l,c,f)),!0;case"gotpointercapture":return m=f.pointerId,No.set(m,Io(No.get(m)||null,n,s,l,c,f)),!0}return!1}function Cm(n){var s=Ns(n.target);if(s!==null){var l=Os(s);if(l!==null){if(s=l.tag,s===13){if(s=fm(l),s!==null){n.blockedOn=s,Tm(n.priority,function(){bm(l)});return}}else if(s===3&&l.stateNode.current.memoizedState.isDehydrated){n.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}n.blockedOn=null}function nl(n){if(n.blockedOn!==null)return!1;for(var s=n.targetContainers;0<s.length;){var l=qc(n.domEventName,n.eventSystemFlags,s[0],n.nativeEvent);if(l===null){l=n.nativeEvent;var c=new l.constructor(l.type,l);Lc=c,l.target.dispatchEvent(c),Lc=null}else return s=qo(l),s!==null&&Kc(s),n.blockedOn=l,!1;s.shift()}return!0}function Am(n,s,l){nl(n)&&l.delete(s)}function o_(){Hc=!1,Yn!==null&&nl(Yn)&&(Yn=null),Qn!==null&&nl(Qn)&&(Qn=null),Zn!==null&&nl(Zn)&&(Zn=null),Oo.forEach(Am),No.forEach(Am)}function Lo(n,s){n.blockedOn===s&&(n.blockedOn=null,Hc||(Hc=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,o_)))}function Do(n){function s(f){return Lo(f,n)}if(0<rl.length){Lo(rl[0],n);for(var l=1;l<rl.length;l++){var c=rl[l];c.blockedOn===n&&(c.blockedOn=null)}}for(Yn!==null&&Lo(Yn,n),Qn!==null&&Lo(Qn,n),Zn!==null&&Lo(Zn,n),Oo.forEach(s),No.forEach(s),l=0;l<es.length;l++)c=es[l],c.blockedOn===n&&(c.blockedOn=null);for(;0<es.length&&(l=es[0],l.blockedOn===null);)Cm(l),l.blockedOn===null&&es.shift()}var di=D.ReactCurrentBatchConfig,sl=!0;function a_(n,s,l,c){var f=Ie,m=di.transition;di.transition=null;try{Ie=1,Gc(n,s,l,c)}finally{Ie=f,di.transition=m}}function l_(n,s,l,c){var f=Ie,m=di.transition;di.transition=null;try{Ie=4,Gc(n,s,l,c)}finally{Ie=f,di.transition=m}}function Gc(n,s,l,c){if(sl){var f=qc(n,s,l,c);if(f===null)hh(n,s,c,il,l),Rm(n,c);else if(i_(f,n,s,l,c))c.stopPropagation();else if(Rm(n,c),s&4&&-1<s_.indexOf(n)){for(;f!==null;){var m=qo(f);if(m!==null&&km(m),m=qc(n,s,l,c),m===null&&hh(n,s,c,il,l),m===f)break;f=m}f!==null&&c.stopPropagation()}else hh(n,s,c,null,l)}}var il=null;function qc(n,s,l,c){if(il=null,n=Dc(c),n=Ns(n),n!==null)if(s=Os(n),s===null)n=null;else if(l=s.tag,l===13){if(n=fm(s),n!==null)return n;n=null}else if(l===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;n=null}else s!==n&&(n=null);return il=n,null}function jm(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(J3()){case Bc:return 1;case wm:return 4;case Ya:case X3:return 16;case _m:return 536870912;default:return 16}default:return 16}}var ts=null,Jc=null,ol=null;function Pm(){if(ol)return ol;var n,s=Jc,l=s.length,c,f="value"in ts?ts.value:ts.textContent,m=f.length;for(n=0;n<l&&s[n]===f[n];n++);var w=l-n;for(c=1;c<=w&&s[l-c]===f[m-c];c++);return ol=f.slice(n,1<c?1-c:void 0)}function al(n){var s=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&s===13&&(n=13)):n=s,n===10&&(n=13),32<=n||n===13?n:0}function ll(){return!0}function Om(){return!1}function fr(n){function s(l,c,f,m,w){this._reactName=l,this._targetInst=f,this.type=c,this.nativeEvent=m,this.target=w,this.currentTarget=null;for(var b in n)n.hasOwnProperty(b)&&(l=n[b],this[b]=l?l(m):m[b]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?ll:Om,this.isPropagationStopped=Om,this}return J(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=ll)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=ll)},persist:function(){},isPersistent:ll}),s}var fi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Xc=fr(fi),Uo=J({},fi,{view:0,detail:0}),u_=fr(Uo),Yc,Qc,Fo,ul=J({},Uo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:eh,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Fo&&(Fo&&n.type==="mousemove"?(Yc=n.screenX-Fo.screenX,Qc=n.screenY-Fo.screenY):Qc=Yc=0,Fo=n),Yc)},movementY:function(n){return"movementY"in n?n.movementY:Qc}}),Nm=fr(ul),c_=J({},ul,{dataTransfer:0}),h_=fr(c_),d_=J({},Uo,{relatedTarget:0}),Zc=fr(d_),f_=J({},fi,{animationName:0,elapsedTime:0,pseudoElement:0}),p_=fr(f_),m_=J({},fi,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),g_=fr(m_),y_=J({},fi,{data:0}),Im=fr(y_),v_={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},w_={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},__={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function E_(n){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(n):(n=__[n])?!!s[n]:!1}function eh(){return E_}var S_=J({},Uo,{key:function(n){if(n.key){var s=v_[n.key]||n.key;if(s!=="Unidentified")return s}return n.type==="keypress"?(n=al(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?w_[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:eh,charCode:function(n){return n.type==="keypress"?al(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?al(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),k_=fr(S_),b_=J({},ul,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Lm=fr(b_),x_=J({},Uo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:eh}),T_=fr(x_),R_=J({},fi,{propertyName:0,elapsedTime:0,pseudoElement:0}),C_=fr(R_),A_=J({},ul,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),j_=fr(A_),P_=[9,13,27,32],th=h&&"CompositionEvent"in window,Mo=null;h&&"documentMode"in document&&(Mo=document.documentMode);var O_=h&&"TextEvent"in window&&!Mo,Dm=h&&(!th||Mo&&8<Mo&&11>=Mo),Um=" ",Fm=!1;function Mm(n,s){switch(n){case"keyup":return P_.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function $m(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var pi=!1;function N_(n,s){switch(n){case"compositionend":return $m(s);case"keypress":return s.which!==32?null:(Fm=!0,Um);case"textInput":return n=s.data,n===Um&&Fm?null:n;default:return null}}function I_(n,s){if(pi)return n==="compositionend"||!th&&Mm(n,s)?(n=Pm(),ol=Jc=ts=null,pi=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return Dm&&s.locale!=="ko"?null:s.data;default:return null}}var L_={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Bm(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s==="input"?!!L_[n.type]:s==="textarea"}function zm(n,s,l,c){lm(c),s=pl(s,"onChange"),0<s.length&&(l=new Xc("onChange","change",null,l,c),n.push({event:l,listeners:s}))}var $o=null,Bo=null;function D_(n){og(n,0)}function cl(n){var s=wi(n);if(tt(s))return n}function U_(n,s){if(n==="change")return s}var Vm=!1;if(h){var rh;if(h){var nh="oninput"in document;if(!nh){var Wm=document.createElement("div");Wm.setAttribute("oninput","return;"),nh=typeof Wm.oninput=="function"}rh=nh}else rh=!1;Vm=rh&&(!document.documentMode||9<document.documentMode)}function Km(){$o&&($o.detachEvent("onpropertychange",Hm),Bo=$o=null)}function Hm(n){if(n.propertyName==="value"&&cl(Bo)){var s=[];zm(s,Bo,n,Dc(n)),dm(D_,s)}}function F_(n,s,l){n==="focusin"?(Km(),$o=s,Bo=l,$o.attachEvent("onpropertychange",Hm)):n==="focusout"&&Km()}function M_(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return cl(Bo)}function $_(n,s){if(n==="click")return cl(s)}function B_(n,s){if(n==="input"||n==="change")return cl(s)}function z_(n,s){return n===s&&(n!==0||1/n===1/s)||n!==n&&s!==s}var qr=typeof Object.is=="function"?Object.is:z_;function zo(n,s){if(qr(n,s))return!0;if(typeof n!="object"||n===null||typeof s!="object"||s===null)return!1;var l=Object.keys(n),c=Object.keys(s);if(l.length!==c.length)return!1;for(c=0;c<l.length;c++){var f=l[c];if(!d.call(s,f)||!qr(n[f],s[f]))return!1}return!0}function Gm(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function qm(n,s){var l=Gm(n);n=0;for(var c;l;){if(l.nodeType===3){if(c=n+l.textContent.length,n<=s&&c>=s)return{node:l,offset:s-n};n=c}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=Gm(l)}}function Jm(n,s){return n&&s?n===s?!0:n&&n.nodeType===3?!1:s&&s.nodeType===3?Jm(n,s.parentNode):"contains"in n?n.contains(s):n.compareDocumentPosition?!!(n.compareDocumentPosition(s)&16):!1:!1}function Xm(){for(var n=window,s=Tn();s instanceof n.HTMLIFrameElement;){try{var l=typeof s.contentWindow.location.href=="string"}catch{l=!1}if(l)n=s.contentWindow;else break;s=Tn(n.document)}return s}function sh(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s&&(s==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||s==="textarea"||n.contentEditable==="true")}function V_(n){var s=Xm(),l=n.focusedElem,c=n.selectionRange;if(s!==l&&l&&l.ownerDocument&&Jm(l.ownerDocument.documentElement,l)){if(c!==null&&sh(l)){if(s=c.start,n=c.end,n===void 0&&(n=s),"selectionStart"in l)l.selectionStart=s,l.selectionEnd=Math.min(n,l.value.length);else if(n=(s=l.ownerDocument||document)&&s.defaultView||window,n.getSelection){n=n.getSelection();var f=l.textContent.length,m=Math.min(c.start,f);c=c.end===void 0?m:Math.min(c.end,f),!n.extend&&m>c&&(f=c,c=m,m=f),f=qm(l,m);var w=qm(l,c);f&&w&&(n.rangeCount!==1||n.anchorNode!==f.node||n.anchorOffset!==f.offset||n.focusNode!==w.node||n.focusOffset!==w.offset)&&(s=s.createRange(),s.setStart(f.node,f.offset),n.removeAllRanges(),m>c?(n.addRange(s),n.extend(w.node,w.offset)):(s.setEnd(w.node,w.offset),n.addRange(s)))}}for(s=[],n=l;n=n.parentNode;)n.nodeType===1&&s.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<s.length;l++)n=s[l],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var W_=h&&"documentMode"in document&&11>=document.documentMode,mi=null,ih=null,Vo=null,oh=!1;function Ym(n,s,l){var c=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;oh||mi==null||mi!==Tn(c)||(c=mi,"selectionStart"in c&&sh(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),Vo&&zo(Vo,c)||(Vo=c,c=pl(ih,"onSelect"),0<c.length&&(s=new Xc("onSelect","select",null,s,l),n.push({event:s,listeners:c}),s.target=mi)))}function hl(n,s){var l={};return l[n.toLowerCase()]=s.toLowerCase(),l["Webkit"+n]="webkit"+s,l["Moz"+n]="moz"+s,l}var gi={animationend:hl("Animation","AnimationEnd"),animationiteration:hl("Animation","AnimationIteration"),animationstart:hl("Animation","AnimationStart"),transitionend:hl("Transition","TransitionEnd")},ah={},Qm={};h&&(Qm=document.createElement("div").style,"AnimationEvent"in window||(delete gi.animationend.animation,delete gi.animationiteration.animation,delete gi.animationstart.animation),"TransitionEvent"in window||delete gi.transitionend.transition);function dl(n){if(ah[n])return ah[n];if(!gi[n])return n;var s=gi[n],l;for(l in s)if(s.hasOwnProperty(l)&&l in Qm)return ah[n]=s[l];return n}var Zm=dl("animationend"),eg=dl("animationiteration"),tg=dl("animationstart"),rg=dl("transitionend"),ng=new Map,sg="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function rs(n,s){ng.set(n,s),a(s,[n])}for(var lh=0;lh<sg.length;lh++){var uh=sg[lh],K_=uh.toLowerCase(),H_=uh[0].toUpperCase()+uh.slice(1);rs(K_,"on"+H_)}rs(Zm,"onAnimationEnd"),rs(eg,"onAnimationIteration"),rs(tg,"onAnimationStart"),rs("dblclick","onDoubleClick"),rs("focusin","onFocus"),rs("focusout","onBlur"),rs(rg,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Wo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),G_=new Set("cancel close invalid load scroll toggle".split(" ").concat(Wo));function ig(n,s,l){var c=n.type||"unknown-event";n.currentTarget=l,K3(c,s,void 0,n),n.currentTarget=null}function og(n,s){s=(s&4)!==0;for(var l=0;l<n.length;l++){var c=n[l],f=c.event;c=c.listeners;e:{var m=void 0;if(s)for(var w=c.length-1;0<=w;w--){var b=c[w],C=b.instance,L=b.currentTarget;if(b=b.listener,C!==m&&f.isPropagationStopped())break e;ig(f,b,L),m=C}else for(w=0;w<c.length;w++){if(b=c[w],C=b.instance,L=b.currentTarget,b=b.listener,C!==m&&f.isPropagationStopped())break e;ig(f,b,L),m=C}}}if(Xa)throw n=$c,Xa=!1,$c=null,n}function ze(n,s){var l=s[yh];l===void 0&&(l=s[yh]=new Set);var c=n+"__bubble";l.has(c)||(ag(s,n,2,!1),l.add(c))}function ch(n,s,l){var c=0;s&&(c|=4),ag(l,n,c,s)}var fl="_reactListening"+Math.random().toString(36).slice(2);function Ko(n){if(!n[fl]){n[fl]=!0,i.forEach(function(l){l!=="selectionchange"&&(G_.has(l)||ch(l,!1,n),ch(l,!0,n))});var s=n.nodeType===9?n:n.ownerDocument;s===null||s[fl]||(s[fl]=!0,ch("selectionchange",!1,s))}}function ag(n,s,l,c){switch(jm(s)){case 1:var f=a_;break;case 4:f=l_;break;default:f=Gc}l=f.bind(null,s,l,n),f=void 0,!Mc||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(f=!0),c?f!==void 0?n.addEventListener(s,l,{capture:!0,passive:f}):n.addEventListener(s,l,!0):f!==void 0?n.addEventListener(s,l,{passive:f}):n.addEventListener(s,l,!1)}function hh(n,s,l,c,f){var m=c;if((s&1)===0&&(s&2)===0&&c!==null)e:for(;;){if(c===null)return;var w=c.tag;if(w===3||w===4){var b=c.stateNode.containerInfo;if(b===f||b.nodeType===8&&b.parentNode===f)break;if(w===4)for(w=c.return;w!==null;){var C=w.tag;if((C===3||C===4)&&(C=w.stateNode.containerInfo,C===f||C.nodeType===8&&C.parentNode===f))return;w=w.return}for(;b!==null;){if(w=Ns(b),w===null)return;if(C=w.tag,C===5||C===6){c=m=w;continue e}b=b.parentNode}}c=c.return}dm(function(){var L=m,W=Dc(l),K=[];e:{var z=ng.get(n);if(z!==void 0){var X=Xc,re=n;switch(n){case"keypress":if(al(l)===0)break e;case"keydown":case"keyup":X=k_;break;case"focusin":re="focus",X=Zc;break;case"focusout":re="blur",X=Zc;break;case"beforeblur":case"afterblur":X=Zc;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":X=Nm;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":X=h_;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":X=T_;break;case Zm:case eg:case tg:X=p_;break;case rg:X=C_;break;case"scroll":X=u_;break;case"wheel":X=j_;break;case"copy":case"cut":case"paste":X=g_;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":X=Lm}var ne=(s&4)!==0,lt=!ne&&n==="scroll",O=ne?z!==null?z+"Capture":null:z;ne=[];for(var j=L,N;j!==null;){N=j;var H=N.stateNode;if(N.tag===5&&H!==null&&(N=H,O!==null&&(H=Ro(j,O),H!=null&&ne.push(Ho(j,H,N)))),lt)break;j=j.return}0<ne.length&&(z=new X(z,re,null,l,W),K.push({event:z,listeners:ne}))}}if((s&7)===0){e:{if(z=n==="mouseover"||n==="pointerover",X=n==="mouseout"||n==="pointerout",z&&l!==Lc&&(re=l.relatedTarget||l.fromElement)&&(Ns(re)||re[Cn]))break e;if((X||z)&&(z=W.window===W?W:(z=W.ownerDocument)?z.defaultView||z.parentWindow:window,X?(re=l.relatedTarget||l.toElement,X=L,re=re?Ns(re):null,re!==null&&(lt=Os(re),re!==lt||re.tag!==5&&re.tag!==6)&&(re=null)):(X=null,re=L),X!==re)){if(ne=Nm,H="onMouseLeave",O="onMouseEnter",j="mouse",(n==="pointerout"||n==="pointerover")&&(ne=Lm,H="onPointerLeave",O="onPointerEnter",j="pointer"),lt=X==null?z:wi(X),N=re==null?z:wi(re),z=new ne(H,j+"leave",X,l,W),z.target=lt,z.relatedTarget=N,H=null,Ns(W)===L&&(ne=new ne(O,j+"enter",re,l,W),ne.target=N,ne.relatedTarget=lt,H=ne),lt=H,X&&re)t:{for(ne=X,O=re,j=0,N=ne;N;N=yi(N))j++;for(N=0,H=O;H;H=yi(H))N++;for(;0<j-N;)ne=yi(ne),j--;for(;0<N-j;)O=yi(O),N--;for(;j--;){if(ne===O||O!==null&&ne===O.alternate)break t;ne=yi(ne),O=yi(O)}ne=null}else ne=null;X!==null&&lg(K,z,X,ne,!1),re!==null&&lt!==null&&lg(K,lt,re,ne,!0)}}e:{if(z=L?wi(L):window,X=z.nodeName&&z.nodeName.toLowerCase(),X==="select"||X==="input"&&z.type==="file")var ie=U_;else if(Bm(z))if(Vm)ie=B_;else{ie=M_;var fe=F_}else(X=z.nodeName)&&X.toLowerCase()==="input"&&(z.type==="checkbox"||z.type==="radio")&&(ie=$_);if(ie&&(ie=ie(n,L))){zm(K,ie,l,W);break e}fe&&fe(n,z,L),n==="focusout"&&(fe=z._wrapperState)&&fe.controlled&&z.type==="number"&&Dt(z,"number",z.value)}switch(fe=L?wi(L):window,n){case"focusin":(Bm(fe)||fe.contentEditable==="true")&&(mi=fe,ih=L,Vo=null);break;case"focusout":Vo=ih=mi=null;break;case"mousedown":oh=!0;break;case"contextmenu":case"mouseup":case"dragend":oh=!1,Ym(K,l,W);break;case"selectionchange":if(W_)break;case"keydown":case"keyup":Ym(K,l,W)}var pe;if(th)e:{switch(n){case"compositionstart":var ye="onCompositionStart";break e;case"compositionend":ye="onCompositionEnd";break e;case"compositionupdate":ye="onCompositionUpdate";break e}ye=void 0}else pi?Mm(n,l)&&(ye="onCompositionEnd"):n==="keydown"&&l.keyCode===229&&(ye="onCompositionStart");ye&&(Dm&&l.locale!=="ko"&&(pi||ye!=="onCompositionStart"?ye==="onCompositionEnd"&&pi&&(pe=Pm()):(ts=W,Jc="value"in ts?ts.value:ts.textContent,pi=!0)),fe=pl(L,ye),0<fe.length&&(ye=new Im(ye,n,null,l,W),K.push({event:ye,listeners:fe}),pe?ye.data=pe:(pe=$m(l),pe!==null&&(ye.data=pe)))),(pe=O_?N_(n,l):I_(n,l))&&(L=pl(L,"onBeforeInput"),0<L.length&&(W=new Im("onBeforeInput","beforeinput",null,l,W),K.push({event:W,listeners:L}),W.data=pe))}og(K,s)})}function Ho(n,s,l){return{instance:n,listener:s,currentTarget:l}}function pl(n,s){for(var l=s+"Capture",c=[];n!==null;){var f=n,m=f.stateNode;f.tag===5&&m!==null&&(f=m,m=Ro(n,l),m!=null&&c.unshift(Ho(n,m,f)),m=Ro(n,s),m!=null&&c.push(Ho(n,m,f))),n=n.return}return c}function yi(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function lg(n,s,l,c,f){for(var m=s._reactName,w=[];l!==null&&l!==c;){var b=l,C=b.alternate,L=b.stateNode;if(C!==null&&C===c)break;b.tag===5&&L!==null&&(b=L,f?(C=Ro(l,m),C!=null&&w.unshift(Ho(l,C,b))):f||(C=Ro(l,m),C!=null&&w.push(Ho(l,C,b)))),l=l.return}w.length!==0&&n.push({event:s,listeners:w})}var q_=/\r\n?/g,J_=/\u0000|\uFFFD/g;function ug(n){return(typeof n=="string"?n:""+n).replace(q_,`
`).replace(J_,"")}function ml(n,s,l){if(s=ug(s),ug(n)!==s&&l)throw Error(r(425))}function gl(){}var dh=null,fh=null;function ph(n,s){return n==="textarea"||n==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var mh=typeof setTimeout=="function"?setTimeout:void 0,X_=typeof clearTimeout=="function"?clearTimeout:void 0,cg=typeof Promise=="function"?Promise:void 0,Y_=typeof queueMicrotask=="function"?queueMicrotask:typeof cg<"u"?function(n){return cg.resolve(null).then(n).catch(Q_)}:mh;function Q_(n){setTimeout(function(){throw n})}function gh(n,s){var l=s,c=0;do{var f=l.nextSibling;if(n.removeChild(l),f&&f.nodeType===8)if(l=f.data,l==="/$"){if(c===0){n.removeChild(f),Do(s);return}c--}else l!=="$"&&l!=="$?"&&l!=="$!"||c++;l=f}while(l);Do(s)}function ns(n){for(;n!=null;n=n.nextSibling){var s=n.nodeType;if(s===1||s===3)break;if(s===8){if(s=n.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return n}function hg(n){n=n.previousSibling;for(var s=0;n;){if(n.nodeType===8){var l=n.data;if(l==="$"||l==="$!"||l==="$?"){if(s===0)return n;s--}else l==="/$"&&s++}n=n.previousSibling}return null}var vi=Math.random().toString(36).slice(2),un="__reactFiber$"+vi,Go="__reactProps$"+vi,Cn="__reactContainer$"+vi,yh="__reactEvents$"+vi,Z_="__reactListeners$"+vi,e4="__reactHandles$"+vi;function Ns(n){var s=n[un];if(s)return s;for(var l=n.parentNode;l;){if(s=l[Cn]||l[un]){if(l=s.alternate,s.child!==null||l!==null&&l.child!==null)for(n=hg(n);n!==null;){if(l=n[un])return l;n=hg(n)}return s}n=l,l=n.parentNode}return null}function qo(n){return n=n[un]||n[Cn],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function wi(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(r(33))}function yl(n){return n[Go]||null}var vh=[],_i=-1;function ss(n){return{current:n}}function Ve(n){0>_i||(n.current=vh[_i],vh[_i]=null,_i--)}function Fe(n,s){_i++,vh[_i]=n.current,n.current=s}var is={},Ut=ss(is),tr=ss(!1),Is=is;function Ei(n,s){var l=n.type.contextTypes;if(!l)return is;var c=n.stateNode;if(c&&c.__reactInternalMemoizedUnmaskedChildContext===s)return c.__reactInternalMemoizedMaskedChildContext;var f={},m;for(m in l)f[m]=s[m];return c&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=s,n.__reactInternalMemoizedMaskedChildContext=f),f}function rr(n){return n=n.childContextTypes,n!=null}function vl(){Ve(tr),Ve(Ut)}function dg(n,s,l){if(Ut.current!==is)throw Error(r(168));Fe(Ut,s),Fe(tr,l)}function fg(n,s,l){var c=n.stateNode;if(s=s.childContextTypes,typeof c.getChildContext!="function")return l;c=c.getChildContext();for(var f in c)if(!(f in s))throw Error(r(108,we(n)||"Unknown",f));return J({},l,c)}function wl(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||is,Is=Ut.current,Fe(Ut,n),Fe(tr,tr.current),!0}function pg(n,s,l){var c=n.stateNode;if(!c)throw Error(r(169));l?(n=fg(n,s,Is),c.__reactInternalMemoizedMergedChildContext=n,Ve(tr),Ve(Ut),Fe(Ut,n)):Ve(tr),Fe(tr,l)}var An=null,_l=!1,wh=!1;function mg(n){An===null?An=[n]:An.push(n)}function t4(n){_l=!0,mg(n)}function os(){if(!wh&&An!==null){wh=!0;var n=0,s=Ie;try{var l=An;for(Ie=1;n<l.length;n++){var c=l[n];do c=c(!0);while(c!==null)}An=null,_l=!1}catch(f){throw An!==null&&(An=An.slice(n+1)),ym(Bc,os),f}finally{Ie=s,wh=!1}}return null}var Si=[],ki=0,El=null,Sl=0,Cr=[],Ar=0,Ls=null,jn=1,Pn="";function Ds(n,s){Si[ki++]=Sl,Si[ki++]=El,El=n,Sl=s}function gg(n,s,l){Cr[Ar++]=jn,Cr[Ar++]=Pn,Cr[Ar++]=Ls,Ls=n;var c=jn;n=Pn;var f=32-Gr(c)-1;c&=~(1<<f),l+=1;var m=32-Gr(s)+f;if(30<m){var w=f-f%5;m=(c&(1<<w)-1).toString(32),c>>=w,f-=w,jn=1<<32-Gr(s)+f|l<<f|c,Pn=m+n}else jn=1<<m|l<<f|c,Pn=n}function _h(n){n.return!==null&&(Ds(n,1),gg(n,1,0))}function Eh(n){for(;n===El;)El=Si[--ki],Si[ki]=null,Sl=Si[--ki],Si[ki]=null;for(;n===Ls;)Ls=Cr[--Ar],Cr[Ar]=null,Pn=Cr[--Ar],Cr[Ar]=null,jn=Cr[--Ar],Cr[Ar]=null}var pr=null,mr=null,He=!1,Jr=null;function yg(n,s){var l=Nr(5,null,null,0);l.elementType="DELETED",l.stateNode=s,l.return=n,s=n.deletions,s===null?(n.deletions=[l],n.flags|=16):s.push(l)}function vg(n,s){switch(n.tag){case 5:var l=n.type;return s=s.nodeType!==1||l.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(n.stateNode=s,pr=n,mr=ns(s.firstChild),!0):!1;case 6:return s=n.pendingProps===""||s.nodeType!==3?null:s,s!==null?(n.stateNode=s,pr=n,mr=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(l=Ls!==null?{id:jn,overflow:Pn}:null,n.memoizedState={dehydrated:s,treeContext:l,retryLane:1073741824},l=Nr(18,null,null,0),l.stateNode=s,l.return=n,n.child=l,pr=n,mr=null,!0):!1;default:return!1}}function Sh(n){return(n.mode&1)!==0&&(n.flags&128)===0}function kh(n){if(He){var s=mr;if(s){var l=s;if(!vg(n,s)){if(Sh(n))throw Error(r(418));s=ns(l.nextSibling);var c=pr;s&&vg(n,s)?yg(c,l):(n.flags=n.flags&-4097|2,He=!1,pr=n)}}else{if(Sh(n))throw Error(r(418));n.flags=n.flags&-4097|2,He=!1,pr=n}}}function wg(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;pr=n}function kl(n){if(n!==pr)return!1;if(!He)return wg(n),He=!0,!1;var s;if((s=n.tag!==3)&&!(s=n.tag!==5)&&(s=n.type,s=s!=="head"&&s!=="body"&&!ph(n.type,n.memoizedProps)),s&&(s=mr)){if(Sh(n))throw _g(),Error(r(418));for(;s;)yg(n,s),s=ns(s.nextSibling)}if(wg(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(r(317));e:{for(n=n.nextSibling,s=0;n;){if(n.nodeType===8){var l=n.data;if(l==="/$"){if(s===0){mr=ns(n.nextSibling);break e}s--}else l!=="$"&&l!=="$!"&&l!=="$?"||s++}n=n.nextSibling}mr=null}}else mr=pr?ns(n.stateNode.nextSibling):null;return!0}function _g(){for(var n=mr;n;)n=ns(n.nextSibling)}function bi(){mr=pr=null,He=!1}function bh(n){Jr===null?Jr=[n]:Jr.push(n)}var r4=D.ReactCurrentBatchConfig;function Jo(n,s,l){if(n=l.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(l._owner){if(l=l._owner,l){if(l.tag!==1)throw Error(r(309));var c=l.stateNode}if(!c)throw Error(r(147,n));var f=c,m=""+n;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===m?s.ref:(s=function(w){var b=f.refs;w===null?delete b[m]:b[m]=w},s._stringRef=m,s)}if(typeof n!="string")throw Error(r(284));if(!l._owner)throw Error(r(290,n))}return n}function bl(n,s){throw n=Object.prototype.toString.call(s),Error(r(31,n==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":n))}function Eg(n){var s=n._init;return s(n._payload)}function Sg(n){function s(O,j){if(n){var N=O.deletions;N===null?(O.deletions=[j],O.flags|=16):N.push(j)}}function l(O,j){if(!n)return null;for(;j!==null;)s(O,j),j=j.sibling;return null}function c(O,j){for(O=new Map;j!==null;)j.key!==null?O.set(j.key,j):O.set(j.index,j),j=j.sibling;return O}function f(O,j){return O=ps(O,j),O.index=0,O.sibling=null,O}function m(O,j,N){return O.index=N,n?(N=O.alternate,N!==null?(N=N.index,N<j?(O.flags|=2,j):N):(O.flags|=2,j)):(O.flags|=1048576,j)}function w(O){return n&&O.alternate===null&&(O.flags|=2),O}function b(O,j,N,H){return j===null||j.tag!==6?(j=md(N,O.mode,H),j.return=O,j):(j=f(j,N),j.return=O,j)}function C(O,j,N,H){var ie=N.type;return ie===B?W(O,j,N.props.children,H,N.key):j!==null&&(j.elementType===ie||typeof ie=="object"&&ie!==null&&ie.$$typeof===ht&&Eg(ie)===j.type)?(H=f(j,N.props),H.ref=Jo(O,j,N),H.return=O,H):(H=ql(N.type,N.key,N.props,null,O.mode,H),H.ref=Jo(O,j,N),H.return=O,H)}function L(O,j,N,H){return j===null||j.tag!==4||j.stateNode.containerInfo!==N.containerInfo||j.stateNode.implementation!==N.implementation?(j=gd(N,O.mode,H),j.return=O,j):(j=f(j,N.children||[]),j.return=O,j)}function W(O,j,N,H,ie){return j===null||j.tag!==7?(j=Ws(N,O.mode,H,ie),j.return=O,j):(j=f(j,N),j.return=O,j)}function K(O,j,N){if(typeof j=="string"&&j!==""||typeof j=="number")return j=md(""+j,O.mode,N),j.return=O,j;if(typeof j=="object"&&j!==null){switch(j.$$typeof){case V:return N=ql(j.type,j.key,j.props,null,O.mode,N),N.ref=Jo(O,null,j),N.return=O,N;case F:return j=gd(j,O.mode,N),j.return=O,j;case ht:var H=j._init;return K(O,H(j._payload),N)}if(jt(j)||ce(j))return j=Ws(j,O.mode,N,null),j.return=O,j;bl(O,j)}return null}function z(O,j,N,H){var ie=j!==null?j.key:null;if(typeof N=="string"&&N!==""||typeof N=="number")return ie!==null?null:b(O,j,""+N,H);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case V:return N.key===ie?C(O,j,N,H):null;case F:return N.key===ie?L(O,j,N,H):null;case ht:return ie=N._init,z(O,j,ie(N._payload),H)}if(jt(N)||ce(N))return ie!==null?null:W(O,j,N,H,null);bl(O,N)}return null}function X(O,j,N,H,ie){if(typeof H=="string"&&H!==""||typeof H=="number")return O=O.get(N)||null,b(j,O,""+H,ie);if(typeof H=="object"&&H!==null){switch(H.$$typeof){case V:return O=O.get(H.key===null?N:H.key)||null,C(j,O,H,ie);case F:return O=O.get(H.key===null?N:H.key)||null,L(j,O,H,ie);case ht:var fe=H._init;return X(O,j,N,fe(H._payload),ie)}if(jt(H)||ce(H))return O=O.get(N)||null,W(j,O,H,ie,null);bl(j,H)}return null}function re(O,j,N,H){for(var ie=null,fe=null,pe=j,ye=j=0,Rt=null;pe!==null&&ye<N.length;ye++){pe.index>ye?(Rt=pe,pe=null):Rt=pe.sibling;var Re=z(O,pe,N[ye],H);if(Re===null){pe===null&&(pe=Rt);break}n&&pe&&Re.alternate===null&&s(O,pe),j=m(Re,j,ye),fe===null?ie=Re:fe.sibling=Re,fe=Re,pe=Rt}if(ye===N.length)return l(O,pe),He&&Ds(O,ye),ie;if(pe===null){for(;ye<N.length;ye++)pe=K(O,N[ye],H),pe!==null&&(j=m(pe,j,ye),fe===null?ie=pe:fe.sibling=pe,fe=pe);return He&&Ds(O,ye),ie}for(pe=c(O,pe);ye<N.length;ye++)Rt=X(pe,O,ye,N[ye],H),Rt!==null&&(n&&Rt.alternate!==null&&pe.delete(Rt.key===null?ye:Rt.key),j=m(Rt,j,ye),fe===null?ie=Rt:fe.sibling=Rt,fe=Rt);return n&&pe.forEach(function(ms){return s(O,ms)}),He&&Ds(O,ye),ie}function ne(O,j,N,H){var ie=ce(N);if(typeof ie!="function")throw Error(r(150));if(N=ie.call(N),N==null)throw Error(r(151));for(var fe=ie=null,pe=j,ye=j=0,Rt=null,Re=N.next();pe!==null&&!Re.done;ye++,Re=N.next()){pe.index>ye?(Rt=pe,pe=null):Rt=pe.sibling;var ms=z(O,pe,Re.value,H);if(ms===null){pe===null&&(pe=Rt);break}n&&pe&&ms.alternate===null&&s(O,pe),j=m(ms,j,ye),fe===null?ie=ms:fe.sibling=ms,fe=ms,pe=Rt}if(Re.done)return l(O,pe),He&&Ds(O,ye),ie;if(pe===null){for(;!Re.done;ye++,Re=N.next())Re=K(O,Re.value,H),Re!==null&&(j=m(Re,j,ye),fe===null?ie=Re:fe.sibling=Re,fe=Re);return He&&Ds(O,ye),ie}for(pe=c(O,pe);!Re.done;ye++,Re=N.next())Re=X(pe,O,ye,Re.value,H),Re!==null&&(n&&Re.alternate!==null&&pe.delete(Re.key===null?ye:Re.key),j=m(Re,j,ye),fe===null?ie=Re:fe.sibling=Re,fe=Re);return n&&pe.forEach(function(L4){return s(O,L4)}),He&&Ds(O,ye),ie}function lt(O,j,N,H){if(typeof N=="object"&&N!==null&&N.type===B&&N.key===null&&(N=N.props.children),typeof N=="object"&&N!==null){switch(N.$$typeof){case V:e:{for(var ie=N.key,fe=j;fe!==null;){if(fe.key===ie){if(ie=N.type,ie===B){if(fe.tag===7){l(O,fe.sibling),j=f(fe,N.props.children),j.return=O,O=j;break e}}else if(fe.elementType===ie||typeof ie=="object"&&ie!==null&&ie.$$typeof===ht&&Eg(ie)===fe.type){l(O,fe.sibling),j=f(fe,N.props),j.ref=Jo(O,fe,N),j.return=O,O=j;break e}l(O,fe);break}else s(O,fe);fe=fe.sibling}N.type===B?(j=Ws(N.props.children,O.mode,H,N.key),j.return=O,O=j):(H=ql(N.type,N.key,N.props,null,O.mode,H),H.ref=Jo(O,j,N),H.return=O,O=H)}return w(O);case F:e:{for(fe=N.key;j!==null;){if(j.key===fe)if(j.tag===4&&j.stateNode.containerInfo===N.containerInfo&&j.stateNode.implementation===N.implementation){l(O,j.sibling),j=f(j,N.children||[]),j.return=O,O=j;break e}else{l(O,j);break}else s(O,j);j=j.sibling}j=gd(N,O.mode,H),j.return=O,O=j}return w(O);case ht:return fe=N._init,lt(O,j,fe(N._payload),H)}if(jt(N))return re(O,j,N,H);if(ce(N))return ne(O,j,N,H);bl(O,N)}return typeof N=="string"&&N!==""||typeof N=="number"?(N=""+N,j!==null&&j.tag===6?(l(O,j.sibling),j=f(j,N),j.return=O,O=j):(l(O,j),j=md(N,O.mode,H),j.return=O,O=j),w(O)):l(O,j)}return lt}var xi=Sg(!0),kg=Sg(!1),xl=ss(null),Tl=null,Ti=null,xh=null;function Th(){xh=Ti=Tl=null}function Rh(n){var s=xl.current;Ve(xl),n._currentValue=s}function Ch(n,s,l){for(;n!==null;){var c=n.alternate;if((n.childLanes&s)!==s?(n.childLanes|=s,c!==null&&(c.childLanes|=s)):c!==null&&(c.childLanes&s)!==s&&(c.childLanes|=s),n===l)break;n=n.return}}function Ri(n,s){Tl=n,xh=Ti=null,n=n.dependencies,n!==null&&n.firstContext!==null&&((n.lanes&s)!==0&&(nr=!0),n.firstContext=null)}function jr(n){var s=n._currentValue;if(xh!==n)if(n={context:n,memoizedValue:s,next:null},Ti===null){if(Tl===null)throw Error(r(308));Ti=n,Tl.dependencies={lanes:0,firstContext:n}}else Ti=Ti.next=n;return s}var Us=null;function Ah(n){Us===null?Us=[n]:Us.push(n)}function bg(n,s,l,c){var f=s.interleaved;return f===null?(l.next=l,Ah(s)):(l.next=f.next,f.next=l),s.interleaved=l,On(n,c)}function On(n,s){n.lanes|=s;var l=n.alternate;for(l!==null&&(l.lanes|=s),l=n,n=n.return;n!==null;)n.childLanes|=s,l=n.alternate,l!==null&&(l.childLanes|=s),l=n,n=n.return;return l.tag===3?l.stateNode:null}var as=!1;function jh(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function xg(n,s){n=n.updateQueue,s.updateQueue===n&&(s.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function Nn(n,s){return{eventTime:n,lane:s,tag:0,payload:null,callback:null,next:null}}function ls(n,s,l){var c=n.updateQueue;if(c===null)return null;if(c=c.shared,(xe&2)!==0){var f=c.pending;return f===null?s.next=s:(s.next=f.next,f.next=s),c.pending=s,On(n,l)}return f=c.interleaved,f===null?(s.next=s,Ah(c)):(s.next=f.next,f.next=s),c.interleaved=s,On(n,l)}function Rl(n,s,l){if(s=s.updateQueue,s!==null&&(s=s.shared,(l&4194240)!==0)){var c=s.lanes;c&=n.pendingLanes,l|=c,s.lanes=l,Wc(n,l)}}function Tg(n,s){var l=n.updateQueue,c=n.alternate;if(c!==null&&(c=c.updateQueue,l===c)){var f=null,m=null;if(l=l.firstBaseUpdate,l!==null){do{var w={eventTime:l.eventTime,lane:l.lane,tag:l.tag,payload:l.payload,callback:l.callback,next:null};m===null?f=m=w:m=m.next=w,l=l.next}while(l!==null);m===null?f=m=s:m=m.next=s}else f=m=s;l={baseState:c.baseState,firstBaseUpdate:f,lastBaseUpdate:m,shared:c.shared,effects:c.effects},n.updateQueue=l;return}n=l.lastBaseUpdate,n===null?l.firstBaseUpdate=s:n.next=s,l.lastBaseUpdate=s}function Cl(n,s,l,c){var f=n.updateQueue;as=!1;var m=f.firstBaseUpdate,w=f.lastBaseUpdate,b=f.shared.pending;if(b!==null){f.shared.pending=null;var C=b,L=C.next;C.next=null,w===null?m=L:w.next=L,w=C;var W=n.alternate;W!==null&&(W=W.updateQueue,b=W.lastBaseUpdate,b!==w&&(b===null?W.firstBaseUpdate=L:b.next=L,W.lastBaseUpdate=C))}if(m!==null){var K=f.baseState;w=0,W=L=C=null,b=m;do{var z=b.lane,X=b.eventTime;if((c&z)===z){W!==null&&(W=W.next={eventTime:X,lane:0,tag:b.tag,payload:b.payload,callback:b.callback,next:null});e:{var re=n,ne=b;switch(z=s,X=l,ne.tag){case 1:if(re=ne.payload,typeof re=="function"){K=re.call(X,K,z);break e}K=re;break e;case 3:re.flags=re.flags&-65537|128;case 0:if(re=ne.payload,z=typeof re=="function"?re.call(X,K,z):re,z==null)break e;K=J({},K,z);break e;case 2:as=!0}}b.callback!==null&&b.lane!==0&&(n.flags|=64,z=f.effects,z===null?f.effects=[b]:z.push(b))}else X={eventTime:X,lane:z,tag:b.tag,payload:b.payload,callback:b.callback,next:null},W===null?(L=W=X,C=K):W=W.next=X,w|=z;if(b=b.next,b===null){if(b=f.shared.pending,b===null)break;z=b,b=z.next,z.next=null,f.lastBaseUpdate=z,f.shared.pending=null}}while(!0);if(W===null&&(C=K),f.baseState=C,f.firstBaseUpdate=L,f.lastBaseUpdate=W,s=f.shared.interleaved,s!==null){f=s;do w|=f.lane,f=f.next;while(f!==s)}else m===null&&(f.shared.lanes=0);$s|=w,n.lanes=w,n.memoizedState=K}}function Rg(n,s,l){if(n=s.effects,s.effects=null,n!==null)for(s=0;s<n.length;s++){var c=n[s],f=c.callback;if(f!==null){if(c.callback=null,c=l,typeof f!="function")throw Error(r(191,f));f.call(c)}}}var Xo={},cn=ss(Xo),Yo=ss(Xo),Qo=ss(Xo);function Fs(n){if(n===Xo)throw Error(r(174));return n}function Ph(n,s){switch(Fe(Qo,s),Fe(Yo,n),Fe(cn,Xo),n=s.nodeType,n){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:Oc(null,"");break;default:n=n===8?s.parentNode:s,s=n.namespaceURI||null,n=n.tagName,s=Oc(s,n)}Ve(cn),Fe(cn,s)}function Ci(){Ve(cn),Ve(Yo),Ve(Qo)}function Cg(n){Fs(Qo.current);var s=Fs(cn.current),l=Oc(s,n.type);s!==l&&(Fe(Yo,n),Fe(cn,l))}function Oh(n){Yo.current===n&&(Ve(cn),Ve(Yo))}var Qe=ss(0);function Al(n){for(var s=n;s!==null;){if(s.tag===13){var l=s.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||l.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Nh=[];function Ih(){for(var n=0;n<Nh.length;n++)Nh[n]._workInProgressVersionPrimary=null;Nh.length=0}var jl=D.ReactCurrentDispatcher,Lh=D.ReactCurrentBatchConfig,Ms=0,Ze=null,wt=null,xt=null,Pl=!1,Zo=!1,ea=0,n4=0;function Ft(){throw Error(r(321))}function Dh(n,s){if(s===null)return!1;for(var l=0;l<s.length&&l<n.length;l++)if(!qr(n[l],s[l]))return!1;return!0}function Uh(n,s,l,c,f,m){if(Ms=m,Ze=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,jl.current=n===null||n.memoizedState===null?a4:l4,n=l(c,f),Zo){m=0;do{if(Zo=!1,ea=0,25<=m)throw Error(r(301));m+=1,xt=wt=null,s.updateQueue=null,jl.current=u4,n=l(c,f)}while(Zo)}if(jl.current=Il,s=wt!==null&&wt.next!==null,Ms=0,xt=wt=Ze=null,Pl=!1,s)throw Error(r(300));return n}function Fh(){var n=ea!==0;return ea=0,n}function hn(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return xt===null?Ze.memoizedState=xt=n:xt=xt.next=n,xt}function Pr(){if(wt===null){var n=Ze.alternate;n=n!==null?n.memoizedState:null}else n=wt.next;var s=xt===null?Ze.memoizedState:xt.next;if(s!==null)xt=s,wt=n;else{if(n===null)throw Error(r(310));wt=n,n={memoizedState:wt.memoizedState,baseState:wt.baseState,baseQueue:wt.baseQueue,queue:wt.queue,next:null},xt===null?Ze.memoizedState=xt=n:xt=xt.next=n}return xt}function ta(n,s){return typeof s=="function"?s(n):s}function Mh(n){var s=Pr(),l=s.queue;if(l===null)throw Error(r(311));l.lastRenderedReducer=n;var c=wt,f=c.baseQueue,m=l.pending;if(m!==null){if(f!==null){var w=f.next;f.next=m.next,m.next=w}c.baseQueue=f=m,l.pending=null}if(f!==null){m=f.next,c=c.baseState;var b=w=null,C=null,L=m;do{var W=L.lane;if((Ms&W)===W)C!==null&&(C=C.next={lane:0,action:L.action,hasEagerState:L.hasEagerState,eagerState:L.eagerState,next:null}),c=L.hasEagerState?L.eagerState:n(c,L.action);else{var K={lane:W,action:L.action,hasEagerState:L.hasEagerState,eagerState:L.eagerState,next:null};C===null?(b=C=K,w=c):C=C.next=K,Ze.lanes|=W,$s|=W}L=L.next}while(L!==null&&L!==m);C===null?w=c:C.next=b,qr(c,s.memoizedState)||(nr=!0),s.memoizedState=c,s.baseState=w,s.baseQueue=C,l.lastRenderedState=c}if(n=l.interleaved,n!==null){f=n;do m=f.lane,Ze.lanes|=m,$s|=m,f=f.next;while(f!==n)}else f===null&&(l.lanes=0);return[s.memoizedState,l.dispatch]}function $h(n){var s=Pr(),l=s.queue;if(l===null)throw Error(r(311));l.lastRenderedReducer=n;var c=l.dispatch,f=l.pending,m=s.memoizedState;if(f!==null){l.pending=null;var w=f=f.next;do m=n(m,w.action),w=w.next;while(w!==f);qr(m,s.memoizedState)||(nr=!0),s.memoizedState=m,s.baseQueue===null&&(s.baseState=m),l.lastRenderedState=m}return[m,c]}function Ag(){}function jg(n,s){var l=Ze,c=Pr(),f=s(),m=!qr(c.memoizedState,f);if(m&&(c.memoizedState=f,nr=!0),c=c.queue,Bh(Ng.bind(null,l,c,n),[n]),c.getSnapshot!==s||m||xt!==null&&xt.memoizedState.tag&1){if(l.flags|=2048,ra(9,Og.bind(null,l,c,f,s),void 0,null),Tt===null)throw Error(r(349));(Ms&30)!==0||Pg(l,s,f)}return f}function Pg(n,s,l){n.flags|=16384,n={getSnapshot:s,value:l},s=Ze.updateQueue,s===null?(s={lastEffect:null,stores:null},Ze.updateQueue=s,s.stores=[n]):(l=s.stores,l===null?s.stores=[n]:l.push(n))}function Og(n,s,l,c){s.value=l,s.getSnapshot=c,Ig(s)&&Lg(n)}function Ng(n,s,l){return l(function(){Ig(s)&&Lg(n)})}function Ig(n){var s=n.getSnapshot;n=n.value;try{var l=s();return!qr(n,l)}catch{return!0}}function Lg(n){var s=On(n,1);s!==null&&Zr(s,n,1,-1)}function Dg(n){var s=hn();return typeof n=="function"&&(n=n()),s.memoizedState=s.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ta,lastRenderedState:n},s.queue=n,n=n.dispatch=o4.bind(null,Ze,n),[s.memoizedState,n]}function ra(n,s,l,c){return n={tag:n,create:s,destroy:l,deps:c,next:null},s=Ze.updateQueue,s===null?(s={lastEffect:null,stores:null},Ze.updateQueue=s,s.lastEffect=n.next=n):(l=s.lastEffect,l===null?s.lastEffect=n.next=n:(c=l.next,l.next=n,n.next=c,s.lastEffect=n)),n}function Ug(){return Pr().memoizedState}function Ol(n,s,l,c){var f=hn();Ze.flags|=n,f.memoizedState=ra(1|s,l,void 0,c===void 0?null:c)}function Nl(n,s,l,c){var f=Pr();c=c===void 0?null:c;var m=void 0;if(wt!==null){var w=wt.memoizedState;if(m=w.destroy,c!==null&&Dh(c,w.deps)){f.memoizedState=ra(s,l,m,c);return}}Ze.flags|=n,f.memoizedState=ra(1|s,l,m,c)}function Fg(n,s){return Ol(8390656,8,n,s)}function Bh(n,s){return Nl(2048,8,n,s)}function Mg(n,s){return Nl(4,2,n,s)}function $g(n,s){return Nl(4,4,n,s)}function Bg(n,s){if(typeof s=="function")return n=n(),s(n),function(){s(null)};if(s!=null)return n=n(),s.current=n,function(){s.current=null}}function zg(n,s,l){return l=l!=null?l.concat([n]):null,Nl(4,4,Bg.bind(null,s,n),l)}function zh(){}function Vg(n,s){var l=Pr();s=s===void 0?null:s;var c=l.memoizedState;return c!==null&&s!==null&&Dh(s,c[1])?c[0]:(l.memoizedState=[n,s],n)}function Wg(n,s){var l=Pr();s=s===void 0?null:s;var c=l.memoizedState;return c!==null&&s!==null&&Dh(s,c[1])?c[0]:(n=n(),l.memoizedState=[n,s],n)}function Kg(n,s,l){return(Ms&21)===0?(n.baseState&&(n.baseState=!1,nr=!0),n.memoizedState=l):(qr(l,s)||(l=Em(),Ze.lanes|=l,$s|=l,n.baseState=!0),s)}function s4(n,s){var l=Ie;Ie=l!==0&&4>l?l:4,n(!0);var c=Lh.transition;Lh.transition={};try{n(!1),s()}finally{Ie=l,Lh.transition=c}}function Hg(){return Pr().memoizedState}function i4(n,s,l){var c=ds(n);if(l={lane:c,action:l,hasEagerState:!1,eagerState:null,next:null},Gg(n))qg(s,l);else if(l=bg(n,s,l,c),l!==null){var f=Ht();Zr(l,n,c,f),Jg(l,s,c)}}function o4(n,s,l){var c=ds(n),f={lane:c,action:l,hasEagerState:!1,eagerState:null,next:null};if(Gg(n))qg(s,f);else{var m=n.alternate;if(n.lanes===0&&(m===null||m.lanes===0)&&(m=s.lastRenderedReducer,m!==null))try{var w=s.lastRenderedState,b=m(w,l);if(f.hasEagerState=!0,f.eagerState=b,qr(b,w)){var C=s.interleaved;C===null?(f.next=f,Ah(s)):(f.next=C.next,C.next=f),s.interleaved=f;return}}catch{}finally{}l=bg(n,s,f,c),l!==null&&(f=Ht(),Zr(l,n,c,f),Jg(l,s,c))}}function Gg(n){var s=n.alternate;return n===Ze||s!==null&&s===Ze}function qg(n,s){Zo=Pl=!0;var l=n.pending;l===null?s.next=s:(s.next=l.next,l.next=s),n.pending=s}function Jg(n,s,l){if((l&4194240)!==0){var c=s.lanes;c&=n.pendingLanes,l|=c,s.lanes=l,Wc(n,l)}}var Il={readContext:jr,useCallback:Ft,useContext:Ft,useEffect:Ft,useImperativeHandle:Ft,useInsertionEffect:Ft,useLayoutEffect:Ft,useMemo:Ft,useReducer:Ft,useRef:Ft,useState:Ft,useDebugValue:Ft,useDeferredValue:Ft,useTransition:Ft,useMutableSource:Ft,useSyncExternalStore:Ft,useId:Ft,unstable_isNewReconciler:!1},a4={readContext:jr,useCallback:function(n,s){return hn().memoizedState=[n,s===void 0?null:s],n},useContext:jr,useEffect:Fg,useImperativeHandle:function(n,s,l){return l=l!=null?l.concat([n]):null,Ol(4194308,4,Bg.bind(null,s,n),l)},useLayoutEffect:function(n,s){return Ol(4194308,4,n,s)},useInsertionEffect:function(n,s){return Ol(4,2,n,s)},useMemo:function(n,s){var l=hn();return s=s===void 0?null:s,n=n(),l.memoizedState=[n,s],n},useReducer:function(n,s,l){var c=hn();return s=l!==void 0?l(s):s,c.memoizedState=c.baseState=s,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:s},c.queue=n,n=n.dispatch=i4.bind(null,Ze,n),[c.memoizedState,n]},useRef:function(n){var s=hn();return n={current:n},s.memoizedState=n},useState:Dg,useDebugValue:zh,useDeferredValue:function(n){return hn().memoizedState=n},useTransition:function(){var n=Dg(!1),s=n[0];return n=s4.bind(null,n[1]),hn().memoizedState=n,[s,n]},useMutableSource:function(){},useSyncExternalStore:function(n,s,l){var c=Ze,f=hn();if(He){if(l===void 0)throw Error(r(407));l=l()}else{if(l=s(),Tt===null)throw Error(r(349));(Ms&30)!==0||Pg(c,s,l)}f.memoizedState=l;var m={value:l,getSnapshot:s};return f.queue=m,Fg(Ng.bind(null,c,m,n),[n]),c.flags|=2048,ra(9,Og.bind(null,c,m,l,s),void 0,null),l},useId:function(){var n=hn(),s=Tt.identifierPrefix;if(He){var l=Pn,c=jn;l=(c&~(1<<32-Gr(c)-1)).toString(32)+l,s=":"+s+"R"+l,l=ea++,0<l&&(s+="H"+l.toString(32)),s+=":"}else l=n4++,s=":"+s+"r"+l.toString(32)+":";return n.memoizedState=s},unstable_isNewReconciler:!1},l4={readContext:jr,useCallback:Vg,useContext:jr,useEffect:Bh,useImperativeHandle:zg,useInsertionEffect:Mg,useLayoutEffect:$g,useMemo:Wg,useReducer:Mh,useRef:Ug,useState:function(){return Mh(ta)},useDebugValue:zh,useDeferredValue:function(n){var s=Pr();return Kg(s,wt.memoizedState,n)},useTransition:function(){var n=Mh(ta)[0],s=Pr().memoizedState;return[n,s]},useMutableSource:Ag,useSyncExternalStore:jg,useId:Hg,unstable_isNewReconciler:!1},u4={readContext:jr,useCallback:Vg,useContext:jr,useEffect:Bh,useImperativeHandle:zg,useInsertionEffect:Mg,useLayoutEffect:$g,useMemo:Wg,useReducer:$h,useRef:Ug,useState:function(){return $h(ta)},useDebugValue:zh,useDeferredValue:function(n){var s=Pr();return wt===null?s.memoizedState=n:Kg(s,wt.memoizedState,n)},useTransition:function(){var n=$h(ta)[0],s=Pr().memoizedState;return[n,s]},useMutableSource:Ag,useSyncExternalStore:jg,useId:Hg,unstable_isNewReconciler:!1};function Xr(n,s){if(n&&n.defaultProps){s=J({},s),n=n.defaultProps;for(var l in n)s[l]===void 0&&(s[l]=n[l]);return s}return s}function Vh(n,s,l,c){s=n.memoizedState,l=l(c,s),l=l==null?s:J({},s,l),n.memoizedState=l,n.lanes===0&&(n.updateQueue.baseState=l)}var Ll={isMounted:function(n){return(n=n._reactInternals)?Os(n)===n:!1},enqueueSetState:function(n,s,l){n=n._reactInternals;var c=Ht(),f=ds(n),m=Nn(c,f);m.payload=s,l!=null&&(m.callback=l),s=ls(n,m,f),s!==null&&(Zr(s,n,f,c),Rl(s,n,f))},enqueueReplaceState:function(n,s,l){n=n._reactInternals;var c=Ht(),f=ds(n),m=Nn(c,f);m.tag=1,m.payload=s,l!=null&&(m.callback=l),s=ls(n,m,f),s!==null&&(Zr(s,n,f,c),Rl(s,n,f))},enqueueForceUpdate:function(n,s){n=n._reactInternals;var l=Ht(),c=ds(n),f=Nn(l,c);f.tag=2,s!=null&&(f.callback=s),s=ls(n,f,c),s!==null&&(Zr(s,n,c,l),Rl(s,n,c))}};function Xg(n,s,l,c,f,m,w){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(c,m,w):s.prototype&&s.prototype.isPureReactComponent?!zo(l,c)||!zo(f,m):!0}function Yg(n,s,l){var c=!1,f=is,m=s.contextType;return typeof m=="object"&&m!==null?m=jr(m):(f=rr(s)?Is:Ut.current,c=s.contextTypes,m=(c=c!=null)?Ei(n,f):is),s=new s(l,m),n.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=Ll,n.stateNode=s,s._reactInternals=n,c&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=f,n.__reactInternalMemoizedMaskedChildContext=m),s}function Qg(n,s,l,c){n=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(l,c),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(l,c),s.state!==n&&Ll.enqueueReplaceState(s,s.state,null)}function Wh(n,s,l,c){var f=n.stateNode;f.props=l,f.state=n.memoizedState,f.refs={},jh(n);var m=s.contextType;typeof m=="object"&&m!==null?f.context=jr(m):(m=rr(s)?Is:Ut.current,f.context=Ei(n,m)),f.state=n.memoizedState,m=s.getDerivedStateFromProps,typeof m=="function"&&(Vh(n,s,m,l),f.state=n.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(s=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),s!==f.state&&Ll.enqueueReplaceState(f,f.state,null),Cl(n,l,f,c),f.state=n.memoizedState),typeof f.componentDidMount=="function"&&(n.flags|=4194308)}function Ai(n,s){try{var l="",c=s;do l+=q(c),c=c.return;while(c);var f=l}catch(m){f=`
Error generating stack: `+m.message+`
`+m.stack}return{value:n,source:s,stack:f,digest:null}}function Kh(n,s,l){return{value:n,source:null,stack:l??null,digest:s??null}}function Hh(n,s){try{console.error(s.value)}catch(l){setTimeout(function(){throw l})}}var c4=typeof WeakMap=="function"?WeakMap:Map;function Zg(n,s,l){l=Nn(-1,l),l.tag=3,l.payload={element:null};var c=s.value;return l.callback=function(){zl||(zl=!0,ad=c),Hh(n,s)},l}function e0(n,s,l){l=Nn(-1,l),l.tag=3;var c=n.type.getDerivedStateFromError;if(typeof c=="function"){var f=s.value;l.payload=function(){return c(f)},l.callback=function(){Hh(n,s)}}var m=n.stateNode;return m!==null&&typeof m.componentDidCatch=="function"&&(l.callback=function(){Hh(n,s),typeof c!="function"&&(cs===null?cs=new Set([this]):cs.add(this));var w=s.stack;this.componentDidCatch(s.value,{componentStack:w!==null?w:""})}),l}function t0(n,s,l){var c=n.pingCache;if(c===null){c=n.pingCache=new c4;var f=new Set;c.set(s,f)}else f=c.get(s),f===void 0&&(f=new Set,c.set(s,f));f.has(l)||(f.add(l),n=b4.bind(null,n,s,l),s.then(n,n))}function r0(n){do{var s;if((s=n.tag===13)&&(s=n.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return n;n=n.return}while(n!==null);return null}function n0(n,s,l,c,f){return(n.mode&1)===0?(n===s?n.flags|=65536:(n.flags|=128,l.flags|=131072,l.flags&=-52805,l.tag===1&&(l.alternate===null?l.tag=17:(s=Nn(-1,1),s.tag=2,ls(l,s,1))),l.lanes|=1),n):(n.flags|=65536,n.lanes=f,n)}var h4=D.ReactCurrentOwner,nr=!1;function Kt(n,s,l,c){s.child=n===null?kg(s,null,l,c):xi(s,n.child,l,c)}function s0(n,s,l,c,f){l=l.render;var m=s.ref;return Ri(s,f),c=Uh(n,s,l,c,m,f),l=Fh(),n!==null&&!nr?(s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~f,In(n,s,f)):(He&&l&&_h(s),s.flags|=1,Kt(n,s,c,f),s.child)}function i0(n,s,l,c,f){if(n===null){var m=l.type;return typeof m=="function"&&!pd(m)&&m.defaultProps===void 0&&l.compare===null&&l.defaultProps===void 0?(s.tag=15,s.type=m,o0(n,s,m,c,f)):(n=ql(l.type,null,c,s,s.mode,f),n.ref=s.ref,n.return=s,s.child=n)}if(m=n.child,(n.lanes&f)===0){var w=m.memoizedProps;if(l=l.compare,l=l!==null?l:zo,l(w,c)&&n.ref===s.ref)return In(n,s,f)}return s.flags|=1,n=ps(m,c),n.ref=s.ref,n.return=s,s.child=n}function o0(n,s,l,c,f){if(n!==null){var m=n.memoizedProps;if(zo(m,c)&&n.ref===s.ref)if(nr=!1,s.pendingProps=c=m,(n.lanes&f)!==0)(n.flags&131072)!==0&&(nr=!0);else return s.lanes=n.lanes,In(n,s,f)}return Gh(n,s,l,c,f)}function a0(n,s,l){var c=s.pendingProps,f=c.children,m=n!==null?n.memoizedState:null;if(c.mode==="hidden")if((s.mode&1)===0)s.memoizedState={baseLanes:0,cachePool:null,transitions:null},Fe(Pi,gr),gr|=l;else{if((l&1073741824)===0)return n=m!==null?m.baseLanes|l:l,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:n,cachePool:null,transitions:null},s.updateQueue=null,Fe(Pi,gr),gr|=n,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},c=m!==null?m.baseLanes:l,Fe(Pi,gr),gr|=c}else m!==null?(c=m.baseLanes|l,s.memoizedState=null):c=l,Fe(Pi,gr),gr|=c;return Kt(n,s,f,l),s.child}function l0(n,s){var l=s.ref;(n===null&&l!==null||n!==null&&n.ref!==l)&&(s.flags|=512,s.flags|=2097152)}function Gh(n,s,l,c,f){var m=rr(l)?Is:Ut.current;return m=Ei(s,m),Ri(s,f),l=Uh(n,s,l,c,m,f),c=Fh(),n!==null&&!nr?(s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~f,In(n,s,f)):(He&&c&&_h(s),s.flags|=1,Kt(n,s,l,f),s.child)}function u0(n,s,l,c,f){if(rr(l)){var m=!0;wl(s)}else m=!1;if(Ri(s,f),s.stateNode===null)Ul(n,s),Yg(s,l,c),Wh(s,l,c,f),c=!0;else if(n===null){var w=s.stateNode,b=s.memoizedProps;w.props=b;var C=w.context,L=l.contextType;typeof L=="object"&&L!==null?L=jr(L):(L=rr(l)?Is:Ut.current,L=Ei(s,L));var W=l.getDerivedStateFromProps,K=typeof W=="function"||typeof w.getSnapshotBeforeUpdate=="function";K||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(b!==c||C!==L)&&Qg(s,w,c,L),as=!1;var z=s.memoizedState;w.state=z,Cl(s,c,w,f),C=s.memoizedState,b!==c||z!==C||tr.current||as?(typeof W=="function"&&(Vh(s,l,W,c),C=s.memoizedState),(b=as||Xg(s,l,b,c,z,C,L))?(K||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(s.flags|=4194308)):(typeof w.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=c,s.memoizedState=C),w.props=c,w.state=C,w.context=L,c=b):(typeof w.componentDidMount=="function"&&(s.flags|=4194308),c=!1)}else{w=s.stateNode,xg(n,s),b=s.memoizedProps,L=s.type===s.elementType?b:Xr(s.type,b),w.props=L,K=s.pendingProps,z=w.context,C=l.contextType,typeof C=="object"&&C!==null?C=jr(C):(C=rr(l)?Is:Ut.current,C=Ei(s,C));var X=l.getDerivedStateFromProps;(W=typeof X=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(b!==K||z!==C)&&Qg(s,w,c,C),as=!1,z=s.memoizedState,w.state=z,Cl(s,c,w,f);var re=s.memoizedState;b!==K||z!==re||tr.current||as?(typeof X=="function"&&(Vh(s,l,X,c),re=s.memoizedState),(L=as||Xg(s,l,L,c,z,re,C)||!1)?(W||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(c,re,C),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(c,re,C)),typeof w.componentDidUpdate=="function"&&(s.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof w.componentDidUpdate!="function"||b===n.memoizedProps&&z===n.memoizedState||(s.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||b===n.memoizedProps&&z===n.memoizedState||(s.flags|=1024),s.memoizedProps=c,s.memoizedState=re),w.props=c,w.state=re,w.context=C,c=L):(typeof w.componentDidUpdate!="function"||b===n.memoizedProps&&z===n.memoizedState||(s.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||b===n.memoizedProps&&z===n.memoizedState||(s.flags|=1024),c=!1)}return qh(n,s,l,c,m,f)}function qh(n,s,l,c,f,m){l0(n,s);var w=(s.flags&128)!==0;if(!c&&!w)return f&&pg(s,l,!1),In(n,s,m);c=s.stateNode,h4.current=s;var b=w&&typeof l.getDerivedStateFromError!="function"?null:c.render();return s.flags|=1,n!==null&&w?(s.child=xi(s,n.child,null,m),s.child=xi(s,null,b,m)):Kt(n,s,b,m),s.memoizedState=c.state,f&&pg(s,l,!0),s.child}function c0(n){var s=n.stateNode;s.pendingContext?dg(n,s.pendingContext,s.pendingContext!==s.context):s.context&&dg(n,s.context,!1),Ph(n,s.containerInfo)}function h0(n,s,l,c,f){return bi(),bh(f),s.flags|=256,Kt(n,s,l,c),s.child}var Jh={dehydrated:null,treeContext:null,retryLane:0};function Xh(n){return{baseLanes:n,cachePool:null,transitions:null}}function d0(n,s,l){var c=s.pendingProps,f=Qe.current,m=!1,w=(s.flags&128)!==0,b;if((b=w)||(b=n!==null&&n.memoizedState===null?!1:(f&2)!==0),b?(m=!0,s.flags&=-129):(n===null||n.memoizedState!==null)&&(f|=1),Fe(Qe,f&1),n===null)return kh(s),n=s.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?((s.mode&1)===0?s.lanes=1:n.data==="$!"?s.lanes=8:s.lanes=1073741824,null):(w=c.children,n=c.fallback,m?(c=s.mode,m=s.child,w={mode:"hidden",children:w},(c&1)===0&&m!==null?(m.childLanes=0,m.pendingProps=w):m=Jl(w,c,0,null),n=Ws(n,c,l,null),m.return=s,n.return=s,m.sibling=n,s.child=m,s.child.memoizedState=Xh(l),s.memoizedState=Jh,n):Yh(s,w));if(f=n.memoizedState,f!==null&&(b=f.dehydrated,b!==null))return d4(n,s,w,c,b,f,l);if(m){m=c.fallback,w=s.mode,f=n.child,b=f.sibling;var C={mode:"hidden",children:c.children};return(w&1)===0&&s.child!==f?(c=s.child,c.childLanes=0,c.pendingProps=C,s.deletions=null):(c=ps(f,C),c.subtreeFlags=f.subtreeFlags&14680064),b!==null?m=ps(b,m):(m=Ws(m,w,l,null),m.flags|=2),m.return=s,c.return=s,c.sibling=m,s.child=c,c=m,m=s.child,w=n.child.memoizedState,w=w===null?Xh(l):{baseLanes:w.baseLanes|l,cachePool:null,transitions:w.transitions},m.memoizedState=w,m.childLanes=n.childLanes&~l,s.memoizedState=Jh,c}return m=n.child,n=m.sibling,c=ps(m,{mode:"visible",children:c.children}),(s.mode&1)===0&&(c.lanes=l),c.return=s,c.sibling=null,n!==null&&(l=s.deletions,l===null?(s.deletions=[n],s.flags|=16):l.push(n)),s.child=c,s.memoizedState=null,c}function Yh(n,s){return s=Jl({mode:"visible",children:s},n.mode,0,null),s.return=n,n.child=s}function Dl(n,s,l,c){return c!==null&&bh(c),xi(s,n.child,null,l),n=Yh(s,s.pendingProps.children),n.flags|=2,s.memoizedState=null,n}function d4(n,s,l,c,f,m,w){if(l)return s.flags&256?(s.flags&=-257,c=Kh(Error(r(422))),Dl(n,s,w,c)):s.memoizedState!==null?(s.child=n.child,s.flags|=128,null):(m=c.fallback,f=s.mode,c=Jl({mode:"visible",children:c.children},f,0,null),m=Ws(m,f,w,null),m.flags|=2,c.return=s,m.return=s,c.sibling=m,s.child=c,(s.mode&1)!==0&&xi(s,n.child,null,w),s.child.memoizedState=Xh(w),s.memoizedState=Jh,m);if((s.mode&1)===0)return Dl(n,s,w,null);if(f.data==="$!"){if(c=f.nextSibling&&f.nextSibling.dataset,c)var b=c.dgst;return c=b,m=Error(r(419)),c=Kh(m,c,void 0),Dl(n,s,w,c)}if(b=(w&n.childLanes)!==0,nr||b){if(c=Tt,c!==null){switch(w&-w){case 4:f=2;break;case 16:f=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:f=32;break;case 536870912:f=268435456;break;default:f=0}f=(f&(c.suspendedLanes|w))!==0?0:f,f!==0&&f!==m.retryLane&&(m.retryLane=f,On(n,f),Zr(c,n,f,-1))}return fd(),c=Kh(Error(r(421))),Dl(n,s,w,c)}return f.data==="$?"?(s.flags|=128,s.child=n.child,s=x4.bind(null,n),f._reactRetry=s,null):(n=m.treeContext,mr=ns(f.nextSibling),pr=s,He=!0,Jr=null,n!==null&&(Cr[Ar++]=jn,Cr[Ar++]=Pn,Cr[Ar++]=Ls,jn=n.id,Pn=n.overflow,Ls=s),s=Yh(s,c.children),s.flags|=4096,s)}function f0(n,s,l){n.lanes|=s;var c=n.alternate;c!==null&&(c.lanes|=s),Ch(n.return,s,l)}function Qh(n,s,l,c,f){var m=n.memoizedState;m===null?n.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:c,tail:l,tailMode:f}:(m.isBackwards=s,m.rendering=null,m.renderingStartTime=0,m.last=c,m.tail=l,m.tailMode=f)}function p0(n,s,l){var c=s.pendingProps,f=c.revealOrder,m=c.tail;if(Kt(n,s,c.children,l),c=Qe.current,(c&2)!==0)c=c&1|2,s.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=s.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&f0(n,l,s);else if(n.tag===19)f0(n,l,s);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===s)break e;for(;n.sibling===null;){if(n.return===null||n.return===s)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}c&=1}if(Fe(Qe,c),(s.mode&1)===0)s.memoizedState=null;else switch(f){case"forwards":for(l=s.child,f=null;l!==null;)n=l.alternate,n!==null&&Al(n)===null&&(f=l),l=l.sibling;l=f,l===null?(f=s.child,s.child=null):(f=l.sibling,l.sibling=null),Qh(s,!1,f,l,m);break;case"backwards":for(l=null,f=s.child,s.child=null;f!==null;){if(n=f.alternate,n!==null&&Al(n)===null){s.child=f;break}n=f.sibling,f.sibling=l,l=f,f=n}Qh(s,!0,l,null,m);break;case"together":Qh(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function Ul(n,s){(s.mode&1)===0&&n!==null&&(n.alternate=null,s.alternate=null,s.flags|=2)}function In(n,s,l){if(n!==null&&(s.dependencies=n.dependencies),$s|=s.lanes,(l&s.childLanes)===0)return null;if(n!==null&&s.child!==n.child)throw Error(r(153));if(s.child!==null){for(n=s.child,l=ps(n,n.pendingProps),s.child=l,l.return=s;n.sibling!==null;)n=n.sibling,l=l.sibling=ps(n,n.pendingProps),l.return=s;l.sibling=null}return s.child}function f4(n,s,l){switch(s.tag){case 3:c0(s),bi();break;case 5:Cg(s);break;case 1:rr(s.type)&&wl(s);break;case 4:Ph(s,s.stateNode.containerInfo);break;case 10:var c=s.type._context,f=s.memoizedProps.value;Fe(xl,c._currentValue),c._currentValue=f;break;case 13:if(c=s.memoizedState,c!==null)return c.dehydrated!==null?(Fe(Qe,Qe.current&1),s.flags|=128,null):(l&s.child.childLanes)!==0?d0(n,s,l):(Fe(Qe,Qe.current&1),n=In(n,s,l),n!==null?n.sibling:null);Fe(Qe,Qe.current&1);break;case 19:if(c=(l&s.childLanes)!==0,(n.flags&128)!==0){if(c)return p0(n,s,l);s.flags|=128}if(f=s.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),Fe(Qe,Qe.current),c)break;return null;case 22:case 23:return s.lanes=0,a0(n,s,l)}return In(n,s,l)}var m0,Zh,g0,y0;m0=function(n,s){for(var l=s.child;l!==null;){if(l.tag===5||l.tag===6)n.appendChild(l.stateNode);else if(l.tag!==4&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===s)break;for(;l.sibling===null;){if(l.return===null||l.return===s)return;l=l.return}l.sibling.return=l.return,l=l.sibling}},Zh=function(){},g0=function(n,s,l,c){var f=n.memoizedProps;if(f!==c){n=s.stateNode,Fs(cn.current);var m=null;switch(l){case"input":f=Rn(n,f),c=Rn(n,c),m=[];break;case"select":f=J({},f,{value:void 0}),c=J({},c,{value:void 0}),m=[];break;case"textarea":f=Wt(n,f),c=Wt(n,c),m=[];break;default:typeof f.onClick!="function"&&typeof c.onClick=="function"&&(n.onclick=gl)}Nc(l,c);var w;l=null;for(L in f)if(!c.hasOwnProperty(L)&&f.hasOwnProperty(L)&&f[L]!=null)if(L==="style"){var b=f[L];for(w in b)b.hasOwnProperty(w)&&(l||(l={}),l[w]="")}else L!=="dangerouslySetInnerHTML"&&L!=="children"&&L!=="suppressContentEditableWarning"&&L!=="suppressHydrationWarning"&&L!=="autoFocus"&&(o.hasOwnProperty(L)?m||(m=[]):(m=m||[]).push(L,null));for(L in c){var C=c[L];if(b=f!=null?f[L]:void 0,c.hasOwnProperty(L)&&C!==b&&(C!=null||b!=null))if(L==="style")if(b){for(w in b)!b.hasOwnProperty(w)||C&&C.hasOwnProperty(w)||(l||(l={}),l[w]="");for(w in C)C.hasOwnProperty(w)&&b[w]!==C[w]&&(l||(l={}),l[w]=C[w])}else l||(m||(m=[]),m.push(L,l)),l=C;else L==="dangerouslySetInnerHTML"?(C=C?C.__html:void 0,b=b?b.__html:void 0,C!=null&&b!==C&&(m=m||[]).push(L,C)):L==="children"?typeof C!="string"&&typeof C!="number"||(m=m||[]).push(L,""+C):L!=="suppressContentEditableWarning"&&L!=="suppressHydrationWarning"&&(o.hasOwnProperty(L)?(C!=null&&L==="onScroll"&&ze("scroll",n),m||b===C||(m=[])):(m=m||[]).push(L,C))}l&&(m=m||[]).push("style",l);var L=m;(s.updateQueue=L)&&(s.flags|=4)}},y0=function(n,s,l,c){l!==c&&(s.flags|=4)};function na(n,s){if(!He)switch(n.tailMode){case"hidden":s=n.tail;for(var l=null;s!==null;)s.alternate!==null&&(l=s),s=s.sibling;l===null?n.tail=null:l.sibling=null;break;case"collapsed":l=n.tail;for(var c=null;l!==null;)l.alternate!==null&&(c=l),l=l.sibling;c===null?s||n.tail===null?n.tail=null:n.tail.sibling=null:c.sibling=null}}function Mt(n){var s=n.alternate!==null&&n.alternate.child===n.child,l=0,c=0;if(s)for(var f=n.child;f!==null;)l|=f.lanes|f.childLanes,c|=f.subtreeFlags&14680064,c|=f.flags&14680064,f.return=n,f=f.sibling;else for(f=n.child;f!==null;)l|=f.lanes|f.childLanes,c|=f.subtreeFlags,c|=f.flags,f.return=n,f=f.sibling;return n.subtreeFlags|=c,n.childLanes=l,s}function p4(n,s,l){var c=s.pendingProps;switch(Eh(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Mt(s),null;case 1:return rr(s.type)&&vl(),Mt(s),null;case 3:return c=s.stateNode,Ci(),Ve(tr),Ve(Ut),Ih(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(n===null||n.child===null)&&(kl(s)?s.flags|=4:n===null||n.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Jr!==null&&(cd(Jr),Jr=null))),Zh(n,s),Mt(s),null;case 5:Oh(s);var f=Fs(Qo.current);if(l=s.type,n!==null&&s.stateNode!=null)g0(n,s,l,c,f),n.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!c){if(s.stateNode===null)throw Error(r(166));return Mt(s),null}if(n=Fs(cn.current),kl(s)){c=s.stateNode,l=s.type;var m=s.memoizedProps;switch(c[un]=s,c[Go]=m,n=(s.mode&1)!==0,l){case"dialog":ze("cancel",c),ze("close",c);break;case"iframe":case"object":case"embed":ze("load",c);break;case"video":case"audio":for(f=0;f<Wo.length;f++)ze(Wo[f],c);break;case"source":ze("error",c);break;case"img":case"image":case"link":ze("error",c),ze("load",c);break;case"details":ze("toggle",c);break;case"input":Rr(c,m),ze("invalid",c);break;case"select":c._wrapperState={wasMultiple:!!m.multiple},ze("invalid",c);break;case"textarea":er(c,m),ze("invalid",c)}Nc(l,m),f=null;for(var w in m)if(m.hasOwnProperty(w)){var b=m[w];w==="children"?typeof b=="string"?c.textContent!==b&&(m.suppressHydrationWarning!==!0&&ml(c.textContent,b,n),f=["children",b]):typeof b=="number"&&c.textContent!==""+b&&(m.suppressHydrationWarning!==!0&&ml(c.textContent,b,n),f=["children",""+b]):o.hasOwnProperty(w)&&b!=null&&w==="onScroll"&&ze("scroll",c)}switch(l){case"input":xn(c),Hr(c,m,!0);break;case"textarea":xn(c),ui(c);break;case"select":case"option":break;default:typeof m.onClick=="function"&&(c.onclick=gl)}c=f,s.updateQueue=c,c!==null&&(s.flags|=4)}else{w=f.nodeType===9?f:f.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=Ga(l)),n==="http://www.w3.org/1999/xhtml"?l==="script"?(n=w.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof c.is=="string"?n=w.createElement(l,{is:c.is}):(n=w.createElement(l),l==="select"&&(w=n,c.multiple?w.multiple=!0:c.size&&(w.size=c.size))):n=w.createElementNS(n,l),n[un]=s,n[Go]=c,m0(n,s,!1,!1),s.stateNode=n;e:{switch(w=Ic(l,c),l){case"dialog":ze("cancel",n),ze("close",n),f=c;break;case"iframe":case"object":case"embed":ze("load",n),f=c;break;case"video":case"audio":for(f=0;f<Wo.length;f++)ze(Wo[f],n);f=c;break;case"source":ze("error",n),f=c;break;case"img":case"image":case"link":ze("error",n),ze("load",n),f=c;break;case"details":ze("toggle",n),f=c;break;case"input":Rr(n,c),f=Rn(n,c),ze("invalid",n);break;case"option":f=c;break;case"select":n._wrapperState={wasMultiple:!!c.multiple},f=J({},c,{value:void 0}),ze("invalid",n);break;case"textarea":er(n,c),f=Wt(n,c),ze("invalid",n);break;default:f=c}Nc(l,f),b=f;for(m in b)if(b.hasOwnProperty(m)){var C=b[m];m==="style"?om(n,C):m==="dangerouslySetInnerHTML"?(C=C?C.__html:void 0,C!=null&&sm(n,C)):m==="children"?typeof C=="string"?(l!=="textarea"||C!=="")&&xo(n,C):typeof C=="number"&&xo(n,""+C):m!=="suppressContentEditableWarning"&&m!=="suppressHydrationWarning"&&m!=="autoFocus"&&(o.hasOwnProperty(m)?C!=null&&m==="onScroll"&&ze("scroll",n):C!=null&&R(n,m,C,w))}switch(l){case"input":xn(n),Hr(n,c,!1);break;case"textarea":xn(n),ui(n);break;case"option":c.value!=null&&n.setAttribute("value",""+he(c.value));break;case"select":n.multiple=!!c.multiple,m=c.value,m!=null?Zt(n,!!c.multiple,m,!1):c.defaultValue!=null&&Zt(n,!!c.multiple,c.defaultValue,!0);break;default:typeof f.onClick=="function"&&(n.onclick=gl)}switch(l){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}}c&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return Mt(s),null;case 6:if(n&&s.stateNode!=null)y0(n,s,n.memoizedProps,c);else{if(typeof c!="string"&&s.stateNode===null)throw Error(r(166));if(l=Fs(Qo.current),Fs(cn.current),kl(s)){if(c=s.stateNode,l=s.memoizedProps,c[un]=s,(m=c.nodeValue!==l)&&(n=pr,n!==null))switch(n.tag){case 3:ml(c.nodeValue,l,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&ml(c.nodeValue,l,(n.mode&1)!==0)}m&&(s.flags|=4)}else c=(l.nodeType===9?l:l.ownerDocument).createTextNode(c),c[un]=s,s.stateNode=c}return Mt(s),null;case 13:if(Ve(Qe),c=s.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(He&&mr!==null&&(s.mode&1)!==0&&(s.flags&128)===0)_g(),bi(),s.flags|=98560,m=!1;else if(m=kl(s),c!==null&&c.dehydrated!==null){if(n===null){if(!m)throw Error(r(318));if(m=s.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(r(317));m[un]=s}else bi(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Mt(s),m=!1}else Jr!==null&&(cd(Jr),Jr=null),m=!0;if(!m)return s.flags&65536?s:null}return(s.flags&128)!==0?(s.lanes=l,s):(c=c!==null,c!==(n!==null&&n.memoizedState!==null)&&c&&(s.child.flags|=8192,(s.mode&1)!==0&&(n===null||(Qe.current&1)!==0?_t===0&&(_t=3):fd())),s.updateQueue!==null&&(s.flags|=4),Mt(s),null);case 4:return Ci(),Zh(n,s),n===null&&Ko(s.stateNode.containerInfo),Mt(s),null;case 10:return Rh(s.type._context),Mt(s),null;case 17:return rr(s.type)&&vl(),Mt(s),null;case 19:if(Ve(Qe),m=s.memoizedState,m===null)return Mt(s),null;if(c=(s.flags&128)!==0,w=m.rendering,w===null)if(c)na(m,!1);else{if(_t!==0||n!==null&&(n.flags&128)!==0)for(n=s.child;n!==null;){if(w=Al(n),w!==null){for(s.flags|=128,na(m,!1),c=w.updateQueue,c!==null&&(s.updateQueue=c,s.flags|=4),s.subtreeFlags=0,c=l,l=s.child;l!==null;)m=l,n=c,m.flags&=14680066,w=m.alternate,w===null?(m.childLanes=0,m.lanes=n,m.child=null,m.subtreeFlags=0,m.memoizedProps=null,m.memoizedState=null,m.updateQueue=null,m.dependencies=null,m.stateNode=null):(m.childLanes=w.childLanes,m.lanes=w.lanes,m.child=w.child,m.subtreeFlags=0,m.deletions=null,m.memoizedProps=w.memoizedProps,m.memoizedState=w.memoizedState,m.updateQueue=w.updateQueue,m.type=w.type,n=w.dependencies,m.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),l=l.sibling;return Fe(Qe,Qe.current&1|2),s.child}n=n.sibling}m.tail!==null&&at()>Oi&&(s.flags|=128,c=!0,na(m,!1),s.lanes=4194304)}else{if(!c)if(n=Al(w),n!==null){if(s.flags|=128,c=!0,l=n.updateQueue,l!==null&&(s.updateQueue=l,s.flags|=4),na(m,!0),m.tail===null&&m.tailMode==="hidden"&&!w.alternate&&!He)return Mt(s),null}else 2*at()-m.renderingStartTime>Oi&&l!==1073741824&&(s.flags|=128,c=!0,na(m,!1),s.lanes=4194304);m.isBackwards?(w.sibling=s.child,s.child=w):(l=m.last,l!==null?l.sibling=w:s.child=w,m.last=w)}return m.tail!==null?(s=m.tail,m.rendering=s,m.tail=s.sibling,m.renderingStartTime=at(),s.sibling=null,l=Qe.current,Fe(Qe,c?l&1|2:l&1),s):(Mt(s),null);case 22:case 23:return dd(),c=s.memoizedState!==null,n!==null&&n.memoizedState!==null!==c&&(s.flags|=8192),c&&(s.mode&1)!==0?(gr&1073741824)!==0&&(Mt(s),s.subtreeFlags&6&&(s.flags|=8192)):Mt(s),null;case 24:return null;case 25:return null}throw Error(r(156,s.tag))}function m4(n,s){switch(Eh(s),s.tag){case 1:return rr(s.type)&&vl(),n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 3:return Ci(),Ve(tr),Ve(Ut),Ih(),n=s.flags,(n&65536)!==0&&(n&128)===0?(s.flags=n&-65537|128,s):null;case 5:return Oh(s),null;case 13:if(Ve(Qe),n=s.memoizedState,n!==null&&n.dehydrated!==null){if(s.alternate===null)throw Error(r(340));bi()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 19:return Ve(Qe),null;case 4:return Ci(),null;case 10:return Rh(s.type._context),null;case 22:case 23:return dd(),null;case 24:return null;default:return null}}var Fl=!1,$t=!1,g4=typeof WeakSet=="function"?WeakSet:Set,Q=null;function ji(n,s){var l=n.ref;if(l!==null)if(typeof l=="function")try{l(null)}catch(c){rt(n,s,c)}else l.current=null}function ed(n,s,l){try{l()}catch(c){rt(n,s,c)}}var v0=!1;function y4(n,s){if(dh=sl,n=Xm(),sh(n)){if("selectionStart"in n)var l={start:n.selectionStart,end:n.selectionEnd};else e:{l=(l=n.ownerDocument)&&l.defaultView||window;var c=l.getSelection&&l.getSelection();if(c&&c.rangeCount!==0){l=c.anchorNode;var f=c.anchorOffset,m=c.focusNode;c=c.focusOffset;try{l.nodeType,m.nodeType}catch{l=null;break e}var w=0,b=-1,C=-1,L=0,W=0,K=n,z=null;t:for(;;){for(var X;K!==l||f!==0&&K.nodeType!==3||(b=w+f),K!==m||c!==0&&K.nodeType!==3||(C=w+c),K.nodeType===3&&(w+=K.nodeValue.length),(X=K.firstChild)!==null;)z=K,K=X;for(;;){if(K===n)break t;if(z===l&&++L===f&&(b=w),z===m&&++W===c&&(C=w),(X=K.nextSibling)!==null)break;K=z,z=K.parentNode}K=X}l=b===-1||C===-1?null:{start:b,end:C}}else l=null}l=l||{start:0,end:0}}else l=null;for(fh={focusedElem:n,selectionRange:l},sl=!1,Q=s;Q!==null;)if(s=Q,n=s.child,(s.subtreeFlags&1028)!==0&&n!==null)n.return=s,Q=n;else for(;Q!==null;){s=Q;try{var re=s.alternate;if((s.flags&1024)!==0)switch(s.tag){case 0:case 11:case 15:break;case 1:if(re!==null){var ne=re.memoizedProps,lt=re.memoizedState,O=s.stateNode,j=O.getSnapshotBeforeUpdate(s.elementType===s.type?ne:Xr(s.type,ne),lt);O.__reactInternalSnapshotBeforeUpdate=j}break;case 3:var N=s.stateNode.containerInfo;N.nodeType===1?N.textContent="":N.nodeType===9&&N.documentElement&&N.removeChild(N.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(r(163))}}catch(H){rt(s,s.return,H)}if(n=s.sibling,n!==null){n.return=s.return,Q=n;break}Q=s.return}return re=v0,v0=!1,re}function sa(n,s,l){var c=s.updateQueue;if(c=c!==null?c.lastEffect:null,c!==null){var f=c=c.next;do{if((f.tag&n)===n){var m=f.destroy;f.destroy=void 0,m!==void 0&&ed(s,l,m)}f=f.next}while(f!==c)}}function Ml(n,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var l=s=s.next;do{if((l.tag&n)===n){var c=l.create;l.destroy=c()}l=l.next}while(l!==s)}}function td(n){var s=n.ref;if(s!==null){var l=n.stateNode;switch(n.tag){case 5:n=l;break;default:n=l}typeof s=="function"?s(n):s.current=n}}function w0(n){var s=n.alternate;s!==null&&(n.alternate=null,w0(s)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(s=n.stateNode,s!==null&&(delete s[un],delete s[Go],delete s[yh],delete s[Z_],delete s[e4])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function _0(n){return n.tag===5||n.tag===3||n.tag===4}function E0(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||_0(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function rd(n,s,l){var c=n.tag;if(c===5||c===6)n=n.stateNode,s?l.nodeType===8?l.parentNode.insertBefore(n,s):l.insertBefore(n,s):(l.nodeType===8?(s=l.parentNode,s.insertBefore(n,l)):(s=l,s.appendChild(n)),l=l._reactRootContainer,l!=null||s.onclick!==null||(s.onclick=gl));else if(c!==4&&(n=n.child,n!==null))for(rd(n,s,l),n=n.sibling;n!==null;)rd(n,s,l),n=n.sibling}function nd(n,s,l){var c=n.tag;if(c===5||c===6)n=n.stateNode,s?l.insertBefore(n,s):l.appendChild(n);else if(c!==4&&(n=n.child,n!==null))for(nd(n,s,l),n=n.sibling;n!==null;)nd(n,s,l),n=n.sibling}var Pt=null,Yr=!1;function us(n,s,l){for(l=l.child;l!==null;)S0(n,s,l),l=l.sibling}function S0(n,s,l){if(ln&&typeof ln.onCommitFiberUnmount=="function")try{ln.onCommitFiberUnmount(Qa,l)}catch{}switch(l.tag){case 5:$t||ji(l,s);case 6:var c=Pt,f=Yr;Pt=null,us(n,s,l),Pt=c,Yr=f,Pt!==null&&(Yr?(n=Pt,l=l.stateNode,n.nodeType===8?n.parentNode.removeChild(l):n.removeChild(l)):Pt.removeChild(l.stateNode));break;case 18:Pt!==null&&(Yr?(n=Pt,l=l.stateNode,n.nodeType===8?gh(n.parentNode,l):n.nodeType===1&&gh(n,l),Do(n)):gh(Pt,l.stateNode));break;case 4:c=Pt,f=Yr,Pt=l.stateNode.containerInfo,Yr=!0,us(n,s,l),Pt=c,Yr=f;break;case 0:case 11:case 14:case 15:if(!$t&&(c=l.updateQueue,c!==null&&(c=c.lastEffect,c!==null))){f=c=c.next;do{var m=f,w=m.destroy;m=m.tag,w!==void 0&&((m&2)!==0||(m&4)!==0)&&ed(l,s,w),f=f.next}while(f!==c)}us(n,s,l);break;case 1:if(!$t&&(ji(l,s),c=l.stateNode,typeof c.componentWillUnmount=="function"))try{c.props=l.memoizedProps,c.state=l.memoizedState,c.componentWillUnmount()}catch(b){rt(l,s,b)}us(n,s,l);break;case 21:us(n,s,l);break;case 22:l.mode&1?($t=(c=$t)||l.memoizedState!==null,us(n,s,l),$t=c):us(n,s,l);break;default:us(n,s,l)}}function k0(n){var s=n.updateQueue;if(s!==null){n.updateQueue=null;var l=n.stateNode;l===null&&(l=n.stateNode=new g4),s.forEach(function(c){var f=T4.bind(null,n,c);l.has(c)||(l.add(c),c.then(f,f))})}}function Qr(n,s){var l=s.deletions;if(l!==null)for(var c=0;c<l.length;c++){var f=l[c];try{var m=n,w=s,b=w;e:for(;b!==null;){switch(b.tag){case 5:Pt=b.stateNode,Yr=!1;break e;case 3:Pt=b.stateNode.containerInfo,Yr=!0;break e;case 4:Pt=b.stateNode.containerInfo,Yr=!0;break e}b=b.return}if(Pt===null)throw Error(r(160));S0(m,w,f),Pt=null,Yr=!1;var C=f.alternate;C!==null&&(C.return=null),f.return=null}catch(L){rt(f,s,L)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)b0(s,n),s=s.sibling}function b0(n,s){var l=n.alternate,c=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(Qr(s,n),dn(n),c&4){try{sa(3,n,n.return),Ml(3,n)}catch(ne){rt(n,n.return,ne)}try{sa(5,n,n.return)}catch(ne){rt(n,n.return,ne)}}break;case 1:Qr(s,n),dn(n),c&512&&l!==null&&ji(l,l.return);break;case 5:if(Qr(s,n),dn(n),c&512&&l!==null&&ji(l,l.return),n.flags&32){var f=n.stateNode;try{xo(f,"")}catch(ne){rt(n,n.return,ne)}}if(c&4&&(f=n.stateNode,f!=null)){var m=n.memoizedProps,w=l!==null?l.memoizedProps:m,b=n.type,C=n.updateQueue;if(n.updateQueue=null,C!==null)try{b==="input"&&m.type==="radio"&&m.name!=null&&Ne(f,m),Ic(b,w);var L=Ic(b,m);for(w=0;w<C.length;w+=2){var W=C[w],K=C[w+1];W==="style"?om(f,K):W==="dangerouslySetInnerHTML"?sm(f,K):W==="children"?xo(f,K):R(f,W,K,L)}switch(b){case"input":dt(f,m);break;case"textarea":bo(f,m);break;case"select":var z=f._wrapperState.wasMultiple;f._wrapperState.wasMultiple=!!m.multiple;var X=m.value;X!=null?Zt(f,!!m.multiple,X,!1):z!==!!m.multiple&&(m.defaultValue!=null?Zt(f,!!m.multiple,m.defaultValue,!0):Zt(f,!!m.multiple,m.multiple?[]:"",!1))}f[Go]=m}catch(ne){rt(n,n.return,ne)}}break;case 6:if(Qr(s,n),dn(n),c&4){if(n.stateNode===null)throw Error(r(162));f=n.stateNode,m=n.memoizedProps;try{f.nodeValue=m}catch(ne){rt(n,n.return,ne)}}break;case 3:if(Qr(s,n),dn(n),c&4&&l!==null&&l.memoizedState.isDehydrated)try{Do(s.containerInfo)}catch(ne){rt(n,n.return,ne)}break;case 4:Qr(s,n),dn(n);break;case 13:Qr(s,n),dn(n),f=n.child,f.flags&8192&&(m=f.memoizedState!==null,f.stateNode.isHidden=m,!m||f.alternate!==null&&f.alternate.memoizedState!==null||(od=at())),c&4&&k0(n);break;case 22:if(W=l!==null&&l.memoizedState!==null,n.mode&1?($t=(L=$t)||W,Qr(s,n),$t=L):Qr(s,n),dn(n),c&8192){if(L=n.memoizedState!==null,(n.stateNode.isHidden=L)&&!W&&(n.mode&1)!==0)for(Q=n,W=n.child;W!==null;){for(K=Q=W;Q!==null;){switch(z=Q,X=z.child,z.tag){case 0:case 11:case 14:case 15:sa(4,z,z.return);break;case 1:ji(z,z.return);var re=z.stateNode;if(typeof re.componentWillUnmount=="function"){c=z,l=z.return;try{s=c,re.props=s.memoizedProps,re.state=s.memoizedState,re.componentWillUnmount()}catch(ne){rt(c,l,ne)}}break;case 5:ji(z,z.return);break;case 22:if(z.memoizedState!==null){R0(K);continue}}X!==null?(X.return=z,Q=X):R0(K)}W=W.sibling}e:for(W=null,K=n;;){if(K.tag===5){if(W===null){W=K;try{f=K.stateNode,L?(m=f.style,typeof m.setProperty=="function"?m.setProperty("display","none","important"):m.display="none"):(b=K.stateNode,C=K.memoizedProps.style,w=C!=null&&C.hasOwnProperty("display")?C.display:null,b.style.display=im("display",w))}catch(ne){rt(n,n.return,ne)}}}else if(K.tag===6){if(W===null)try{K.stateNode.nodeValue=L?"":K.memoizedProps}catch(ne){rt(n,n.return,ne)}}else if((K.tag!==22&&K.tag!==23||K.memoizedState===null||K===n)&&K.child!==null){K.child.return=K,K=K.child;continue}if(K===n)break e;for(;K.sibling===null;){if(K.return===null||K.return===n)break e;W===K&&(W=null),K=K.return}W===K&&(W=null),K.sibling.return=K.return,K=K.sibling}}break;case 19:Qr(s,n),dn(n),c&4&&k0(n);break;case 21:break;default:Qr(s,n),dn(n)}}function dn(n){var s=n.flags;if(s&2){try{e:{for(var l=n.return;l!==null;){if(_0(l)){var c=l;break e}l=l.return}throw Error(r(160))}switch(c.tag){case 5:var f=c.stateNode;c.flags&32&&(xo(f,""),c.flags&=-33);var m=E0(n);nd(n,m,f);break;case 3:case 4:var w=c.stateNode.containerInfo,b=E0(n);rd(n,b,w);break;default:throw Error(r(161))}}catch(C){rt(n,n.return,C)}n.flags&=-3}s&4096&&(n.flags&=-4097)}function v4(n,s,l){Q=n,x0(n)}function x0(n,s,l){for(var c=(n.mode&1)!==0;Q!==null;){var f=Q,m=f.child;if(f.tag===22&&c){var w=f.memoizedState!==null||Fl;if(!w){var b=f.alternate,C=b!==null&&b.memoizedState!==null||$t;b=Fl;var L=$t;if(Fl=w,($t=C)&&!L)for(Q=f;Q!==null;)w=Q,C=w.child,w.tag===22&&w.memoizedState!==null?C0(f):C!==null?(C.return=w,Q=C):C0(f);for(;m!==null;)Q=m,x0(m),m=m.sibling;Q=f,Fl=b,$t=L}T0(n)}else(f.subtreeFlags&8772)!==0&&m!==null?(m.return=f,Q=m):T0(n)}}function T0(n){for(;Q!==null;){var s=Q;if((s.flags&8772)!==0){var l=s.alternate;try{if((s.flags&8772)!==0)switch(s.tag){case 0:case 11:case 15:$t||Ml(5,s);break;case 1:var c=s.stateNode;if(s.flags&4&&!$t)if(l===null)c.componentDidMount();else{var f=s.elementType===s.type?l.memoizedProps:Xr(s.type,l.memoizedProps);c.componentDidUpdate(f,l.memoizedState,c.__reactInternalSnapshotBeforeUpdate)}var m=s.updateQueue;m!==null&&Rg(s,m,c);break;case 3:var w=s.updateQueue;if(w!==null){if(l=null,s.child!==null)switch(s.child.tag){case 5:l=s.child.stateNode;break;case 1:l=s.child.stateNode}Rg(s,w,l)}break;case 5:var b=s.stateNode;if(l===null&&s.flags&4){l=b;var C=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":C.autoFocus&&l.focus();break;case"img":C.src&&(l.src=C.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var L=s.alternate;if(L!==null){var W=L.memoizedState;if(W!==null){var K=W.dehydrated;K!==null&&Do(K)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(r(163))}$t||s.flags&512&&td(s)}catch(z){rt(s,s.return,z)}}if(s===n){Q=null;break}if(l=s.sibling,l!==null){l.return=s.return,Q=l;break}Q=s.return}}function R0(n){for(;Q!==null;){var s=Q;if(s===n){Q=null;break}var l=s.sibling;if(l!==null){l.return=s.return,Q=l;break}Q=s.return}}function C0(n){for(;Q!==null;){var s=Q;try{switch(s.tag){case 0:case 11:case 15:var l=s.return;try{Ml(4,s)}catch(C){rt(s,l,C)}break;case 1:var c=s.stateNode;if(typeof c.componentDidMount=="function"){var f=s.return;try{c.componentDidMount()}catch(C){rt(s,f,C)}}var m=s.return;try{td(s)}catch(C){rt(s,m,C)}break;case 5:var w=s.return;try{td(s)}catch(C){rt(s,w,C)}}}catch(C){rt(s,s.return,C)}if(s===n){Q=null;break}var b=s.sibling;if(b!==null){b.return=s.return,Q=b;break}Q=s.return}}var w4=Math.ceil,$l=D.ReactCurrentDispatcher,sd=D.ReactCurrentOwner,Or=D.ReactCurrentBatchConfig,xe=0,Tt=null,ft=null,Ot=0,gr=0,Pi=ss(0),_t=0,ia=null,$s=0,Bl=0,id=0,oa=null,sr=null,od=0,Oi=1/0,Ln=null,zl=!1,ad=null,cs=null,Vl=!1,hs=null,Wl=0,aa=0,ld=null,Kl=-1,Hl=0;function Ht(){return(xe&6)!==0?at():Kl!==-1?Kl:Kl=at()}function ds(n){return(n.mode&1)===0?1:(xe&2)!==0&&Ot!==0?Ot&-Ot:r4.transition!==null?(Hl===0&&(Hl=Em()),Hl):(n=Ie,n!==0||(n=window.event,n=n===void 0?16:jm(n.type)),n)}function Zr(n,s,l,c){if(50<aa)throw aa=0,ld=null,Error(r(185));Po(n,l,c),((xe&2)===0||n!==Tt)&&(n===Tt&&((xe&2)===0&&(Bl|=l),_t===4&&fs(n,Ot)),ir(n,c),l===1&&xe===0&&(s.mode&1)===0&&(Oi=at()+500,_l&&os()))}function ir(n,s){var l=n.callbackNode;r_(n,s);var c=tl(n,n===Tt?Ot:0);if(c===0)l!==null&&vm(l),n.callbackNode=null,n.callbackPriority=0;else if(s=c&-c,n.callbackPriority!==s){if(l!=null&&vm(l),s===1)n.tag===0?t4(j0.bind(null,n)):mg(j0.bind(null,n)),Y_(function(){(xe&6)===0&&os()}),l=null;else{switch(Sm(c)){case 1:l=Bc;break;case 4:l=wm;break;case 16:l=Ya;break;case 536870912:l=_m;break;default:l=Ya}l=F0(l,A0.bind(null,n))}n.callbackPriority=s,n.callbackNode=l}}function A0(n,s){if(Kl=-1,Hl=0,(xe&6)!==0)throw Error(r(327));var l=n.callbackNode;if(Ni()&&n.callbackNode!==l)return null;var c=tl(n,n===Tt?Ot:0);if(c===0)return null;if((c&30)!==0||(c&n.expiredLanes)!==0||s)s=Gl(n,c);else{s=c;var f=xe;xe|=2;var m=O0();(Tt!==n||Ot!==s)&&(Ln=null,Oi=at()+500,zs(n,s));do try{S4();break}catch(b){P0(n,b)}while(!0);Th(),$l.current=m,xe=f,ft!==null?s=0:(Tt=null,Ot=0,s=_t)}if(s!==0){if(s===2&&(f=zc(n),f!==0&&(c=f,s=ud(n,f))),s===1)throw l=ia,zs(n,0),fs(n,c),ir(n,at()),l;if(s===6)fs(n,c);else{if(f=n.current.alternate,(c&30)===0&&!_4(f)&&(s=Gl(n,c),s===2&&(m=zc(n),m!==0&&(c=m,s=ud(n,m))),s===1))throw l=ia,zs(n,0),fs(n,c),ir(n,at()),l;switch(n.finishedWork=f,n.finishedLanes=c,s){case 0:case 1:throw Error(r(345));case 2:Vs(n,sr,Ln);break;case 3:if(fs(n,c),(c&130023424)===c&&(s=od+500-at(),10<s)){if(tl(n,0)!==0)break;if(f=n.suspendedLanes,(f&c)!==c){Ht(),n.pingedLanes|=n.suspendedLanes&f;break}n.timeoutHandle=mh(Vs.bind(null,n,sr,Ln),s);break}Vs(n,sr,Ln);break;case 4:if(fs(n,c),(c&4194240)===c)break;for(s=n.eventTimes,f=-1;0<c;){var w=31-Gr(c);m=1<<w,w=s[w],w>f&&(f=w),c&=~m}if(c=f,c=at()-c,c=(120>c?120:480>c?480:1080>c?1080:1920>c?1920:3e3>c?3e3:4320>c?4320:1960*w4(c/1960))-c,10<c){n.timeoutHandle=mh(Vs.bind(null,n,sr,Ln),c);break}Vs(n,sr,Ln);break;case 5:Vs(n,sr,Ln);break;default:throw Error(r(329))}}}return ir(n,at()),n.callbackNode===l?A0.bind(null,n):null}function ud(n,s){var l=oa;return n.current.memoizedState.isDehydrated&&(zs(n,s).flags|=256),n=Gl(n,s),n!==2&&(s=sr,sr=l,s!==null&&cd(s)),n}function cd(n){sr===null?sr=n:sr.push.apply(sr,n)}function _4(n){for(var s=n;;){if(s.flags&16384){var l=s.updateQueue;if(l!==null&&(l=l.stores,l!==null))for(var c=0;c<l.length;c++){var f=l[c],m=f.getSnapshot;f=f.value;try{if(!qr(m(),f))return!1}catch{return!1}}}if(l=s.child,s.subtreeFlags&16384&&l!==null)l.return=s,s=l;else{if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function fs(n,s){for(s&=~id,s&=~Bl,n.suspendedLanes|=s,n.pingedLanes&=~s,n=n.expirationTimes;0<s;){var l=31-Gr(s),c=1<<l;n[l]=-1,s&=~c}}function j0(n){if((xe&6)!==0)throw Error(r(327));Ni();var s=tl(n,0);if((s&1)===0)return ir(n,at()),null;var l=Gl(n,s);if(n.tag!==0&&l===2){var c=zc(n);c!==0&&(s=c,l=ud(n,c))}if(l===1)throw l=ia,zs(n,0),fs(n,s),ir(n,at()),l;if(l===6)throw Error(r(345));return n.finishedWork=n.current.alternate,n.finishedLanes=s,Vs(n,sr,Ln),ir(n,at()),null}function hd(n,s){var l=xe;xe|=1;try{return n(s)}finally{xe=l,xe===0&&(Oi=at()+500,_l&&os())}}function Bs(n){hs!==null&&hs.tag===0&&(xe&6)===0&&Ni();var s=xe;xe|=1;var l=Or.transition,c=Ie;try{if(Or.transition=null,Ie=1,n)return n()}finally{Ie=c,Or.transition=l,xe=s,(xe&6)===0&&os()}}function dd(){gr=Pi.current,Ve(Pi)}function zs(n,s){n.finishedWork=null,n.finishedLanes=0;var l=n.timeoutHandle;if(l!==-1&&(n.timeoutHandle=-1,X_(l)),ft!==null)for(l=ft.return;l!==null;){var c=l;switch(Eh(c),c.tag){case 1:c=c.type.childContextTypes,c!=null&&vl();break;case 3:Ci(),Ve(tr),Ve(Ut),Ih();break;case 5:Oh(c);break;case 4:Ci();break;case 13:Ve(Qe);break;case 19:Ve(Qe);break;case 10:Rh(c.type._context);break;case 22:case 23:dd()}l=l.return}if(Tt=n,ft=n=ps(n.current,null),Ot=gr=s,_t=0,ia=null,id=Bl=$s=0,sr=oa=null,Us!==null){for(s=0;s<Us.length;s++)if(l=Us[s],c=l.interleaved,c!==null){l.interleaved=null;var f=c.next,m=l.pending;if(m!==null){var w=m.next;m.next=f,c.next=w}l.pending=c}Us=null}return n}function P0(n,s){do{var l=ft;try{if(Th(),jl.current=Il,Pl){for(var c=Ze.memoizedState;c!==null;){var f=c.queue;f!==null&&(f.pending=null),c=c.next}Pl=!1}if(Ms=0,xt=wt=Ze=null,Zo=!1,ea=0,sd.current=null,l===null||l.return===null){_t=1,ia=s,ft=null;break}e:{var m=n,w=l.return,b=l,C=s;if(s=Ot,b.flags|=32768,C!==null&&typeof C=="object"&&typeof C.then=="function"){var L=C,W=b,K=W.tag;if((W.mode&1)===0&&(K===0||K===11||K===15)){var z=W.alternate;z?(W.updateQueue=z.updateQueue,W.memoizedState=z.memoizedState,W.lanes=z.lanes):(W.updateQueue=null,W.memoizedState=null)}var X=r0(w);if(X!==null){X.flags&=-257,n0(X,w,b,m,s),X.mode&1&&t0(m,L,s),s=X,C=L;var re=s.updateQueue;if(re===null){var ne=new Set;ne.add(C),s.updateQueue=ne}else re.add(C);break e}else{if((s&1)===0){t0(m,L,s),fd();break e}C=Error(r(426))}}else if(He&&b.mode&1){var lt=r0(w);if(lt!==null){(lt.flags&65536)===0&&(lt.flags|=256),n0(lt,w,b,m,s),bh(Ai(C,b));break e}}m=C=Ai(C,b),_t!==4&&(_t=2),oa===null?oa=[m]:oa.push(m),m=w;do{switch(m.tag){case 3:m.flags|=65536,s&=-s,m.lanes|=s;var O=Zg(m,C,s);Tg(m,O);break e;case 1:b=C;var j=m.type,N=m.stateNode;if((m.flags&128)===0&&(typeof j.getDerivedStateFromError=="function"||N!==null&&typeof N.componentDidCatch=="function"&&(cs===null||!cs.has(N)))){m.flags|=65536,s&=-s,m.lanes|=s;var H=e0(m,b,s);Tg(m,H);break e}}m=m.return}while(m!==null)}I0(l)}catch(ie){s=ie,ft===l&&l!==null&&(ft=l=l.return);continue}break}while(!0)}function O0(){var n=$l.current;return $l.current=Il,n===null?Il:n}function fd(){(_t===0||_t===3||_t===2)&&(_t=4),Tt===null||($s&268435455)===0&&(Bl&268435455)===0||fs(Tt,Ot)}function Gl(n,s){var l=xe;xe|=2;var c=O0();(Tt!==n||Ot!==s)&&(Ln=null,zs(n,s));do try{E4();break}catch(f){P0(n,f)}while(!0);if(Th(),xe=l,$l.current=c,ft!==null)throw Error(r(261));return Tt=null,Ot=0,_t}function E4(){for(;ft!==null;)N0(ft)}function S4(){for(;ft!==null&&!G3();)N0(ft)}function N0(n){var s=U0(n.alternate,n,gr);n.memoizedProps=n.pendingProps,s===null?I0(n):ft=s,sd.current=null}function I0(n){var s=n;do{var l=s.alternate;if(n=s.return,(s.flags&32768)===0){if(l=p4(l,s,gr),l!==null){ft=l;return}}else{if(l=m4(l,s),l!==null){l.flags&=32767,ft=l;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{_t=6,ft=null;return}}if(s=s.sibling,s!==null){ft=s;return}ft=s=n}while(s!==null);_t===0&&(_t=5)}function Vs(n,s,l){var c=Ie,f=Or.transition;try{Or.transition=null,Ie=1,k4(n,s,l,c)}finally{Or.transition=f,Ie=c}return null}function k4(n,s,l,c){do Ni();while(hs!==null);if((xe&6)!==0)throw Error(r(327));l=n.finishedWork;var f=n.finishedLanes;if(l===null)return null;if(n.finishedWork=null,n.finishedLanes=0,l===n.current)throw Error(r(177));n.callbackNode=null,n.callbackPriority=0;var m=l.lanes|l.childLanes;if(n_(n,m),n===Tt&&(ft=Tt=null,Ot=0),(l.subtreeFlags&2064)===0&&(l.flags&2064)===0||Vl||(Vl=!0,F0(Ya,function(){return Ni(),null})),m=(l.flags&15990)!==0,(l.subtreeFlags&15990)!==0||m){m=Or.transition,Or.transition=null;var w=Ie;Ie=1;var b=xe;xe|=4,sd.current=null,y4(n,l),b0(l,n),V_(fh),sl=!!dh,fh=dh=null,n.current=l,v4(l),q3(),xe=b,Ie=w,Or.transition=m}else n.current=l;if(Vl&&(Vl=!1,hs=n,Wl=f),m=n.pendingLanes,m===0&&(cs=null),Y3(l.stateNode),ir(n,at()),s!==null)for(c=n.onRecoverableError,l=0;l<s.length;l++)f=s[l],c(f.value,{componentStack:f.stack,digest:f.digest});if(zl)throw zl=!1,n=ad,ad=null,n;return(Wl&1)!==0&&n.tag!==0&&Ni(),m=n.pendingLanes,(m&1)!==0?n===ld?aa++:(aa=0,ld=n):aa=0,os(),null}function Ni(){if(hs!==null){var n=Sm(Wl),s=Or.transition,l=Ie;try{if(Or.transition=null,Ie=16>n?16:n,hs===null)var c=!1;else{if(n=hs,hs=null,Wl=0,(xe&6)!==0)throw Error(r(331));var f=xe;for(xe|=4,Q=n.current;Q!==null;){var m=Q,w=m.child;if((Q.flags&16)!==0){var b=m.deletions;if(b!==null){for(var C=0;C<b.length;C++){var L=b[C];for(Q=L;Q!==null;){var W=Q;switch(W.tag){case 0:case 11:case 15:sa(8,W,m)}var K=W.child;if(K!==null)K.return=W,Q=K;else for(;Q!==null;){W=Q;var z=W.sibling,X=W.return;if(w0(W),W===L){Q=null;break}if(z!==null){z.return=X,Q=z;break}Q=X}}}var re=m.alternate;if(re!==null){var ne=re.child;if(ne!==null){re.child=null;do{var lt=ne.sibling;ne.sibling=null,ne=lt}while(ne!==null)}}Q=m}}if((m.subtreeFlags&2064)!==0&&w!==null)w.return=m,Q=w;else e:for(;Q!==null;){if(m=Q,(m.flags&2048)!==0)switch(m.tag){case 0:case 11:case 15:sa(9,m,m.return)}var O=m.sibling;if(O!==null){O.return=m.return,Q=O;break e}Q=m.return}}var j=n.current;for(Q=j;Q!==null;){w=Q;var N=w.child;if((w.subtreeFlags&2064)!==0&&N!==null)N.return=w,Q=N;else e:for(w=j;Q!==null;){if(b=Q,(b.flags&2048)!==0)try{switch(b.tag){case 0:case 11:case 15:Ml(9,b)}}catch(ie){rt(b,b.return,ie)}if(b===w){Q=null;break e}var H=b.sibling;if(H!==null){H.return=b.return,Q=H;break e}Q=b.return}}if(xe=f,os(),ln&&typeof ln.onPostCommitFiberRoot=="function")try{ln.onPostCommitFiberRoot(Qa,n)}catch{}c=!0}return c}finally{Ie=l,Or.transition=s}}return!1}function L0(n,s,l){s=Ai(l,s),s=Zg(n,s,1),n=ls(n,s,1),s=Ht(),n!==null&&(Po(n,1,s),ir(n,s))}function rt(n,s,l){if(n.tag===3)L0(n,n,l);else for(;s!==null;){if(s.tag===3){L0(s,n,l);break}else if(s.tag===1){var c=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(cs===null||!cs.has(c))){n=Ai(l,n),n=e0(s,n,1),s=ls(s,n,1),n=Ht(),s!==null&&(Po(s,1,n),ir(s,n));break}}s=s.return}}function b4(n,s,l){var c=n.pingCache;c!==null&&c.delete(s),s=Ht(),n.pingedLanes|=n.suspendedLanes&l,Tt===n&&(Ot&l)===l&&(_t===4||_t===3&&(Ot&130023424)===Ot&&500>at()-od?zs(n,0):id|=l),ir(n,s)}function D0(n,s){s===0&&((n.mode&1)===0?s=1:(s=el,el<<=1,(el&130023424)===0&&(el=4194304)));var l=Ht();n=On(n,s),n!==null&&(Po(n,s,l),ir(n,l))}function x4(n){var s=n.memoizedState,l=0;s!==null&&(l=s.retryLane),D0(n,l)}function T4(n,s){var l=0;switch(n.tag){case 13:var c=n.stateNode,f=n.memoizedState;f!==null&&(l=f.retryLane);break;case 19:c=n.stateNode;break;default:throw Error(r(314))}c!==null&&c.delete(s),D0(n,l)}var U0;U0=function(n,s,l){if(n!==null)if(n.memoizedProps!==s.pendingProps||tr.current)nr=!0;else{if((n.lanes&l)===0&&(s.flags&128)===0)return nr=!1,f4(n,s,l);nr=(n.flags&131072)!==0}else nr=!1,He&&(s.flags&1048576)!==0&&gg(s,Sl,s.index);switch(s.lanes=0,s.tag){case 2:var c=s.type;Ul(n,s),n=s.pendingProps;var f=Ei(s,Ut.current);Ri(s,l),f=Uh(null,s,c,n,f,l);var m=Fh();return s.flags|=1,typeof f=="object"&&f!==null&&typeof f.render=="function"&&f.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,rr(c)?(m=!0,wl(s)):m=!1,s.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,jh(s),f.updater=Ll,s.stateNode=f,f._reactInternals=s,Wh(s,c,n,l),s=qh(null,s,c,!0,m,l)):(s.tag=0,He&&m&&_h(s),Kt(null,s,f,l),s=s.child),s;case 16:c=s.elementType;e:{switch(Ul(n,s),n=s.pendingProps,f=c._init,c=f(c._payload),s.type=c,f=s.tag=C4(c),n=Xr(c,n),f){case 0:s=Gh(null,s,c,n,l);break e;case 1:s=u0(null,s,c,n,l);break e;case 11:s=s0(null,s,c,n,l);break e;case 14:s=i0(null,s,c,Xr(c.type,n),l);break e}throw Error(r(306,c,""))}return s;case 0:return c=s.type,f=s.pendingProps,f=s.elementType===c?f:Xr(c,f),Gh(n,s,c,f,l);case 1:return c=s.type,f=s.pendingProps,f=s.elementType===c?f:Xr(c,f),u0(n,s,c,f,l);case 3:e:{if(c0(s),n===null)throw Error(r(387));c=s.pendingProps,m=s.memoizedState,f=m.element,xg(n,s),Cl(s,c,null,l);var w=s.memoizedState;if(c=w.element,m.isDehydrated)if(m={element:c,isDehydrated:!1,cache:w.cache,pendingSuspenseBoundaries:w.pendingSuspenseBoundaries,transitions:w.transitions},s.updateQueue.baseState=m,s.memoizedState=m,s.flags&256){f=Ai(Error(r(423)),s),s=h0(n,s,c,l,f);break e}else if(c!==f){f=Ai(Error(r(424)),s),s=h0(n,s,c,l,f);break e}else for(mr=ns(s.stateNode.containerInfo.firstChild),pr=s,He=!0,Jr=null,l=kg(s,null,c,l),s.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling;else{if(bi(),c===f){s=In(n,s,l);break e}Kt(n,s,c,l)}s=s.child}return s;case 5:return Cg(s),n===null&&kh(s),c=s.type,f=s.pendingProps,m=n!==null?n.memoizedProps:null,w=f.children,ph(c,f)?w=null:m!==null&&ph(c,m)&&(s.flags|=32),l0(n,s),Kt(n,s,w,l),s.child;case 6:return n===null&&kh(s),null;case 13:return d0(n,s,l);case 4:return Ph(s,s.stateNode.containerInfo),c=s.pendingProps,n===null?s.child=xi(s,null,c,l):Kt(n,s,c,l),s.child;case 11:return c=s.type,f=s.pendingProps,f=s.elementType===c?f:Xr(c,f),s0(n,s,c,f,l);case 7:return Kt(n,s,s.pendingProps,l),s.child;case 8:return Kt(n,s,s.pendingProps.children,l),s.child;case 12:return Kt(n,s,s.pendingProps.children,l),s.child;case 10:e:{if(c=s.type._context,f=s.pendingProps,m=s.memoizedProps,w=f.value,Fe(xl,c._currentValue),c._currentValue=w,m!==null)if(qr(m.value,w)){if(m.children===f.children&&!tr.current){s=In(n,s,l);break e}}else for(m=s.child,m!==null&&(m.return=s);m!==null;){var b=m.dependencies;if(b!==null){w=m.child;for(var C=b.firstContext;C!==null;){if(C.context===c){if(m.tag===1){C=Nn(-1,l&-l),C.tag=2;var L=m.updateQueue;if(L!==null){L=L.shared;var W=L.pending;W===null?C.next=C:(C.next=W.next,W.next=C),L.pending=C}}m.lanes|=l,C=m.alternate,C!==null&&(C.lanes|=l),Ch(m.return,l,s),b.lanes|=l;break}C=C.next}}else if(m.tag===10)w=m.type===s.type?null:m.child;else if(m.tag===18){if(w=m.return,w===null)throw Error(r(341));w.lanes|=l,b=w.alternate,b!==null&&(b.lanes|=l),Ch(w,l,s),w=m.sibling}else w=m.child;if(w!==null)w.return=m;else for(w=m;w!==null;){if(w===s){w=null;break}if(m=w.sibling,m!==null){m.return=w.return,w=m;break}w=w.return}m=w}Kt(n,s,f.children,l),s=s.child}return s;case 9:return f=s.type,c=s.pendingProps.children,Ri(s,l),f=jr(f),c=c(f),s.flags|=1,Kt(n,s,c,l),s.child;case 14:return c=s.type,f=Xr(c,s.pendingProps),f=Xr(c.type,f),i0(n,s,c,f,l);case 15:return o0(n,s,s.type,s.pendingProps,l);case 17:return c=s.type,f=s.pendingProps,f=s.elementType===c?f:Xr(c,f),Ul(n,s),s.tag=1,rr(c)?(n=!0,wl(s)):n=!1,Ri(s,l),Yg(s,c,f),Wh(s,c,f,l),qh(null,s,c,!0,n,l);case 19:return p0(n,s,l);case 22:return a0(n,s,l)}throw Error(r(156,s.tag))};function F0(n,s){return ym(n,s)}function R4(n,s,l,c){this.tag=n,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Nr(n,s,l,c){return new R4(n,s,l,c)}function pd(n){return n=n.prototype,!(!n||!n.isReactComponent)}function C4(n){if(typeof n=="function")return pd(n)?1:0;if(n!=null){if(n=n.$$typeof,n===je)return 11;if(n===Ke)return 14}return 2}function ps(n,s){var l=n.alternate;return l===null?(l=Nr(n.tag,s,n.key,n.mode),l.elementType=n.elementType,l.type=n.type,l.stateNode=n.stateNode,l.alternate=n,n.alternate=l):(l.pendingProps=s,l.type=n.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=n.flags&14680064,l.childLanes=n.childLanes,l.lanes=n.lanes,l.child=n.child,l.memoizedProps=n.memoizedProps,l.memoizedState=n.memoizedState,l.updateQueue=n.updateQueue,s=n.dependencies,l.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},l.sibling=n.sibling,l.index=n.index,l.ref=n.ref,l}function ql(n,s,l,c,f,m){var w=2;if(c=n,typeof n=="function")pd(n)&&(w=1);else if(typeof n=="string")w=5;else e:switch(n){case B:return Ws(l.children,f,m,s);case M:w=8,f|=8;break;case te:return n=Nr(12,l,s,f|2),n.elementType=te,n.lanes=m,n;case kt:return n=Nr(13,l,s,f),n.elementType=kt,n.lanes=m,n;case bt:return n=Nr(19,l,s,f),n.elementType=bt,n.lanes=m,n;case be:return Jl(l,f,m,s);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case ve:w=10;break e;case Ae:w=9;break e;case je:w=11;break e;case Ke:w=14;break e;case ht:w=16,c=null;break e}throw Error(r(130,n==null?n:typeof n,""))}return s=Nr(w,l,s,f),s.elementType=n,s.type=c,s.lanes=m,s}function Ws(n,s,l,c){return n=Nr(7,n,c,s),n.lanes=l,n}function Jl(n,s,l,c){return n=Nr(22,n,c,s),n.elementType=be,n.lanes=l,n.stateNode={isHidden:!1},n}function md(n,s,l){return n=Nr(6,n,null,s),n.lanes=l,n}function gd(n,s,l){return s=Nr(4,n.children!==null?n.children:[],n.key,s),s.lanes=l,s.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},s}function A4(n,s,l,c,f){this.tag=s,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Vc(0),this.expirationTimes=Vc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Vc(0),this.identifierPrefix=c,this.onRecoverableError=f,this.mutableSourceEagerHydrationData=null}function yd(n,s,l,c,f,m,w,b,C){return n=new A4(n,s,l,b,C),s===1?(s=1,m===!0&&(s|=8)):s=0,m=Nr(3,null,null,s),n.current=m,m.stateNode=n,m.memoizedState={element:c,isDehydrated:l,cache:null,transitions:null,pendingSuspenseBoundaries:null},jh(m),n}function j4(n,s,l){var c=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:F,key:c==null?null:""+c,children:n,containerInfo:s,implementation:l}}function M0(n){if(!n)return is;n=n._reactInternals;e:{if(Os(n)!==n||n.tag!==1)throw Error(r(170));var s=n;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(rr(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(r(171))}if(n.tag===1){var l=n.type;if(rr(l))return fg(n,l,s)}return s}function $0(n,s,l,c,f,m,w,b,C){return n=yd(l,c,!0,n,f,m,w,b,C),n.context=M0(null),l=n.current,c=Ht(),f=ds(l),m=Nn(c,f),m.callback=s??null,ls(l,m,f),n.current.lanes=f,Po(n,f,c),ir(n,c),n}function Xl(n,s,l,c){var f=s.current,m=Ht(),w=ds(f);return l=M0(l),s.context===null?s.context=l:s.pendingContext=l,s=Nn(m,w),s.payload={element:n},c=c===void 0?null:c,c!==null&&(s.callback=c),n=ls(f,s,w),n!==null&&(Zr(n,f,w,m),Rl(n,f,w)),w}function Yl(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function B0(n,s){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var l=n.retryLane;n.retryLane=l!==0&&l<s?l:s}}function vd(n,s){B0(n,s),(n=n.alternate)&&B0(n,s)}function P4(){return null}var z0=typeof reportError=="function"?reportError:function(n){console.error(n)};function wd(n){this._internalRoot=n}Ql.prototype.render=wd.prototype.render=function(n){var s=this._internalRoot;if(s===null)throw Error(r(409));Xl(n,s,null,null)},Ql.prototype.unmount=wd.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var s=n.containerInfo;Bs(function(){Xl(null,n,null,null)}),s[Cn]=null}};function Ql(n){this._internalRoot=n}Ql.prototype.unstable_scheduleHydration=function(n){if(n){var s=xm();n={blockedOn:null,target:n,priority:s};for(var l=0;l<es.length&&s!==0&&s<es[l].priority;l++);es.splice(l,0,n),l===0&&Cm(n)}};function _d(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function Zl(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function V0(){}function O4(n,s,l,c,f){if(f){if(typeof c=="function"){var m=c;c=function(){var L=Yl(w);m.call(L)}}var w=$0(s,c,n,0,null,!1,!1,"",V0);return n._reactRootContainer=w,n[Cn]=w.current,Ko(n.nodeType===8?n.parentNode:n),Bs(),w}for(;f=n.lastChild;)n.removeChild(f);if(typeof c=="function"){var b=c;c=function(){var L=Yl(C);b.call(L)}}var C=yd(n,0,!1,null,null,!1,!1,"",V0);return n._reactRootContainer=C,n[Cn]=C.current,Ko(n.nodeType===8?n.parentNode:n),Bs(function(){Xl(s,C,l,c)}),C}function eu(n,s,l,c,f){var m=l._reactRootContainer;if(m){var w=m;if(typeof f=="function"){var b=f;f=function(){var C=Yl(w);b.call(C)}}Xl(s,w,n,f)}else w=O4(l,s,n,f,c);return Yl(w)}km=function(n){switch(n.tag){case 3:var s=n.stateNode;if(s.current.memoizedState.isDehydrated){var l=jo(s.pendingLanes);l!==0&&(Wc(s,l|1),ir(s,at()),(xe&6)===0&&(Oi=at()+500,os()))}break;case 13:Bs(function(){var c=On(n,1);if(c!==null){var f=Ht();Zr(c,n,1,f)}}),vd(n,1)}},Kc=function(n){if(n.tag===13){var s=On(n,134217728);if(s!==null){var l=Ht();Zr(s,n,134217728,l)}vd(n,134217728)}},bm=function(n){if(n.tag===13){var s=ds(n),l=On(n,s);if(l!==null){var c=Ht();Zr(l,n,s,c)}vd(n,s)}},xm=function(){return Ie},Tm=function(n,s){var l=Ie;try{return Ie=n,s()}finally{Ie=l}},Uc=function(n,s,l){switch(s){case"input":if(dt(n,l),s=l.name,l.type==="radio"&&s!=null){for(l=n;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<l.length;s++){var c=l[s];if(c!==n&&c.form===n.form){var f=yl(c);if(!f)throw Error(r(90));tt(c),dt(c,f)}}}break;case"textarea":bo(n,l);break;case"select":s=l.value,s!=null&&Zt(n,!!l.multiple,s,!1)}},cm=hd,hm=Bs;var N4={usingClientEntryPoint:!1,Events:[qo,wi,yl,lm,um,hd]},la={findFiberByHostInstance:Ns,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},I4={bundleType:la.bundleType,version:la.version,rendererPackageName:la.rendererPackageName,rendererConfig:la.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:D.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=mm(n),n===null?null:n.stateNode},findFiberByHostInstance:la.findFiberByHostInstance||P4,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var tu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!tu.isDisabled&&tu.supportsFiber)try{Qa=tu.inject(I4),ln=tu}catch{}}return or.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=N4,or.createPortal=function(n,s){var l=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!_d(s))throw Error(r(200));return j4(n,s,null,l)},or.createRoot=function(n,s){if(!_d(n))throw Error(r(299));var l=!1,c="",f=z0;return s!=null&&(s.unstable_strictMode===!0&&(l=!0),s.identifierPrefix!==void 0&&(c=s.identifierPrefix),s.onRecoverableError!==void 0&&(f=s.onRecoverableError)),s=yd(n,1,!1,null,null,l,!1,c,f),n[Cn]=s.current,Ko(n.nodeType===8?n.parentNode:n),new wd(s)},or.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var s=n._reactInternals;if(s===void 0)throw typeof n.render=="function"?Error(r(188)):(n=Object.keys(n).join(","),Error(r(268,n)));return n=mm(s),n=n===null?null:n.stateNode,n},or.flushSync=function(n){return Bs(n)},or.hydrate=function(n,s,l){if(!Zl(s))throw Error(r(200));return eu(null,n,s,!0,l)},or.hydrateRoot=function(n,s,l){if(!_d(n))throw Error(r(405));var c=l!=null&&l.hydratedSources||null,f=!1,m="",w=z0;if(l!=null&&(l.unstable_strictMode===!0&&(f=!0),l.identifierPrefix!==void 0&&(m=l.identifierPrefix),l.onRecoverableError!==void 0&&(w=l.onRecoverableError)),s=$0(s,null,n,1,l??null,f,!1,m,w),n[Cn]=s.current,Ko(n),c)for(n=0;n<c.length;n++)l=c[n],f=l._getVersion,f=f(l._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[l,f]:s.mutableSourceEagerHydrationData.push(l,f);return new Ql(s)},or.render=function(n,s,l){if(!Zl(s))throw Error(r(200));return eu(null,n,s,!1,l)},or.unmountComponentAtNode=function(n){if(!Zl(n))throw Error(r(40));return n._reactRootContainer?(Bs(function(){eu(null,null,n,!1,function(){n._reactRootContainer=null,n[Cn]=null})}),!0):!1},or.unstable_batchedUpdates=hd,or.unstable_renderSubtreeIntoContainer=function(n,s,l,c){if(!Zl(l))throw Error(r(200));if(n==null||n._reactInternals===void 0)throw Error(r(38));return eu(n,s,l,!1,c)},or.version="18.3.1-next-f1338f8080-20240426",or}var Z0;function H4(){if(Z0)return kd.exports;Z0=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),kd.exports=K4(),kd.exports}var e1;function G4(){if(e1)return ru;e1=1;var e=H4();return ru.createRoot=e.createRoot,ru.hydrateRoot=e.hydrateRoot,ru}var q4=G4();/**
 * react-router v7.10.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var t1="popstate";function J4(e={}){function t(i,o){let{pathname:a,search:u,hash:h}=i.location;return Yd("",{pathname:a,search:u,hash:h},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function r(i,o){return typeof o=="string"?o:Ra(o)}return Y4(t,r,null,e)}function Xe(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Sr(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function X4(){return Math.random().toString(36).substring(2,10)}function r1(e,t){return{usr:e.state,key:e.key,idx:t}}function Yd(e,t,r=null,i){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?lo(t):t,state:r,key:t&&t.key||i||X4()}}function Ra({pathname:e="/",search:t="",hash:r=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function lo(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substring(r),e=e.substring(0,r));let i=e.indexOf("?");i>=0&&(t.search=e.substring(i),e=e.substring(0,i)),e&&(t.pathname=e)}return t}function Y4(e,t,r,i={}){let{window:o=document.defaultView,v5Compat:a=!1}=i,u=o.history,h="POP",d=null,p=y();p==null&&(p=0,u.replaceState({...u.state,idx:p},""));function y(){return(u.state||{idx:null}).idx}function v(){h="POP";let T=y(),A=T==null?null:T-p;p=T,d&&d({action:h,location:k.location,delta:A})}function _(T,A){h="PUSH";let I=Yd(k.location,T,A);p=y()+1;let R=r1(I,p),D=k.createHref(I);try{u.pushState(R,"",D)}catch(V){if(V instanceof DOMException&&V.name==="DataCloneError")throw V;o.location.assign(D)}a&&d&&d({action:h,location:k.location,delta:1})}function E(T,A){h="REPLACE";let I=Yd(k.location,T,A);p=y();let R=r1(I,p),D=k.createHref(I);u.replaceState(R,"",D),a&&d&&d({action:h,location:k.location,delta:0})}function S(T){return Q4(T)}let k={get action(){return h},get location(){return e(o,u)},listen(T){if(d)throw new Error("A history only accepts one active listener");return o.addEventListener(t1,v),d=T,()=>{o.removeEventListener(t1,v),d=null}},createHref(T){return t(o,T)},createURL:S,encodeLocation(T){let A=S(T);return{pathname:A.pathname,search:A.search,hash:A.hash}},push:_,replace:E,go(T){return u.go(T)}};return k}function Q4(e,t=!1){let r="http://localhost";typeof window<"u"&&(r=window.location.origin!=="null"?window.location.origin:window.location.href),Xe(r,"No window.location.(origin|href) available to create URL");let i=typeof e=="string"?e:Ra(e);return i=i.replace(/ $/,"%20"),!t&&i.startsWith("//")&&(i=r+i),new URL(i,r)}function ov(e,t,r="/"){return Z4(e,t,r,!1)}function Z4(e,t,r,i){let o=typeof t=="string"?lo(t):t,a=Hn(o.pathname||"/",r);if(a==null)return null;let u=av(e);eE(u);let h=null;for(let d=0;h==null&&d<u.length;++d){let p=hE(a);h=uE(u[d],p,i)}return h}function av(e,t=[],r=[],i="",o=!1){let a=(u,h,d=o,p)=>{let y={relativePath:p===void 0?u.path||"":p,caseSensitive:u.caseSensitive===!0,childrenIndex:h,route:u};if(y.relativePath.startsWith("/")){if(!y.relativePath.startsWith(i)&&d)return;Xe(y.relativePath.startsWith(i),`Absolute route path "${y.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),y.relativePath=y.relativePath.slice(i.length)}let v=Vn([i,y.relativePath]),_=r.concat(y);u.children&&u.children.length>0&&(Xe(u.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${v}".`),av(u.children,t,_,v,d)),!(u.path==null&&!u.index)&&t.push({path:v,score:aE(v,u.index),routesMeta:_})};return e.forEach((u,h)=>{var d;if(u.path===""||!((d=u.path)!=null&&d.includes("?")))a(u,h);else for(let p of lv(u.path))a(u,h,!0,p)}),t}function lv(e){let t=e.split("/");if(t.length===0)return[];let[r,...i]=t,o=r.endsWith("?"),a=r.replace(/\?$/,"");if(i.length===0)return o?[a,""]:[a];let u=lv(i.join("/")),h=[];return h.push(...u.map(d=>d===""?a:[a,d].join("/"))),o&&h.push(...u),h.map(d=>e.startsWith("/")&&d===""?"/":d)}function eE(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:lE(t.routesMeta.map(i=>i.childrenIndex),r.routesMeta.map(i=>i.childrenIndex)))}var tE=/^:[\w-]+$/,rE=3,nE=2,sE=1,iE=10,oE=-2,n1=e=>e==="*";function aE(e,t){let r=e.split("/"),i=r.length;return r.some(n1)&&(i+=oE),t&&(i+=nE),r.filter(o=>!n1(o)).reduce((o,a)=>o+(tE.test(a)?rE:a===""?sE:iE),i)}function lE(e,t){return e.length===t.length&&e.slice(0,-1).every((i,o)=>i===t[o])?e[e.length-1]-t[t.length-1]:0}function uE(e,t,r=!1){let{routesMeta:i}=e,o={},a="/",u=[];for(let h=0;h<i.length;++h){let d=i[h],p=h===i.length-1,y=a==="/"?t:t.slice(a.length)||"/",v=Ou({path:d.relativePath,caseSensitive:d.caseSensitive,end:p},y),_=d.route;if(!v&&p&&r&&!i[i.length-1].route.index&&(v=Ou({path:d.relativePath,caseSensitive:d.caseSensitive,end:!1},y)),!v)return null;Object.assign(o,v.params),u.push({params:o,pathname:Vn([a,v.pathname]),pathnameBase:gE(Vn([a,v.pathnameBase])),route:_}),v.pathnameBase!=="/"&&(a=Vn([a,v.pathnameBase]))}return u}function Ou(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,i]=cE(e.path,e.caseSensitive,e.end),o=t.match(r);if(!o)return null;let a=o[0],u=a.replace(/(.)\/+$/,"$1"),h=o.slice(1);return{params:i.reduce((p,{paramName:y,isOptional:v},_)=>{if(y==="*"){let S=h[_]||"";u=a.slice(0,a.length-S.length).replace(/(.)\/+$/,"$1")}const E=h[_];return v&&!E?p[y]=void 0:p[y]=(E||"").replace(/%2F/g,"/"),p},{}),pathname:a,pathnameBase:u,pattern:e}}function cE(e,t=!1,r=!0){Sr(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let i=[],o="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(u,h,d)=>(i.push({paramName:h,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(i.push({paramName:"*"}),o+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?o+="\\/*$":e!==""&&e!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,t?void 0:"i"),i]}function hE(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Sr(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function Hn(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,i=e.charAt(r);return i&&i!=="/"?null:e.slice(r)||"/"}var dE=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,fE=e=>dE.test(e);function pE(e,t="/"){let{pathname:r,search:i="",hash:o=""}=typeof e=="string"?lo(e):e,a;if(r)if(fE(r))a=r;else{if(r.includes("//")){let u=r;r=r.replace(/\/\/+/g,"/"),Sr(!1,`Pathnames cannot have embedded double slashes - normalizing ${u} -> ${r}`)}r.startsWith("/")?a=s1(r.substring(1),"/"):a=s1(r,t)}else a=t;return{pathname:a,search:yE(i),hash:vE(o)}}function s1(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(o=>{o===".."?r.length>1&&r.pop():o!=="."&&r.push(o)}),r.length>1?r.join("/"):"/"}function Td(e,t,r,i){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function mE(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function Ff(e){let t=mE(e);return t.map((r,i)=>i===t.length-1?r.pathname:r.pathnameBase)}function Mf(e,t,r,i=!1){let o;typeof e=="string"?o=lo(e):(o={...e},Xe(!o.pathname||!o.pathname.includes("?"),Td("?","pathname","search",o)),Xe(!o.pathname||!o.pathname.includes("#"),Td("#","pathname","hash",o)),Xe(!o.search||!o.search.includes("#"),Td("#","search","hash",o)));let a=e===""||o.pathname==="",u=a?"/":o.pathname,h;if(u==null)h=r;else{let v=t.length-1;if(!i&&u.startsWith("..")){let _=u.split("/");for(;_[0]==="..";)_.shift(),v-=1;o.pathname=_.join("/")}h=v>=0?t[v]:"/"}let d=pE(o,h),p=u&&u!=="/"&&u.endsWith("/"),y=(a||u===".")&&r.endsWith("/");return!d.pathname.endsWith("/")&&(p||y)&&(d.pathname+="/"),d}var Vn=e=>e.join("/").replace(/\/\/+/g,"/"),gE=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),yE=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,vE=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function wE(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}function _E(e){return e.map(t=>t.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var uv=["POST","PUT","PATCH","DELETE"];new Set(uv);var EE=["GET",...uv];new Set(EE);var uo=x.createContext(null);uo.displayName="DataRouter";var Zu=x.createContext(null);Zu.displayName="DataRouterState";x.createContext(!1);var cv=x.createContext({isTransitioning:!1});cv.displayName="ViewTransition";var SE=x.createContext(new Map);SE.displayName="Fetchers";var kE=x.createContext(null);kE.displayName="Await";var zr=x.createContext(null);zr.displayName="Navigation";var Ua=x.createContext(null);Ua.displayName="Location";var Sn=x.createContext({outlet:null,matches:[],isDataRoute:!1});Sn.displayName="Route";var $f=x.createContext(null);$f.displayName="RouteError";function bE(e,{relative:t}={}){Xe(co(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:i}=x.useContext(zr),{hash:o,pathname:a,search:u}=Fa(e,{relative:t}),h=a;return r!=="/"&&(h=a==="/"?r:Vn([r,a])),i.createHref({pathname:h,search:u,hash:o})}function co(){return x.useContext(Ua)!=null}function kn(){return Xe(co(),"useLocation() may be used only in the context of a <Router> component."),x.useContext(Ua).location}var hv="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function dv(e){x.useContext(zr).static||x.useLayoutEffect(e)}function Vr(){let{isDataRoute:e}=x.useContext(Sn);return e?UE():xE()}function xE(){Xe(co(),"useNavigate() may be used only in the context of a <Router> component.");let e=x.useContext(uo),{basename:t,navigator:r}=x.useContext(zr),{matches:i}=x.useContext(Sn),{pathname:o}=kn(),a=JSON.stringify(Ff(i)),u=x.useRef(!1);return dv(()=>{u.current=!0}),x.useCallback((d,p={})=>{if(Sr(u.current,hv),!u.current)return;if(typeof d=="number"){r.go(d);return}let y=Mf(d,JSON.parse(a),o,p.relative==="path");e==null&&t!=="/"&&(y.pathname=y.pathname==="/"?t:Vn([t,y.pathname])),(p.replace?r.replace:r.push)(y,p.state,p)},[t,r,a,o,e])}x.createContext(null);function Fa(e,{relative:t}={}){let{matches:r}=x.useContext(Sn),{pathname:i}=kn(),o=JSON.stringify(Ff(r));return x.useMemo(()=>Mf(e,JSON.parse(o),i,t==="path"),[e,o,i,t])}function TE(e,t){return fv(e,t)}function fv(e,t,r,i,o){var I;Xe(co(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=x.useContext(zr),{matches:u}=x.useContext(Sn),h=u[u.length-1],d=h?h.params:{},p=h?h.pathname:"/",y=h?h.pathnameBase:"/",v=h&&h.route;{let R=v&&v.path||"";pv(p,!v||R.endsWith("*")||R.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${p}" (under <Route path="${R}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${R}"> to <Route path="${R==="/"?"*":`${R}/*`}">.`)}let _=kn(),E;if(t){let R=typeof t=="string"?lo(t):t;Xe(y==="/"||((I=R.pathname)==null?void 0:I.startsWith(y)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${y}" but pathname "${R.pathname}" was given in the \`location\` prop.`),E=R}else E=_;let S=E.pathname||"/",k=S;if(y!=="/"){let R=y.replace(/^\//,"").split("/");k="/"+S.replace(/^\//,"").split("/").slice(R.length).join("/")}let T=ov(e,{pathname:k});Sr(v||T!=null,`No routes matched location "${E.pathname}${E.search}${E.hash}" `),Sr(T==null||T[T.length-1].route.element!==void 0||T[T.length-1].route.Component!==void 0||T[T.length-1].route.lazy!==void 0,`Matched leaf route at location "${E.pathname}${E.search}${E.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let A=PE(T&&T.map(R=>Object.assign({},R,{params:Object.assign({},d,R.params),pathname:Vn([y,a.encodeLocation?a.encodeLocation(R.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:R.pathname]),pathnameBase:R.pathnameBase==="/"?y:Vn([y,a.encodeLocation?a.encodeLocation(R.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:R.pathnameBase])})),u,r,i,o);return t&&A?x.createElement(Ua.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...E},navigationType:"POP"}},A):A}function RE(){let e=DE(),t=wE(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,i="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:i},a={padding:"2px 4px",backgroundColor:i},u=null;return console.error("Error handled by React Router default ErrorBoundary:",e),u=x.createElement(x.Fragment,null,x.createElement("p",null," Hey developer "),x.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",x.createElement("code",{style:a},"ErrorBoundary")," or"," ",x.createElement("code",{style:a},"errorElement")," prop on your route.")),x.createElement(x.Fragment,null,x.createElement("h2",null,"Unexpected Application Error!"),x.createElement("h3",{style:{fontStyle:"italic"}},t),r?x.createElement("pre",{style:o},r):null,u)}var CE=x.createElement(RE,null),AE=class extends x.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.onError?this.props.onError(e,t):console.error("React Router caught the following error during render",e)}render(){return this.state.error!==void 0?x.createElement(Sn.Provider,{value:this.props.routeContext},x.createElement($f.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function jE({routeContext:e,match:t,children:r}){let i=x.useContext(uo);return i&&i.static&&i.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=t.route.id),x.createElement(Sn.Provider,{value:e},r)}function PE(e,t=[],r=null,i=null,o=null){if(e==null){if(!r)return null;if(r.errors)e=r.matches;else if(t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let a=e,u=r==null?void 0:r.errors;if(u!=null){let y=a.findIndex(v=>v.route.id&&(u==null?void 0:u[v.route.id])!==void 0);Xe(y>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(u).join(",")}`),a=a.slice(0,Math.min(a.length,y+1))}let h=!1,d=-1;if(r)for(let y=0;y<a.length;y++){let v=a[y];if((v.route.HydrateFallback||v.route.hydrateFallbackElement)&&(d=y),v.route.id){let{loaderData:_,errors:E}=r,S=v.route.loader&&!_.hasOwnProperty(v.route.id)&&(!E||E[v.route.id]===void 0);if(v.route.lazy||S){h=!0,d>=0?a=a.slice(0,d+1):a=[a[0]];break}}}let p=r&&i?(y,v)=>{var _,E;i(y,{location:r.location,params:((E=(_=r.matches)==null?void 0:_[0])==null?void 0:E.params)??{},unstable_pattern:_E(r.matches),errorInfo:v})}:void 0;return a.reduceRight((y,v,_)=>{let E,S=!1,k=null,T=null;r&&(E=u&&v.route.id?u[v.route.id]:void 0,k=v.route.errorElement||CE,h&&(d<0&&_===0?(pv("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),S=!0,T=null):d===_&&(S=!0,T=v.route.hydrateFallbackElement||null)));let A=t.concat(a.slice(0,_+1)),I=()=>{let R;return E?R=k:S?R=T:v.route.Component?R=x.createElement(v.route.Component,null):v.route.element?R=v.route.element:R=y,x.createElement(jE,{match:v,routeContext:{outlet:y,matches:A,isDataRoute:r!=null},children:R})};return r&&(v.route.ErrorBoundary||v.route.errorElement||_===0)?x.createElement(AE,{location:r.location,revalidation:r.revalidation,component:k,error:E,children:I(),routeContext:{outlet:null,matches:A,isDataRoute:!0},onError:p}):I()},null)}function Bf(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function OE(e){let t=x.useContext(uo);return Xe(t,Bf(e)),t}function NE(e){let t=x.useContext(Zu);return Xe(t,Bf(e)),t}function IE(e){let t=x.useContext(Sn);return Xe(t,Bf(e)),t}function zf(e){let t=IE(e),r=t.matches[t.matches.length-1];return Xe(r.route.id,`${e} can only be used on routes that contain a unique "id"`),r.route.id}function LE(){return zf("useRouteId")}function DE(){var i;let e=x.useContext($f),t=NE("useRouteError"),r=zf("useRouteError");return e!==void 0?e:(i=t.errors)==null?void 0:i[r]}function UE(){let{router:e}=OE("useNavigate"),t=zf("useNavigate"),r=x.useRef(!1);return dv(()=>{r.current=!0}),x.useCallback(async(o,a={})=>{Sr(r.current,hv),r.current&&(typeof o=="number"?await e.navigate(o):await e.navigate(o,{fromRouteId:t,...a}))},[e,t])}var i1={};function pv(e,t,r){!t&&!i1[e]&&(i1[e]=!0,Sr(!1,r))}x.memo(FE);function FE({routes:e,future:t,state:r,unstable_onError:i}){return fv(e,void 0,r,i,t)}function o1({to:e,replace:t,state:r,relative:i}){Xe(co(),"<Navigate> may be used only in the context of a <Router> component.");let{static:o}=x.useContext(zr);Sr(!o,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:a}=x.useContext(Sn),{pathname:u}=kn(),h=Vr(),d=Mf(e,Ff(a),u,i==="path"),p=JSON.stringify(d);return x.useEffect(()=>{h(JSON.parse(p),{replace:t,state:r,relative:i})},[h,p,i,t,r]),null}function gn(e){Xe(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function ME({basename:e="/",children:t=null,location:r,navigationType:i="POP",navigator:o,static:a=!1,unstable_useTransitions:u}){Xe(!co(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let h=e.replace(/^\/*/,"/"),d=x.useMemo(()=>({basename:h,navigator:o,static:a,unstable_useTransitions:u,future:{}}),[h,o,a,u]);typeof r=="string"&&(r=lo(r));let{pathname:p="/",search:y="",hash:v="",state:_=null,key:E="default"}=r,S=x.useMemo(()=>{let k=Hn(p,h);return k==null?null:{location:{pathname:k,search:y,hash:v,state:_,key:E},navigationType:i}},[h,p,y,v,_,E,i]);return Sr(S!=null,`<Router basename="${h}"> is not able to match the URL "${p}${y}${v}" because it does not start with the basename, so the <Router> won't render anything.`),S==null?null:x.createElement(zr.Provider,{value:d},x.createElement(Ua.Provider,{children:t,value:S}))}function $E({children:e,location:t}){return TE(Qd(e),t)}function Qd(e,t=[]){let r=[];return x.Children.forEach(e,(i,o)=>{if(!x.isValidElement(i))return;let a=[...t,o];if(i.type===x.Fragment){r.push.apply(r,Qd(i.props.children,a));return}Xe(i.type===gn,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Xe(!i.props.index||!i.props.children,"An index route cannot have child routes.");let u={id:i.props.id||a.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,middleware:i.props.middleware,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(u.children=Qd(i.props.children,a)),r.push(u)}),r}var _u="get",Eu="application/x-www-form-urlencoded";function ec(e){return typeof HTMLElement<"u"&&e instanceof HTMLElement}function BE(e){return ec(e)&&e.tagName.toLowerCase()==="button"}function zE(e){return ec(e)&&e.tagName.toLowerCase()==="form"}function VE(e){return ec(e)&&e.tagName.toLowerCase()==="input"}function WE(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function KE(e,t){return e.button===0&&(!t||t==="_self")&&!WE(e)}function Zd(e=""){return new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,r)=>{let i=e[r];return t.concat(Array.isArray(i)?i.map(o=>[r,o]):[[r,i]])},[]))}function HE(e,t){let r=Zd(e);return t&&t.forEach((i,o)=>{r.has(o)||t.getAll(o).forEach(a=>{r.append(o,a)})}),r}var nu=null;function GE(){if(nu===null)try{new FormData(document.createElement("form"),0),nu=!1}catch{nu=!0}return nu}var qE=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Rd(e){return e!=null&&!qE.has(e)?(Sr(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Eu}"`),null):e}function JE(e,t){let r,i,o,a,u;if(zE(e)){let h=e.getAttribute("action");i=h?Hn(h,t):null,r=e.getAttribute("method")||_u,o=Rd(e.getAttribute("enctype"))||Eu,a=new FormData(e)}else if(BE(e)||VE(e)&&(e.type==="submit"||e.type==="image")){let h=e.form;if(h==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let d=e.getAttribute("formaction")||h.getAttribute("action");if(i=d?Hn(d,t):null,r=e.getAttribute("formmethod")||h.getAttribute("method")||_u,o=Rd(e.getAttribute("formenctype"))||Rd(h.getAttribute("enctype"))||Eu,a=new FormData(h,e),!GE()){let{name:p,type:y,value:v}=e;if(y==="image"){let _=p?`${p}.`:"";a.append(`${_}x`,"0"),a.append(`${_}y`,"0")}else p&&a.append(p,v)}}else{if(ec(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=_u,i=null,o=Eu,u=e}return a&&o==="text/plain"&&(u=a,a=void 0),{action:i,method:r.toLowerCase(),encType:o,formData:a,body:u}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Vf(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function XE(e,t,r){let i=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return i.pathname==="/"?i.pathname=`_root.${r}`:t&&Hn(i.pathname,t)==="/"?i.pathname=`${t.replace(/\/$/,"")}/_root.${r}`:i.pathname=`${i.pathname.replace(/\/$/,"")}.${r}`,i}async function YE(e,t){if(e.id in t)return t[e.id];try{let r=await import(e.module);return t[e.id]=r,r}catch(r){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function QE(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function ZE(e,t,r){let i=await Promise.all(e.map(async o=>{let a=t.routes[o.route.id];if(a){let u=await YE(a,r);return u.links?u.links():[]}return[]}));return nS(i.flat(1).filter(QE).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function a1(e,t,r,i,o,a){let u=(d,p)=>r[p]?d.route.id!==r[p].route.id:!0,h=(d,p)=>{var y;return r[p].pathname!==d.pathname||((y=r[p].route.path)==null?void 0:y.endsWith("*"))&&r[p].params["*"]!==d.params["*"]};return a==="assets"?t.filter((d,p)=>u(d,p)||h(d,p)):a==="data"?t.filter((d,p)=>{var v;let y=i.routes[d.route.id];if(!y||!y.hasLoader)return!1;if(u(d,p)||h(d,p))return!0;if(d.route.shouldRevalidate){let _=d.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:((v=r[0])==null?void 0:v.params)||{},nextUrl:new URL(e,window.origin),nextParams:d.params,defaultShouldRevalidate:!0});if(typeof _=="boolean")return _}return!0}):[]}function eS(e,t,{includeHydrateFallback:r}={}){return tS(e.map(i=>{let o=t.routes[i.route.id];if(!o)return[];let a=[o.module];return o.clientActionModule&&(a=a.concat(o.clientActionModule)),o.clientLoaderModule&&(a=a.concat(o.clientLoaderModule)),r&&o.hydrateFallbackModule&&(a=a.concat(o.hydrateFallbackModule)),o.imports&&(a=a.concat(o.imports)),a}).flat(1))}function tS(e){return[...new Set(e)]}function rS(e){let t={},r=Object.keys(e).sort();for(let i of r)t[i]=e[i];return t}function nS(e,t){let r=new Set;return new Set(t),e.reduce((i,o)=>{let a=JSON.stringify(rS(o));return r.has(a)||(r.add(a),i.push({key:a,link:o})),i},[])}function mv(){let e=x.useContext(uo);return Vf(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function sS(){let e=x.useContext(Zu);return Vf(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var Wf=x.createContext(void 0);Wf.displayName="FrameworkContext";function gv(){let e=x.useContext(Wf);return Vf(e,"You must render this element inside a <HydratedRouter> element"),e}function iS(e,t){let r=x.useContext(Wf),[i,o]=x.useState(!1),[a,u]=x.useState(!1),{onFocus:h,onBlur:d,onMouseEnter:p,onMouseLeave:y,onTouchStart:v}=t,_=x.useRef(null);x.useEffect(()=>{if(e==="render"&&u(!0),e==="viewport"){let k=A=>{A.forEach(I=>{u(I.isIntersecting)})},T=new IntersectionObserver(k,{threshold:.5});return _.current&&T.observe(_.current),()=>{T.disconnect()}}},[e]),x.useEffect(()=>{if(i){let k=setTimeout(()=>{u(!0)},100);return()=>{clearTimeout(k)}}},[i]);let E=()=>{o(!0)},S=()=>{o(!1),u(!1)};return r?e!=="intent"?[a,_,{}]:[a,_,{onFocus:ha(h,E),onBlur:ha(d,S),onMouseEnter:ha(p,E),onMouseLeave:ha(y,S),onTouchStart:ha(v,E)}]:[!1,_,{}]}function ha(e,t){return r=>{e&&e(r),r.defaultPrevented||t(r)}}function oS({page:e,...t}){let{router:r}=mv(),i=x.useMemo(()=>ov(r.routes,e,r.basename),[r.routes,e,r.basename]);return i?x.createElement(lS,{page:e,matches:i,...t}):null}function aS(e){let{manifest:t,routeModules:r}=gv(),[i,o]=x.useState([]);return x.useEffect(()=>{let a=!1;return ZE(e,t,r).then(u=>{a||o(u)}),()=>{a=!0}},[e,t,r]),i}function lS({page:e,matches:t,...r}){let i=kn(),{manifest:o,routeModules:a}=gv(),{basename:u}=mv(),{loaderData:h,matches:d}=sS(),p=x.useMemo(()=>a1(e,t,d,o,i,"data"),[e,t,d,o,i]),y=x.useMemo(()=>a1(e,t,d,o,i,"assets"),[e,t,d,o,i]),v=x.useMemo(()=>{if(e===i.pathname+i.search+i.hash)return[];let S=new Set,k=!1;if(t.forEach(A=>{var R;let I=o.routes[A.route.id];!I||!I.hasLoader||(!p.some(D=>D.route.id===A.route.id)&&A.route.id in h&&((R=a[A.route.id])!=null&&R.shouldRevalidate)||I.hasClientLoader?k=!0:S.add(A.route.id))}),S.size===0)return[];let T=XE(e,u,"data");return k&&S.size>0&&T.searchParams.set("_routes",t.filter(A=>S.has(A.route.id)).map(A=>A.route.id).join(",")),[T.pathname+T.search]},[u,h,i,o,p,t,e,a]),_=x.useMemo(()=>eS(y,o),[y,o]),E=aS(y);return x.createElement(x.Fragment,null,v.map(S=>x.createElement("link",{key:S,rel:"prefetch",as:"fetch",href:S,...r})),_.map(S=>x.createElement("link",{key:S,rel:"modulepreload",href:S,...r})),E.map(({key:S,link:k})=>x.createElement("link",{key:S,nonce:r.nonce,...k})))}function uS(...e){return t=>{e.forEach(r=>{typeof r=="function"?r(t):r!=null&&(r.current=t)})}}var yv=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{yv&&(window.__reactRouterVersion="7.10.1")}catch{}function cS({basename:e,children:t,unstable_useTransitions:r,window:i}){let o=x.useRef();o.current==null&&(o.current=J4({window:i,v5Compat:!0}));let a=o.current,[u,h]=x.useState({action:a.action,location:a.location}),d=x.useCallback(p=>{r===!1?h(p):x.startTransition(()=>h(p))},[r]);return x.useLayoutEffect(()=>a.listen(d),[a,d]),x.createElement(ME,{basename:e,children:t,location:u.location,navigationType:u.action,navigator:a,unstable_useTransitions:r===!0})}var vv=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,wv=x.forwardRef(function({onClick:t,discover:r="render",prefetch:i="none",relative:o,reloadDocument:a,replace:u,state:h,target:d,to:p,preventScrollReset:y,viewTransition:v,..._},E){let{basename:S,unstable_useTransitions:k}=x.useContext(zr),T=typeof p=="string"&&vv.test(p),A,I=!1;if(typeof p=="string"&&T&&(A=p,yv))try{let ve=new URL(window.location.href),Ae=p.startsWith("//")?new URL(ve.protocol+p):new URL(p),je=Hn(Ae.pathname,S);Ae.origin===ve.origin&&je!=null?p=je+Ae.search+Ae.hash:I=!0}catch{Sr(!1,`<Link to="${p}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let R=bE(p,{relative:o}),[D,V,F]=iS(i,_),B=pS(p,{replace:u,state:h,target:d,preventScrollReset:y,relative:o,viewTransition:v,unstable_useTransitions:k});function M(ve){t&&t(ve),ve.defaultPrevented||B(ve)}let te=x.createElement("a",{..._,...F,href:A||R,onClick:I||a?t:M,ref:uS(E,V),target:d,"data-discover":!T&&r==="render"?"true":void 0});return D&&!T?x.createElement(x.Fragment,null,te,x.createElement(oS,{page:R})):te});wv.displayName="Link";var hS=x.forwardRef(function({"aria-current":t="page",caseSensitive:r=!1,className:i="",end:o=!1,style:a,to:u,viewTransition:h,children:d,...p},y){let v=Fa(u,{relative:p.relative}),_=kn(),E=x.useContext(Zu),{navigator:S,basename:k}=x.useContext(zr),T=E!=null&&wS(v)&&h===!0,A=S.encodeLocation?S.encodeLocation(v).pathname:v.pathname,I=_.pathname,R=E&&E.navigation&&E.navigation.location?E.navigation.location.pathname:null;r||(I=I.toLowerCase(),R=R?R.toLowerCase():null,A=A.toLowerCase()),R&&k&&(R=Hn(R,k)||R);const D=A!=="/"&&A.endsWith("/")?A.length-1:A.length;let V=I===A||!o&&I.startsWith(A)&&I.charAt(D)==="/",F=R!=null&&(R===A||!o&&R.startsWith(A)&&R.charAt(A.length)==="/"),B={isActive:V,isPending:F,isTransitioning:T},M=V?t:void 0,te;typeof i=="function"?te=i(B):te=[i,V?"active":null,F?"pending":null,T?"transitioning":null].filter(Boolean).join(" ");let ve=typeof a=="function"?a(B):a;return x.createElement(wv,{...p,"aria-current":M,className:te,ref:y,style:ve,to:u,viewTransition:h},typeof d=="function"?d(B):d)});hS.displayName="NavLink";var dS=x.forwardRef(({discover:e="render",fetcherKey:t,navigate:r,reloadDocument:i,replace:o,state:a,method:u=_u,action:h,onSubmit:d,relative:p,preventScrollReset:y,viewTransition:v,..._},E)=>{let{unstable_useTransitions:S}=x.useContext(zr),k=yS(),T=vS(h,{relative:p}),A=u.toLowerCase()==="get"?"get":"post",I=typeof h=="string"&&vv.test(h),R=D=>{if(d&&d(D),D.defaultPrevented)return;D.preventDefault();let V=D.nativeEvent.submitter,F=(V==null?void 0:V.getAttribute("formmethod"))||u,B=()=>k(V||D.currentTarget,{fetcherKey:t,method:F,navigate:r,replace:o,state:a,relative:p,preventScrollReset:y,viewTransition:v});S&&r!==!1?x.startTransition(()=>B()):B()};return x.createElement("form",{ref:E,method:A,action:T,onSubmit:i?d:R,..._,"data-discover":!I&&e==="render"?"true":void 0})});dS.displayName="Form";function fS(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function _v(e){let t=x.useContext(uo);return Xe(t,fS(e)),t}function pS(e,{target:t,replace:r,state:i,preventScrollReset:o,relative:a,viewTransition:u,unstable_useTransitions:h}={}){let d=Vr(),p=kn(),y=Fa(e,{relative:a});return x.useCallback(v=>{if(KE(v,t)){v.preventDefault();let _=r!==void 0?r:Ra(p)===Ra(y),E=()=>d(e,{replace:_,state:i,preventScrollReset:o,relative:a,viewTransition:u});h?x.startTransition(()=>E()):E()}},[p,d,y,r,i,t,e,o,a,u,h])}function Ev(e){Sr(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let t=x.useRef(Zd(e)),r=x.useRef(!1),i=kn(),o=x.useMemo(()=>HE(i.search,r.current?null:t.current),[i.search]),a=Vr(),u=x.useCallback((h,d)=>{const p=Zd(typeof h=="function"?h(new URLSearchParams(o)):h);r.current=!0,a("?"+p,d)},[a,o]);return[o,u]}var mS=0,gS=()=>`__${String(++mS)}__`;function yS(){let{router:e}=_v("useSubmit"),{basename:t}=x.useContext(zr),r=LE(),i=e.fetch,o=e.navigate;return x.useCallback(async(a,u={})=>{let{action:h,method:d,encType:p,formData:y,body:v}=JE(a,t);if(u.navigate===!1){let _=u.fetcherKey||gS();await i(_,r,u.action||h,{preventScrollReset:u.preventScrollReset,formData:y,body:v,formMethod:u.method||d,formEncType:u.encType||p,flushSync:u.flushSync})}else await o(u.action||h,{preventScrollReset:u.preventScrollReset,formData:y,body:v,formMethod:u.method||d,formEncType:u.encType||p,replace:u.replace,state:u.state,fromRouteId:r,flushSync:u.flushSync,viewTransition:u.viewTransition})},[i,o,t,r])}function vS(e,{relative:t}={}){let{basename:r}=x.useContext(zr),i=x.useContext(Sn);Xe(i,"useFormAction must be used inside a RouteContext");let[o]=i.matches.slice(-1),a={...Fa(e||".",{relative:t})},u=kn();if(e==null){a.search=u.search;let h=new URLSearchParams(a.search),d=h.getAll("index");if(d.some(y=>y==="")){h.delete("index"),d.filter(v=>v).forEach(v=>h.append("index",v));let y=h.toString();a.search=y?`?${y}`:""}}return(!e||e===".")&&o.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(a.pathname=a.pathname==="/"?r:Vn([r,a.pathname])),Ra(a)}function wS(e,{relative:t}={}){let r=x.useContext(cv);Xe(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=_v("useViewTransitionState"),o=Fa(e,{relative:t});if(!r.isTransitioning)return!1;let a=Hn(r.currentLocation.pathname,i)||r.currentLocation.pathname,u=Hn(r.nextLocation.pathname,i)||r.nextLocation.pathname;return Ou(o.pathname,u)!=null||Ou(o.pathname,a)!=null}var Dn={},su={},ef=function(e,t){return ef=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},ef(e,t)};function Sv(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");ef(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var Nu=function(){return Nu=Object.assign||function(t){for(var r,i=1,o=arguments.length;i<o;i++){r=arguments[i];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},Nu.apply(this,arguments)};function ho(e,t){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(r[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(e);o<i.length;o++)t.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(e,i[o])&&(r[i[o]]=e[i[o]]);return r}function kv(e,t,r,i){var o=arguments.length,a=o<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,r):i,u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(e,t,r,i);else for(var h=e.length-1;h>=0;h--)(u=e[h])&&(a=(o<3?u(a):o>3?u(t,r,a):u(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a}function bv(e,t){return function(r,i){t(r,i,e)}}function xv(e,t,r,i,o,a){function u(A){if(A!==void 0&&typeof A!="function")throw new TypeError("Function expected");return A}for(var h=i.kind,d=h==="getter"?"get":h==="setter"?"set":"value",p=!t&&e?i.static?e:e.prototype:null,y=t||(p?Object.getOwnPropertyDescriptor(p,i.name):{}),v,_=!1,E=r.length-1;E>=0;E--){var S={};for(var k in i)S[k]=k==="access"?{}:i[k];for(var k in i.access)S.access[k]=i.access[k];S.addInitializer=function(A){if(_)throw new TypeError("Cannot add initializers after decoration has completed");a.push(u(A||null))};var T=(0,r[E])(h==="accessor"?{get:y.get,set:y.set}:y[d],S);if(h==="accessor"){if(T===void 0)continue;if(T===null||typeof T!="object")throw new TypeError("Object expected");(v=u(T.get))&&(y.get=v),(v=u(T.set))&&(y.set=v),(v=u(T.init))&&o.unshift(v)}else(v=u(T))&&(h==="field"?o.unshift(v):y[d]=v)}p&&Object.defineProperty(p,i.name,y),_=!0}function Tv(e,t,r){for(var i=arguments.length>2,o=0;o<t.length;o++)r=i?t[o].call(e,r):t[o].call(e);return i?r:void 0}function Rv(e){return typeof e=="symbol"?e:"".concat(e)}function Cv(e,t,r){return typeof t=="symbol"&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:r?"".concat(r," ",t):t})}function Av(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)}function ee(e,t,r,i){function o(a){return a instanceof r?a:new r(function(u){u(a)})}return new(r||(r=Promise))(function(a,u){function h(y){try{p(i.next(y))}catch(v){u(v)}}function d(y){try{p(i.throw(y))}catch(v){u(v)}}function p(y){y.done?a(y.value):o(y.value).then(h,d)}p((i=i.apply(e,t||[])).next())})}function jv(e,t){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},i,o,a,u=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return u.next=h(0),u.throw=h(1),u.return=h(2),typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function h(p){return function(y){return d([p,y])}}function d(p){if(i)throw new TypeError("Generator is already executing.");for(;u&&(u=0,p[0]&&(r=0)),r;)try{if(i=1,o&&(a=p[0]&2?o.return:p[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,p[1])).done)return a;switch(o=0,a&&(p=[p[0]&2,a.value]),p[0]){case 0:case 1:a=p;break;case 4:return r.label++,{value:p[1],done:!1};case 5:r.label++,o=p[1],p=[0];continue;case 7:p=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(p[0]===6||p[0]===2)){r=0;continue}if(p[0]===3&&(!a||p[1]>a[0]&&p[1]<a[3])){r.label=p[1];break}if(p[0]===6&&r.label<a[1]){r.label=a[1],a=p;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(p);break}a[2]&&r.ops.pop(),r.trys.pop();continue}p=t.call(e,r)}catch(y){p=[6,y],o=0}finally{i=a=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}}var tc=Object.create?(function(e,t,r,i){i===void 0&&(i=r);var o=Object.getOwnPropertyDescriptor(t,r);(!o||("get"in o?!t.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,o)}):(function(e,t,r,i){i===void 0&&(i=r),e[i]=t[r]});function Pv(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&tc(t,e,r)}function Iu(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],i=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Kf(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var i=r.call(e),o,a=[],u;try{for(;(t===void 0||t-- >0)&&!(o=i.next()).done;)a.push(o.value)}catch(h){u={error:h}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(u)throw u.error}}return a}function Ov(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(Kf(arguments[t]));return e}function Nv(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var i=Array(e),o=0,t=0;t<r;t++)for(var a=arguments[t],u=0,h=a.length;u<h;u++,o++)i[o]=a[u];return i}function Iv(e,t,r){if(r||arguments.length===2)for(var i=0,o=t.length,a;i<o;i++)(a||!(i in t))&&(a||(a=Array.prototype.slice.call(t,0,i)),a[i]=t[i]);return e.concat(a||Array.prototype.slice.call(t))}function Xi(e){return this instanceof Xi?(this.v=e,this):new Xi(e)}function Lv(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=r.apply(e,t||[]),o,a=[];return o=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),h("next"),h("throw"),h("return",u),o[Symbol.asyncIterator]=function(){return this},o;function u(E){return function(S){return Promise.resolve(S).then(E,v)}}function h(E,S){i[E]&&(o[E]=function(k){return new Promise(function(T,A){a.push([E,k,T,A])>1||d(E,k)})},S&&(o[E]=S(o[E])))}function d(E,S){try{p(i[E](S))}catch(k){_(a[0][3],k)}}function p(E){E.value instanceof Xi?Promise.resolve(E.value.v).then(y,v):_(a[0][2],E)}function y(E){d("next",E)}function v(E){d("throw",E)}function _(E,S){E(S),a.shift(),a.length&&d(a[0][0],a[0][1])}}function Dv(e){var t,r;return t={},i("next"),i("throw",function(o){throw o}),i("return"),t[Symbol.iterator]=function(){return this},t;function i(o,a){t[o]=e[o]?function(u){return(r=!r)?{value:Xi(e[o](u)),done:!1}:a?a(u):u}:a}}function Uv(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],r;return t?t.call(e):(e=typeof Iu=="function"?Iu(e):e[Symbol.iterator](),r={},i("next"),i("throw"),i("return"),r[Symbol.asyncIterator]=function(){return this},r);function i(a){r[a]=e[a]&&function(u){return new Promise(function(h,d){u=e[a](u),o(h,d,u.done,u.value)})}}function o(a,u,h,d){Promise.resolve(d).then(function(p){a({value:p,done:h})},u)}}function Fv(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var _S=Object.create?(function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}):function(e,t){e.default=t},tf=function(e){return tf=Object.getOwnPropertyNames||function(t){var r=[];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[r.length]=i);return r},tf(e)};function Mv(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r=tf(e),i=0;i<r.length;i++)r[i]!=="default"&&tc(t,e,r[i]);return _S(t,e),t}function $v(e){return e&&e.__esModule?e:{default:e}}function Bv(e,t,r,i){if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?i:r==="a"?i.call(e):i?i.value:t.get(e)}function zv(e,t,r,i,o){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?o.call(e,r):o?o.value=r:t.set(e,r),r}function Vv(e,t){if(t===null||typeof t!="object"&&typeof t!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof e=="function"?t===e:e.has(t)}function Wv(e,t,r){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var i,o;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");i=t[Symbol.asyncDispose]}if(i===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");i=t[Symbol.dispose],r&&(o=i)}if(typeof i!="function")throw new TypeError("Object not disposable.");o&&(i=function(){try{o.call(this)}catch(a){return Promise.reject(a)}}),e.stack.push({value:t,dispose:i,async:r})}else r&&e.stack.push({async:!0});return t}var ES=typeof SuppressedError=="function"?SuppressedError:function(e,t,r){var i=new Error(r);return i.name="SuppressedError",i.error=e,i.suppressed=t,i};function Kv(e){function t(a){e.error=e.hasError?new ES(a,e.error,"An error was suppressed during disposal."):a,e.hasError=!0}var r,i=0;function o(){for(;r=e.stack.pop();)try{if(!r.async&&i===1)return i=0,e.stack.push(r),Promise.resolve().then(o);if(r.dispose){var a=r.dispose.call(r.value);if(r.async)return i|=2,Promise.resolve(a).then(o,function(u){return t(u),o()})}else i|=1}catch(u){t(u)}if(i===1)return e.hasError?Promise.reject(e.error):Promise.resolve();if(e.hasError)throw e.error}return o()}function Hv(e,t){return typeof e=="string"&&/^\.\.?\//.test(e)?e.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(r,i,o,a,u){return i?t?".jsx":".js":o&&(!a||!u)?r:o+a+"."+u.toLowerCase()+"js"}):e}const SS={__extends:Sv,__assign:Nu,__rest:ho,__decorate:kv,__param:bv,__esDecorate:xv,__runInitializers:Tv,__propKey:Rv,__setFunctionName:Cv,__metadata:Av,__awaiter:ee,__generator:jv,__createBinding:tc,__exportStar:Pv,__values:Iu,__read:Kf,__spread:Ov,__spreadArrays:Nv,__spreadArray:Iv,__await:Xi,__asyncGenerator:Lv,__asyncDelegator:Dv,__asyncValues:Uv,__makeTemplateObject:Fv,__importStar:Mv,__importDefault:$v,__classPrivateFieldGet:Bv,__classPrivateFieldSet:zv,__classPrivateFieldIn:Vv,__addDisposableResource:Wv,__disposeResources:Kv,__rewriteRelativeImportExtension:Hv},kS=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:Wv,get __assign(){return Nu},__asyncDelegator:Dv,__asyncGenerator:Lv,__asyncValues:Uv,__await:Xi,__awaiter:ee,__classPrivateFieldGet:Bv,__classPrivateFieldIn:Vv,__classPrivateFieldSet:zv,__createBinding:tc,__decorate:kv,__disposeResources:Kv,__esDecorate:xv,__exportStar:Pv,__extends:Sv,__generator:jv,__importDefault:$v,__importStar:Mv,__makeTemplateObject:Fv,__metadata:Av,__param:bv,__propKey:Rv,__read:Kf,__rest:ho,__rewriteRelativeImportExtension:Hv,__runInitializers:Tv,__setFunctionName:Cv,__spread:Ov,__spreadArray:Iv,__spreadArrays:Nv,__values:Iu,default:SS},Symbol.toStringTag,{value:"Module"})),bS=e=>e?(...t)=>e(...t):(...t)=>fetch(...t);let rc=class extends Error{constructor(t,r="FunctionsError",i){super(t),this.name=r,this.context=i}},Gv=class extends rc{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}},rf=class extends rc{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}},nf=class extends rc{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}};var Lu;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(Lu||(Lu={}));class xS{constructor(t,{headers:r={},customFetch:i,region:o=Lu.Any}={}){this.url=t,this.headers=r,this.region=o,this.fetch=bS(i)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return ee(this,arguments,void 0,function*(r,i={}){var o;let a,u;try{const{headers:h,method:d,body:p,signal:y,timeout:v}=i;let _={},{region:E}=i;E||(E=this.region);const S=new URL(`${this.url}/${r}`);E&&E!=="any"&&(_["x-region"]=E,S.searchParams.set("forceFunctionRegion",E));let k;p&&(h&&!Object.prototype.hasOwnProperty.call(h,"Content-Type")||!h)?typeof Blob<"u"&&p instanceof Blob||p instanceof ArrayBuffer?(_["Content-Type"]="application/octet-stream",k=p):typeof p=="string"?(_["Content-Type"]="text/plain",k=p):typeof FormData<"u"&&p instanceof FormData?k=p:(_["Content-Type"]="application/json",k=JSON.stringify(p)):k=p;let T=y;v&&(u=new AbortController,a=setTimeout(()=>u.abort(),v),y?(T=u.signal,y.addEventListener("abort",()=>u.abort())):T=u.signal);const A=yield this.fetch(S.toString(),{method:d||"POST",headers:Object.assign(Object.assign(Object.assign({},_),this.headers),h),body:k,signal:T}).catch(V=>{throw new Gv(V)}),I=A.headers.get("x-relay-error");if(I&&I==="true")throw new rf(A);if(!A.ok)throw new nf(A);let R=((o=A.headers.get("Content-Type"))!==null&&o!==void 0?o:"text/plain").split(";")[0].trim(),D;return R==="application/json"?D=yield A.json():R==="application/octet-stream"||R==="application/pdf"?D=yield A.blob():R==="text/event-stream"?D=A:R==="multipart/form-data"?D=yield A.formData():D=yield A.text(),{data:D,error:null,response:A}}catch(h){return{data:null,error:h,response:h instanceof nf||h instanceof rf?h.context:void 0}}finally{a&&clearTimeout(a)}})}}const TS=Object.freeze(Object.defineProperty({__proto__:null,get FunctionRegion(){return Lu},FunctionsClient:xS,FunctionsError:rc,FunctionsFetchError:Gv,FunctionsHttpError:nf,FunctionsRelayError:rf},Symbol.toStringTag,{value:"Module"})),qv=Da(TS);var Bt={};const fo=Da(kS);var iu={},ou={},au={},lu={},uu={},cu={},l1;function Jv(){if(l1)return cu;l1=1,Object.defineProperty(cu,"__esModule",{value:!0});class e extends Error{constructor(r){super(r.message),this.name="PostgrestError",this.details=r.details,this.hint=r.hint,this.code=r.code}}return cu.default=e,cu}var u1;function Xv(){if(u1)return uu;u1=1,Object.defineProperty(uu,"__esModule",{value:!0});const t=fo.__importDefault(Jv());let r=class{constructor(o){var a,u;this.shouldThrowOnError=!1,this.method=o.method,this.url=o.url,this.headers=new Headers(o.headers),this.schema=o.schema,this.body=o.body,this.shouldThrowOnError=(a=o.shouldThrowOnError)!==null&&a!==void 0?a:!1,this.signal=o.signal,this.isMaybeSingle=(u=o.isMaybeSingle)!==null&&u!==void 0?u:!1,o.fetch?this.fetch=o.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(o,a){return this.headers=new Headers(this.headers),this.headers.set(o,a),this}then(o,a){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const u=this.fetch;let h=u(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async d=>{var p,y,v,_;let E=null,S=null,k=null,T=d.status,A=d.statusText;if(d.ok){if(this.method!=="HEAD"){const V=await d.text();V===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((p=this.headers.get("Accept"))===null||p===void 0)&&p.includes("application/vnd.pgrst.plan+text"))?S=V:S=JSON.parse(V))}const R=(y=this.headers.get("Prefer"))===null||y===void 0?void 0:y.match(/count=(exact|planned|estimated)/),D=(v=d.headers.get("content-range"))===null||v===void 0?void 0:v.split("/");R&&D&&D.length>1&&(k=parseInt(D[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(S)&&(S.length>1?(E={code:"PGRST116",details:`Results contain ${S.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},S=null,k=null,T=406,A="Not Acceptable"):S.length===1?S=S[0]:S=null)}else{const R=await d.text();try{E=JSON.parse(R),Array.isArray(E)&&d.status===404&&(S=[],E=null,T=200,A="OK")}catch{d.status===404&&R===""?(T=204,A="No Content"):E={message:R}}if(E&&this.isMaybeSingle&&(!((_=E==null?void 0:E.details)===null||_===void 0)&&_.includes("0 rows"))&&(E=null,T=200,A="OK"),E&&this.shouldThrowOnError)throw new t.default(E)}return{error:E,data:S,count:k,status:T,statusText:A}});return this.shouldThrowOnError||(h=h.catch(d=>{var p,y,v,_,E,S;let k="";const T=d==null?void 0:d.cause;if(T){const A=(p=T==null?void 0:T.message)!==null&&p!==void 0?p:"",I=(y=T==null?void 0:T.code)!==null&&y!==void 0?y:"";k=`${(v=d==null?void 0:d.name)!==null&&v!==void 0?v:"FetchError"}: ${d==null?void 0:d.message}`,k+=`

Caused by: ${(_=T==null?void 0:T.name)!==null&&_!==void 0?_:"Error"}: ${A}`,I&&(k+=` (${I})`),T!=null&&T.stack&&(k+=`
${T.stack}`)}else k=(E=d==null?void 0:d.stack)!==null&&E!==void 0?E:"";return{error:{message:`${(S=d==null?void 0:d.name)!==null&&S!==void 0?S:"FetchError"}: ${d==null?void 0:d.message}`,details:k,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),h.then(o,a)}returns(){return this}overrideTypes(){return this}};return uu.default=r,uu}var c1;function Yv(){if(c1)return lu;c1=1,Object.defineProperty(lu,"__esModule",{value:!0});const t=fo.__importDefault(Xv());let r=class extends t.default{select(o){let a=!1;const u=(o??"*").split("").map(h=>/\s/.test(h)&&!a?"":(h==='"'&&(a=!a),h)).join("");return this.url.searchParams.set("select",u),this.headers.append("Prefer","return=representation"),this}order(o,{ascending:a=!0,nullsFirst:u,foreignTable:h,referencedTable:d=h}={}){const p=d?`${d}.order`:"order",y=this.url.searchParams.get(p);return this.url.searchParams.set(p,`${y?`${y},`:""}${o}.${a?"asc":"desc"}${u===void 0?"":u?".nullsfirst":".nullslast"}`),this}limit(o,{foreignTable:a,referencedTable:u=a}={}){const h=typeof u>"u"?"limit":`${u}.limit`;return this.url.searchParams.set(h,`${o}`),this}range(o,a,{foreignTable:u,referencedTable:h=u}={}){const d=typeof h>"u"?"offset":`${h}.offset`,p=typeof h>"u"?"limit":`${h}.limit`;return this.url.searchParams.set(d,`${o}`),this.url.searchParams.set(p,`${a-o+1}`),this}abortSignal(o){return this.signal=o,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:o=!1,verbose:a=!1,settings:u=!1,buffers:h=!1,wal:d=!1,format:p="text"}={}){var y;const v=[o?"analyze":null,a?"verbose":null,u?"settings":null,h?"buffers":null,d?"wal":null].filter(Boolean).join("|"),_=(y=this.headers.get("Accept"))!==null&&y!==void 0?y:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${p}; for="${_}"; options=${v};`),p==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(o){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${o}`),this}};return lu.default=r,lu}var h1;function Hf(){if(h1)return au;h1=1,Object.defineProperty(au,"__esModule",{value:!0});const t=fo.__importDefault(Yv()),r=new RegExp("[,()]");let i=class extends t.default{eq(a,u){return this.url.searchParams.append(a,`eq.${u}`),this}neq(a,u){return this.url.searchParams.append(a,`neq.${u}`),this}gt(a,u){return this.url.searchParams.append(a,`gt.${u}`),this}gte(a,u){return this.url.searchParams.append(a,`gte.${u}`),this}lt(a,u){return this.url.searchParams.append(a,`lt.${u}`),this}lte(a,u){return this.url.searchParams.append(a,`lte.${u}`),this}like(a,u){return this.url.searchParams.append(a,`like.${u}`),this}likeAllOf(a,u){return this.url.searchParams.append(a,`like(all).{${u.join(",")}}`),this}likeAnyOf(a,u){return this.url.searchParams.append(a,`like(any).{${u.join(",")}}`),this}ilike(a,u){return this.url.searchParams.append(a,`ilike.${u}`),this}ilikeAllOf(a,u){return this.url.searchParams.append(a,`ilike(all).{${u.join(",")}}`),this}ilikeAnyOf(a,u){return this.url.searchParams.append(a,`ilike(any).{${u.join(",")}}`),this}regexMatch(a,u){return this.url.searchParams.append(a,`match.${u}`),this}regexIMatch(a,u){return this.url.searchParams.append(a,`imatch.${u}`),this}is(a,u){return this.url.searchParams.append(a,`is.${u}`),this}isDistinct(a,u){return this.url.searchParams.append(a,`isdistinct.${u}`),this}in(a,u){const h=Array.from(new Set(u)).map(d=>typeof d=="string"&&r.test(d)?`"${d}"`:`${d}`).join(",");return this.url.searchParams.append(a,`in.(${h})`),this}contains(a,u){return typeof u=="string"?this.url.searchParams.append(a,`cs.${u}`):Array.isArray(u)?this.url.searchParams.append(a,`cs.{${u.join(",")}}`):this.url.searchParams.append(a,`cs.${JSON.stringify(u)}`),this}containedBy(a,u){return typeof u=="string"?this.url.searchParams.append(a,`cd.${u}`):Array.isArray(u)?this.url.searchParams.append(a,`cd.{${u.join(",")}}`):this.url.searchParams.append(a,`cd.${JSON.stringify(u)}`),this}rangeGt(a,u){return this.url.searchParams.append(a,`sr.${u}`),this}rangeGte(a,u){return this.url.searchParams.append(a,`nxl.${u}`),this}rangeLt(a,u){return this.url.searchParams.append(a,`sl.${u}`),this}rangeLte(a,u){return this.url.searchParams.append(a,`nxr.${u}`),this}rangeAdjacent(a,u){return this.url.searchParams.append(a,`adj.${u}`),this}overlaps(a,u){return typeof u=="string"?this.url.searchParams.append(a,`ov.${u}`):this.url.searchParams.append(a,`ov.{${u.join(",")}}`),this}textSearch(a,u,{config:h,type:d}={}){let p="";d==="plain"?p="pl":d==="phrase"?p="ph":d==="websearch"&&(p="w");const y=h===void 0?"":`(${h})`;return this.url.searchParams.append(a,`${p}fts${y}.${u}`),this}match(a){return Object.entries(a).forEach(([u,h])=>{this.url.searchParams.append(u,`eq.${h}`)}),this}not(a,u,h){return this.url.searchParams.append(a,`not.${u}.${h}`),this}or(a,{foreignTable:u,referencedTable:h=u}={}){const d=h?`${h}.or`:"or";return this.url.searchParams.append(d,`(${a})`),this}filter(a,u,h){return this.url.searchParams.append(a,`${u}.${h}`),this}};return au.default=i,au}var d1;function Qv(){if(d1)return ou;d1=1,Object.defineProperty(ou,"__esModule",{value:!0});const t=fo.__importDefault(Hf());let r=class{constructor(o,{headers:a={},schema:u,fetch:h}){this.url=o,this.headers=new Headers(a),this.schema=u,this.fetch=h}select(o,a){const{head:u=!1,count:h}=a??{},d=u?"HEAD":"GET";let p=!1;const y=(o??"*").split("").map(v=>/\s/.test(v)&&!p?"":(v==='"'&&(p=!p),v)).join("");return this.url.searchParams.set("select",y),h&&this.headers.append("Prefer",`count=${h}`),new t.default({method:d,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(o,{count:a,defaultToNull:u=!0}={}){var h;const d="POST";if(a&&this.headers.append("Prefer",`count=${a}`),u||this.headers.append("Prefer","missing=default"),Array.isArray(o)){const p=o.reduce((y,v)=>y.concat(Object.keys(v)),[]);if(p.length>0){const y=[...new Set(p)].map(v=>`"${v}"`);this.url.searchParams.set("columns",y.join(","))}}return new t.default({method:d,url:this.url,headers:this.headers,schema:this.schema,body:o,fetch:(h=this.fetch)!==null&&h!==void 0?h:fetch})}upsert(o,{onConflict:a,ignoreDuplicates:u=!1,count:h,defaultToNull:d=!0}={}){var p;const y="POST";if(this.headers.append("Prefer",`resolution=${u?"ignore":"merge"}-duplicates`),a!==void 0&&this.url.searchParams.set("on_conflict",a),h&&this.headers.append("Prefer",`count=${h}`),d||this.headers.append("Prefer","missing=default"),Array.isArray(o)){const v=o.reduce((_,E)=>_.concat(Object.keys(E)),[]);if(v.length>0){const _=[...new Set(v)].map(E=>`"${E}"`);this.url.searchParams.set("columns",_.join(","))}}return new t.default({method:y,url:this.url,headers:this.headers,schema:this.schema,body:o,fetch:(p=this.fetch)!==null&&p!==void 0?p:fetch})}update(o,{count:a}={}){var u;const h="PATCH";return a&&this.headers.append("Prefer",`count=${a}`),new t.default({method:h,url:this.url,headers:this.headers,schema:this.schema,body:o,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}delete({count:o}={}){var a;const u="DELETE";return o&&this.headers.append("Prefer",`count=${o}`),new t.default({method:u,url:this.url,headers:this.headers,schema:this.schema,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}};return ou.default=r,ou}var f1;function RS(){if(f1)return iu;f1=1,Object.defineProperty(iu,"__esModule",{value:!0});const e=fo,t=e.__importDefault(Qv()),r=e.__importDefault(Hf());let i=class Zv{constructor(a,{headers:u={},schema:h,fetch:d}={}){this.url=a,this.headers=new Headers(u),this.schemaName=h,this.fetch=d}from(a){if(!a||typeof a!="string"||a.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");const u=new URL(`${this.url}/${a}`);return new t.default(u,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(a){return new Zv(this.url,{headers:this.headers,schema:a,fetch:this.fetch})}rpc(a,u={},{head:h=!1,get:d=!1,count:p}={}){var y;let v;const _=new URL(`${this.url}/rpc/${a}`);let E;h||d?(v=h?"HEAD":"GET",Object.entries(u).filter(([k,T])=>T!==void 0).map(([k,T])=>[k,Array.isArray(T)?`{${T.join(",")}}`:`${T}`]).forEach(([k,T])=>{_.searchParams.append(k,T)})):(v="POST",E=u);const S=new Headers(this.headers);return p&&S.set("Prefer",`count=${p}`),new r.default({method:v,url:_,headers:S,schema:this.schemaName,body:E,fetch:(y=this.fetch)!==null&&y!==void 0?y:fetch})}};return iu.default=i,iu}var p1;function e2(){if(p1)return Bt;p1=1,Object.defineProperty(Bt,"__esModule",{value:!0}),Bt.PostgrestError=Bt.PostgrestBuilder=Bt.PostgrestTransformBuilder=Bt.PostgrestFilterBuilder=Bt.PostgrestQueryBuilder=Bt.PostgrestClient=void 0;const e=fo,t=e.__importDefault(RS());Bt.PostgrestClient=t.default;const r=e.__importDefault(Qv());Bt.PostgrestQueryBuilder=r.default;const i=e.__importDefault(Hf());Bt.PostgrestFilterBuilder=i.default;const o=e.__importDefault(Yv());Bt.PostgrestTransformBuilder=o.default;const a=e.__importDefault(Xv());Bt.PostgrestBuilder=a.default;const u=e.__importDefault(Jv());return Bt.PostgrestError=u.default,Bt.default={PostgrestClient:t.default,PostgrestQueryBuilder:r.default,PostgrestFilterBuilder:i.default,PostgrestTransformBuilder:o.default,PostgrestBuilder:a.default,PostgrestError:u.default},Bt}class t2{constructor(){}static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const r=process.versions;if(r&&r.node){const i=r.node,o=parseInt(i.replace(/^v/,"").split(".")[0]);return o>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${o} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${o} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let r=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(r+=`

Suggested solution: ${t.workaround}`),new Error(r)}static createWebSocket(t,r){const i=this.getWebSocketConstructor();return new i(t,r)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const CS="2.87.1",AS=`realtime-js/${CS}`,r2="1.0.0",jS="2.0.0",m1=r2,sf=1e4,PS=1e3,OS=100;var Qs;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(Qs||(Qs={}));var pt;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(pt||(pt={}));var rn;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(rn||(rn={}));var of;(function(e){e.websocket="websocket"})(of||(of={}));var Zs;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(Zs||(Zs={}));class NS{constructor(t){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=t??[]}encode(t,r){if(t.event===this.BROADCAST_EVENT&&!(t.payload instanceof ArrayBuffer)&&typeof t.payload.event=="string")return r(this._binaryEncodeUserBroadcastPush(t));let i=[t.join_ref,t.ref,t.topic,t.event,t.payload];return r(JSON.stringify(i))}_binaryEncodeUserBroadcastPush(t){var r;return this._isArrayBuffer((r=t.payload)===null||r===void 0?void 0:r.payload)?this._encodeBinaryUserBroadcastPush(t):this._encodeJsonUserBroadcastPush(t)}_encodeBinaryUserBroadcastPush(t){var r,i;const o=(i=(r=t.payload)===null||r===void 0?void 0:r.payload)!==null&&i!==void 0?i:new ArrayBuffer(0);return this._encodeUserBroadcastPush(t,this.BINARY_ENCODING,o)}_encodeJsonUserBroadcastPush(t){var r,i;const o=(i=(r=t.payload)===null||r===void 0?void 0:r.payload)!==null&&i!==void 0?i:{},u=new TextEncoder().encode(JSON.stringify(o)).buffer;return this._encodeUserBroadcastPush(t,this.JSON_ENCODING,u)}_encodeUserBroadcastPush(t,r,i){var o,a;const u=t.topic,h=(o=t.ref)!==null&&o!==void 0?o:"",d=(a=t.join_ref)!==null&&a!==void 0?a:"",p=t.payload.event,y=this.allowedMetadataKeys?this._pick(t.payload,this.allowedMetadataKeys):{},v=Object.keys(y).length===0?"":JSON.stringify(y);if(d.length>255)throw new Error(`joinRef length ${d.length} exceeds maximum of 255`);if(h.length>255)throw new Error(`ref length ${h.length} exceeds maximum of 255`);if(u.length>255)throw new Error(`topic length ${u.length} exceeds maximum of 255`);if(p.length>255)throw new Error(`userEvent length ${p.length} exceeds maximum of 255`);if(v.length>255)throw new Error(`metadata length ${v.length} exceeds maximum of 255`);const _=this.USER_BROADCAST_PUSH_META_LENGTH+d.length+h.length+u.length+p.length+v.length,E=new ArrayBuffer(this.HEADER_LENGTH+_);let S=new DataView(E),k=0;S.setUint8(k++,this.KINDS.userBroadcastPush),S.setUint8(k++,d.length),S.setUint8(k++,h.length),S.setUint8(k++,u.length),S.setUint8(k++,p.length),S.setUint8(k++,v.length),S.setUint8(k++,r),Array.from(d,A=>S.setUint8(k++,A.charCodeAt(0))),Array.from(h,A=>S.setUint8(k++,A.charCodeAt(0))),Array.from(u,A=>S.setUint8(k++,A.charCodeAt(0))),Array.from(p,A=>S.setUint8(k++,A.charCodeAt(0))),Array.from(v,A=>S.setUint8(k++,A.charCodeAt(0)));var T=new Uint8Array(E.byteLength+i.byteLength);return T.set(new Uint8Array(E),0),T.set(new Uint8Array(i),E.byteLength),T.buffer}decode(t,r){if(this._isArrayBuffer(t)){let i=this._binaryDecode(t);return r(i)}if(typeof t=="string"){const i=JSON.parse(t),[o,a,u,h,d]=i;return r({join_ref:o,ref:a,topic:u,event:h,payload:d})}return r({})}_binaryDecode(t){const r=new DataView(t),i=r.getUint8(0),o=new TextDecoder;switch(i){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(t,r,o)}}_decodeUserBroadcast(t,r,i){const o=r.getUint8(1),a=r.getUint8(2),u=r.getUint8(3),h=r.getUint8(4);let d=this.HEADER_LENGTH+4;const p=i.decode(t.slice(d,d+o));d=d+o;const y=i.decode(t.slice(d,d+a));d=d+a;const v=i.decode(t.slice(d,d+u));d=d+u;const _=t.slice(d,t.byteLength),E=h===this.JSON_ENCODING?JSON.parse(i.decode(_)):_,S={type:this.BROADCAST_EVENT,event:y,payload:E};return u>0&&(S.meta=JSON.parse(v)),{join_ref:null,ref:null,topic:p,event:this.BROADCAST_EVENT,payload:S}}_isArrayBuffer(t){var r;return t instanceof ArrayBuffer||((r=t==null?void 0:t.constructor)===null||r===void 0?void 0:r.name)==="ArrayBuffer"}_pick(t,r){return!t||typeof t!="object"?{}:Object.fromEntries(Object.entries(t).filter(([i])=>r.includes(i)))}}class n2{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Me;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(Me||(Me={}));const g1=(e,t,r={})=>{var i;const o=(i=r.skipTypes)!==null&&i!==void 0?i:[];return t?Object.keys(t).reduce((a,u)=>(a[u]=IS(u,e,t,o),a),{}):{}},IS=(e,t,r,i)=>{const o=t.find(h=>h.name===e),a=o==null?void 0:o.type,u=r[e];return a&&!i.includes(a)?s2(a,u):af(u)},s2=(e,t)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return FS(t,r)}switch(e){case Me.bool:return LS(t);case Me.float4:case Me.float8:case Me.int2:case Me.int4:case Me.int8:case Me.numeric:case Me.oid:return DS(t);case Me.json:case Me.jsonb:return US(t);case Me.timestamp:return MS(t);case Me.abstime:case Me.date:case Me.daterange:case Me.int4range:case Me.int8range:case Me.money:case Me.reltime:case Me.text:case Me.time:case Me.timestamptz:case Me.timetz:case Me.tsrange:case Me.tstzrange:return af(t);default:return af(t)}},af=e=>e,LS=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},DS=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},US=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},FS=(e,t)=>{if(typeof e!="string")return e;const r=e.length-1,i=e[r];if(e[0]==="{"&&i==="}"){let a;const u=e.slice(1,r);try{a=JSON.parse("["+u+"]")}catch{a=u?u.split(","):[]}return a.map(h=>s2(t,h))}return e},MS=e=>typeof e=="string"?e.replace(" ","T"):e,i2=e=>{const t=new URL(e);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),t.pathname===""||t.pathname==="/"?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class Cd{constructor(t,r,i={},o=sf){this.channel=t,this.event=r,this.payload=i,this.timeout=o,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var i;return this._hasReceived(t)&&r((i=this.receivedResp)===null||i===void 0?void 0:i.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(i=>i.status===t).forEach(i=>i.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var lf;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(lf||(lf={}));let o2=class Su{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const i=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(i.state,{},o=>{const{onJoin:a,onLeave:u,onSync:h}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Su.syncState(this.state,o,a,u),this.pendingDiffs.forEach(d=>{this.state=Su.syncDiff(this.state,d,a,u)}),this.pendingDiffs=[],h()}),this.channel._on(i.diff,{},o=>{const{onJoin:a,onLeave:u,onSync:h}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(o):(this.state=Su.syncDiff(this.state,o,a,u),h())}),this.onJoin((o,a,u)=>{this.channel._trigger("presence",{event:"join",key:o,currentPresences:a,newPresences:u})}),this.onLeave((o,a,u)=>{this.channel._trigger("presence",{event:"leave",key:o,currentPresences:a,leftPresences:u})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,i,o){const a=this.cloneDeep(t),u=this.transformState(r),h={},d={};return this.map(a,(p,y)=>{u[p]||(d[p]=y)}),this.map(u,(p,y)=>{const v=a[p];if(v){const _=y.map(T=>T.presence_ref),E=v.map(T=>T.presence_ref),S=y.filter(T=>E.indexOf(T.presence_ref)<0),k=v.filter(T=>_.indexOf(T.presence_ref)<0);S.length>0&&(h[p]=S),k.length>0&&(d[p]=k)}else h[p]=y}),this.syncDiff(a,{joins:h,leaves:d},i,o)}static syncDiff(t,r,i,o){const{joins:a,leaves:u}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return i||(i=()=>{}),o||(o=()=>{}),this.map(a,(h,d)=>{var p;const y=(p=t[h])!==null&&p!==void 0?p:[];if(t[h]=this.cloneDeep(d),y.length>0){const v=t[h].map(E=>E.presence_ref),_=y.filter(E=>v.indexOf(E.presence_ref)<0);t[h].unshift(..._)}i(h,y,d)}),this.map(u,(h,d)=>{let p=t[h];if(!p)return;const y=d.map(v=>v.presence_ref);p=p.filter(v=>y.indexOf(v.presence_ref)<0),t[h]=p,o(h,p,d),p.length===0&&delete t[h]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(i=>r(i,t[i]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,i)=>{const o=t[i];return"metas"in o?r[i]=o.metas.map(a=>(a.presence_ref=a.phx_ref,delete a.phx_ref,delete a.phx_ref_prev,a)):r[i]=o,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}};var uf;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(uf||(uf={}));var Vi;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(Vi||(Vi={}));var yn;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(yn||(yn={}));const $S=pt;let a2=class wa{constructor(t,r={config:{}},i){var o,a;if(this.topic=t,this.params=r,this.socket=i,this.bindings={},this.state=pt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new Cd(this,rn.join,this.params,this.timeout),this.rejoinTimer=new n2(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=pt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(u=>u.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=pt.closed,this.socket._remove(this)}),this._onError(u=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,u),this.state=pt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=pt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",u=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,u),this.state=pt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(rn.reply,{},(u,h)=>{this._trigger(this._replyEventName(h),u)}),this.presence=new o2(this),this.broadcastEndpointURL=i2(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((a=(o=this.params.config)===null||o===void 0?void 0:o.broadcast)===null||a===void 0)&&a.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,r=this.timeout){var i,o,a;if(this.socket.isConnected()||this.socket.connect(),this.state==pt.closed){const{config:{broadcast:u,presence:h,private:d}}=this.params,p=(o=(i=this.bindings.postgres_changes)===null||i===void 0?void 0:i.map(E=>E.filter))!==null&&o!==void 0?o:[],y=!!this.bindings[Vi.PRESENCE]&&this.bindings[Vi.PRESENCE].length>0||((a=this.params.config.presence)===null||a===void 0?void 0:a.enabled)===!0,v={},_={broadcast:u,presence:Object.assign(Object.assign({},h),{enabled:y}),postgres_changes:p,private:d};this.socket.accessTokenValue&&(v.access_token=this.socket.accessTokenValue),this._onError(E=>t==null?void 0:t(yn.CHANNEL_ERROR,E)),this._onClose(()=>t==null?void 0:t(yn.CLOSED)),this.updateJoinPayload(Object.assign({config:_},v)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:E})=>{var S;if(this.socket._isManualToken()||this.socket.setAuth(),E===void 0){t==null||t(yn.SUBSCRIBED);return}else{const k=this.bindings.postgres_changes,T=(S=k==null?void 0:k.length)!==null&&S!==void 0?S:0,A=[];for(let I=0;I<T;I++){const R=k[I],{filter:{event:D,schema:V,table:F,filter:B}}=R,M=E&&E[I];if(M&&M.event===D&&wa.isFilterValueEqual(M.schema,V)&&wa.isFilterValueEqual(M.table,F)&&wa.isFilterValueEqual(M.filter,B))A.push(Object.assign(Object.assign({},R),{id:M.id}));else{this.unsubscribe(),this.state=pt.errored,t==null||t(yn.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=A,t&&t(yn.SUBSCRIBED);return}}).receive("error",E=>{this.state=pt.errored,t==null||t(yn.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(E).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(yn.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,i){return this.state===pt.joined&&t===Vi.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(t,r,i)}async httpSend(t,r,i={}){var o;const a=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(r==null)return Promise.reject("Payload is required for httpSend()");const u={method:"POST",headers:{Authorization:a,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:t,payload:r,private:this.private}]})},h=await this._fetchWithTimeout(this.broadcastEndpointURL,u,(o=i.timeout)!==null&&o!==void 0?o:this.timeout);if(h.status===202)return{success:!0};let d=h.statusText;try{const p=await h.json();d=p.error||p.message||d}catch{}return Promise.reject(new Error(d))}async send(t,r={}){var i,o;if(!this._canPush()&&t.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:a,payload:u}=t,d={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:u,private:this.private}]})};try{const p=await this._fetchWithTimeout(this.broadcastEndpointURL,d,(i=r.timeout)!==null&&i!==void 0?i:this.timeout);return await((o=p.body)===null||o===void 0?void 0:o.cancel()),p.ok?"ok":"error"}catch(p){return p.name==="AbortError"?"timed out":"error"}}else return new Promise(a=>{var u,h,d;const p=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((d=(h=(u=this.params)===null||u===void 0?void 0:u.config)===null||h===void 0?void 0:h.broadcast)===null||d===void 0)&&d.ack)&&a("ok"),p.receive("ok",()=>a("ok")),p.receive("error",()=>a("error")),p.receive("timeout",()=>a("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=pt.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(rn.close,"leave",this._joinRef())};this.joinPush.destroy();let i=null;return new Promise(o=>{i=new Cd(this,rn.leave,{},t),i.receive("ok",()=>{r(),o("ok")}).receive("timeout",()=>{r(),o("timed out")}).receive("error",()=>{o("error")}),i.send(),this._canPush()||i.trigger("ok",{})}).finally(()=>{i==null||i.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=pt.closed,this.bindings={}}async _fetchWithTimeout(t,r,i){const o=new AbortController,a=setTimeout(()=>o.abort(),i),u=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:o.signal}));return clearTimeout(a),u}_push(t,r,i=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let o=new Cd(this,t,r,i);return this._canPush()?o.send():this._addToPushBuffer(o),o}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>OS){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(t,r,i){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,i){var o,a;const u=t.toLocaleLowerCase(),{close:h,error:d,leave:p,join:y}=rn;if(i&&[h,d,p,y].indexOf(u)>=0&&i!==this._joinRef())return;let _=this._onMessage(u,r,i);if(r&&!_)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(u)?(o=this.bindings.postgres_changes)===null||o===void 0||o.filter(E=>{var S,k,T;return((S=E.filter)===null||S===void 0?void 0:S.event)==="*"||((T=(k=E.filter)===null||k===void 0?void 0:k.event)===null||T===void 0?void 0:T.toLocaleLowerCase())===u}).map(E=>E.callback(_,i)):(a=this.bindings[u])===null||a===void 0||a.filter(E=>{var S,k,T,A,I,R;if(["broadcast","presence","postgres_changes"].includes(u))if("id"in E){const D=E.id,V=(S=E.filter)===null||S===void 0?void 0:S.event;return D&&((k=r.ids)===null||k===void 0?void 0:k.includes(D))&&(V==="*"||(V==null?void 0:V.toLocaleLowerCase())===((T=r.data)===null||T===void 0?void 0:T.type.toLocaleLowerCase()))}else{const D=(I=(A=E==null?void 0:E.filter)===null||A===void 0?void 0:A.event)===null||I===void 0?void 0:I.toLocaleLowerCase();return D==="*"||D===((R=r==null?void 0:r.event)===null||R===void 0?void 0:R.toLocaleLowerCase())}else return E.type.toLocaleLowerCase()===u}).map(E=>{if(typeof _=="object"&&"ids"in _){const S=_.data,{schema:k,table:T,commit_timestamp:A,type:I,errors:R}=S;_=Object.assign(Object.assign({},{schema:k,table:T,commit_timestamp:A,eventType:I,new:{},old:{},errors:R}),this._getPayloadRecords(S))}E.callback(_,i)})}_isClosed(){return this.state===pt.closed}_isJoined(){return this.state===pt.joined}_isJoining(){return this.state===pt.joining}_isLeaving(){return this.state===pt.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,i){const o=t.toLocaleLowerCase(),a={type:o,filter:r,callback:i};return this.bindings[o]?this.bindings[o].push(a):this.bindings[o]=[a],this}_off(t,r){const i=t.toLocaleLowerCase();return this.bindings[i]&&(this.bindings[i]=this.bindings[i].filter(o=>{var a;return!(((a=o.type)===null||a===void 0?void 0:a.toLocaleLowerCase())===i&&wa.isEqual(o.filter,r))})),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const i in t)if(t[i]!==r[i])return!1;return!0}static isFilterValueEqual(t,r){return(t??void 0)===(r??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(rn.close,{},t)}_onError(t){this._on(rn.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=pt.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=g1(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=g1(t.columns,t.old_record)),r}};const Ad=()=>{},hu={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},BS=[1e3,2e3,5e3,1e4],zS=1e4,VS=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;let WS=class{constructor(t,r){var i;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=sf,this.transport=null,this.heartbeatIntervalMs=hu.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Ad,this.ref=0,this.reconnectTimer=null,this.vsn=m1,this.logger=Ad,this.conn=null,this.sendBuffer=[],this.serializer=new NS,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=o=>o?(...a)=>o(...a):(...a)=>fetch(...a),!(!((i=r==null?void 0:r.params)===null||i===void 0)&&i.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${t}/${of.websocket}`,this.httpEndpoint=i2(t),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=t2.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const r=t.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(t,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const i=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(i),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(t?this.conn.close(t,r??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,r,i){this.logger(t,r,i)}connectionState(){switch(this.conn&&this.conn.readyState){case Qs.connecting:return Zs.Connecting;case Qs.open:return Zs.Open;case Qs.closing:return Zs.Closing;default:return Zs.Closed}}isConnected(){return this.connectionState()===Zs.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,r={config:{}}){const i=`realtime:${t}`,o=this.getChannels().find(a=>a.topic===i);if(o)return o;{const a=new a2(`realtime:${t}`,r,this);return this.channels.push(a),a}}push(t){const{topic:r,event:i,payload:o,ref:a}=t,u=()=>{this.encode(t,h=>{var d;(d=this.conn)===null||d===void 0||d.send(h)})};this.log("push",`${r} ${i} (${a})`,o),this.isConnected()?u():this.sendBuffer.push(u)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(PS,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},hu.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(i=>i.topic===t&&(i._isJoined()||i._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply")try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error")}catch(p){this.log("error","error in heartbeat callback",p)}r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:i,event:o,payload:a,ref:u}=r,h=u?`(${u})`:"",d=a.status||"";this.log("receive",`${d} ${i} ${o} ${h}`.trim(),a),this.channels.filter(p=>p._isMember(i)).forEach(p=>p._trigger(o,a,u)),this._triggerStateCallbacks("message",r)})}_clearTimer(t){var r;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){if(this.conn){if(this.conn.readyState===Qs.open||this.conn.readyState===Qs.connecting)try{this.conn.close()}catch(t){this.log("error","Error closing connection",t)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(r=>{this.log("error","error waiting for auth on connect",r),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var r;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(rn.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const i=t.match(/\?/)?"&":"?",o=new URLSearchParams(r);return`${t}${i}${o}`}_workerObjectUrl(t){let r;if(t)r=t;else{const i=new Blob([VS],{type:"application/javascript"});r=URL.createObjectURL(i)}return r}_setConnectionState(t,r=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(t=null){let r,i=!1;if(t)r=t,i=!0;else if(this.accessToken)try{r=await this.accessToken()}catch(o){this.log("error","Error fetching access token from callback",o),r=this.accessTokenValue}else r=this.accessTokenValue;i?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(o=>{const a={access_token:r,version:AS};r&&o.updateJoinPayload(a),o.joinedOnce&&o._isJoined()&&o._push(rn.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this._isManualToken()||this.setAuth().catch(r=>{this.log("error",`Error setting auth in ${t}`,r)})}_triggerStateCallbacks(t,r){try{this.stateChangeCallbacks[t].forEach(i=>{try{i(r)}catch(o){this.log("error",`error in ${t} callback`,o)}})}catch(i){this.log("error",`error triggering ${t} callbacks`,i)}}_setupReconnectionTimer(){this.reconnectTimer=new n2(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},hu.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var r,i,o,a,u,h,d,p,y,v,_,E;switch(this.transport=(r=t==null?void 0:t.transport)!==null&&r!==void 0?r:null,this.timeout=(i=t==null?void 0:t.timeout)!==null&&i!==void 0?i:sf,this.heartbeatIntervalMs=(o=t==null?void 0:t.heartbeatIntervalMs)!==null&&o!==void 0?o:hu.HEARTBEAT_INTERVAL,this.worker=(a=t==null?void 0:t.worker)!==null&&a!==void 0?a:!1,this.accessToken=(u=t==null?void 0:t.accessToken)!==null&&u!==void 0?u:null,this.heartbeatCallback=(h=t==null?void 0:t.heartbeatCallback)!==null&&h!==void 0?h:Ad,this.vsn=(d=t==null?void 0:t.vsn)!==null&&d!==void 0?d:m1,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(p=t==null?void 0:t.reconnectAfterMs)!==null&&p!==void 0?p:(S=>BS[S-1]||zS),this.vsn){case r2:this.encode=(y=t==null?void 0:t.encode)!==null&&y!==void 0?y:((S,k)=>k(JSON.stringify(S))),this.decode=(v=t==null?void 0:t.decode)!==null&&v!==void 0?v:((S,k)=>k(JSON.parse(S)));break;case jS:this.encode=(_=t==null?void 0:t.encode)!==null&&_!==void 0?_:this.serializer.encode.bind(this.serializer),this.decode=(E=t==null?void 0:t.decode)!==null&&E!==void 0?E:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}};const KS=Object.freeze(Object.defineProperty({__proto__:null,REALTIME_CHANNEL_STATES:$S,get REALTIME_LISTEN_TYPES(){return Vi},get REALTIME_POSTGRES_CHANGES_LISTEN_EVENT(){return uf},get REALTIME_PRESENCE_LISTEN_EVENTS(){return lf},get REALTIME_SUBSCRIBE_STATES(){return yn},RealtimeChannel:a2,RealtimeClient:WS,RealtimePresence:o2,WebSocketFactory:t2},Symbol.toStringTag,{value:"Module"})),l2=Da(KS);class Ma extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function qe(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class u2 extends Ma{constructor(t,r,i){super(t),this.name="StorageApiError",this.status=r,this.statusCode=i}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Du extends Ma{constructor(t,r){super(t),this.name="StorageUnknownError",this.originalError=r}}const Gf=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),HS=()=>Response,cf=e=>{if(Array.isArray(e))return e.map(r=>cf(r));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,i])=>{const o=r.replace(/([-_][a-z])/gi,a=>a.toUpperCase().replace(/[-_]/g,""));t[o]=cf(i)}),t},GS=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},qS=e=>!e||typeof e!="string"||e.length===0||e.length>100||e.trim()!==e||e.includes("/")||e.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(e),jd=e=>{var t;return e.msg||e.message||e.error_description||(typeof e.error=="string"?e.error:(t=e.error)===null||t===void 0?void 0:t.message)||JSON.stringify(e)},JS=(e,t,r)=>ee(void 0,void 0,void 0,function*(){const i=yield HS();e instanceof i&&!(r!=null&&r.noResolveJson)?e.json().then(o=>{const a=e.status||500,u=(o==null?void 0:o.statusCode)||a+"";t(new u2(jd(o),a,u))}).catch(o=>{t(new Du(jd(o),o))}):t(new Du(jd(e),e))}),XS=(e,t,r,i)=>{const o={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!i?o:(GS(i)?(o.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),o.body=JSON.stringify(i)):o.body=i,t!=null&&t.duplex&&(o.duplex=t.duplex),Object.assign(Object.assign({},o),r))};function $a(e,t,r,i,o,a){return ee(this,void 0,void 0,function*(){return new Promise((u,h)=>{e(r,XS(t,i,o,a)).then(d=>{if(!d.ok)throw d;return i!=null&&i.noResolveJson?d:d.json()}).then(d=>u(d)).catch(d=>JS(d,h,i))})})}function Ca(e,t,r,i){return ee(this,void 0,void 0,function*(){return $a(e,"GET",t,r,i)})}function tn(e,t,r,i,o){return ee(this,void 0,void 0,function*(){return $a(e,"POST",t,i,o,r)})}function hf(e,t,r,i,o){return ee(this,void 0,void 0,function*(){return $a(e,"PUT",t,i,o,r)})}function YS(e,t,r,i){return ee(this,void 0,void 0,function*(){return $a(e,"HEAD",t,Object.assign(Object.assign({},r),{noResolveJson:!0}),i)})}function qf(e,t,r,i,o){return ee(this,void 0,void 0,function*(){return $a(e,"DELETE",t,i,o,r)})}class QS{constructor(t,r){this.downloadFn=t,this.shouldThrowOnError=r}then(t,r){return this.execute().then(t,r)}execute(){return ee(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(qe(t))return{data:null,error:t};throw t}})}}var c2;class ZS{constructor(t,r){this.downloadFn=t,this.shouldThrowOnError=r,this[c2]="BlobDownloadBuilder",this.promise=null}asStream(){return new QS(this.downloadFn,this.shouldThrowOnError)}then(t,r){return this.getPromise().then(t,r)}catch(t){return this.getPromise().catch(t)}finally(t){return this.getPromise().finally(t)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return ee(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(qe(t))return{data:null,error:t};throw t}})}}c2=Symbol.toStringTag;const ek={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},y1={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class tk{constructor(t,r={},i,o){this.shouldThrowOnError=!1,this.url=t,this.headers=r,this.bucketId=i,this.fetch=Gf(o)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(t,r,i,o){return ee(this,void 0,void 0,function*(){try{let a;const u=Object.assign(Object.assign({},y1),o);let h=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(u.upsert)});const d=u.metadata;typeof Blob<"u"&&i instanceof Blob?(a=new FormData,a.append("cacheControl",u.cacheControl),d&&a.append("metadata",this.encodeMetadata(d)),a.append("",i)):typeof FormData<"u"&&i instanceof FormData?(a=i,a.has("cacheControl")||a.append("cacheControl",u.cacheControl),d&&!a.has("metadata")&&a.append("metadata",this.encodeMetadata(d))):(a=i,h["cache-control"]=`max-age=${u.cacheControl}`,h["content-type"]=u.contentType,d&&(h["x-metadata"]=this.toBase64(this.encodeMetadata(d))),(typeof ReadableStream<"u"&&a instanceof ReadableStream||a&&typeof a=="object"&&"pipe"in a&&typeof a.pipe=="function")&&!u.duplex&&(u.duplex="half")),o!=null&&o.headers&&(h=Object.assign(Object.assign({},h),o.headers));const p=this._removeEmptyFolders(r),y=this._getFinalPath(p),v=yield(t=="PUT"?hf:tn)(this.fetch,`${this.url}/object/${y}`,a,Object.assign({headers:h},u!=null&&u.duplex?{duplex:u.duplex}:{}));return{data:{path:p,id:v.Id,fullPath:v.Key},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(qe(a))return{data:null,error:a};throw a}})}upload(t,r,i){return ee(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,r,i)})}uploadToSignedUrl(t,r,i,o){return ee(this,void 0,void 0,function*(){const a=this._removeEmptyFolders(t),u=this._getFinalPath(a),h=new URL(this.url+`/object/upload/sign/${u}`);h.searchParams.set("token",r);try{let d;const p=Object.assign({upsert:y1.upsert},o),y=Object.assign(Object.assign({},this.headers),{"x-upsert":String(p.upsert)});typeof Blob<"u"&&i instanceof Blob?(d=new FormData,d.append("cacheControl",p.cacheControl),d.append("",i)):typeof FormData<"u"&&i instanceof FormData?(d=i,d.append("cacheControl",p.cacheControl)):(d=i,y["cache-control"]=`max-age=${p.cacheControl}`,y["content-type"]=p.contentType);const v=yield hf(this.fetch,h.toString(),d,{headers:y});return{data:{path:a,fullPath:v.Key},error:null}}catch(d){if(this.shouldThrowOnError)throw d;if(qe(d))return{data:null,error:d};throw d}})}createSignedUploadUrl(t,r){return ee(this,void 0,void 0,function*(){try{let i=this._getFinalPath(t);const o=Object.assign({},this.headers);r!=null&&r.upsert&&(o["x-upsert"]="true");const a=yield tn(this.fetch,`${this.url}/object/upload/sign/${i}`,{},{headers:o}),u=new URL(this.url+a.url),h=u.searchParams.get("token");if(!h)throw new Ma("No token returned by API");return{data:{signedUrl:u.toString(),path:t,token:h},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(qe(i))return{data:null,error:i};throw i}})}update(t,r,i){return ee(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,r,i)})}move(t,r,i){return ee(this,void 0,void 0,function*(){try{return{data:yield tn(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:i==null?void 0:i.destinationBucket},{headers:this.headers}),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(qe(o))return{data:null,error:o};throw o}})}copy(t,r,i){return ee(this,void 0,void 0,function*(){try{return{data:{path:(yield tn(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:i==null?void 0:i.destinationBucket},{headers:this.headers})).Key},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(qe(o))return{data:null,error:o};throw o}})}createSignedUrl(t,r,i){return ee(this,void 0,void 0,function*(){try{let o=this._getFinalPath(t),a=yield tn(this.fetch,`${this.url}/object/sign/${o}`,Object.assign({expiresIn:r},i!=null&&i.transform?{transform:i.transform}:{}),{headers:this.headers});const u=i!=null&&i.download?`&download=${i.download===!0?"":i.download}`:"";return a={signedUrl:encodeURI(`${this.url}${a.signedURL}${u}`)},{data:a,error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(qe(o))return{data:null,error:o};throw o}})}createSignedUrls(t,r,i){return ee(this,void 0,void 0,function*(){try{const o=yield tn(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:t},{headers:this.headers}),a=i!=null&&i.download?`&download=${i.download===!0?"":i.download}`:"";return{data:o.map(u=>Object.assign(Object.assign({},u),{signedUrl:u.signedURL?encodeURI(`${this.url}${u.signedURL}${a}`):null})),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(qe(o))return{data:null,error:o};throw o}})}download(t,r){const o=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",a=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),u=a?`?${a}`:"",h=this._getFinalPath(t),d=()=>Ca(this.fetch,`${this.url}/${o}/${h}${u}`,{headers:this.headers,noResolveJson:!0});return new ZS(d,this.shouldThrowOnError)}info(t){return ee(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{const i=yield Ca(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:cf(i),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(qe(i))return{data:null,error:i};throw i}})}exists(t){return ee(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{return yield YS(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(qe(i)&&i instanceof Du){const o=i.originalError;if([400,404].includes(o==null?void 0:o.status))return{data:!1,error:i}}throw i}})}getPublicUrl(t,r){const i=this._getFinalPath(t),o=[],a=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";a!==""&&o.push(a);const h=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",d=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});d!==""&&o.push(d);let p=o.join("&");return p!==""&&(p=`?${p}`),{data:{publicUrl:encodeURI(`${this.url}/${h}/public/${i}${p}`)}}}remove(t){return ee(this,void 0,void 0,function*(){try{return{data:yield qf(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(qe(r))return{data:null,error:r};throw r}})}list(t,r,i){return ee(this,void 0,void 0,function*(){try{const o=Object.assign(Object.assign(Object.assign({},ek),r),{prefix:t||""});return{data:yield tn(this.fetch,`${this.url}/object/list/${this.bucketId}`,o,{headers:this.headers},i),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(qe(o))return{data:null,error:o};throw o}})}listV2(t,r){return ee(this,void 0,void 0,function*(){try{const i=Object.assign({},t);return{data:yield tn(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,i,{headers:this.headers},r),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(qe(i))return{data:null,error:i};throw i}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const r=[];return t.width&&r.push(`width=${t.width}`),t.height&&r.push(`height=${t.height}`),t.resize&&r.push(`resize=${t.resize}`),t.format&&r.push(`format=${t.format}`),t.quality&&r.push(`quality=${t.quality}`),r.join("&")}}const h2="2.87.1",d2={"X-Client-Info":`storage-js/${h2}`};class rk{constructor(t,r={},i,o){this.shouldThrowOnError=!1;const a=new URL(t);o!=null&&o.useNewHostname&&/supabase\.(co|in|red)$/.test(a.hostname)&&!a.hostname.includes("storage.supabase.")&&(a.hostname=a.hostname.replace("supabase.","storage.supabase.")),this.url=a.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},d2),r),this.fetch=Gf(i)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(t){return ee(this,void 0,void 0,function*(){try{const r=this.listBucketOptionsToQueryString(t);return{data:yield Ca(this.fetch,`${this.url}/bucket${r}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(qe(r))return{data:null,error:r};throw r}})}getBucket(t){return ee(this,void 0,void 0,function*(){try{return{data:yield Ca(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(qe(r))return{data:null,error:r};throw r}})}createBucket(t){return ee(this,arguments,void 0,function*(r,i={public:!1}){try{return{data:yield tn(this.fetch,`${this.url}/bucket`,{id:r,name:r,type:i.type,public:i.public,file_size_limit:i.fileSizeLimit,allowed_mime_types:i.allowedMimeTypes},{headers:this.headers}),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(qe(o))return{data:null,error:o};throw o}})}updateBucket(t,r){return ee(this,void 0,void 0,function*(){try{return{data:yield hf(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(qe(i))return{data:null,error:i};throw i}})}emptyBucket(t){return ee(this,void 0,void 0,function*(){try{return{data:yield tn(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(qe(r))return{data:null,error:r};throw r}})}deleteBucket(t){return ee(this,void 0,void 0,function*(){try{return{data:yield qf(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(qe(r))return{data:null,error:r};throw r}})}listBucketOptionsToQueryString(t){const r={};return t&&("limit"in t&&(r.limit=String(t.limit)),"offset"in t&&(r.offset=String(t.offset)),t.search&&(r.search=t.search),t.sortColumn&&(r.sortColumn=t.sortColumn),t.sortOrder&&(r.sortOrder=t.sortOrder)),Object.keys(r).length>0?"?"+new URLSearchParams(r).toString():""}}var Aa=class extends Error{constructor(e,t){var r;super(e),this.name="IcebergError",this.status=t.status,this.icebergType=t.icebergType,this.icebergCode=t.icebergCode,this.details=t.details,this.isCommitStateUnknown=t.icebergType==="CommitStateUnknownException"||[500,502,504].includes(t.status)&&((r=t.icebergType)==null?void 0:r.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function nk(e,t,r){const i=new URL(t,e);if(r)for(const[o,a]of Object.entries(r))a!==void 0&&i.searchParams.set(o,a);return i.toString()}async function sk(e){return!e||e.type==="none"?{}:e.type==="bearer"?{Authorization:`Bearer ${e.token}`}:e.type==="header"?{[e.name]:e.value}:e.type==="custom"?await e.getHeaders():{}}function ik(e){const t=e.fetchImpl??globalThis.fetch;return{async request({method:r,path:i,query:o,body:a,headers:u}){const h=nk(e.baseUrl,i,o),d=await sk(e.auth),p=await t(h,{method:r,headers:{...a?{"Content-Type":"application/json"}:{},...d,...u},body:a?JSON.stringify(a):void 0}),y=await p.text(),v=(p.headers.get("content-type")||"").includes("application/json"),_=v&&y?JSON.parse(y):y;if(!p.ok){const E=v?_:void 0,S=E==null?void 0:E.error;throw new Aa((S==null?void 0:S.message)??`Request failed with status ${p.status}`,{status:p.status,icebergType:S==null?void 0:S.type,icebergCode:S==null?void 0:S.code,details:E})}return{status:p.status,headers:p.headers,data:_}}}}function du(e){return e.join("")}var ok=class{constructor(e,t=""){this.client=e,this.prefix=t}async listNamespaces(e){const t=e?{parent:du(e.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:t})).data.namespaces.map(i=>({namespace:i}))}async createNamespace(e,t){const r={namespace:e.namespace,properties:t==null?void 0:t.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:r})).data}async dropNamespace(e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${du(e.namespace)}`})}async loadNamespaceMetadata(e){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${du(e.namespace)}`})).data.properties}}async namespaceExists(e){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${du(e.namespace)}`}),!0}catch(t){if(t instanceof Aa&&t.status===404)return!1;throw t}}async createNamespaceIfNotExists(e,t){try{return await this.createNamespace(e,t)}catch(r){if(r instanceof Aa&&r.status===409)return;throw r}}};function Ii(e){return e.join("")}var ak=class{constructor(e,t="",r){this.client=e,this.prefix=t,this.accessDelegation=r}async listTables(e){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Ii(e.namespace)}/tables`})).data.identifiers}async createTable(e,t){const r={};return this.accessDelegation&&(r["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Ii(e.namespace)}/tables`,body:t,headers:r})).data.metadata}async updateTable(e,t){const r=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Ii(e.namespace)}/tables/${e.name}`,body:t});return{"metadata-location":r.data["metadata-location"],metadata:r.data.metadata}}async dropTable(e,t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Ii(e.namespace)}/tables/${e.name}`,query:{purgeRequested:String((t==null?void 0:t.purge)??!1)}})}async loadTable(e){const t={};return this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Ii(e.namespace)}/tables/${e.name}`,headers:t})).data.metadata}async tableExists(e){const t={};this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Ii(e.namespace)}/tables/${e.name}`,headers:t}),!0}catch(r){if(r instanceof Aa&&r.status===404)return!1;throw r}}async createTableIfNotExists(e,t){try{return await this.createTable(e,t)}catch(r){if(r instanceof Aa&&r.status===409)return await this.loadTable({namespace:e.namespace,name:t.name});throw r}}},lk=class{constructor(e){var i;let t="v1";e.catalogName&&(t+=`/${e.catalogName}`);const r=e.baseUrl.endsWith("/")?e.baseUrl:`${e.baseUrl}/`;this.client=ik({baseUrl:r,auth:e.auth,fetchImpl:e.fetch}),this.accessDelegation=(i=e.accessDelegation)==null?void 0:i.join(","),this.namespaceOps=new ok(this.client,t),this.tableOps=new ak(this.client,t,this.accessDelegation)}async listNamespaces(e){return this.namespaceOps.listNamespaces(e)}async createNamespace(e,t){return this.namespaceOps.createNamespace(e,t)}async dropNamespace(e){await this.namespaceOps.dropNamespace(e)}async loadNamespaceMetadata(e){return this.namespaceOps.loadNamespaceMetadata(e)}async listTables(e){return this.tableOps.listTables(e)}async createTable(e,t){return this.tableOps.createTable(e,t)}async updateTable(e,t){return this.tableOps.updateTable(e,t)}async dropTable(e,t){await this.tableOps.dropTable(e,t)}async loadTable(e){return this.tableOps.loadTable(e)}async namespaceExists(e){return this.namespaceOps.namespaceExists(e)}async tableExists(e){return this.tableOps.tableExists(e)}async createNamespaceIfNotExists(e,t){return this.namespaceOps.createNamespaceIfNotExists(e,t)}async createTableIfNotExists(e,t){return this.tableOps.createTableIfNotExists(e,t)}};class f2{constructor(t,r={},i){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},d2),r),this.fetch=Gf(i)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(t){return ee(this,void 0,void 0,function*(){try{return{data:yield tn(this.fetch,`${this.url}/bucket`,{name:t},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(qe(r))return{data:null,error:r};throw r}})}listBuckets(t){return ee(this,void 0,void 0,function*(){try{const r=new URLSearchParams;(t==null?void 0:t.limit)!==void 0&&r.set("limit",t.limit.toString()),(t==null?void 0:t.offset)!==void 0&&r.set("offset",t.offset.toString()),t!=null&&t.sortColumn&&r.set("sortColumn",t.sortColumn),t!=null&&t.sortOrder&&r.set("sortOrder",t.sortOrder),t!=null&&t.search&&r.set("search",t.search);const i=r.toString(),o=i?`${this.url}/bucket?${i}`:`${this.url}/bucket`;return{data:yield Ca(this.fetch,o,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(qe(r))return{data:null,error:r};throw r}})}deleteBucket(t){return ee(this,void 0,void 0,function*(){try{return{data:yield qf(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(qe(r))return{data:null,error:r};throw r}})}from(t){if(!qS(t))throw new Ma("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const r=new lk({baseUrl:this.url,catalogName:t,auth:{type:"custom",getHeaders:()=>ee(this,void 0,void 0,function*(){return this.headers})},fetch:this.fetch}),i=this.shouldThrowOnError;return new Proxy(r,{get(a,u){const h=a[u];return typeof h!="function"?h:(...d)=>ee(this,void 0,void 0,function*(){try{return{data:yield h.apply(a,d),error:null}}catch(p){if(i)throw p;return{data:null,error:p}}})}})}}const Jf={"X-Client-Info":`storage-js/${h2}`,"Content-Type":"application/json"};class Xf extends Error{constructor(t){super(t),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function ur(e){return typeof e=="object"&&e!==null&&"__isStorageVectorsError"in e}class ku extends Xf{constructor(t,r,i){super(t),this.name="StorageVectorsApiError",this.status=r,this.statusCode=i}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class p2 extends Xf{constructor(t,r){super(t),this.name="StorageVectorsUnknownError",this.originalError=r}}var df;(function(e){e.InternalError="InternalError",e.S3VectorConflictException="S3VectorConflictException",e.S3VectorNotFoundException="S3VectorNotFoundException",e.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",e.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",e.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(df||(df={}));const nc=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),uk=()=>Response,m2=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},ck=e=>Array.from(new Float32Array(e)),hk=(e,t)=>{if(t!==void 0&&e.float32.length!==t)throw new Error(`Vector dimension mismatch: expected ${t}, got ${e.float32.length}`)},v1=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),dk=(e,t,r)=>ee(void 0,void 0,void 0,function*(){if(e&&typeof e=="object"&&"status"in e&&"ok"in e&&typeof e.status=="number"&&!(r!=null&&r.noResolveJson)){const o=e.status||500,a=e;if(typeof a.json=="function")a.json().then(u=>{const h=(u==null?void 0:u.statusCode)||(u==null?void 0:u.code)||o+"";t(new ku(v1(u),o,h))}).catch(()=>{const u=o+"",h=a.statusText||`HTTP ${o} error`;t(new ku(h,o,u))});else{const u=o+"",h=a.statusText||`HTTP ${o} error`;t(new ku(h,o,u))}}else t(new p2(v1(e),e))}),fk=(e,t,r,i)=>{const o={method:e,headers:(t==null?void 0:t.headers)||{}};return i?(m2(i)?(o.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),o.body=JSON.stringify(i)):o.body=i,Object.assign(Object.assign({},o),r)):o};function pk(e,t,r,i,o,a){return ee(this,void 0,void 0,function*(){return new Promise((u,h)=>{e(r,fk(t,i,o,a)).then(d=>{if(!d.ok)throw d;if(i!=null&&i.noResolveJson)return d;const p=d.headers.get("content-type");return!p||!p.includes("application/json")?{}:d.json()}).then(d=>u(d)).catch(d=>dk(d,h,i))})})}function Er(e,t,r,i,o){return ee(this,void 0,void 0,function*(){return pk(e,"POST",t,i,o,r)})}class g2{constructor(t,r={},i){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Jf),r),this.fetch=nc(i)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(t){return ee(this,void 0,void 0,function*(){try{return{data:(yield Er(this.fetch,`${this.url}/CreateIndex`,t,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ur(r))return{data:null,error:r};throw r}})}getIndex(t,r){return ee(this,void 0,void 0,function*(){try{return{data:yield Er(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:t,indexName:r},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(ur(i))return{data:null,error:i};throw i}})}listIndexes(t){return ee(this,void 0,void 0,function*(){try{return{data:yield Er(this.fetch,`${this.url}/ListIndexes`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ur(r))return{data:null,error:r};throw r}})}deleteIndex(t,r){return ee(this,void 0,void 0,function*(){try{return{data:(yield Er(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:t,indexName:r},{headers:this.headers}))||{},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(ur(i))return{data:null,error:i};throw i}})}}class y2{constructor(t,r={},i){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Jf),r),this.fetch=nc(i)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(t){return ee(this,void 0,void 0,function*(){try{if(t.vectors.length<1||t.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield Er(this.fetch,`${this.url}/PutVectors`,t,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ur(r))return{data:null,error:r};throw r}})}getVectors(t){return ee(this,void 0,void 0,function*(){try{return{data:yield Er(this.fetch,`${this.url}/GetVectors`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ur(r))return{data:null,error:r};throw r}})}listVectors(t){return ee(this,void 0,void 0,function*(){try{if(t.segmentCount!==void 0){if(t.segmentCount<1||t.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(t.segmentIndex!==void 0&&(t.segmentIndex<0||t.segmentIndex>=t.segmentCount))throw new Error(`segmentIndex must be between 0 and ${t.segmentCount-1}`)}return{data:yield Er(this.fetch,`${this.url}/ListVectors`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ur(r))return{data:null,error:r};throw r}})}queryVectors(t){return ee(this,void 0,void 0,function*(){try{return{data:yield Er(this.fetch,`${this.url}/QueryVectors`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ur(r))return{data:null,error:r};throw r}})}deleteVectors(t){return ee(this,void 0,void 0,function*(){try{if(t.keys.length<1||t.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield Er(this.fetch,`${this.url}/DeleteVectors`,t,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ur(r))return{data:null,error:r};throw r}})}}class v2{constructor(t,r={},i){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Jf),r),this.fetch=nc(i)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(t){return ee(this,void 0,void 0,function*(){try{return{data:(yield Er(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:t},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ur(r))return{data:null,error:r};throw r}})}getBucket(t){return ee(this,void 0,void 0,function*(){try{return{data:yield Er(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:t},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ur(r))return{data:null,error:r};throw r}})}listBuckets(){return ee(this,arguments,void 0,function*(t={}){try{return{data:yield Er(this.fetch,`${this.url}/ListVectorBuckets`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ur(r))return{data:null,error:r};throw r}})}deleteBucket(t){return ee(this,void 0,void 0,function*(){try{return{data:(yield Er(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:t},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ur(r))return{data:null,error:r};throw r}})}}class w2 extends v2{constructor(t,r={}){super(t,r.headers||{},r.fetch)}from(t){return new _2(this.url,this.headers,t,this.fetch)}createBucket(t){const r=Object.create(null,{createBucket:{get:()=>super.createBucket}});return ee(this,void 0,void 0,function*(){return r.createBucket.call(this,t)})}getBucket(t){const r=Object.create(null,{getBucket:{get:()=>super.getBucket}});return ee(this,void 0,void 0,function*(){return r.getBucket.call(this,t)})}listBuckets(){const t=Object.create(null,{listBuckets:{get:()=>super.listBuckets}});return ee(this,arguments,void 0,function*(r={}){return t.listBuckets.call(this,r)})}deleteBucket(t){const r=Object.create(null,{deleteBucket:{get:()=>super.deleteBucket}});return ee(this,void 0,void 0,function*(){return r.deleteBucket.call(this,t)})}}class _2 extends g2{constructor(t,r,i,o){super(t,r,o),this.vectorBucketName=i}createIndex(t){const r=Object.create(null,{createIndex:{get:()=>super.createIndex}});return ee(this,void 0,void 0,function*(){return r.createIndex.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const t=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return ee(this,arguments,void 0,function*(r={}){return t.listIndexes.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName}))})}getIndex(t){const r=Object.create(null,{getIndex:{get:()=>super.getIndex}});return ee(this,void 0,void 0,function*(){return r.getIndex.call(this,this.vectorBucketName,t)})}deleteIndex(t){const r=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return ee(this,void 0,void 0,function*(){return r.deleteIndex.call(this,this.vectorBucketName,t)})}index(t){return new E2(this.url,this.headers,this.vectorBucketName,t,this.fetch)}}class E2 extends y2{constructor(t,r,i,o,a){super(t,r,a),this.vectorBucketName=i,this.indexName=o}putVectors(t){const r=Object.create(null,{putVectors:{get:()=>super.putVectors}});return ee(this,void 0,void 0,function*(){return r.putVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(t){const r=Object.create(null,{getVectors:{get:()=>super.getVectors}});return ee(this,void 0,void 0,function*(){return r.getVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const t=Object.create(null,{listVectors:{get:()=>super.listVectors}});return ee(this,arguments,void 0,function*(r={}){return t.listVectors.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(t){const r=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return ee(this,void 0,void 0,function*(){return r.queryVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(t){const r=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return ee(this,void 0,void 0,function*(){return r.deleteVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class mk extends rk{constructor(t,r={},i,o){super(t,r,i,o)}from(t){return new tk(this.url,this.headers,t,this.fetch)}get vectors(){return new w2(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new f2(this.url+"/iceberg",this.headers,this.fetch)}}const gk=Object.freeze(Object.defineProperty({__proto__:null,StorageAnalyticsClient:f2,StorageApiError:u2,StorageClient:mk,StorageError:Ma,StorageUnknownError:Du,StorageVectorsApiError:ku,StorageVectorsClient:w2,StorageVectorsError:Xf,get StorageVectorsErrorCode(){return df},StorageVectorsUnknownError:p2,VectorBucketApi:v2,VectorBucketScope:_2,VectorDataApi:y2,VectorIndexApi:g2,VectorIndexScope:E2,isPlainObject:m2,isStorageError:qe,isStorageVectorsError:ur,normalizeToFloat32:ck,resolveFetch:nc,resolveResponse:uk,validateVectorDimension:hk},Symbol.toStringTag,{value:"Module"})),yk=Da(gk);var Pd={},da={},w1;function vk(){return w1||(w1=1,Object.defineProperty(da,"__esModule",{value:!0}),da.version=void 0,da.version="2.87.1"),da}var _1;function wk(){return _1||(_1=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.DEFAULT_REALTIME_OPTIONS=e.DEFAULT_AUTH_OPTIONS=e.DEFAULT_DB_OPTIONS=e.DEFAULT_GLOBAL_OPTIONS=e.DEFAULT_HEADERS=void 0;const t=vk();let r="";typeof Deno<"u"?r="deno":typeof document<"u"?r="web":typeof navigator<"u"&&navigator.product==="ReactNative"?r="react-native":r="node",e.DEFAULT_HEADERS={"X-Client-Info":`supabase-js-${r}/${t.version}`},e.DEFAULT_GLOBAL_OPTIONS={headers:e.DEFAULT_HEADERS},e.DEFAULT_DB_OPTIONS={schema:"public"},e.DEFAULT_AUTH_OPTIONS={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},e.DEFAULT_REALTIME_OPTIONS={}})(Pd)),Pd}var Od={},E1;function _k(){return E1||(E1=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.fetchWithAuth=e.resolveHeadersConstructor=e.resolveFetch=void 0;const t=o=>o?(...a)=>o(...a):(...a)=>fetch(...a);e.resolveFetch=t;const r=()=>Headers;e.resolveHeadersConstructor=r;const i=(o,a,u)=>{const h=(0,e.resolveFetch)(u),d=(0,e.resolveHeadersConstructor)();return async(p,y)=>{var v;const _=(v=await a())!==null&&v!==void 0?v:o;let E=new d(y==null?void 0:y.headers);return E.has("apikey")||E.set("apikey",o),E.has("Authorization")||E.set("Authorization",`Bearer ${_}`),h(p,Object.assign(Object.assign({},y),{headers:E}))}};e.fetchWithAuth=i})(Od)),Od}var Un={},S1;function Ek(){if(S1)return Un;S1=1,Object.defineProperty(Un,"__esModule",{value:!0}),Un.isBrowser=void 0,Un.uuid=e,Un.ensureTrailingSlash=t,Un.applySettingDefaults=i,Un.validateSupabaseUrl=o;function e(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var u=Math.random()*16|0,h=a=="x"?u:u&3|8;return h.toString(16)})}function t(a){return a.endsWith("/")?a:a+"/"}const r=()=>typeof window<"u";Un.isBrowser=r;function i(a,u){var h,d;const{db:p,auth:y,realtime:v,global:_}=a,{db:E,auth:S,realtime:k,global:T}=u,A={db:Object.assign(Object.assign({},E),p),auth:Object.assign(Object.assign({},S),y),realtime:Object.assign(Object.assign({},k),v),storage:{},global:Object.assign(Object.assign(Object.assign({},T),_),{headers:Object.assign(Object.assign({},(h=T==null?void 0:T.headers)!==null&&h!==void 0?h:{}),(d=_==null?void 0:_.headers)!==null&&d!==void 0?d:{})}),accessToken:async()=>""};return a.accessToken?A.accessToken=a.accessToken:delete A.accessToken,A}function o(a){const u=a==null?void 0:a.trim();if(!u)throw new Error("supabaseUrl is required.");if(!u.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(t(u))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}return Un}var fa={};const S2="2.87.1",$i=30*1e3,ff=3,Nd=ff*$i,Sk="http://localhost:9999",kk="supabase.auth.token",bk={"X-Client-Info":`gotrue-js/${S2}`},pf="X-Supabase-Api-Version",k2={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},xk=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Tk=600*1e3;let Yi=class extends Error{constructor(t,r,i){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=i}};function oe(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}let b2=class extends Yi{constructor(t,r,i){super(t,r,i),this.name="AuthApiError",this.status=r,this.code=i}};function x2(e){return oe(e)&&e.name==="AuthApiError"}let ws=class extends Yi{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}},Jn=class extends Yi{constructor(t,r,i,o){super(t,i,o),this.name=r,this.status=i}},lr=class extends Jn{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}};function T2(e){return oe(e)&&e.name==="AuthSessionMissingError"}let Js=class extends Jn{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}},_a=class extends Jn{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}},Ea=class extends Jn{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}};function R2(e){return oe(e)&&e.name==="AuthImplicitGrantRedirectError"}let mf=class extends Jn{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}},Uu=class extends Jn{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}};function bu(e){return oe(e)&&e.name==="AuthRetryableFetchError"}let gf=class extends Jn{constructor(t,r,i){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=i}};function Rk(e){return oe(e)&&e.name==="AuthWeakPasswordError"}let Fu=class extends Jn{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}};const Mu="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),k1=` 	
\r=`.split(""),Ck=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<k1.length;t+=1)e[k1[t].charCodeAt(0)]=-2;for(let t=0;t<Mu.length;t+=1)e[Mu[t].charCodeAt(0)]=t;return e})();function b1(e,t,r){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const i=t.queue>>t.queuedBits-6&63;r(Mu[i]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const i=t.queue>>t.queuedBits-6&63;r(Mu[i]),t.queuedBits-=6}}function C2(e,t,r){const i=Ck[e];if(i>-1)for(t.queue=t.queue<<6|i,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(i===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function x1(e){const t=[],r=u=>{t.push(String.fromCodePoint(u))},i={utf8seq:0,codepoint:0},o={queue:0,queuedBits:0},a=u=>{Pk(u,i,r)};for(let u=0;u<e.length;u+=1)C2(e.charCodeAt(u),o,a);return t.join("")}function Ak(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function jk(e,t){for(let r=0;r<e.length;r+=1){let i=e.charCodeAt(r);if(i>55295&&i<=56319){const o=(i-55296)*1024&65535;i=(e.charCodeAt(r+1)-56320&65535|o)+65536,r+=1}Ak(i,t)}}function Pk(e,t,r){if(t.utf8seq===0){if(e<=127){r(e);return}for(let i=1;i<6;i+=1)if((e>>7-i&1)===0){t.utf8seq=i;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function Wi(e){const t=[],r={queue:0,queuedBits:0},i=o=>{t.push(o)};for(let o=0;o<e.length;o+=1)C2(e.charCodeAt(o),r,i);return new Uint8Array(t)}function Ok(e){const t=[];return jk(e,r=>t.push(r)),new Uint8Array(t)}function ei(e){const t=[],r={queue:0,queuedBits:0},i=o=>{t.push(o)};return e.forEach(o=>b1(o,r,i)),b1(null,r,i),t.join("")}function Nk(e){return Math.round(Date.now()/1e3)+e}function Ik(){return Symbol("auth-callback")}const It=()=>typeof window<"u"&&typeof document<"u",Ks={tested:!1,writable:!1},A2=()=>{if(!It())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Ks.tested)return Ks.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Ks.tested=!0,Ks.writable=!0}catch{Ks.tested=!0,Ks.writable=!1}return Ks.writable};function Lk(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((o,a)=>{t[a]=o})}catch{}return r.searchParams.forEach((i,o)=>{t[o]=i}),t}const j2=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),Dk=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",Bi=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},Hs=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},Nt=async(e,t)=>{await e.removeItem(t)};class sc{constructor(){this.promise=new sc.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}sc.promiseConstructor=Promise;function Id(e){const t=e.split(".");if(t.length!==3)throw new Fu("Invalid JWT structure");for(let i=0;i<t.length;i++)if(!xk.test(t[i]))throw new Fu("JWT not in base64url format");return{header:JSON.parse(x1(t[0])),payload:JSON.parse(x1(t[1])),signature:Wi(t[2]),raw:{header:t[0],payload:t[1]}}}async function Uk(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function Fk(e,t){return new Promise((i,o)=>{(async()=>{for(let a=0;a<1/0;a++)try{const u=await e(a);if(!t(a,null,u)){i(u);return}}catch(u){if(!t(a,u)){o(u);return}}})()})}function Mk(e){return("0"+e.toString(16)).substr(-2)}function $k(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",i=r.length;let o="";for(let a=0;a<56;a++)o+=r.charAt(Math.floor(Math.random()*i));return o}return crypto.getRandomValues(t),Array.from(t,Mk).join("")}async function Bk(e){const r=new TextEncoder().encode(e),i=await crypto.subtle.digest("SHA-256",r),o=new Uint8Array(i);return Array.from(o).map(a=>String.fromCharCode(a)).join("")}async function zk(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await Bk(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Li(e,t,r=!1){const i=$k();let o=i;r&&(o+="/PASSWORD_RECOVERY"),await Bi(e,`${t}-code-verifier`,o);const a=await zk(i);return[a,i===a?"plain":"s256"]}const Vk=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Wk(e){const t=e.headers.get(pf);if(!t||!t.match(Vk))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function Kk(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function Hk(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Gk=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Di(e){if(!Gk.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Ld(){const e={};return new Proxy(e,{get:(t,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const i=r.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function qk(e,t){return new Proxy(e,{get:(r,i,o)=>{if(i==="__isInsecureUserWarningProxy")return!0;if(typeof i=="symbol"){const a=i.toString();if(a==="Symbol(Symbol.toPrimitive)"||a==="Symbol(Symbol.toStringTag)"||a==="Symbol(util.inspect.custom)"||a==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(r,i,o)}return!t.value&&typeof i=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t.value=!0),Reflect.get(r,i,o)}})}function T1(e){return JSON.parse(JSON.stringify(e))}const Xs=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),Jk=[502,503,504];async function R1(e){var t;if(!Dk(e))throw new Uu(Xs(e),0);if(Jk.includes(e.status))throw new Uu(Xs(e),e.status);let r;try{r=await e.json()}catch(a){throw new ws(Xs(a),a)}let i;const o=Wk(e);if(o&&o.getTime()>=k2["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?i=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(i=r.error_code),i){if(i==="weak_password")throw new gf(Xs(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(i==="session_not_found")throw new lr}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((a,u)=>a&&typeof u=="string",!0))throw new gf(Xs(r),e.status,r.weak_password.reasons);throw new b2(Xs(r),e.status||500,i)}const Xk=(e,t,r,i)=>{const o={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?o:(o.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),o.body=JSON.stringify(i),Object.assign(Object.assign({},o),r))};async function ge(e,t,r,i){var o;const a=Object.assign({},i==null?void 0:i.headers);a[pf]||(a[pf]=k2["2024-01-01"].name),i!=null&&i.jwt&&(a.Authorization=`Bearer ${i.jwt}`);const u=(o=i==null?void 0:i.query)!==null&&o!==void 0?o:{};i!=null&&i.redirectTo&&(u.redirect_to=i.redirectTo);const h=Object.keys(u).length?"?"+new URLSearchParams(u).toString():"",d=await Yk(e,t,r+h,{headers:a,noResolveJson:i==null?void 0:i.noResolveJson},{},i==null?void 0:i.body);return i!=null&&i.xform?i==null?void 0:i.xform(d):{data:Object.assign({},d),error:null}}async function Yk(e,t,r,i,o,a){const u=Xk(t,i,o,a);let h;try{h=await e(r,Object.assign({},u))}catch(d){throw console.error(d),new Uu(Xs(d),0)}if(h.ok||await R1(h),i!=null&&i.noResolveJson)return h;try{return await h.json()}catch(d){await R1(d)}}function en(e){var t;let r=null;eb(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=Nk(e.expires_in)));const i=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:i},error:null}}function C1(e){const t=en(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,i)=>r&&typeof i=="string",!0)&&(t.data.weak_password=e.weak_password),t}function _s(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function Qk(e){return{data:e,error:null}}function Zk(e){const{action_link:t,email_otp:r,hashed_token:i,redirect_to:o,verification_type:a}=e,u=ho(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),h={action_link:t,email_otp:r,hashed_token:i,redirect_to:o,verification_type:a},d=Object.assign({},u);return{data:{properties:h,user:d},error:null}}function A1(e){return e}function eb(e){return e.access_token&&e.refresh_token&&e.expires_in}const xu=["global","local","others"];let Yf=class{constructor({url:t="",headers:r={},fetch:i}){this.url=t,this.headers=r,this.fetch=j2(i),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,r=xu[0]){if(xu.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${xu.join(", ")}`);try{return await ge(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(i){if(oe(i))return{data:null,error:i};throw i}}async inviteUserByEmail(t,r={}){try{return await ge(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:_s})}catch(i){if(oe(i))return{data:{user:null},error:i};throw i}}async generateLink(t){try{const{options:r}=t,i=ho(t,["options"]),o=Object.assign(Object.assign({},i),r);return"newEmail"in i&&(o.new_email=i==null?void 0:i.newEmail,delete o.newEmail),await ge(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:o,headers:this.headers,xform:Zk,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(oe(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await ge(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:_s})}catch(r){if(oe(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,i,o,a,u,h,d;try{const p={nextPage:null,lastPage:0,total:0},y=await ge(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(i=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&i!==void 0?i:"",per_page:(a=(o=t==null?void 0:t.perPage)===null||o===void 0?void 0:o.toString())!==null&&a!==void 0?a:""},xform:A1});if(y.error)throw y.error;const v=await y.json(),_=(u=y.headers.get("x-total-count"))!==null&&u!==void 0?u:0,E=(d=(h=y.headers.get("link"))===null||h===void 0?void 0:h.split(","))!==null&&d!==void 0?d:[];return E.length>0&&(E.forEach(S=>{const k=parseInt(S.split(";")[0].split("=")[1].substring(0,1)),T=JSON.parse(S.split(";")[1].split("=")[1]);p[`${T}Page`]=k}),p.total=parseInt(_)),{data:Object.assign(Object.assign({},v),p),error:null}}catch(p){if(oe(p))return{data:{users:[]},error:p};throw p}}async getUserById(t){Di(t);try{return await ge(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:_s})}catch(r){if(oe(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){Di(t);try{return await ge(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:_s})}catch(i){if(oe(i))return{data:{user:null},error:i};throw i}}async deleteUser(t,r=!1){Di(t);try{return await ge(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:_s})}catch(i){if(oe(i))return{data:{user:null},error:i};throw i}}async _listFactors(t){Di(t.userId);try{const{data:r,error:i}=await ge(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:o=>({data:{factors:o},error:null})});return{data:r,error:i}}catch(r){if(oe(r))return{data:null,error:r};throw r}}async _deleteFactor(t){Di(t.userId),Di(t.id);try{return{data:await ge(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(oe(r))return{data:null,error:r};throw r}}async _listOAuthClients(t){var r,i,o,a,u,h,d;try{const p={nextPage:null,lastPage:0,total:0},y=await ge(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(i=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&i!==void 0?i:"",per_page:(a=(o=t==null?void 0:t.perPage)===null||o===void 0?void 0:o.toString())!==null&&a!==void 0?a:""},xform:A1});if(y.error)throw y.error;const v=await y.json(),_=(u=y.headers.get("x-total-count"))!==null&&u!==void 0?u:0,E=(d=(h=y.headers.get("link"))===null||h===void 0?void 0:h.split(","))!==null&&d!==void 0?d:[];return E.length>0&&(E.forEach(S=>{const k=parseInt(S.split(";")[0].split("=")[1].substring(0,1)),T=JSON.parse(S.split(";")[1].split("=")[1]);p[`${T}Page`]=k}),p.total=parseInt(_)),{data:Object.assign(Object.assign({},v),p),error:null}}catch(p){if(oe(p))return{data:{clients:[]},error:p};throw p}}async _createOAuthClient(t){try{return await ge(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(oe(r))return{data:null,error:r};throw r}}async _getOAuthClient(t){try{return await ge(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(oe(r))return{data:null,error:r};throw r}}async _updateOAuthClient(t,r){try{return await ge(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${t}`,{body:r,headers:this.headers,xform:i=>({data:i,error:null})})}catch(i){if(oe(i))return{data:null,error:i};throw i}}async _deleteOAuthClient(t){try{return await ge(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(r){if(oe(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(t){try{return await ge(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(oe(r))return{data:null,error:r};throw r}}};function j1(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}const Ys={debug:!!(globalThis&&A2()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Qf extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}let P2=class extends Qf{};class tb extends Qf{}async function O2(e,t,r){Ys.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const i=new globalThis.AbortController;return t>0&&setTimeout(()=>{i.abort(),Ys.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:i.signal},async o=>{if(o){Ys.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,o.name);try{return await r()}finally{Ys.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,o.name)}}else{if(t===0)throw Ys.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new P2(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Ys.debug)try{const a=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(a,null,"  "))}catch(a){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",a)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}const P1={};async function rb(e,t,r){var i;const o=(i=P1[e])!==null&&i!==void 0?i:Promise.resolve(),a=Promise.race([o.catch(()=>null),t>=0?new Promise((u,h)=>{setTimeout(()=>{h(new tb(`Acquring process lock with name "${e}" timed out`))},t)}):null].filter(u=>u)).catch(u=>{if(u&&u.isAcquireTimeout)throw u;return null}).then(async()=>await r());return P1[e]=a.catch(async u=>{if(u&&u.isAcquireTimeout)return await o,null;throw u}),await a}function nb(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function N2(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function sb(e){return parseInt(e,16)}function ib(e){const t=new TextEncoder().encode(e);return"0x"+Array.from(t,i=>i.toString(16).padStart(2,"0")).join("")}function ob(e){var t;const{chainId:r,domain:i,expirationTime:o,issuedAt:a=new Date,nonce:u,notBefore:h,requestId:d,resources:p,scheme:y,uri:v,version:_}=e;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!i)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(u&&u.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${u}`);if(!v)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(_!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${_}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const E=N2(e.address),S=y?`${y}://${i}`:i,k=e.statement?`${e.statement}
`:"",T=`${S} wants you to sign in with your Ethereum account:
${E}

${k}`;let A=`URI: ${v}
Version: ${_}
Chain ID: ${r}${u?`
Nonce: ${u}`:""}
Issued At: ${a.toISOString()}`;if(o&&(A+=`
Expiration Time: ${o.toISOString()}`),h&&(A+=`
Not Before: ${h.toISOString()}`),d&&(A+=`
Request ID: ${d}`),p){let I=`
Resources:`;for(const R of p){if(!R||typeof R!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${R}`);I+=`
- ${R}`}A+=I}return`${T}
${A}`}class mt extends Error{constructor({message:t,code:r,cause:i,name:o}){var a;super(t,{cause:i}),this.__isWebAuthnError=!0,this.name=(a=o??(i instanceof Error?i.name:void 0))!==null&&a!==void 0?a:"Unknown Error",this.code=r}}class $u extends mt{constructor(t,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:t}),this.name="WebAuthnUnknownError",this.originalError=r}}function ab({error:e,options:t}){var r,i,o;const{publicKey:a}=t;if(!a)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new mt({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((r=a.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new mt({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(t.mediation==="conditional"&&((i=a.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new mt({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((o=a.authenticatorSelection)===null||o===void 0?void 0:o.userVerification)==="required")return new mt({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new mt({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new mt({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return a.pubKeyCredParams.filter(h=>h.type==="public-key").length===0?new mt({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new mt({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const u=window.location.hostname;if(I2(u)){if(a.rp.id!==u)return new mt({message:`The RP ID "${a.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new mt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(a.user.id.byteLength<1||a.user.id.byteLength>64)return new mt({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new mt({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new mt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function lb({error:e,options:t}){const{publicKey:r}=t;if(!r)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new mt({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new mt({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const i=window.location.hostname;if(I2(i)){if(r.rpId!==i)return new mt({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new mt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new mt({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new mt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}class ub{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const cb=new ub;function hb(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:r,excludeCredentials:i}=e,o=ho(e,["challenge","user","excludeCredentials"]),a=Wi(t).buffer,u=Object.assign(Object.assign({},r),{id:Wi(r.id).buffer}),h=Object.assign(Object.assign({},o),{challenge:a,user:u});if(i&&i.length>0){h.excludeCredentials=new Array(i.length);for(let d=0;d<i.length;d++){const p=i[d];h.excludeCredentials[d]=Object.assign(Object.assign({},p),{id:Wi(p.id).buffer,type:p.type||"public-key",transports:p.transports})}}return h}function db(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:r}=e,i=ho(e,["challenge","allowCredentials"]),o=Wi(t).buffer,a=Object.assign(Object.assign({},i),{challenge:o});if(r&&r.length>0){a.allowCredentials=new Array(r.length);for(let u=0;u<r.length;u++){const h=r[u];a.allowCredentials[u]=Object.assign(Object.assign({},h),{id:Wi(h.id).buffer,type:h.type||"public-key",transports:h.transports})}}return a}function fb(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e;return{id:e.id,rawId:e.id,response:{attestationObject:ei(new Uint8Array(e.response.attestationObject)),clientDataJSON:ei(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function pb(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e,i=e.getClientExtensionResults(),o=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:ei(new Uint8Array(o.authenticatorData)),clientDataJSON:ei(new Uint8Array(o.clientDataJSON)),signature:ei(new Uint8Array(o.signature)),userHandle:o.userHandle?ei(new Uint8Array(o.userHandle)):void 0},type:"public-key",clientExtensionResults:i,authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function I2(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function O1(){var e,t;return!!(It()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.get)=="function")}async function mb(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new $u("Browser returned unexpected credential type",t)}:{data:null,error:new $u("Empty credential response",t)}}catch(t){return{data:null,error:ab({error:t,options:e})}}}async function gb(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new $u("Browser returned unexpected credential type",t)}:{data:null,error:new $u("Empty credential response",t)}}catch(t){return{data:null,error:lb({error:t,options:e})}}}const yb={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},vb={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function Bu(...e){const t=o=>o!==null&&typeof o=="object"&&!Array.isArray(o),r=o=>o instanceof ArrayBuffer||ArrayBuffer.isView(o),i={};for(const o of e)if(o)for(const a in o){const u=o[a];if(u!==void 0)if(Array.isArray(u))i[a]=u;else if(r(u))i[a]=u;else if(t(u)){const h=i[a];t(h)?i[a]=Bu(h,u):i[a]=Bu(u)}else i[a]=u}return i}function wb(e,t){return Bu(yb,e,t||{})}function _b(e,t){return Bu(vb,e,t||{})}class Eb{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:r,friendlyName:i,signal:o},a){try{const{data:u,error:h}=await this.client.mfa.challenge({factorId:t,webauthn:r});if(!u)return{data:null,error:h};const d=o??cb.createNewAbortSignal();if(u.webauthn.type==="create"){const{user:p}=u.webauthn.credential_options.publicKey;p.name||(p.name=`${p.id}:${i}`),p.displayName||(p.displayName=p.name)}switch(u.webauthn.type){case"create":{const p=wb(u.webauthn.credential_options.publicKey,a==null?void 0:a.create),{data:y,error:v}=await mb({publicKey:p,signal:d});return y?{data:{factorId:t,challengeId:u.id,webauthn:{type:u.webauthn.type,credential_response:y}},error:null}:{data:null,error:v}}case"request":{const p=_b(u.webauthn.credential_options.publicKey,a==null?void 0:a.request),{data:y,error:v}=await gb(Object.assign(Object.assign({},u.webauthn.credential_options),{publicKey:p,signal:d}));return y?{data:{factorId:t,challengeId:u.id,webauthn:{type:u.webauthn.type,credential_response:y}},error:null}:{data:null,error:v}}}}catch(u){return oe(u)?{data:null,error:u}:{data:null,error:new ws("Unexpected error in challenge",u)}}}async _verify({challengeId:t,factorId:r,webauthn:i}){return this.client.mfa.verify({factorId:r,challengeId:t,webauthn:i})}async _authenticate({factorId:t,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:i=typeof window<"u"?[window.location.origin]:void 0,signal:o}={}},a){if(!r)return{data:null,error:new Yi("rpId is required for WebAuthn authentication")};try{if(!O1())return{data:null,error:new ws("Browser does not support WebAuthn",null)};const{data:u,error:h}=await this.challenge({factorId:t,webauthn:{rpId:r,rpOrigins:i},signal:o},{request:a});if(!u)return{data:null,error:h};const{webauthn:d}=u;return this._verify({factorId:t,challengeId:u.challengeId,webauthn:{type:d.type,rpId:r,rpOrigins:i,credential_response:d.credential_response}})}catch(u){return oe(u)?{data:null,error:u}:{data:null,error:new ws("Unexpected error in authenticate",u)}}}async _register({friendlyName:t,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:i=typeof window<"u"?[window.location.origin]:void 0,signal:o}={}},a){if(!r)return{data:null,error:new Yi("rpId is required for WebAuthn registration")};try{if(!O1())return{data:null,error:new ws("Browser does not support WebAuthn",null)};const{data:u,error:h}=await this._enroll({friendlyName:t});if(!u)return await this.client.mfa.listFactors().then(y=>{var v;return(v=y.data)===null||v===void 0?void 0:v.all.find(_=>_.factor_type==="webauthn"&&_.friendly_name===t&&_.status!=="unverified")}).then(y=>y?this.client.mfa.unenroll({factorId:y==null?void 0:y.id}):void 0),{data:null,error:h};const{data:d,error:p}=await this._challenge({factorId:u.id,friendlyName:u.friendly_name,webauthn:{rpId:r,rpOrigins:i},signal:o},{create:a});return d?this._verify({factorId:u.id,challengeId:d.challengeId,webauthn:{rpId:r,rpOrigins:i,type:d.webauthn.type,credential_response:d.webauthn.credential_response}}):{data:null,error:p}}catch(u){return oe(u)?{data:null,error:u}:{data:null,error:new ws("Unexpected error in register",u)}}}}nb();const Sb={url:Sk,storageKey:kk,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:bk,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function N1(e,t,r){return await r()}const Ui={};let Zf=class yf{get jwks(){var t,r;return(r=(t=Ui[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(t){Ui[this.storageKey]=Object.assign(Object.assign({},Ui[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,r;return(r=(t=Ui[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){Ui[this.storageKey]=Object.assign(Object.assign({},Ui[this.storageKey]),{cachedAt:t})}constructor(t){var r,i,o;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const a=Object.assign(Object.assign({},Sb),t);if(this.storageKey=a.storageKey,this.instanceID=(r=yf.nextInstanceID[this.storageKey])!==null&&r!==void 0?r:0,yf.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!a.debug,typeof a.debug=="function"&&(this.logger=a.debug),this.instanceID>0&&It()){const u=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(u),this.logDebugMessages&&console.trace(u)}if(this.persistSession=a.persistSession,this.autoRefreshToken=a.autoRefreshToken,this.admin=new Yf({url:a.url,headers:a.headers,fetch:a.fetch}),this.url=a.url,this.headers=a.headers,this.fetch=j2(a.fetch),this.lock=a.lock||N1,this.detectSessionInUrl=a.detectSessionInUrl,this.flowType=a.flowType,this.hasCustomAuthorizationHeader=a.hasCustomAuthorizationHeader,this.throwOnError=a.throwOnError,a.lock?this.lock=a.lock:this.persistSession&&It()&&(!((i=globalThis==null?void 0:globalThis.navigator)===null||i===void 0)&&i.locks)?this.lock=O2:this.lock=N1,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new Eb(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(a.storage?this.storage=a.storage:A2()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=j1(this.memoryStorage)),a.userStorage&&(this.userStorage=a.userStorage)):(this.memoryStorage={},this.storage=j1(this.memoryStorage)),It()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(u){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",u)}(o=this.broadcastChannel)===null||o===void 0||o.addEventListener("message",async u=>{this._debug("received broadcast notification from other tab or client",u),await this._notifyAllSubscribers(u.data.event,u.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(t){if(this.throwOnError&&t&&t.error)throw t.error;return t}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${S2}) ${new Date().toISOString()}`}_debug(...t){return this.logDebugMessages&&this.logger(this._logPrefix(),...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{let r={},i="none";if(It()&&(r=Lk(window.location.href),this._isImplicitGrantCallback(r)?i="implicit":await this._isPKCECallback(r)&&(i="pkce")),It()&&this.detectSessionInUrl&&i!=="none"){const{data:o,error:a}=await this._getSessionFromURL(r,i);if(a){if(this._debug("#_initialize()","error detecting session from URL",a),R2(a)){const d=(t=a.details)===null||t===void 0?void 0:t.code;if(d==="identity_already_exists"||d==="identity_not_found"||d==="single_identity_not_deletable")return{error:a}}return await this._removeSession(),{error:a}}const{session:u,redirectType:h}=o;return this._debug("#_initialize()","detected session in URL",u,"redirect type",h),await this._saveSession(u),setTimeout(async()=>{h==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",u):await this._notifyAllSubscribers("SIGNED_IN",u)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return oe(r)?this._returnResult({error:r}):this._returnResult({error:new ws("Unexpected error during initialization",r)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,i,o;try{const a=await ge(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(i=(r=t==null?void 0:t.options)===null||r===void 0?void 0:r.data)!==null&&i!==void 0?i:{},gotrue_meta_security:{captcha_token:(o=t==null?void 0:t.options)===null||o===void 0?void 0:o.captchaToken}},xform:en}),{data:u,error:h}=a;if(h||!u)return this._returnResult({data:{user:null,session:null},error:h});const d=u.session,p=u.user;return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",d)),this._returnResult({data:{user:p,session:d},error:null})}catch(a){if(oe(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signUp(t){var r,i,o;try{let a;if("email"in t){const{email:y,password:v,options:_}=t;let E=null,S=null;this.flowType==="pkce"&&([E,S]=await Li(this.storage,this.storageKey)),a=await ge(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:_==null?void 0:_.emailRedirectTo,body:{email:y,password:v,data:(r=_==null?void 0:_.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:_==null?void 0:_.captchaToken},code_challenge:E,code_challenge_method:S},xform:en})}else if("phone"in t){const{phone:y,password:v,options:_}=t;a=await ge(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:y,password:v,data:(i=_==null?void 0:_.data)!==null&&i!==void 0?i:{},channel:(o=_==null?void 0:_.channel)!==null&&o!==void 0?o:"sms",gotrue_meta_security:{captcha_token:_==null?void 0:_.captchaToken}},xform:en})}else throw new _a("You must provide either an email or phone number and a password");const{data:u,error:h}=a;if(h||!u)return await Nt(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:h});const d=u.session,p=u.user;return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",d)),this._returnResult({data:{user:p,session:d},error:null})}catch(a){if(await Nt(this.storage,`${this.storageKey}-code-verifier`),oe(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithPassword(t){try{let r;if("email"in t){const{email:a,password:u,options:h}=t;r=await ge(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:a,password:u,gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:C1})}else if("phone"in t){const{phone:a,password:u,options:h}=t;r=await ge(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:a,password:u,gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:C1})}else throw new _a("You must provide either an email or phone number and a password");const{data:i,error:o}=r;if(o)return this._returnResult({data:{user:null,session:null},error:o});if(!i||!i.session||!i.user){const a=new Js;return this._returnResult({data:{user:null,session:null},error:a})}return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),this._returnResult({data:Object.assign({user:i.user,session:i.session},i.weak_password?{weakPassword:i.weak_password}:null),error:o})}catch(r){if(oe(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOAuth(t){var r,i,o,a;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(i=t.options)===null||i===void 0?void 0:i.scopes,queryParams:(o=t.options)===null||o===void 0?void 0:o.queryParams,skipBrowserRedirect:(a=t.options)===null||a===void 0?void 0:a.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:r}=t;switch(r){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(t){var r,i,o,a,u,h,d,p,y,v,_;let E,S;if("message"in t)E=t.message,S=t.signature;else{const{chain:k,wallet:T,statement:A,options:I}=t;let R;if(It())if(typeof T=="object")R=T;else{const te=window;if("ethereum"in te&&typeof te.ethereum=="object"&&"request"in te.ethereum&&typeof te.ethereum.request=="function")R=te.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof T!="object"||!(I!=null&&I.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");R=T}const D=new URL((r=I==null?void 0:I.url)!==null&&r!==void 0?r:window.location.href),V=await R.request({method:"eth_requestAccounts"}).then(te=>te).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!V||V.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const F=N2(V[0]);let B=(i=I==null?void 0:I.signInWithEthereum)===null||i===void 0?void 0:i.chainId;if(!B){const te=await R.request({method:"eth_chainId"});B=sb(te)}const M={domain:D.host,address:F,statement:A,uri:D.href,version:"1",chainId:B,nonce:(o=I==null?void 0:I.signInWithEthereum)===null||o===void 0?void 0:o.nonce,issuedAt:(u=(a=I==null?void 0:I.signInWithEthereum)===null||a===void 0?void 0:a.issuedAt)!==null&&u!==void 0?u:new Date,expirationTime:(h=I==null?void 0:I.signInWithEthereum)===null||h===void 0?void 0:h.expirationTime,notBefore:(d=I==null?void 0:I.signInWithEthereum)===null||d===void 0?void 0:d.notBefore,requestId:(p=I==null?void 0:I.signInWithEthereum)===null||p===void 0?void 0:p.requestId,resources:(y=I==null?void 0:I.signInWithEthereum)===null||y===void 0?void 0:y.resources};E=ob(M),S=await R.request({method:"personal_sign",params:[ib(E),F]})}try{const{data:k,error:T}=await ge(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:E,signature:S},!((v=t.options)===null||v===void 0)&&v.captchaToken?{gotrue_meta_security:{captcha_token:(_=t.options)===null||_===void 0?void 0:_.captchaToken}}:null),xform:en});if(T)throw T;if(!k||!k.session||!k.user){const A=new Js;return this._returnResult({data:{user:null,session:null},error:A})}return k.session&&(await this._saveSession(k.session),await this._notifyAllSubscribers("SIGNED_IN",k.session)),this._returnResult({data:Object.assign({},k),error:T})}catch(k){if(oe(k))return this._returnResult({data:{user:null,session:null},error:k});throw k}}async signInWithSolana(t){var r,i,o,a,u,h,d,p,y,v,_,E;let S,k;if("message"in t)S=t.message,k=t.signature;else{const{chain:T,wallet:A,statement:I,options:R}=t;let D;if(It())if(typeof A=="object")D=A;else{const F=window;if("solana"in F&&typeof F.solana=="object"&&("signIn"in F.solana&&typeof F.solana.signIn=="function"||"signMessage"in F.solana&&typeof F.solana.signMessage=="function"))D=F.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof A!="object"||!(R!=null&&R.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");D=A}const V=new URL((r=R==null?void 0:R.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in D&&D.signIn){const F=await D.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},R==null?void 0:R.signInWithSolana),{version:"1",domain:V.host,uri:V.href}),I?{statement:I}:null));let B;if(Array.isArray(F)&&F[0]&&typeof F[0]=="object")B=F[0];else if(F&&typeof F=="object"&&"signedMessage"in F&&"signature"in F)B=F;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in B&&"signature"in B&&(typeof B.signedMessage=="string"||B.signedMessage instanceof Uint8Array)&&B.signature instanceof Uint8Array)S=typeof B.signedMessage=="string"?B.signedMessage:new TextDecoder().decode(B.signedMessage),k=B.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in D)||typeof D.signMessage!="function"||!("publicKey"in D)||typeof D!="object"||!D.publicKey||!("toBase58"in D.publicKey)||typeof D.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");S=[`${V.host} wants you to sign in with your Solana account:`,D.publicKey.toBase58(),...I?["",I,""]:[""],"Version: 1",`URI: ${V.href}`,`Issued At: ${(o=(i=R==null?void 0:R.signInWithSolana)===null||i===void 0?void 0:i.issuedAt)!==null&&o!==void 0?o:new Date().toISOString()}`,...!((a=R==null?void 0:R.signInWithSolana)===null||a===void 0)&&a.notBefore?[`Not Before: ${R.signInWithSolana.notBefore}`]:[],...!((u=R==null?void 0:R.signInWithSolana)===null||u===void 0)&&u.expirationTime?[`Expiration Time: ${R.signInWithSolana.expirationTime}`]:[],...!((h=R==null?void 0:R.signInWithSolana)===null||h===void 0)&&h.chainId?[`Chain ID: ${R.signInWithSolana.chainId}`]:[],...!((d=R==null?void 0:R.signInWithSolana)===null||d===void 0)&&d.nonce?[`Nonce: ${R.signInWithSolana.nonce}`]:[],...!((p=R==null?void 0:R.signInWithSolana)===null||p===void 0)&&p.requestId?[`Request ID: ${R.signInWithSolana.requestId}`]:[],...!((v=(y=R==null?void 0:R.signInWithSolana)===null||y===void 0?void 0:y.resources)===null||v===void 0)&&v.length?["Resources",...R.signInWithSolana.resources.map(B=>`- ${B}`)]:[]].join(`
`);const F=await D.signMessage(new TextEncoder().encode(S),"utf8");if(!F||!(F instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");k=F}}try{const{data:T,error:A}=await ge(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:S,signature:ei(k)},!((_=t.options)===null||_===void 0)&&_.captchaToken?{gotrue_meta_security:{captcha_token:(E=t.options)===null||E===void 0?void 0:E.captchaToken}}:null),xform:en});if(A)throw A;if(!T||!T.session||!T.user){const I=new Js;return this._returnResult({data:{user:null,session:null},error:I})}return T.session&&(await this._saveSession(T.session),await this._notifyAllSubscribers("SIGNED_IN",T.session)),this._returnResult({data:Object.assign({},T),error:A})}catch(T){if(oe(T))return this._returnResult({data:{user:null,session:null},error:T});throw T}}async _exchangeCodeForSession(t){const r=await Hs(this.storage,`${this.storageKey}-code-verifier`),[i,o]=(r??"").split("/");try{const{data:a,error:u}=await ge(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:i},xform:en});if(await Nt(this.storage,`${this.storageKey}-code-verifier`),u)throw u;if(!a||!a.session||!a.user){const h=new Js;return this._returnResult({data:{user:null,session:null,redirectType:null},error:h})}return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),this._returnResult({data:Object.assign(Object.assign({},a),{redirectType:o??null}),error:u})}catch(a){if(await Nt(this.storage,`${this.storageKey}-code-verifier`),oe(a))return this._returnResult({data:{user:null,session:null,redirectType:null},error:a});throw a}}async signInWithIdToken(t){try{const{options:r,provider:i,token:o,access_token:a,nonce:u}=t,h=await ge(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:i,id_token:o,access_token:a,nonce:u,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:en}),{data:d,error:p}=h;if(p)return this._returnResult({data:{user:null,session:null},error:p});if(!d||!d.session||!d.user){const y=new Js;return this._returnResult({data:{user:null,session:null},error:y})}return d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",d.session)),this._returnResult({data:d,error:p})}catch(r){if(oe(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOtp(t){var r,i,o,a,u;try{if("email"in t){const{email:h,options:d}=t;let p=null,y=null;this.flowType==="pkce"&&([p,y]=await Li(this.storage,this.storageKey));const{error:v}=await ge(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:h,data:(r=d==null?void 0:d.data)!==null&&r!==void 0?r:{},create_user:(i=d==null?void 0:d.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken},code_challenge:p,code_challenge_method:y},redirectTo:d==null?void 0:d.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:v})}if("phone"in t){const{phone:h,options:d}=t,{data:p,error:y}=await ge(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:h,data:(o=d==null?void 0:d.data)!==null&&o!==void 0?o:{},create_user:(a=d==null?void 0:d.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken},channel:(u=d==null?void 0:d.channel)!==null&&u!==void 0?u:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:p==null?void 0:p.message_id},error:y})}throw new _a("You must provide either an email or phone number.")}catch(h){if(await Nt(this.storage,`${this.storageKey}-code-verifier`),oe(h))return this._returnResult({data:{user:null,session:null},error:h});throw h}}async verifyOtp(t){var r,i;try{let o,a;"options"in t&&(o=(r=t.options)===null||r===void 0?void 0:r.redirectTo,a=(i=t.options)===null||i===void 0?void 0:i.captchaToken);const{data:u,error:h}=await ge(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:a}}),redirectTo:o,xform:en});if(h)throw h;if(!u)throw new Error("An error occurred on token verification.");const d=u.session,p=u.user;return d!=null&&d.access_token&&(await this._saveSession(d),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",d)),this._returnResult({data:{user:p,session:d},error:null})}catch(o){if(oe(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async signInWithSSO(t){var r,i,o,a,u;try{let h=null,d=null;this.flowType==="pkce"&&([h,d]=await Li(this.storage,this.storageKey));const p=await ge(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(i=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&i!==void 0?i:void 0}),!((o=t==null?void 0:t.options)===null||o===void 0)&&o.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:h,code_challenge_method:d}),headers:this.headers,xform:Qk});return!((a=p.data)===null||a===void 0)&&a.url&&It()&&!(!((u=t.options)===null||u===void 0)&&u.skipBrowserRedirect)&&window.location.assign(p.data.url),this._returnResult(p)}catch(h){if(await Nt(this.storage,`${this.storageKey}-code-verifier`),oe(h))return this._returnResult({data:null,error:h});throw h}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:i}=t;if(i)throw i;if(!r)throw new lr;const{error:o}=await ge(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return this._returnResult({data:{user:null,session:null},error:o})})}catch(t){if(oe(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:i,type:o,options:a}=t,{error:u}=await ge(this.fetch,"POST",r,{headers:this.headers,body:{email:i,type:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},redirectTo:a==null?void 0:a.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:u})}else if("phone"in t){const{phone:i,type:o,options:a}=t,{data:u,error:h}=await ge(this.fetch,"POST",r,{headers:this.headers,body:{phone:i,type:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:h})}throw new _a("You must provide either an email or phone number and a type")}catch(r){if(oe(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const i=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),o=(async()=>(await i,await r()))();return this.pendingInLock.push((async()=>{try{await o}catch{}})()),o}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const i=r();for(this.pendingInLock.push((async()=>{try{await i}catch{}})()),await i;this.pendingInLock.length;){const o=[...this.pendingInLock];await Promise.all(o),this.pendingInLock.splice(0,o.length)}return await i}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await Hs(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const i=t.expires_at?t.expires_at*1e3-Date.now()<Nd:!1;if(this._debug("#__loadSession()",`session has${i?"":" not"} expired`,"expires_at",t.expires_at),!i){if(this.userStorage){const u=await Hs(this.userStorage,this.storageKey+"-user");u!=null&&u.user?t.user=u.user:t.user=Ld()}if(this.storage.isServer&&t.user&&!t.user.__isUserNotAvailableProxy){const u={value:this.suppressGetSessionWarning};t.user=qk(t.user,u),u.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:t},error:null}}const{data:o,error:a}=await this._callRefreshToken(t.refresh_token);return a?this._returnResult({data:{session:null},error:a}):this._returnResult({data:{session:o},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(t){if(t)return await this._getUser(t);await this.initializePromise;const r=await this._acquireLock(-1,async()=>await this._getUser());return r.data.user&&(this.suppressGetSessionWarning=!0),r}async _getUser(t){try{return t?await ge(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:_s}):await this._useSession(async r=>{var i,o,a;const{data:u,error:h}=r;if(h)throw h;return!(!((i=u.session)===null||i===void 0)&&i.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new lr}:await ge(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(a=(o=u.session)===null||o===void 0?void 0:o.access_token)!==null&&a!==void 0?a:void 0,xform:_s})})}catch(r){if(oe(r))return T2(r)&&(await this._removeSession(),await Nt(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:r});throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async i=>{const{data:o,error:a}=i;if(a)throw a;if(!o.session)throw new lr;const u=o.session;let h=null,d=null;this.flowType==="pkce"&&t.email!=null&&([h,d]=await Li(this.storage,this.storageKey));const{data:p,error:y}=await ge(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:h,code_challenge_method:d}),jwt:u.access_token,xform:_s});if(y)throw y;return u.user=p.user,await this._saveSession(u),await this._notifyAllSubscribers("USER_UPDATED",u),this._returnResult({data:{user:u.user},error:null})})}catch(i){if(await Nt(this.storage,`${this.storageKey}-code-verifier`),oe(i))return this._returnResult({data:{user:null},error:i});throw i}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new lr;const r=Date.now()/1e3;let i=r,o=!0,a=null;const{payload:u}=Id(t.access_token);if(u.exp&&(i=u.exp,o=i<=r),o){const{data:h,error:d}=await this._callRefreshToken(t.refresh_token);if(d)return this._returnResult({data:{user:null,session:null},error:d});if(!h)return{data:{user:null,session:null},error:null};a=h}else{const{data:h,error:d}=await this._getUser(t.access_token);if(d)throw d;a={access_token:t.access_token,refresh_token:t.refresh_token,user:h.user,token_type:"bearer",expires_in:i-r,expires_at:i},await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)}return this._returnResult({data:{user:a.user,session:a},error:null})}catch(r){if(oe(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var i;if(!t){const{data:u,error:h}=r;if(h)throw h;t=(i=u.session)!==null&&i!==void 0?i:void 0}if(!(t!=null&&t.refresh_token))throw new lr;const{data:o,error:a}=await this._callRefreshToken(t.refresh_token);return a?this._returnResult({data:{user:null,session:null},error:a}):o?this._returnResult({data:{user:o.user,session:o},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(r){if(oe(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async _getSessionFromURL(t,r){try{if(!It())throw new Ea("No browser detected.");if(t.error||t.error_description||t.error_code)throw new Ea(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new mf("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Ea("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new mf("No code detected.");const{data:I,error:R}=await this._exchangeCodeForSession(t.code);if(R)throw R;const D=new URL(window.location.href);return D.searchParams.delete("code"),window.history.replaceState(window.history.state,"",D.toString()),{data:{session:I.session,redirectType:null},error:null}}const{provider_token:i,provider_refresh_token:o,access_token:a,refresh_token:u,expires_in:h,expires_at:d,token_type:p}=t;if(!a||!h||!u||!p)throw new Ea("No session defined in URL");const y=Math.round(Date.now()/1e3),v=parseInt(h);let _=y+v;d&&(_=parseInt(d));const E=_-y;E*1e3<=$i&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${E}s, should have been closer to ${v}s`);const S=_-v;y-S>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",S,_,y):y-S<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",S,_,y);const{data:k,error:T}=await this._getUser(a);if(T)throw T;const A={provider_token:i,provider_refresh_token:o,access_token:a,expires_in:v,expires_at:_,refresh_token:u,token_type:p,user:k.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:A,redirectType:t.type},error:null})}catch(i){if(oe(i))return this._returnResult({data:{session:null,redirectType:null},error:i});throw i}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await Hs(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var i;const{data:o,error:a}=r;if(a)return this._returnResult({error:a});const u=(i=o.session)===null||i===void 0?void 0:i.access_token;if(u){const{error:h}=await this.admin.signOut(u,t);if(h&&!(x2(h)&&(h.status===404||h.status===401||h.status===403)))return this._returnResult({error:h})}return t!=="others"&&(await this._removeSession(),await Nt(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(t){const r=Ik(),i={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,i),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:i}}}async _emitInitialSession(t){return await this._useSession(async r=>{var i,o;try{const{data:{session:a},error:u}=r;if(u)throw u;await((i=this.stateChangeEmitters.get(t))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",a)),this._debug("INITIAL_SESSION","callback id",t,"session",a)}catch(a){await((o=this.stateChangeEmitters.get(t))===null||o===void 0?void 0:o.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",a),console.error(a)}})}async resetPasswordForEmail(t,r={}){let i=null,o=null;this.flowType==="pkce"&&([i,o]=await Li(this.storage,this.storageKey,!0));try{return await ge(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:i,code_challenge_method:o,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(a){if(await Nt(this.storage,`${this.storageKey}-code-verifier`),oe(a))return this._returnResult({data:null,error:a});throw a}}async getUserIdentities(){var t;try{const{data:r,error:i}=await this.getUser();if(i)throw i;return this._returnResult({data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null})}catch(r){if(oe(r))return this._returnResult({data:null,error:r});throw r}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var r;try{const{data:i,error:o}=await this._useSession(async a=>{var u,h,d,p,y;const{data:v,error:_}=a;if(_)throw _;const E=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(u=t.options)===null||u===void 0?void 0:u.redirectTo,scopes:(h=t.options)===null||h===void 0?void 0:h.scopes,queryParams:(d=t.options)===null||d===void 0?void 0:d.queryParams,skipBrowserRedirect:!0});return await ge(this.fetch,"GET",E,{headers:this.headers,jwt:(y=(p=v.session)===null||p===void 0?void 0:p.access_token)!==null&&y!==void 0?y:void 0})});if(o)throw o;return It()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(i==null?void 0:i.url),this._returnResult({data:{provider:t.provider,url:i==null?void 0:i.url},error:null})}catch(i){if(oe(i))return this._returnResult({data:{provider:t.provider,url:null},error:i});throw i}}async linkIdentityIdToken(t){return await this._useSession(async r=>{var i;try{const{error:o,data:{session:a}}=r;if(o)throw o;const{options:u,provider:h,token:d,access_token:p,nonce:y}=t,v=await ge(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(i=a==null?void 0:a.access_token)!==null&&i!==void 0?i:void 0,body:{provider:h,id_token:d,access_token:p,nonce:y,link_identity:!0,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}},xform:en}),{data:_,error:E}=v;return E?this._returnResult({data:{user:null,session:null},error:E}):!_||!_.session||!_.user?this._returnResult({data:{user:null,session:null},error:new Js}):(_.session&&(await this._saveSession(_.session),await this._notifyAllSubscribers("USER_UPDATED",_.session)),this._returnResult({data:_,error:E}))}catch(o){if(await Nt(this.storage,`${this.storageKey}-code-verifier`),oe(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}})}async unlinkIdentity(t){try{return await this._useSession(async r=>{var i,o;const{data:a,error:u}=r;if(u)throw u;return await ge(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(o=(i=a.session)===null||i===void 0?void 0:i.access_token)!==null&&o!==void 0?o:void 0})})}catch(r){if(oe(r))return this._returnResult({data:null,error:r});throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const i=Date.now();return await Fk(async o=>(o>0&&await Uk(200*Math.pow(2,o-1)),this._debug(r,"refreshing attempt",o),await ge(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:en})),(o,a)=>{const u=200*Math.pow(2,o);return a&&bu(a)&&Date.now()+u-i<$i})}catch(i){if(this._debug(r,"error",i),oe(i))return this._returnResult({data:{session:null,user:null},error:i});throw i}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const i=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",i),It()&&!r.skipBrowserRedirect&&window.location.assign(i),{data:{provider:t,url:i},error:null}}async _recoverAndRefresh(){var t,r;const i="#_recoverAndRefresh()";this._debug(i,"begin");try{const o=await Hs(this.storage,this.storageKey);if(o&&this.userStorage){let u=await Hs(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!u&&(u={user:o.user},await Bi(this.userStorage,this.storageKey+"-user",u)),o.user=(t=u==null?void 0:u.user)!==null&&t!==void 0?t:Ld()}else if(o&&!o.user&&!o.user){const u=await Hs(this.storage,this.storageKey+"-user");u&&(u!=null&&u.user)?(o.user=u.user,await Nt(this.storage,this.storageKey+"-user"),await Bi(this.storage,this.storageKey,o)):o.user=Ld()}if(this._debug(i,"session from storage",o),!this._isValidSession(o)){this._debug(i,"session is not valid"),o!==null&&await this._removeSession();return}const a=((r=o.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<Nd;if(this._debug(i,`session has${a?"":" not"} expired with margin of ${Nd}s`),a){if(this.autoRefreshToken&&o.refresh_token){const{error:u}=await this._callRefreshToken(o.refresh_token);u&&(console.error(u),bu(u)||(this._debug(i,"refresh failed with a non-retryable error, removing the session",u),await this._removeSession()))}}else if(o.user&&o.user.__isUserNotAvailableProxy===!0)try{const{data:u,error:h}=await this._getUser(o.access_token);!h&&(u!=null&&u.user)?(o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)):this._debug(i,"could not get user data, skipping SIGNED_IN notification")}catch(u){console.error("Error getting user data:",u),this._debug(i,"error getting user data, skipping SIGNED_IN notification",u)}else await this._notifyAllSubscribers("SIGNED_IN",o)}catch(o){this._debug(i,"error",o),console.error(o);return}finally{this._debug(i,"end")}}async _callRefreshToken(t){var r,i;if(!t)throw new lr;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const o=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(o,"begin");try{this.refreshingDeferred=new sc;const{data:a,error:u}=await this._refreshAccessToken(t);if(u)throw u;if(!a.session)throw new lr;await this._saveSession(a.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",a.session);const h={data:a.session,error:null};return this.refreshingDeferred.resolve(h),h}catch(a){if(this._debug(o,"error",a),oe(a)){const u={data:null,error:a};return bu(a)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(u),u}throw(i=this.refreshingDeferred)===null||i===void 0||i.reject(a),a}finally{this.refreshingDeferred=null,this._debug(o,"end")}}async _notifyAllSubscribers(t,r,i=!0){const o=`#_notifyAllSubscribers(${t})`;this._debug(o,"begin",r,`broadcast = ${i}`);try{this.broadcastChannel&&i&&this.broadcastChannel.postMessage({event:t,session:r});const a=[],u=Array.from(this.stateChangeEmitters.values()).map(async h=>{try{await h.callback(t,r)}catch(d){a.push(d)}});if(await Promise.all(u),a.length>0){for(let h=0;h<a.length;h+=1)console.error(a[h]);throw a[0]}}finally{this._debug(o,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,await Nt(this.storage,`${this.storageKey}-code-verifier`);const r=Object.assign({},t),i=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!i&&r.user&&await Bi(this.userStorage,this.storageKey+"-user",{user:r.user});const o=Object.assign({},r);delete o.user;const a=T1(o);await Bi(this.storage,this.storageKey,a)}else{const o=T1(r);await Bi(this.storage,this.storageKey,o)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await Nt(this.storage,this.storageKey),await Nt(this.storage,this.storageKey+"-code-verifier"),await Nt(this.storage,this.storageKey+"-user"),this.userStorage&&await Nt(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&It()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),$i);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:i}}=r;if(!i||!i.refresh_token||!i.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const o=Math.floor((i.expires_at*1e3-t)/$i);this._debug("#_autoRefreshTokenTick()",`access token expires in ${o} ticks, a tick lasts ${$i}ms, refresh threshold is ${ff} ticks`),o<=ff&&await this._callRefreshToken(i.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof Qf)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!It()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,i){const o=[`provider=${encodeURIComponent(r)}`];if(i!=null&&i.redirectTo&&o.push(`redirect_to=${encodeURIComponent(i.redirectTo)}`),i!=null&&i.scopes&&o.push(`scopes=${encodeURIComponent(i.scopes)}`),this.flowType==="pkce"){const[a,u]=await Li(this.storage,this.storageKey),h=new URLSearchParams({code_challenge:`${encodeURIComponent(a)}`,code_challenge_method:`${encodeURIComponent(u)}`});o.push(h.toString())}if(i!=null&&i.queryParams){const a=new URLSearchParams(i.queryParams);o.push(a.toString())}return i!=null&&i.skipBrowserRedirect&&o.push(`skip_http_redirect=${i.skipBrowserRedirect}`),`${t}?${o.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var i;const{data:o,error:a}=r;return a?this._returnResult({data:null,error:a}):await ge(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(i=o==null?void 0:o.session)===null||i===void 0?void 0:i.access_token})})}catch(r){if(oe(r))return this._returnResult({data:null,error:r});throw r}}async _enroll(t){try{return await this._useSession(async r=>{var i,o;const{data:a,error:u}=r;if(u)return this._returnResult({data:null,error:u});const h=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:d,error:p}=await ge(this.fetch,"POST",`${this.url}/factors`,{body:h,headers:this.headers,jwt:(i=a==null?void 0:a.session)===null||i===void 0?void 0:i.access_token});return p?this._returnResult({data:null,error:p}):(t.factorType==="totp"&&d.type==="totp"&&(!((o=d==null?void 0:d.totp)===null||o===void 0)&&o.qr_code)&&(d.totp.qr_code=`data:image/svg+xml;utf-8,${d.totp.qr_code}`),this._returnResult({data:d,error:null}))})}catch(r){if(oe(r))return this._returnResult({data:null,error:r});throw r}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var i;const{data:o,error:a}=r;if(a)return this._returnResult({data:null,error:a});const u=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?fb(t.webauthn.credential_response):pb(t.webauthn.credential_response)})}:{code:t.code}),{data:h,error:d}=await ge(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:u,headers:this.headers,jwt:(i=o==null?void 0:o.session)===null||i===void 0?void 0:i.access_token});return d?this._returnResult({data:null,error:d}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+h.expires_in},h)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",h),this._returnResult({data:h,error:d}))})}catch(r){if(oe(r))return this._returnResult({data:null,error:r});throw r}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var i;const{data:o,error:a}=r;if(a)return this._returnResult({data:null,error:a});const u=await ge(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(i=o==null?void 0:o.session)===null||i===void 0?void 0:i.access_token});if(u.error)return u;const{data:h}=u;if(h.type!=="webauthn")return{data:h,error:null};switch(h.webauthn.type){case"create":return{data:Object.assign(Object.assign({},h),{webauthn:Object.assign(Object.assign({},h.webauthn),{credential_options:Object.assign(Object.assign({},h.webauthn.credential_options),{publicKey:hb(h.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},h),{webauthn:Object.assign(Object.assign({},h.webauthn),{credential_options:Object.assign(Object.assign({},h.webauthn.credential_options),{publicKey:db(h.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(oe(r))return this._returnResult({data:null,error:r});throw r}})}async _challengeAndVerify(t){const{data:r,error:i}=await this._challenge({factorId:t.factorId});return i?this._returnResult({data:null,error:i}):await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){var t;const{data:{user:r},error:i}=await this.getUser();if(i)return{data:null,error:i};const o={all:[],phone:[],totp:[],webauthn:[]};for(const a of(t=r==null?void 0:r.factors)!==null&&t!==void 0?t:[])o.all.push(a),a.status==="verified"&&o[a.factor_type].push(a);return{data:o,error:null}}async _getAuthenticatorAssuranceLevel(){var t,r;const{data:{session:i},error:o}=await this.getSession();if(o)return this._returnResult({data:null,error:o});if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:a}=Id(i.access_token);let u=null;a.aal&&(u=a.aal);let h=u;((r=(t=i.user.factors)===null||t===void 0?void 0:t.filter(y=>y.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(h="aal2");const p=a.amr||[];return{data:{currentLevel:u,nextLevel:h,currentAuthenticationMethods:p},error:null}}async _getAuthorizationDetails(t){try{return await this._useSession(async r=>{const{data:{session:i},error:o}=r;return o?this._returnResult({data:null,error:o}):i?await ge(this.fetch,"GET",`${this.url}/oauth/authorizations/${t}`,{headers:this.headers,jwt:i.access_token,xform:a=>({data:a,error:null})}):this._returnResult({data:null,error:new lr})})}catch(r){if(oe(r))return this._returnResult({data:null,error:r});throw r}}async _approveAuthorization(t,r){try{return await this._useSession(async i=>{const{data:{session:o},error:a}=i;if(a)return this._returnResult({data:null,error:a});if(!o)return this._returnResult({data:null,error:new lr});const u=await ge(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:o.access_token,body:{action:"approve"},xform:h=>({data:h,error:null})});return u.data&&u.data.redirect_url&&It()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(u.data.redirect_url),u})}catch(i){if(oe(i))return this._returnResult({data:null,error:i});throw i}}async _denyAuthorization(t,r){try{return await this._useSession(async i=>{const{data:{session:o},error:a}=i;if(a)return this._returnResult({data:null,error:a});if(!o)return this._returnResult({data:null,error:new lr});const u=await ge(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:o.access_token,body:{action:"deny"},xform:h=>({data:h,error:null})});return u.data&&u.data.redirect_url&&It()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(u.data.redirect_url),u})}catch(i){if(oe(i))return this._returnResult({data:null,error:i});throw i}}async _listOAuthGrants(){try{return await this._useSession(async t=>{const{data:{session:r},error:i}=t;return i?this._returnResult({data:null,error:i}):r?await ge(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,xform:o=>({data:o,error:null})}):this._returnResult({data:null,error:new lr})})}catch(t){if(oe(t))return this._returnResult({data:null,error:t});throw t}}async _revokeOAuthGrant(t){try{return await this._useSession(async r=>{const{data:{session:i},error:o}=r;return o?this._returnResult({data:null,error:o}):i?(await ge(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:i.access_token,query:{client_id:t.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new lr})})}catch(r){if(oe(r))return this._returnResult({data:null,error:r});throw r}}async fetchJwk(t,r={keys:[]}){let i=r.keys.find(h=>h.kid===t);if(i)return i;const o=Date.now();if(i=this.jwks.keys.find(h=>h.kid===t),i&&this.jwks_cached_at+Tk>o)return i;const{data:a,error:u}=await ge(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(u)throw u;return!a.keys||a.keys.length===0||(this.jwks=a,this.jwks_cached_at=o,i=a.keys.find(h=>h.kid===t),!i)?null:i}async getClaims(t,r={}){try{let i=t;if(!i){const{data:E,error:S}=await this.getSession();if(S||!E.session)return this._returnResult({data:null,error:S});i=E.session.access_token}const{header:o,payload:a,signature:u,raw:{header:h,payload:d}}=Id(i);r!=null&&r.allowExpired||Kk(a.exp);const p=!o.alg||o.alg.startsWith("HS")||!o.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(o.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!p){const{error:E}=await this.getUser(i);if(E)throw E;return{data:{claims:a,header:o,signature:u},error:null}}const y=Hk(o.alg),v=await crypto.subtle.importKey("jwk",p,y,!0,["verify"]);if(!await crypto.subtle.verify(y,v,u,Ok(`${h}.${d}`)))throw new Fu("Invalid JWT signature");return{data:{claims:a,header:o,signature:u},error:null}}catch(i){if(oe(i))return this._returnResult({data:null,error:i});throw i}}};Zf.nextInstanceID={};const kb=Yf,bb=Zf,xb=Object.freeze(Object.defineProperty({__proto__:null,AuthAdminApi:kb,AuthApiError:b2,AuthClient:bb,AuthError:Yi,AuthImplicitGrantRedirectError:Ea,AuthInvalidCredentialsError:_a,AuthInvalidJwtError:Fu,AuthInvalidTokenResponseError:Js,AuthPKCEGrantCodeExchangeError:mf,AuthRetryableFetchError:Uu,AuthSessionMissingError:lr,AuthUnknownError:ws,AuthWeakPasswordError:gf,CustomAuthError:Jn,GoTrueAdminApi:Yf,GoTrueClient:Zf,NavigatorLockAcquireTimeoutError:P2,SIGN_OUT_SCOPES:xu,isAuthApiError:x2,isAuthError:oe,isAuthImplicitGrantRedirectError:R2,isAuthRetryableFetchError:bu,isAuthSessionMissingError:T2,isAuthWeakPasswordError:Rk,lockInternals:Ys,navigatorLock:O2,processLock:rb},Symbol.toStringTag,{value:"Module"})),L2=Da(xb);var I1;function Tb(){if(I1)return fa;I1=1,Object.defineProperty(fa,"__esModule",{value:!0}),fa.SupabaseAuthClient=void 0;const e=L2;let t=class extends e.AuthClient{constructor(i){super(i)}};return fa.SupabaseAuthClient=t,fa}var L1;function D1(){if(L1)return su;L1=1,Object.defineProperty(su,"__esModule",{value:!0});const e=qv,t=e2(),r=l2,i=yk,o=wk(),a=_k(),u=Ek(),h=Tb();class d{constructor(y,v,_){var E,S,k;this.supabaseUrl=y,this.supabaseKey=v;const T=(0,u.validateSupabaseUrl)(y);if(!v)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",T),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",T),this.storageUrl=new URL("storage/v1",T),this.functionsUrl=new URL("functions/v1",T);const A=`sb-${T.hostname.split(".")[0]}-auth-token`,I={db:o.DEFAULT_DB_OPTIONS,realtime:o.DEFAULT_REALTIME_OPTIONS,auth:Object.assign(Object.assign({},o.DEFAULT_AUTH_OPTIONS),{storageKey:A}),global:o.DEFAULT_GLOBAL_OPTIONS},R=(0,u.applySettingDefaults)(_??{},I);this.storageKey=(E=R.auth.storageKey)!==null&&E!==void 0?E:"",this.headers=(S=R.global.headers)!==null&&S!==void 0?S:{},R.accessToken?(this.accessToken=R.accessToken,this.auth=new Proxy({},{get:(D,V)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(V)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((k=R.auth)!==null&&k!==void 0?k:{},this.headers,R.global.fetch),this.fetch=(0,a.fetchWithAuth)(v,this._getAccessToken.bind(this),R.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},R.realtime)),this.accessToken&&this.accessToken().then(D=>this.realtime.setAuth(D)).catch(D=>console.warn("Failed to set initial Realtime auth token:",D)),this.rest=new t.PostgrestClient(new URL("rest/v1",T).href,{headers:this.headers,schema:R.db.schema,fetch:this.fetch}),this.storage=new i.StorageClient(this.storageUrl.href,this.headers,this.fetch,_==null?void 0:_.storage),R.accessToken||this._listenForAuthEvents()}get functions(){return new e.FunctionsClient(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(y){return this.rest.from(y)}schema(y){return this.rest.schema(y)}rpc(y,v={},_={head:!1,get:!1,count:void 0}){return this.rest.rpc(y,v,_)}channel(y,v={config:{}}){return this.realtime.channel(y,v)}getChannels(){return this.realtime.getChannels()}removeChannel(y){return this.realtime.removeChannel(y)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var y,v;if(this.accessToken)return await this.accessToken();const{data:_}=await this.auth.getSession();return(v=(y=_.session)===null||y===void 0?void 0:y.access_token)!==null&&v!==void 0?v:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:y,persistSession:v,detectSessionInUrl:_,storage:E,userStorage:S,storageKey:k,flowType:T,lock:A,debug:I,throwOnError:R},D,V){const F={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new h.SupabaseAuthClient({url:this.authUrl.href,headers:Object.assign(Object.assign({},F),D),storageKey:k,autoRefreshToken:y,persistSession:v,detectSessionInUrl:_,storage:E,userStorage:S,flowType:T,lock:A,debug:I,throwOnError:R,fetch:V,hasCustomAuthorizationHeader:Object.keys(this.headers).some(B=>B.toLowerCase()==="authorization")})}_initRealtimeClient(y){return new r.RealtimeClient(this.realtimeUrl.href,Object.assign(Object.assign({},y),{params:Object.assign({apikey:this.supabaseKey},y==null?void 0:y.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((v,_)=>{this._handleTokenChanged(v,"CLIENT",_==null?void 0:_.access_token)})}_handleTokenChanged(y,v,_){(y==="TOKEN_REFRESHED"||y==="SIGNED_IN")&&this.changedAccessToken!==_?(this.changedAccessToken=_,this.realtime.setAuth(_)):y==="SIGNED_OUT"&&(this.realtime.setAuth(),v=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}return su.default=d,su}var U1;function Rb(){return U1||(U1=1,(function(e){var t=Dn&&Dn.__createBinding||(Object.create?(function(y,v,_,E){E===void 0&&(E=_);var S=Object.getOwnPropertyDescriptor(v,_);(!S||("get"in S?!v.__esModule:S.writable||S.configurable))&&(S={enumerable:!0,get:function(){return v[_]}}),Object.defineProperty(y,E,S)}):(function(y,v,_,E){E===void 0&&(E=_),y[E]=v[_]})),r=Dn&&Dn.__exportStar||function(y,v){for(var _ in y)_!=="default"&&!Object.prototype.hasOwnProperty.call(v,_)&&t(v,y,_)},i=Dn&&Dn.__importDefault||function(y){return y&&y.__esModule?y:{default:y}};Object.defineProperty(e,"__esModule",{value:!0}),e.createClient=e.SupabaseClient=e.FunctionRegion=e.FunctionsError=e.FunctionsRelayError=e.FunctionsFetchError=e.FunctionsHttpError=e.PostgrestError=void 0;const o=i(D1());r(L2,e);var a=e2();Object.defineProperty(e,"PostgrestError",{enumerable:!0,get:function(){return a.PostgrestError}});var u=qv;Object.defineProperty(e,"FunctionsHttpError",{enumerable:!0,get:function(){return u.FunctionsHttpError}}),Object.defineProperty(e,"FunctionsFetchError",{enumerable:!0,get:function(){return u.FunctionsFetchError}}),Object.defineProperty(e,"FunctionsRelayError",{enumerable:!0,get:function(){return u.FunctionsRelayError}}),Object.defineProperty(e,"FunctionsError",{enumerable:!0,get:function(){return u.FunctionsError}}),Object.defineProperty(e,"FunctionRegion",{enumerable:!0,get:function(){return u.FunctionRegion}}),r(l2,e);var h=D1();Object.defineProperty(e,"SupabaseClient",{enumerable:!0,get:function(){return i(h).default}});const d=(y,v,_)=>new o.default(y,v,_);e.createClient=d;function p(){if(typeof window<"u"||typeof process>"u")return!1;const y=process.version;if(y==null)return!1;const v=y.match(/^v(\d+)\./);return v?parseInt(v[1],10)<=18:!1}p()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217")})(Dn)),Dn}var D2=Rb();const U2=M4(D2),Cb=F4({__proto__:null,default:U2},[D2]),{PostgrestError:OT,FunctionsHttpError:NT,FunctionsFetchError:IT,FunctionsRelayError:LT,FunctionsError:DT,FunctionRegion:UT,SupabaseClient:FT,createClient:Ab,GoTrueAdminApi:MT,GoTrueClient:$T,AuthAdminApi:BT,AuthClient:zT,navigatorLock:VT,NavigatorLockAcquireTimeoutError:WT,lockInternals:KT,processLock:HT,SIGN_OUT_SCOPES:GT,AuthError:qT,AuthApiError:JT,AuthUnknownError:XT,CustomAuthError:YT,AuthSessionMissingError:QT,AuthInvalidTokenResponseError:ZT,AuthInvalidCredentialsError:e6,AuthImplicitGrantRedirectError:t6,AuthPKCEGrantCodeExchangeError:r6,AuthRetryableFetchError:n6,AuthWeakPasswordError:s6,AuthInvalidJwtError:i6,isAuthError:o6,isAuthApiError:a6,isAuthSessionMissingError:l6,isAuthImplicitGrantRedirectError:u6,isAuthRetryableFetchError:c6,isAuthWeakPasswordError:h6,RealtimePresence:d6,RealtimeChannel:f6,RealtimeClient:p6,REALTIME_LISTEN_TYPES:m6,REALTIME_POSTGRES_CHANGES_LISTEN_EVENT:g6,REALTIME_PRESENCE_LISTEN_EVENTS:y6,REALTIME_SUBSCRIBE_STATES:v6,REALTIME_CHANNEL_STATES:w6}=U2||Cb,jb="https://fttzzjkdqquoolosfrxw.supabase.co",Pb="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImZ0dHp6amtkcXF1b29sb3Nmcnh3Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjU4MDYzOTksImV4cCI6MjA4MTM4MjM5OX0.6VKeI3-aWIkOZ_YwI5A8ZMdJ4AkY8x0B85g1Ra-iSgI",At=Ab(jb,Pb),ja=5;function F2(){const e=new Date;return`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}`}async function Ob(e){const t=F2(),{data:r,error:i}=await At.from("usage").select("count, bonus_credits").eq("user_id",e).eq("month",t).single();return i&&i.code!=="PGRST116"?(console.error("Error fetching usage:",i),{count:0,bonusCredits:0}):{count:(r==null?void 0:r.count)||0,bonusCredits:(r==null?void 0:r.bonus_credits)||0}}async function Nb(e){const t=F2(),{data:r}=await At.from("usage").select("id, count").eq("user_id",e).eq("month",t).single();if(r){const i=r.count+1,{error:o}=await At.from("usage").update({count:i}).eq("id",r.id);return o?(console.error("Error updating usage:",o),{success:!1,count:r.count}):{success:!0,count:i}}else{const{error:i}=await At.from("usage").insert({user_id:e,month:t,count:1});return i?(console.error("Error inserting usage:",i),{success:!1,count:0}):{success:!0,count:1}}}async function M2(e){const{data:t}=await At.from("subscriptions").select("status").eq("user_id",e).eq("status","active").single();if(t)return{allowed:!0,remaining:-1,isPremium:!0,bonusCredits:0};const r=await Ob(e),o=Math.max(0,ja-r.count)+r.bonusCredits;return{allowed:o>0,remaining:o,isPremium:!1,bonusCredits:r.bonusCredits}}const $2=x.createContext(void 0);function Ib({children:e}){const[t,r]=x.useState(null),[i,o]=x.useState(null),[a,u]=x.useState(!0),[h,d]=x.useState(null),[p,y]=x.useState(null),[v,_]=x.useState(!0),E=!!(p!=null&&p.last_name&&(p!=null&&p.first_name)),S=async()=>{if(!t){y(null),_(!1);return}_(!0);try{const{data:V}=await At.from("profiles").select("*").eq("id",t.id).single();y(V)}catch{y(null)}finally{_(!1)}},k=async()=>{if(!t){d(null);return}const V=await M2(t.id);d({count:ja-Math.max(0,V.remaining-V.bonusCredits),remaining:V.remaining,isPremium:V.isPremium,canAnalyze:V.allowed,bonusCredits:V.bonusCredits})};x.useEffect(()=>{At.auth.getSession().then(({data:{session:F}})=>{o(F),r((F==null?void 0:F.user)??null),u(!1)});const{data:{subscription:V}}=At.auth.onAuthStateChange((F,B)=>{o(B),r((B==null?void 0:B.user)??null),u(!1)});return()=>V.unsubscribe()},[]),x.useEffect(()=>{k(),S()},[t]);const T=async(V,F)=>{const{error:B}=await At.auth.signInWithPassword({email:V,password:F});return{error:B}},A=async(V,F,B,M)=>{const{data:te,error:ve}=await At.auth.signUp({email:V,password:F});return!ve&&te.user&&(B||M)&&await At.from("profiles").insert({id:te.user.id,last_name:B||null,first_name:M||null}),{error:ve}},I=async()=>{await At.auth.signOut(),r(null),o(null),d(null)},R=async()=>{const{error:V}=await At.auth.signInWithOAuth({provider:"google",options:{redirectTo:window.location.origin}});return{error:V}},D=async V=>{const{error:F}=await At.auth.resetPasswordForEmail(V,{redirectTo:`${window.location.origin}/login`});return{error:F}};return g.jsx($2.Provider,{value:{user:t,session:i,loading:a,usage:h,profile:p,profileLoading:v,isProfileComplete:E,refreshUsage:k,refreshProfile:S,signIn:T,signUp:A,signInWithGoogle:R,resetPassword:D,signOut:I},children:e})}function po(){const e=x.useContext($2);if(e===void 0)throw new Error("useAuth must be used within an AuthProvider");return e}function Lb(){const e=Vr(),{user:t,usage:r,signOut:i}=po(),o=async()=>{await i(),e("/login")};return g.jsxs("div",{className:"home-page",children:[g.jsxs("header",{className:"home-header",children:[g.jsx("h1",{className:"home-logo",children:"GaitKnee-View"}),g.jsxs("div",{className:"home-tagline",children:[g.jsx("span",{className:"tagline-main",children:"Lateral Thrust Analyzer"}),g.jsx("span",{className:"tagline-sub",children:""})]})]}),g.jsxs("main",{className:"home-main",children:[g.jsxs("div",{className:"usage-card",children:[g.jsxs("div",{className:"usage-header",children:[g.jsx("span",{className:"usage-label",children:" "}),(r==null?void 0:r.isPremium)&&g.jsx("span",{className:"premium-badge",children:" "})]}),g.jsx("div",{className:"usage-display",children:r!=null&&r.isPremium?g.jsx("span",{className:"usage-unlimited",children:""}):g.jsxs(g.Fragment,{children:[g.jsx("span",{className:"usage-remaining-count",children:(r==null?void 0:r.remaining)||ja}),g.jsx("span",{className:"usage-unit",children:""})]})}),!(r!=null&&r.isPremium)&&g.jsxs(g.Fragment,{children:[g.jsxs("div",{className:"usage-info-text",children:["",ja,"  : ",(r==null?void 0:r.count)||0,""]}),g.jsx("button",{className:"purchase-credits-btn",onClick:()=>e("/purchase"),children:"+ "})]})]}),g.jsxs("div",{className:"action-cards",children:[g.jsxs("button",{className:"action-card action-card-primary",onClick:()=>e("/record"),children:[g.jsx("div",{className:"action-icon",children:g.jsxs("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"currentColor",children:[g.jsx("path",{d:"M12 15.2C13.767 15.2 15.2 13.767 15.2 12C15.2 10.233 13.767 8.8 12 8.8C10.233 8.8 8.8 10.233 8.8 12C8.8 13.767 10.233 15.2 12 15.2Z"}),g.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4 4.5C4 3.67157 4.67157 3 5.5 3H8.5C9.32843 3 10 3.67157 10 4.5V5H14V4.5C14 3.67157 14.6716 3 15.5 3H18.5C19.3284 3 20 3.67157 20 4.5V7H20.5C21.3284 7 22 7.67157 22 8.5V19.5C22 20.3284 21.3284 21 20.5 21H3.5C2.67157 21 2 20.3284 2 19.5V8.5C2 7.67157 2.67157 7 3.5 7H4V4.5ZM12 17C14.7614 17 17 14.7614 17 12C17 9.23858 14.7614 7 12 7C9.23858 7 7 9.23858 7 12C7 14.7614 9.23858 17 12 17Z"})]})}),g.jsxs("div",{className:"action-text",children:[g.jsx("span",{className:"action-title",children:""}),g.jsx("span",{className:"action-desc",children:""})]}),g.jsx("div",{className:"action-arrow",children:""})]}),g.jsxs("button",{className:"action-card",onClick:()=>e("/upload"),children:[g.jsx("div",{className:"action-icon",children:g.jsxs("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"currentColor",children:[g.jsx("path",{d:"M14 2H6C4.9 2 4 2.9 4 4V20C4 21.1 4.9 22 6 22H18C19.1 22 20 21.1 20 20V8L14 2ZM18 20H6V4H13V9H18V20Z"}),g.jsx("path",{d:"M12 11L8 15H10.5V19H13.5V15H16L12 11Z"})]})}),g.jsxs("div",{className:"action-text",children:[g.jsx("span",{className:"action-title",children:""}),g.jsx("span",{className:"action-desc",children:""})]}),g.jsx("div",{className:"action-arrow",children:""})]}),g.jsxs("button",{className:"action-card",onClick:()=>e("/history"),children:[g.jsx("div",{className:"action-icon",children:g.jsxs("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"currentColor",children:[g.jsx("path",{d:"M19 4H5C3.89543 4 3 4.89543 3 6V20C3 21.1046 3.89543 22 5 22H19C20.1046 22 21 21.1046 21 20V6C21 4.89543 20.1046 4 19 4ZM5 6H19V8H5V6ZM5 10H19V20H5V10Z"}),g.jsx("path",{d:"M7 12H11V14H7V12ZM7 16H17V18H7V16Z"})]})}),g.jsxs("div",{className:"action-text",children:[g.jsx("span",{className:"action-title",children:""}),g.jsx("span",{className:"action-desc",children:""})]}),g.jsx("div",{className:"action-arrow",children:""})]})]}),g.jsxs("div",{className:"user-info",children:[g.jsx("span",{className:"user-email",children:t==null?void 0:t.email}),g.jsx("button",{className:"signout-btn",onClick:o,children:""})]})]}),g.jsx("footer",{className:"home-footer",children:g.jsx("p",{className:"disclaimer",children:" "})})]})}function Db(e={}){const[t,r]=x.useState(null),[i,o]=x.useState(!1),[a,u]=x.useState(null),[h,d]=x.useState(e.facingMode||"environment"),p=x.useRef(null),y=x.useRef(!0),v=x.useRef(null),_=x.useCallback(()=>{v.current&&(v.current.getTracks().forEach(k=>k.stop()),v.current=null,r(null),o(!1))},[]),E=x.useCallback(async()=>{try{u(null),o(!1),v.current&&v.current.getTracks().forEach(A=>A.stop());const k={video:{facingMode:h,width:{ideal:1280},height:{ideal:720},frameRate:{ideal:30}},audio:!1},T=await navigator.mediaDevices.getUserMedia(k);if(!y.current){T.getTracks().forEach(A=>A.stop());return}v.current=T,r(T),p.current&&(p.current.srcObject=T,p.current.onloadedmetadata=async()=>{if(!(!y.current||!p.current))try{await p.current.play(),y.current&&o(!0)}catch(A){if(A instanceof Error&&A.name==="AbortError"){console.log("Play was aborted - this is expected during navigation");return}throw A}})}catch(k){if(!y.current)return;const T=k instanceof Error?k:new Error("");u(T),console.error("Camera error:",k)}},[h]),S=x.useCallback(async()=>{d(h==="user"?"environment":"user")},[h]);return x.useEffect(()=>{v.current&&E()},[h]),x.useEffect(()=>(y.current=!0,()=>{y.current=!1,v.current&&(v.current.getTracks().forEach(k=>k.stop()),v.current=null)}),[]),{videoRef:p,stream:t,isReady:i,error:a,facingMode:h,switchCamera:S,startCamera:E,stopCamera:_}}function Ub(){const[e,t]=x.useState(!1),[r,i]=x.useState(0),[o,a]=x.useState([]),u=x.useRef(null),h=x.useRef(0),d=x.useRef([]),p=x.useCallback(()=>{a([]),d.current=[],i(0),h.current=performance.now(),t(!0),u.current=window.setInterval(()=>{const _=(performance.now()-h.current)/1e3;i(_)},100)},[]),y=x.useCallback(()=>{t(!1),u.current&&(clearInterval(u.current),u.current=null);const _=[...d.current];return a(_),_},[]),v=x.useCallback((_,E)=>{if(!e)return;const S={timestamp:performance.now()-h.current,landmarks:_,worldLandmarks:E};d.current.push(S)},[e]);return{isRecording:e,duration:r,frames:o,startRecording:p,stopRecording:y,addFrame:v}}var oi=typeof self<"u"?self:{};function Gs(){throw Error("Invalid UTF8")}function F1(e,t){return t=String.fromCharCode.apply(null,t),e==null?t:e+t}let fu,Dd;const Fb=typeof TextDecoder<"u";let Mb;const $b=typeof TextEncoder<"u";function B2(e){if($b)e=(Mb||(Mb=new TextEncoder)).encode(e);else{let r=0;const i=new Uint8Array(3*e.length);for(let o=0;o<e.length;o++){var t=e.charCodeAt(o);if(t<128)i[r++]=t;else{if(t<2048)i[r++]=t>>6|192;else{if(t>=55296&&t<=57343){if(t<=56319&&o<e.length){const a=e.charCodeAt(++o);if(a>=56320&&a<=57343){t=1024*(t-55296)+a-56320+65536,i[r++]=t>>18|240,i[r++]=t>>12&63|128,i[r++]=t>>6&63|128,i[r++]=63&t|128;continue}o--}t=65533}i[r++]=t>>12|224,i[r++]=t>>6&63|128}i[r++]=63&t|128}}e=r===i.length?i:i.subarray(0,r)}return e}var ep,zu;e:{for(var M1=["CLOSURE_FLAGS"],Ud=oi,Fd=0;Fd<M1.length;Fd++)if((Ud=Ud[M1[Fd]])==null){zu=null;break e}zu=Ud}var Pa,$1=zu&&zu[610401301];ep=$1!=null&&$1;const B1=oi.navigator;function vf(e){return!!ep&&!!Pa&&Pa.brands.some((({brand:t})=>t&&t.indexOf(e)!=-1))}function Ur(e){var t;return(t=oi.navigator)&&(t=t.userAgent)||(t=""),t.indexOf(e)!=-1}function Es(){return!!ep&&!!Pa&&Pa.brands.length>0}function Md(){return Es()?vf("Chromium"):(Ur("Chrome")||Ur("CriOS"))&&!(!Es()&&Ur("Edge"))||Ur("Silk")}function tp(e){return tp[" "](e),e}Pa=B1&&B1.userAgentData||null,tp[" "]=function(){};var Bb=!Es()&&(Ur("Trident")||Ur("MSIE"));!Ur("Android")||Md(),Md(),Ur("Safari")&&(Md()||!Es()&&Ur("Coast")||!Es()&&Ur("Opera")||!Es()&&Ur("Edge")||(Es()?vf("Microsoft Edge"):Ur("Edg/"))||Es()&&vf("Opera"));var z2={},Sa=null;function zb(e){const t=e.length;let r=3*t/4;r%3?r=Math.floor(r):"=.".indexOf(e[t-1])!=-1&&(r="=.".indexOf(e[t-2])!=-1?r-2:r-1);const i=new Uint8Array(r);let o=0;return(function(a,u){function h(p){for(;d<a.length;){const y=a.charAt(d++),v=Sa[y];if(v!=null)return v;if(!/^[\s\xa0]*$/.test(y))throw Error("Unknown base64 encoding at char: "+y)}return p}V2();let d=0;for(;;){const p=h(-1),y=h(0),v=h(64),_=h(64);if(_===64&&p===-1)break;u(p<<2|y>>4),v!=64&&(u(y<<4&240|v>>2),_!=64&&u(v<<6&192|_))}})(e,(function(a){i[o++]=a})),o!==r?i.subarray(0,o):i}function V2(){if(!Sa){Sa={};var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),t=["+/=","+/","-_=","-_.","-_"];for(let r=0;r<5;r++){const i=e.concat(t[r].split(""));z2[r]=i;for(let o=0;o<i.length;o++){const a=i[o];Sa[a]===void 0&&(Sa[a]=o)}}}}var W2=typeof Uint8Array<"u",K2=!Bb&&typeof btoa=="function";function z1(e){if(!K2){var t;t===void 0&&(t=0),V2(),t=z2[t];var r=Array(Math.floor(e.length/3)),i=t[64]||"";let d=0,p=0;for(;d<e.length-2;d+=3){var o=e[d],a=e[d+1],u=e[d+2],h=t[o>>2];o=t[(3&o)<<4|a>>4],a=t[(15&a)<<2|u>>6],u=t[63&u],r[p++]=h+o+a+u}switch(h=0,u=i,e.length-d){case 2:u=t[(15&(h=e[d+1]))<<2]||i;case 1:e=e[d],r[p]=t[e>>2]+t[(3&e)<<4|h>>4]+u+i}return r.join("")}for(t="",r=0,i=e.length-10240;r<i;)t+=String.fromCharCode.apply(null,e.subarray(r,r+=10240));return t+=String.fromCharCode.apply(null,r?e.subarray(r):e),btoa(t)}const V1=/[-_.]/g,Vb={"-":"+",_:"/",".":"="};function Wb(e){return Vb[e]||""}function H2(e){if(!K2)return zb(e);V1.test(e)&&(e=e.replace(V1,Wb)),e=atob(e);const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}function Ba(e){return W2&&e!=null&&e instanceof Uint8Array}var Qi={};function ai(){return Kb||(Kb=new Wn(null,Qi))}function rp(e){G2(Qi);var t=e.g;return(t=t==null||Ba(t)?t:typeof t=="string"?H2(t):null)==null?t:e.g=t}var Wn=class{h(){return new Uint8Array(rp(this)||0)}constructor(e,t){if(G2(t),this.g=e,e!=null&&e.length===0)throw Error("ByteString should be constructed with non-empty values")}};let Kb,Hb;function G2(e){if(e!==Qi)throw Error("illegal external caller")}function q2(e,t){e.__closure__error__context__984382||(e.__closure__error__context__984382={}),e.__closure__error__context__984382.severity=t}function wf(e){return q2(e=Error(e),"warning"),e}var ic=typeof Symbol=="function"&&typeof Symbol()=="symbol",Gb=new Set;function za(e,t,r=!1,i=!1){return e=typeof Symbol=="function"&&typeof Symbol()=="symbol"?i&&Symbol.for&&e?Symbol.for(e):e!=null?Symbol(e):Symbol():t,r&&Gb.add(e),e}var qb=za("jas",void 0,!0,!0),W1=za(void 0,"0di"),$d=za(void 0,"2ex"),pa=za(void 0,"1oa",!0),Zi=za(void 0,Symbol(),!0);const ue=ic?qb:"Ga",J2={Ga:{value:0,configurable:!0,writable:!0,enumerable:!1}},X2=Object.defineProperties;function oc(e,t){ic||ue in e||X2(e,J2),e[ue]|=t}function gt(e,t){ic||ue in e||X2(e,J2),e[ue]=t}function mo(e){return oc(e,34),e}function Jb(e,t){gt(t,-30975&(0|e))}function _f(e,t){gt(t,-30941&(34|e))}function np(){return typeof BigInt=="function"}function cr(e){return Array.prototype.slice.call(e)}var sp,Va={},Y2={};function K1(e){return!(!e||typeof e!="object"||e.Ia!==Y2)}function ip(e){return e!==null&&typeof e=="object"&&!Array.isArray(e)&&e.constructor===Object}function op(e,t){if(e!=null){if(typeof e=="string")e=e?new Wn(e,Qi):ai();else if(e.constructor!==Wn)if(Ba(e))e=e.length?new Wn(new Uint8Array(e),Qi):ai();else{if(!t)throw Error();e=void 0}}return e}function Vu(e){return!(!Array.isArray(e)||e.length)&&!!(1&(0|e[ue]))}const H1=[];function As(e){if(2&e)throw Error()}gt(H1,55),sp=Object.freeze(H1);class Wu{constructor(t,r,i){this.l=0,this.g=t,this.h=r,this.m=i}next(){if(this.l<this.g.length){const t=this.g[this.l++];return{done:!1,value:this.h?this.h.call(this.m,t):t}}return{done:!0,value:void 0}}[Symbol.iterator](){return new Wu(this.g,this.h,this.m)}}function ap(e){return Zi?e[Zi]:void 0}var Xb=Object.freeze({});function ac(e){return e.Qa=!0,e}var Yb=ac((e=>typeof e=="number")),G1=ac((e=>typeof e=="string")),Qb=ac((e=>typeof e=="boolean")),lc=typeof oi.BigInt=="function"&&typeof oi.BigInt(0)=="bigint",Ef=ac((e=>lc?e>=ex&&e<=rx:e[0]==="-"?q1(e,Zb):q1(e,tx)));const Zb=Number.MIN_SAFE_INTEGER.toString(),ex=lc?BigInt(Number.MIN_SAFE_INTEGER):void 0,tx=Number.MAX_SAFE_INTEGER.toString(),rx=lc?BigInt(Number.MAX_SAFE_INTEGER):void 0;function q1(e,t){if(e.length>t.length)return!1;if(e.length<t.length||e===t)return!0;for(let r=0;r<e.length;r++){const i=e[r],o=t[r];if(i>o)return!1;if(i<o)return!0}}const nx=typeof Uint8Array.prototype.slice=="function";let Q2,Ue=0,st=0;function J1(e){const t=e>>>0;Ue=t,st=(e-t)/4294967296>>>0}function eo(e){if(e<0){J1(-e);const[t,r]=hp(Ue,st);Ue=t>>>0,st=r>>>0}else J1(e)}function lp(e){const t=Q2||(Q2=new DataView(new ArrayBuffer(8)));t.setFloat32(0,+e,!0),st=0,Ue=t.getUint32(0,!0)}function up(e,t){const r=4294967296*t+(e>>>0);return Number.isSafeInteger(r)?r:Oa(e,t)}function cp(e,t){const r=2147483648&t;return r&&(t=~t>>>0,(e=1+~e>>>0)==0&&(t=t+1>>>0)),typeof(e=up(e,t))=="number"?r?-e:e:r?"-"+e:e}function Oa(e,t){if(e>>>=0,(t>>>=0)<=2097151)var r=""+(4294967296*t+e);else np()?r=""+(BigInt(t)<<BigInt(32)|BigInt(e)):(e=(16777215&e)+6777216*(r=16777215&(e>>>24|t<<8))+6710656*(t=t>>16&65535),r+=8147497*t,t*=2,e>=1e7&&(r+=e/1e7>>>0,e%=1e7),r>=1e7&&(t+=r/1e7>>>0,r%=1e7),r=t+X1(r)+X1(e));return r}function X1(e){return e=String(e),"0000000".slice(e.length)+e}function uc(e){if(e.length<16)eo(Number(e));else if(np())e=BigInt(e),Ue=Number(e&BigInt(4294967295))>>>0,st=Number(e>>BigInt(32)&BigInt(4294967295));else{const t=+(e[0]==="-");st=Ue=0;const r=e.length;for(let i=t,o=(r-t)%6+t;o<=r;i=o,o+=6){const a=Number(e.slice(i,o));st*=1e6,Ue=1e6*Ue+a,Ue>=4294967296&&(st+=Math.trunc(Ue/4294967296),st>>>=0,Ue>>>=0)}if(t){const[i,o]=hp(Ue,st);Ue=i,st=o}}}function hp(e,t){return t=~t,e?e=1+~e:t+=1,[e,t]}const dp=typeof BigInt=="function"?BigInt.asIntN:void 0,sx=typeof BigInt=="function"?BigInt.asUintN:void 0,Ki=Number.isSafeInteger,cc=Number.isFinite,Ku=Math.trunc;function js(e){return e==null||typeof e=="number"?e:e==="NaN"||e==="Infinity"||e==="-Infinity"?Number(e):void 0}function Z2(e){return e==null||typeof e=="boolean"?e:typeof e=="number"?!!e:void 0}const ix=/^-?([1-9][0-9]*|0)(\.[0-9]+)?$/;function hc(e){switch(typeof e){case"bigint":return!0;case"number":return cc(e);case"string":return ix.test(e);default:return!1}}function go(e){if(e==null)return e;if(typeof e=="string"&&e)e=+e;else if(typeof e!="number")return;return cc(e)?0|e:void 0}function ew(e){if(e==null)return e;if(typeof e=="string"&&e)e=+e;else if(typeof e!="number")return;return cc(e)?e>>>0:void 0}function Y1(e){if(e[0]==="-")return!1;const t=e.length;return t<20||t===20&&Number(e.substring(0,6))<184467}function fp(e){return e=Ku(e),Ki(e)||(eo(e),e=cp(Ue,st)),e}function pp(e){var t=Ku(Number(e));if(Ki(t))return String(t);if((t=e.indexOf("."))!==-1&&(e=e.substring(0,t)),t=e.length,!(e[0]==="-"?t<20||t===20&&Number(e.substring(0,7))>-922337:t<19||t===19&&Number(e.substring(0,6))<922337))if(uc(e),e=Ue,2147483648&(t=st))if(np())e=""+(BigInt(0|t)<<BigInt(32)|BigInt(e>>>0));else{const[r,i]=hp(e,t);e="-"+Oa(r,i)}else e=Oa(e,t);return e}function Hu(e){return e==null?e:typeof e=="bigint"?(Ef(e)?e=Number(e):(e=dp(64,e),e=Ef(e)?Number(e):String(e)),e):hc(e)?typeof e=="number"?fp(e):pp(e):void 0}function ox(e){if(e==null)return e;var t=typeof e;if(t==="bigint")return String(sx(64,e));if(hc(e)){if(t==="string")return t=Ku(Number(e)),Ki(t)&&t>=0?e=String(t):((t=e.indexOf("."))!==-1&&(e=e.substring(0,t)),Y1(e)||(uc(e),e=Oa(Ue,st))),e;if(t==="number")return(e=Ku(e))>=0&&Ki(e)?e:(function(r){if(r<0){eo(r);var i=Oa(Ue,st);return r=Number(i),Ki(r)?r:i}return Y1(i=String(r))?i:(eo(r),up(Ue,st))})(e)}}function tw(e){if(typeof e!="string")throw Error();return e}function yo(e){if(e!=null&&typeof e!="string")throw Error();return e}function to(e){return e==null||typeof e=="string"?e:void 0}function mp(e,t,r,i){if(e!=null&&typeof e=="object"&&e.W===Va)return e;if(!Array.isArray(e))return r?2&i?((e=t[W1])||(mo((e=new t).u),e=t[W1]=e),t=e):t=new t:t=void 0,t;let o=r=0|e[ue];return o===0&&(o|=32&i),o|=2&i,o!==r&&gt(e,o),new t(e)}function ax(e,t,r){if(t)e:{if(!hc(t=e))throw wf("int64");switch(typeof t){case"string":t=pp(t);break e;case"bigint":if(e=t=dp(64,t),G1(e)){if(!/^\s*(?:-?[1-9]\d*|0)?\s*$/.test(e))throw Error(String(e))}else if(Yb(e)&&!Number.isSafeInteger(e))throw Error(String(e));t=lc?BigInt(t):Qb(t)?t?"1":"0":G1(t)?t.trim()||"0":String(t);break e;default:t=fp(t)}}else t=Hu(e);return typeof(r=(e=t)==null?r?0:void 0:e)=="string"&&Ki(t=+r)?t:r}const lx={};let ux=(function(){try{return tp(new class extends Map{constructor(){super()}}),!1}catch{return!0}})();class Bd{constructor(){this.g=new Map}get(t){return this.g.get(t)}set(t,r){return this.g.set(t,r),this.size=this.g.size,this}delete(t){return t=this.g.delete(t),this.size=this.g.size,t}clear(){this.g.clear(),this.size=this.g.size}has(t){return this.g.has(t)}entries(){return this.g.entries()}keys(){return this.g.keys()}values(){return this.g.values()}forEach(t,r){return this.g.forEach(t,r)}[Symbol.iterator](){return this.entries()}}const cx=ux?(Object.setPrototypeOf(Bd.prototype,Map.prototype),Object.defineProperties(Bd.prototype,{size:{value:0,configurable:!0,enumerable:!0,writable:!0}}),Bd):class extends Map{constructor(){super()}};function Q1(e){return e}function zd(e){if(2&e.L)throw Error("Cannot mutate an immutable Map")}var Mr=class extends cx{constructor(e,t,r=Q1,i=Q1){super();let o=0|e[ue];o|=64,gt(e,o),this.L=o,this.S=t,this.R=r,this.Y=this.S?hx:i;for(let a=0;a<e.length;a++){const u=e[a],h=r(u[0],!1,!0);let d=u[1];t?d===void 0&&(d=null):d=i(u[1],!1,!0,void 0,void 0,o),super.set(h,d)}}na(e=Z1){if(this.size!==0)return this.X(e)}X(e=Z1){const t=[],r=super.entries();for(var i;!(i=r.next()).done;)(i=i.value)[0]=e(i[0]),i[1]=e(i[1]),t.push(i);return t}clear(){zd(this),super.clear()}delete(e){return zd(this),super.delete(this.R(e,!0,!1))}entries(){var e=this.ma();return new Wu(e,dx,this)}keys(){return this.Ha()}values(){var e=this.ma();return new Wu(e,Mr.prototype.get,this)}forEach(e,t){super.forEach(((r,i)=>{e.call(t,this.get(i),i,this)}))}set(e,t){return zd(this),(e=this.R(e,!0,!1))==null?this:t==null?(super.delete(e),this):super.set(e,this.Y(t,!0,!0,this.S,!1,this.L))}Na(e){const t=this.R(e[0],!1,!0);e=e[1],e=this.S?e===void 0?null:e:this.Y(e,!1,!0,void 0,!1,this.L),super.set(t,e)}has(e){return super.has(this.R(e,!1,!1))}get(e){e=this.R(e,!1,!1);const t=super.get(e);if(t!==void 0){var r=this.S;return r?((r=this.Y(t,!1,!0,r,this.ra,this.L))!==t&&super.set(e,r),r):t}}ma(){return Array.from(super.keys())}Ha(){return super.keys()}[Symbol.iterator](){return this.entries()}};function hx(e,t,r,i,o,a){return e=mp(e,i,r,a),o&&(e=fc(e)),e}function Z1(e){return e}function dx(e){return[e,this.get(e)]}let fx,rw,px;function ey(){return fx||(fx=new Mr(mo([]),void 0,void 0,void 0,lx))}function gp(e,t,r,i,o){if(e!=null){if(Array.isArray(e))e=Vu(e)?void 0:o&&2&(0|e[ue])?e:yp(e,t,r,i!==void 0,o);else if(ip(e)){const a={};for(let u in e)a[u]=gp(e[u],t,r,i,o);e=a}else e=t(e,i);return e}}function yp(e,t,r,i,o){const a=i||r?0|e[ue]:0,u=i?!!(32&a):void 0;i=cr(e);for(let h=0;h<i.length;h++)i[h]=gp(i[h],t,r,u,o);return r&&((e=ap(e))&&(i[Zi]=cr(e)),r(a,i)),i}function mx(e){return gp(e,nw,void 0,void 0,!1)}function nw(e){return e.W===Va?e.toJSON():e instanceof Mr?e.na(mx):(function(t){switch(typeof t){case"number":return isFinite(t)?t:String(t);case"bigint":return Ef(t)?Number(t):String(t);case"boolean":return t?1:0;case"object":if(t)if(Array.isArray(t)){if(Vu(t))return}else{if(Ba(t))return z1(t);if(t instanceof Wn){const r=t.g;return r==null?"":typeof r=="string"?r:t.g=z1(r)}if(t instanceof Mr)return t.na()}}return t})(e)}function sw(e){return yp(e,nw,void 0,void 0,!1)}function bs(e,t,r){return e=iw(e,t[0],t[1],r?1:2),t!==rw&&r&&oc(e,16384),e}function iw(e,t,r,i){if(e==null){var o=96;r?(e=[r],o|=512):e=[],t&&(o=-33521665&o|(1023&t)<<15)}else{if(!Array.isArray(e))throw Error("narr");if(2048&(o=0|e[ue]))throw Error("farr");if(64&o)return e;if(i===1||i===2||(o|=64),r&&(o|=512,r!==e[0]))throw Error("mid");e:{if(i=(r=e).length){const a=i-1;if(ip(r[a])){if((t=a-(512&(o|=256)?0:-1))>=1024)throw Error("pvtlmt");o=-33521665&o|(1023&t)<<15;break e}}if(t){if((t=Math.max(t,i-(512&o?0:-1)))>1024)throw Error("spvt");o=-33521665&o|(1023&t)<<15}}}return gt(e,o),e}function Sf(e,t,r=_f){if(e!=null){if(W2&&e instanceof Uint8Array)return t?e:new Uint8Array(e);if(Array.isArray(e)){var i=0|e[ue];return 2&i?e:(t&&(t=i===0||!!(32&i)&&!(64&i||!(16&i))),t?(gt(e,-12293&(34|i)),e):yp(e,Sf,4&i?_f:r,!0,!0))}return e.W===Va?e=2&(i=0|(r=e.u)[ue])?e:new e.constructor(dc(r,i,!0)):e instanceof Mr&&!(2&e.L)&&(r=mo(e.X(Sf)),e=new Mr(r,e.S,e.R,e.Y)),e}}function dc(e,t,r){const i=r||2&t?_f:Jb,o=!!(32&t);return e=(function(a,u,h){const d=cr(a);var p=d.length;const y=256&u?d[p-1]:void 0;for(p+=y?-1:0,u=512&u?1:0;u<p;u++)d[u]=h(d[u]);if(y){u=d[u]={};for(const v in y)u[v]=h(y[v])}return(a=ap(a))&&(d[Zi]=cr(a)),d})(e,t,(a=>Sf(a,o,i))),oc(e,32|(r?2:0)),e}function fc(e){const t=e.u,r=0|t[ue];return 2&r?new e.constructor(dc(t,r,!1)):e}function ro(e,t){return Xn(e=e.u,0|e[ue],t)}function Xn(e,t,r,i){if(r===-1)return null;var o=r+(512&t?0:-1);const a=e.length-1;return o>=a&&256&t?e[a][r]:i&&256&t&&(t=e[a][r])!=null?(e[o]!=null&&$d!=null&&((o=(e=Hb??(Hb={}))[$d]||0)>=4||(e[$d]=o+1,q2(e=Error(),"incident"),(function(u){oi.setTimeout((()=>{throw u}),0)})(e))),t):o<=a?e[o]:void 0}function $e(e,t,r){const i=e.u;let o=0|i[ue];return As(o),et(i,o,t,r),e}function et(e,t,r,i){const o=512&t?0:-1,a=r+o;var u=e.length-1;return a>=u&&256&t?(e[u][r]=i,t):a<=u?(e[a]=i,256&t&&r in(e=e[u])&&delete e[r],t):(i!==void 0&&(r>=(u=t>>15&1023||536870912)?i!=null&&(e[u+o]={[r]:i},gt(e,t|=256)):e[a]=i),t)}function Tu(e,t){let r=0|(e=e.u)[ue];const i=Xn(e,r,t),o=js(i);return o!=null&&o!==i&&et(e,r,t,o),o}function ow(e){let t=0|(e=e.u)[ue];const r=Xn(e,t,1),i=op(r,!0);return i!=null&&i!==r&&et(e,t,1,i),i}function ti(){return Xb===void 0?2:4}function ri(e,t,r,i,o){const a=e.u,u=2&(e=0|a[ue])?1:i;o=!!o;let h=0|(i=vp(a,e,t))[ue];if(!(4&h)){4&h&&(i=cr(i),h=Kn(h,e),e=et(a,e,t,i));let d=0,p=0;for(;d<i.length;d++){const y=r(i[d]);y!=null&&(i[p++]=y)}p<d&&(i.length=p),h=wp(h,e),r=-4097&(20|h),h=r&=-8193,gt(i,h),2&h&&Object.freeze(i)}return u===1||u===4&&32&h?zn(h)||(o=h,h|=2,h!==o&&gt(i,h),Object.freeze(i)):(u===2&&zn(h)&&(i=cr(i),h=Kn(h,e),h=xs(h,e,o),gt(i,h),e=et(a,e,t,i)),zn(h)||(t=h,h=xs(h,e,o),h!==t&&gt(i,h))),i}function vp(e,t,r,i){return e=Xn(e,t,r,i),Array.isArray(e)?e:sp}function wp(e,t){return e===0&&(e=Kn(e,t)),1|e}function zn(e){return!!(2&e)&&!!(4&e)||!!(2048&e)}function aw(e){e=cr(e);for(let t=0;t<e.length;t++){const r=e[t]=cr(e[t]);Array.isArray(r[1])&&(r[1]=mo(r[1]))}return e}function kf(e,t,r,i){let o=0|(e=e.u)[ue];As(o),et(e,o,t,(i==="0"?Number(r)===0:r===i)?void 0:r)}function vo(e,t,r,i,o){As(t);var a=!(!(64&t)&&16384&t);const u=(o=vp(e,t,r,o))!==sp;if(a||!u){let h=a=u?0|o[ue]:0;(!u||2&h||zn(h)||4&h&&!(32&h))&&(o=cr(o),h=Kn(h,t),t=et(e,t,r,o)),h=-13&wp(h,t),h=xs(i?-17&h:16|h,t,!0),h!==a&&gt(o,h)}return o}function Vd(e,t){var r=Xw;return Ep(_p(e=e.u),e,0|e[ue],r)===t?t:-1}function _p(e){if(ic)return e[pa]??(e[pa]=new Map);if(pa in e)return e[pa];const t=new Map;return Object.defineProperty(e,pa,{value:t}),t}function lw(e,t,r,i){const o=_p(e),a=Ep(o,e,t,r);return a!==i&&(a&&(t=et(e,t,a)),o.set(r,i)),t}function Ep(e,t,r,i){let o=e.get(i);if(o!=null)return o;o=0;for(let a=0;a<i.length;a++){const u=i[a];Xn(t,r,u)!=null&&(o!==0&&(r=et(t,r,o)),o=u)}return e.set(i,o),o}function Sp(e,t,r,i){let o,a=0|e[ue];if((i=Xn(e,a,r,i))!=null&&i.W===Va)return(t=fc(i))!==i&&et(e,a,r,t),t.u;if(Array.isArray(i)){const u=0|i[ue];o=2&u?bs(dc(i,u,!1),t,!0):64&u?i:bs(o,t,!0)}else o=bs(void 0,t,!0);return o!==i&&et(e,a,r,o),o}function uw(e,t,r,i){let o=0|(e=e.u)[ue];return(t=mp(i=Xn(e,o,r,i),t,!1,o))!==i&&t!=null&&et(e,o,r,t),t}function Te(e,t,r,i=!1){if((t=uw(e,t,r,i))==null)return t;if(!(2&(i=0|(e=e.u)[ue]))){const o=fc(t);o!==t&&et(e,i,r,t=o)}return t}function cw(e,t,r,i,o,a,u){e=e.u;var h=!!(2&t);const d=h?1:o;a=!!a,u&&(u=!h);var p=0|(o=vp(e,t,i))[ue];if(!(h=!!(4&p))){var y=o,v=t;const _=!!(2&(p=wp(p,t)));_&&(v|=2);let E=!_,S=!0,k=0,T=0;for(;k<y.length;k++){const A=mp(y[k],r,!1,v);if(A instanceof r){if(!_){const I=!!(2&(0|A.u[ue]));E&&(E=!I),S&&(S=I)}y[T++]=A}}T<k&&(y.length=T),p|=4,p=S?16|p:-17&p,gt(y,p=E?8|p:-9&p),_&&Object.freeze(y)}if(u&&!(8&p||!o.length&&(d===1||d===4&&32&p))){for(zn(p)&&(o=cr(o),p=Kn(p,t),t=et(e,t,i,o)),r=o,u=p,y=0;y<r.length;y++)(p=r[y])!==(v=fc(p))&&(r[y]=v);u|=8,gt(r,u=r.length?-17&u:16|u),p=u}return d===1||d===4&&32&p?zn(p)||(t=p,(p|=!o.length||16&p&&(!h||32&p)?2:2048)!==t&&gt(o,p),Object.freeze(o)):(d===2&&zn(p)&&(gt(o=cr(o),p=xs(p=Kn(p,t),t,a)),t=et(e,t,i,o)),zn(p)||(i=p,(p=xs(p,t,a))!==i&&gt(o,p))),o}function Gn(e,t,r){const i=0|e.u[ue];return cw(e,i,t,r,ti(),!1,!(2&i))}function de(e,t,r,i){return i==null&&(i=void 0),$e(e,r,i)}function ba(e,t,r,i){i==null&&(i=void 0);e:{let o=0|(e=e.u)[ue];if(As(o),i==null){const a=_p(e);if(Ep(a,e,o,r)!==t)break e;a.set(r,0)}else o=lw(e,o,r,t);et(e,o,t,i)}}function Kn(e,t){return-2049&(e=32|(2&t?2|e:-3&e))}function xs(e,t,r){return 32&t&&r||(e&=-33),e}function Gu(e,t,r,i){const o=0|e.u[ue];As(o),e=cw(e,o,r,t,2,!0),i=i??new r,e.push(i),e[ue]=2&(0|i.u[ue])?-9&e[ue]:-17&e[ue]}function Fr(e,t){return go(ro(e,t))}function $r(e,t){return to(ro(e,t))}function ut(e,t){return Tu(e,t)??0}function Na(e,t,r){if(r!=null&&typeof r!="boolean")throw e=typeof r,Error(`Expected boolean but got ${e!="object"?e:r?Array.isArray(r)?"array":e:"null"}: ${r}`);$e(e,t,r)}function _n(e,t,r){if(r!=null){if(typeof r!="number"||!cc(r))throw wf("int32");r|=0}$e(e,t,r)}function ae(e,t,r){if(r!=null&&typeof r!="number")throw Error(`Value of float/double field must be a number, found ${typeof r}: ${r}`);$e(e,t,r)}function qu(e,t,r){{const u=e.u;let h=0|u[ue];if(As(h),r==null)et(u,h,t);else{var i=e=0|r[ue],o=zn(e),a=o||Object.isFrozen(r);for(o||(e=0),a||(r=cr(r),i=0,e=xs(e=Kn(e,h),h,!0),a=!1),e|=21,o=0;o<r.length;o++){const d=r[o],p=tw(d);Object.is(d,p)||(a&&(r=cr(r),i=0,e=xs(e=Kn(e,h),h,!0),a=!1),r[o]=p)}e!==i&&(a&&(r=cr(r),e=xs(e=Kn(e,h),h,!0)),gt(r,e)),et(u,h,t,r)}}}function pc(e,t,r){As(0|e.u[ue]),ri(e,t,to,2,!0).push(tw(r))}function hw(e,t){return Error(`Invalid wire type: ${e} (at position ${t})`)}function kp(){return Error("Failed to read varint, encoding is invalid.")}function dw(e,t){return Error(`Tried to read past the end of the data ${t} > ${e}`)}function bp(e){if(typeof e=="string")return{buffer:H2(e),N:!1};if(Array.isArray(e))return{buffer:new Uint8Array(e),N:!1};if(e.constructor===Uint8Array)return{buffer:e,N:!1};if(e.constructor===ArrayBuffer)return{buffer:new Uint8Array(e),N:!1};if(e.constructor===Wn)return{buffer:rp(e)||new Uint8Array(0),N:!0};if(e instanceof Uint8Array)return{buffer:new Uint8Array(e.buffer,e.byteOffset,e.byteLength),N:!1};throw Error("Type not convertible to a Uint8Array, expected a Uint8Array, an ArrayBuffer, a base64 encoded string, a ByteString or an Array of numbers")}function xp(e,t){let r,i=0,o=0,a=0;const u=e.h;let h=e.g;do r=u[h++],i|=(127&r)<<a,a+=7;while(a<32&&128&r);for(a>32&&(o|=(127&r)>>4),a=3;a<32&&128&r;a+=7)r=u[h++],o|=(127&r)<<a;if(ii(e,h),r<128)return t(i>>>0,o>>>0);throw kp()}function Tp(e){let t=0,r=e.g;const i=r+10,o=e.h;for(;r<i;){const a=o[r++];if(t|=a,(128&a)==0)return ii(e,r),!!(127&t)}throw kp()}function Ts(e){const t=e.h;let r=e.g,i=t[r++],o=127&i;if(128&i&&(i=t[r++],o|=(127&i)<<7,128&i&&(i=t[r++],o|=(127&i)<<14,128&i&&(i=t[r++],o|=(127&i)<<21,128&i&&(i=t[r++],o|=i<<28,128&i&&128&t[r++]&&128&t[r++]&&128&t[r++]&&128&t[r++]&&128&t[r++])))))throw kp();return ii(e,r),o}function qn(e){return Ts(e)>>>0}function bf(e){var t=e.h;const r=e.g,i=t[r],o=t[r+1],a=t[r+2];return t=t[r+3],ii(e,e.g+4),(i<<0|o<<8|a<<16|t<<24)>>>0}function xf(e){var t=bf(e);e=2*(t>>31)+1;const r=t>>>23&255;return t&=8388607,r==255?t?NaN:e*(1/0):r==0?1401298464324817e-60*e*t:e*Math.pow(2,r-150)*(t+8388608)}function gx(e){return Ts(e)}function Wd(e,t,{ba:r=!1}={}){e.ba=r,t&&(t=bp(t),e.h=t.buffer,e.m=t.N,e.j=0,e.l=e.h.length,e.g=e.j)}function ii(e,t){if(e.g=t,t>e.l)throw dw(e.l,t)}function fw(e,t){if(t<0)throw Error(`Tried to read a negative byte length: ${t}`);const r=e.g,i=r+t;if(i>e.l)throw dw(t,e.l-r);return e.g=i,r}function pw(e,t){if(t==0)return ai();var r=fw(e,t);return e.ba&&e.m?r=e.h.subarray(r,r+t):(e=e.h,r=r===(t=r+t)?new Uint8Array(0):nx?e.slice(r,t):new Uint8Array(e.subarray(r,t))),r.length==0?ai():new Wn(r,Qi)}Mr.prototype.toJSON=void 0,Mr.prototype.Ia=Y2;var ty=[];function mw(e){var t=e.g;if(t.g==t.l)return!1;e.l=e.g.g;var r=qn(e.g);if(t=r>>>3,!((r&=7)>=0&&r<=5))throw hw(r,e.l);if(t<1)throw Error(`Invalid field number: ${t} (at position ${e.l})`);return e.m=t,e.h=r,!0}function Ru(e){switch(e.h){case 0:e.h!=0?Ru(e):Tp(e.g);break;case 1:ii(e=e.g,e.g+8);break;case 2:if(e.h!=2)Ru(e);else{var t=qn(e.g);ii(e=e.g,e.g+t)}break;case 5:ii(e=e.g,e.g+4);break;case 3:for(t=e.m;;){if(!mw(e))throw Error("Unmatched start-group tag: stream EOF");if(e.h==4){if(e.m!=t)throw Error("Unmatched end-group tag");break}Ru(e)}break;default:throw hw(e.h,e.l)}}function Wa(e,t,r){const i=e.g.l,o=qn(e.g),a=e.g.g+o;let u=a-i;if(u<=0&&(e.g.l=a,r(t,e,void 0,void 0,void 0),u=a-e.g.g),u)throw Error(`Message parsing ended unexpectedly. Expected to read ${o} bytes, instead read ${o-u} bytes, either the data ended unexpectedly or the message misreported its own length`);return e.g.g=a,e.g.l=i,t}function Rp(e){var t=qn(e.g),r=fw(e=e.g,t);if(e=e.h,Fb){var i,o=e;(i=Dd)||(i=Dd=new TextDecoder("utf-8",{fatal:!0})),t=r+t,o=r===0&&t===o.length?o:o.subarray(r,t);try{var a=i.decode(o)}catch(h){if(fu===void 0){try{i.decode(new Uint8Array([128]))}catch{}try{i.decode(new Uint8Array([97])),fu=!0}catch{fu=!1}}throw!fu&&(Dd=void 0),h}}else{t=(a=r)+t,r=[];let h,d=null;for(;a<t;){var u=e[a++];u<128?r.push(u):u<224?a>=t?Gs():(h=e[a++],u<194||(192&h)!=128?(a--,Gs()):r.push((31&u)<<6|63&h)):u<240?a>=t-1?Gs():(h=e[a++],(192&h)!=128||u===224&&h<160||u===237&&h>=160||(192&(i=e[a++]))!=128?(a--,Gs()):r.push((15&u)<<12|(63&h)<<6|63&i)):u<=244?a>=t-2?Gs():(h=e[a++],(192&h)!=128||h-144+(u<<28)>>30!=0||(192&(i=e[a++]))!=128||(192&(o=e[a++]))!=128?(a--,Gs()):(u=(7&u)<<18|(63&h)<<12|(63&i)<<6|63&o,u-=65536,r.push(55296+(u>>10&1023),56320+(1023&u)))):Gs(),r.length>=8192&&(d=F1(d,r),r.length=0)}a=F1(d,r)}return a}function gw(e){const t=qn(e.g);return pw(e.g,t)}function mc(e,t,r){var i=qn(e.g);for(i=e.g.g+i;e.g.g<i;)r.push(t(e.g))}var pu=[];function yx(e){return e}let Hi;function nn(e,t,r){t.g?t.m(e,t.g,t.h,r):t.m(e,t.h,r)}var se=class{constructor(e,t){this.u=iw(e,t)}toJSON(){const e=!Hi;try{return e&&(Hi=sw),yw(this)}finally{e&&(Hi=void 0)}}l(){var e=Zx;return e.g?e.l(this,e.g,e.h,!0):e.l(this,e.h,e.defaultValue,!0)}clone(){const e=this.u;return new this.constructor(dc(e,0|e[ue],!1))}N(){return!!(2&(0|this.u[ue]))}};function yw(e){var t=e.u;{t=(e=Hi(t))!==t;let p=e.length;if(p){var r=e[p-1],i=ip(r);i?p--:r=void 0;var o=e;if(i){e:{var a,u=r,h=!1;if(u)for(let y in u)isNaN(+y)?(a??(a={}))[y]=u[y]:(i=u[y],Array.isArray(i)&&(Vu(i)||K1(i)&&i.size===0)&&(i=null),i==null&&(h=!0),i!=null&&((a??(a={}))[y]=i));if(h||(a=u),a)for(let y in a){h=a;break e}h=null}u=h==null?r!=null:h!==r}for(;p>0&&((a=o[p-1])==null||Vu(a)||K1(a)&&a.size===0);p--)var d=!0;(o!==e||u||d)&&(t?(d||u||h)&&(o.length=p):o=Array.prototype.slice.call(o,0,p),h&&o.push(h)),d=o}else d=e}return d}function ry(e){return e?/^\d+$/.test(e)?(uc(e),new Tf(Ue,st)):null:vx||(vx=new Tf(0,0))}se.prototype.W=Va,se.prototype.toString=function(){try{return Hi=yx,yw(this).toString()}finally{Hi=void 0}};var Tf=class{constructor(e,t){this.h=e>>>0,this.g=t>>>0}};let vx;function ny(e){return e?/^-?\d+$/.test(e)?(uc(e),new Rf(Ue,st)):null:wx||(wx=new Rf(0,0))}var Rf=class{constructor(e,t){this.h=e>>>0,this.g=t>>>0}};let wx;function Gi(e,t,r){for(;r>0||t>127;)e.g.push(127&t|128),t=(t>>>7|r<<25)>>>0,r>>>=7;e.g.push(t)}function wo(e,t){for(;t>127;)e.g.push(127&t|128),t>>>=7;e.g.push(t)}function gc(e,t){if(t>=0)wo(e,t);else{for(let r=0;r<9;r++)e.g.push(127&t|128),t>>=7;e.g.push(1)}}function Ia(e,t){e.g.push(t>>>0&255),e.g.push(t>>>8&255),e.g.push(t>>>16&255),e.g.push(t>>>24&255)}function no(e,t){t.length!==0&&(e.l.push(t),e.h+=t.length)}function br(e,t,r){wo(e.g,8*t+r)}function Cp(e,t){return br(e,t,2),t=e.g.end(),no(e,t),t.push(e.h),t}function Ap(e,t){var r=t.pop();for(r=e.h+e.g.length()-r;r>127;)t.push(127&r|128),r>>>=7,e.h++;t.push(r),e.h++}function yc(e,t,r){br(e,t,2),wo(e.g,r.length),no(e,e.g.end()),no(e,r)}function Ju(e,t,r,i){r!=null&&(t=Cp(e,t),i(r,e),Ap(e,t))}function sn(){const e=class{constructor(){throw Error()}};return Object.setPrototypeOf(e,e.prototype),e}var jp=sn(),vw=sn(),Pp=sn(),Op=sn(),ww=sn(),_w=sn(),Np=sn(),Ew=sn(),Sw=sn(),_o=class{constructor(e,t,r){this.g=e,this.h=t,e=jp,this.l=!!e&&r===e||!1}};function vc(e,t){return new _o(e,t,jp)}function kw(e,t,r,i,o){Ju(e,r,Rw(t,i),o)}const _x=vc((function(e,t,r,i,o){return e.h===2&&(Wa(e,Sp(t,i,r),o),!0)}),kw),Ex=vc((function(e,t,r,i,o){return e.h===2&&(Wa(e,Sp(t,i,r,!0),o),!0)}),kw);var wc=Symbol(),Ip=Symbol(),sy=Symbol(),iy=Symbol();let bw,xw;function li(e,t,r,i){var o=i[e];if(o)return o;(o={}).Pa=i,o.V=(function(v){switch(typeof v){case"boolean":return rw||(rw=[0,void 0,!0]);case"number":return v>0?void 0:v===0?px||(px=[0,void 0]):[-v,void 0];case"string":return[0,v];case"object":return v}})(i[0]);var a=i[1];let u=1;a&&a.constructor===Object&&(o.ga=a,typeof(a=i[++u])=="function"&&(o.la=!0,bw??(bw=a),xw??(xw=i[u+1]),a=i[u+=2]));const h={};for(;a&&Array.isArray(a)&&a.length&&typeof a[0]=="number"&&a[0]>0;){for(var d=0;d<a.length;d++)h[a[d]]=a;a=i[++u]}for(d=1;a!==void 0;){let v;typeof a=="number"&&(d+=a,a=i[++u]);var p=void 0;if(a instanceof _o?v=a:(v=_x,u--),v==null?void 0:v.l){a=i[++u],p=i;var y=u;typeof a=="function"&&(a=a(),p[y]=a),p=a}for(y=d+1,typeof(a=i[++u])=="number"&&a<0&&(y-=a,a=i[++u]);d<y;d++){const _=h[d];p?r(o,d,v,p,_):t(o,d,v,_)}}return i[e]=o}function Tw(e){return Array.isArray(e)?e[0]instanceof _o?e:[Ex,e]:[e,void 0]}function Rw(e,t){return e instanceof se?e.u:Array.isArray(e)?bs(e,t,!1):void 0}function Lp(e,t,r,i){const o=r.g;e[t]=i?(a,u,h)=>o(a,u,h,i):o}function Dp(e,t,r,i,o){const a=r.g;let u,h;e[t]=(d,p,y)=>a(d,p,y,h||(h=li(Ip,Lp,Dp,i).V),u||(u=Up(i)),o)}function Up(e){let t=e[sy];if(t!=null)return t;const r=li(Ip,Lp,Dp,e);return t=r.la?(i,o)=>bw(i,o,r):(i,o)=>{const a=0|i[ue];for(;mw(o)&&o.h!=4;){var u=o.m,h=r[u];if(h==null){var d=r.ga;d&&(d=d[u])&&(d=Sx(d))!=null&&(h=r[u]=d)}h!=null&&h(o,i,u)||(u=(h=o).l,Ru(h),h.fa?h=void 0:(d=h.g.g-u,h.g.g=u,h=pw(h.g,d)),u=i,h&&((d=u[Zi])?d.push(h):u[Zi]=[h]))}return 16384&a&&mo(i),!0},e[sy]=t}function Sx(e){const t=(e=Tw(e))[0].g;if(e=e[1]){const r=Up(e),i=li(Ip,Lp,Dp,e).V;return(o,a,u)=>t(o,a,u,i,r)}return t}function _c(e,t,r){e[t]=r.h}function Ec(e,t,r,i){let o,a;const u=r.h;e[t]=(h,d,p)=>u(h,d,p,a||(a=li(wc,_c,Ec,i).V),o||(o=Cw(i)))}function Cw(e){let t=e[iy];if(!t){const r=li(wc,_c,Ec,e);t=(i,o)=>Aw(i,o,r),e[iy]=t}return t}function Aw(e,t,r){for(var i=0|e[ue],o=512&i?0:-1,a=e.length,u=512&i?1:0,h=a+(256&i?-1:0);u<h;u++){const d=e[u];if(d==null)continue;const p=u-o,y=oy(r,p);y&&y(t,d,p)}if(256&i){i=e[a-1];for(const d in i)o=+d,Number.isNaN(o)||(a=i[o])!=null&&(h=oy(r,o))&&h(t,a,o)}if(e=ap(e))for(no(t,t.g.end()),r=0;r<e.length;r++)no(t,rp(e[r])||new Uint8Array(0))}function oy(e,t){var r=e[t];if(r)return r;if((r=e.ga)&&(r=r[t])){var i=(r=Tw(r))[0].h;if(r=r[1]){const o=Cw(r),a=li(wc,_c,Ec,r).V;r=e.la?xw(a,o):(u,h,d)=>i(u,h,d,a,o)}else r=i;return e[t]=r}}function Eo(e,t){if(Array.isArray(t)){var r=0|t[ue];if(4&r)return t;for(var i=0,o=0;i<t.length;i++){const a=e(t[i]);a!=null&&(t[o++]=a)}return o<i&&(t.length=o),gt(t,-12289&(5|r)),2&r&&Object.freeze(t),t}}function Yt(e,t,r){return new _o(e,t,r)}function So(e,t,r){return new _o(e,t,r)}function Qt(e,t,r){et(e,0|e[ue],t,r)}var kx=vc((function(e,t,r,i,o){return e.h===2&&(e=Wa(e,bs([void 0,void 0],i,!0),o),As(i=0|t[ue]),(o=Xn(t,i,r))instanceof Mr?(2&o.L)!=0?((o=o.X()).push(e),et(t,i,r,o)):o.Na(e):Array.isArray(o)?(2&(0|o[ue])&&et(t,i,r,o=aw(o)),o.push(e)):et(t,i,r,[e]),!0)}),(function(e,t,r,i,o){if(t instanceof Mr)t.forEach(((a,u)=>{Ju(e,r,bs([u,a],i,!1),o)}));else if(Array.isArray(t))for(let a=0;a<t.length;a++){const u=t[a];Array.isArray(u)&&Ju(e,r,bs(u,i,!1),o)}}));function jw(e,t,r){if(t=(function(i){if(i==null)return i;const o=typeof i;if(o==="bigint")return String(dp(64,i));if(hc(i)){if(o==="string")return pp(i);if(o==="number")return fp(i)}})(t),t!=null&&(typeof t=="string"&&ny(t),t!=null))switch(br(e,r,0),typeof t){case"number":e=e.g,eo(t),Gi(e,Ue,st);break;case"bigint":r=BigInt.asUintN(64,t),r=new Rf(Number(r&BigInt(4294967295)),Number(r>>BigInt(32))),Gi(e.g,r.h,r.g);break;default:r=ny(t),Gi(e.g,r.h,r.g)}}function Pw(e,t,r){(t=go(t))!=null&&t!=null&&(br(e,r,0),gc(e.g,t))}function Ow(e,t,r){(t=Z2(t))!=null&&(br(e,r,0),e.g.g.push(t?1:0))}function Nw(e,t,r){(t=to(t))!=null&&yc(e,r,B2(t))}function Iw(e,t,r,i,o){Ju(e,r,Rw(t,i),o)}function Lw(e,t,r){(t=t==null||typeof t=="string"||Ba(t)||t instanceof Wn?t:void 0)!=null&&yc(e,r,bp(t).buffer)}function Dw(e,t,r){return(e.h===5||e.h===2)&&(t=vo(t,0|t[ue],r,!1,!1),e.h==2?mc(e,xf,t):t.push(xf(e.g)),!0)}var Mn=Yt((function(e,t,r){if(e.h!==1)return!1;var i=e.g;e=bf(i);const o=bf(i);i=2*(o>>31)+1;const a=o>>>20&2047;return e=4294967296*(1048575&o)+e,Qt(t,r,a==2047?e?NaN:i*(1/0):a==0?5e-324*i*e:i*Math.pow(2,a-1075)*(e+4503599627370496)),!0}),(function(e,t,r){(t=js(t))!=null&&(br(e,r,1),e=e.g,(r=Q2||(Q2=new DataView(new ArrayBuffer(8)))).setFloat64(0,+t,!0),Ue=r.getUint32(0,!0),st=r.getUint32(4,!0),Ia(e,Ue),Ia(e,st))}),sn()),yt=Yt((function(e,t,r){return e.h===5&&(Qt(t,r,xf(e.g)),!0)}),(function(e,t,r){(t=js(t))!=null&&(br(e,r,5),e=e.g,lp(t),Ia(e,Ue))}),Np),bx=So(Dw,(function(e,t,r){if((t=Eo(js,t))!=null)for(let u=0;u<t.length;u++){var i=e,o=r,a=t[u];a!=null&&(br(i,o,5),i=i.g,lp(a),Ia(i,Ue))}}),Np),Fp=So(Dw,(function(e,t,r){if((t=Eo(js,t))!=null&&t.length){br(e,r,2),wo(e.g,4*t.length);for(let i=0;i<t.length;i++)r=e.g,lp(t[i]),Ia(r,Ue)}}),Np),Rs=Yt((function(e,t,r){return e.h===0&&(Qt(t,r,xp(e.g,cp)),!0)}),jw,_w),Kd=Yt((function(e,t,r){return e.h===0&&(Qt(t,r,(e=xp(e.g,cp))===0?void 0:e),!0)}),jw,_w),xx=Yt((function(e,t,r){return e.h===0&&(Qt(t,r,xp(e.g,up)),!0)}),(function(e,t,r){if((t=ox(t))!=null&&(typeof t=="string"&&ry(t),t!=null))switch(br(e,r,0),typeof t){case"number":e=e.g,eo(t),Gi(e,Ue,st);break;case"bigint":r=BigInt.asUintN(64,t),r=new Tf(Number(r&BigInt(4294967295)),Number(r>>BigInt(32))),Gi(e.g,r.h,r.g);break;default:r=ry(t),Gi(e.g,r.h,r.g)}}),sn()),it=Yt((function(e,t,r){return e.h===0&&(Qt(t,r,Ts(e.g)),!0)}),Pw,Op),Sc=So((function(e,t,r){return(e.h===0||e.h===2)&&(t=vo(t,0|t[ue],r,!1,!1),e.h==2?mc(e,Ts,t):t.push(Ts(e.g)),!0)}),(function(e,t,r){if((t=Eo(go,t))!=null&&t.length){r=Cp(e,r);for(let i=0;i<t.length;i++)gc(e.g,t[i]);Ap(e,r)}}),Op),zi=Yt((function(e,t,r){return e.h===0&&(Qt(t,r,(e=Ts(e.g))===0?void 0:e),!0)}),Pw,Op),Je=Yt((function(e,t,r){return e.h===0&&(Qt(t,r,Tp(e.g)),!0)}),Ow,vw),qi=Yt((function(e,t,r){return e.h===0&&(Qt(t,r,(e=Tp(e.g))===!1?void 0:e),!0)}),Ow,vw),Vt=So((function(e,t,r){return e.h===2&&(e=Rp(e),vo(t,0|t[ue],r,!1).push(e),!0)}),(function(e,t,r){if((t=Eo(to,t))!=null)for(let u=0;u<t.length;u++){var i=e,o=r,a=t[u];a!=null&&yc(i,o,B2(a))}}),Pp),Ss=Yt((function(e,t,r){return e.h===2&&(Qt(t,r,(e=Rp(e))===""?void 0:e),!0)}),Nw,Pp),Oe=Yt((function(e,t,r){return e.h===2&&(Qt(t,r,Rp(e)),!0)}),Nw,Pp),St=(function(e,t,r=jp){return new _o(e,t,r)})((function(e,t,r,i,o){return e.h===2&&(i=bs(void 0,i,!0),vo(t,0|t[ue],r,!0).push(i),Wa(e,i,o),!0)}),(function(e,t,r,i,o){if(Array.isArray(t))for(let a=0;a<t.length;a++)Iw(e,t[a],r,i,o)})),De=vc((function(e,t,r,i,o,a){return e.h===2&&(lw(t,0|t[ue],a,r),Wa(e,t=Sp(t,i,r),o),!0)}),Iw),Uw=Yt((function(e,t,r){return e.h===2&&(Qt(t,r,gw(e)),!0)}),Lw,Ew),Tx=So((function(e,t,r){return(e.h===0||e.h===2)&&(t=vo(t,0|t[ue],r,!1,!1),e.h==2?mc(e,qn,t):t.push(qn(e.g)),!0)}),(function(e,t,r){if((t=Eo(ew,t))!=null)for(let u=0;u<t.length;u++){var i=e,o=r,a=t[u];a!=null&&(br(i,o,0),wo(i.g,a))}}),ww),Rx=Yt((function(e,t,r){return e.h===0&&(Qt(t,r,(e=qn(e.g))===0?void 0:e),!0)}),(function(e,t,r){(t=ew(t))!=null&&t!=null&&(br(e,r,0),wo(e.g,t))}),ww),Br=Yt((function(e,t,r){return e.h===0&&(Qt(t,r,Ts(e.g)),!0)}),(function(e,t,r){(t=go(t))!=null&&(t=parseInt(t,10),br(e,r,0),gc(e.g,t))}),Sw);class Cx{constructor(t,r){this.h=t,this.g=r,this.l=Te,this.m=de,this.defaultValue=void 0}}function on(e,t){return new Cx(e,t)}function Ps(e,t){return(r,i)=>{if(pu.length){const a=pu.pop();a.o(i),Wd(a.g,r,i),r=a}else r=new class{constructor(a,u){if(ty.length){const h=ty.pop();Wd(h,a,u),a=h}else a=new class{constructor(h,d){this.h=null,this.m=!1,this.g=this.l=this.j=0,Wd(this,h,d)}clear(){this.h=null,this.m=!1,this.g=this.l=this.j=0,this.ba=!1}}(a,u);this.g=a,this.l=this.g.g,this.h=this.m=-1,this.o(u)}o({fa:a=!1}={}){this.fa=a}}(r,i);try{const a=new e,u=a.u;Up(t)(u,r);var o=a}finally{r.g.clear(),r.m=-1,r.h=-1,pu.length<100&&pu.push(r)}return o}}function kc(e){return function(){const t=new class{constructor(){this.l=[],this.h=0,this.g=new class{constructor(){this.g=[]}length(){return this.g.length}end(){const u=this.g;return this.g=[],u}}}};Aw(this.u,t,li(wc,_c,Ec,e)),no(t,t.g.end());const r=new Uint8Array(t.h),i=t.l,o=i.length;let a=0;for(let u=0;u<o;u++){const h=i[u];r.set(h,a),a+=h.length}return t.l=[r],r}}var ay=class extends se{constructor(e){super(e)}},ly=[0,Ss,Yt((function(e,t,r){return e.h===2&&(Qt(t,r,(e=gw(e))===ai()?void 0:e),!0)}),(function(e,t,r){if(t!=null){if(t instanceof se){const i=t.Ra;return void(i&&(t=i(t),t!=null&&yc(e,r,bp(t).buffer)))}if(Array.isArray(t))return}Lw(e,t,r)}),Ew)];let Hd,uy=globalThis.trustedTypes;function cy(e){Hd===void 0&&(Hd=(function(){let r=null;if(!uy)return r;try{const i=o=>o;r=uy.createPolicy("goog#html",{createHTML:i,createScript:i,createScriptURL:i})}catch{}return r})());var t=Hd;return new class{constructor(r){this.g=r}toString(){return this.g+""}}(t?t.createScriptURL(e):e)}function Ax(e,...t){if(t.length===0)return cy(e[0]);let r=e[0];for(let i=0;i<t.length;i++)r+=encodeURIComponent(t[i])+e[i+1];return cy(r)}var Fw=[0,it,Br,Je,-1,Sc,Br,-1],jx=class extends se{constructor(e){super(e)}},Mw=[0,Je,Oe,Je,Br,-1,So((function(e,t,r){return(e.h===0||e.h===2)&&(t=vo(t,0|t[ue],r,!1,!1),e.h==2?mc(e,gx,t):t.push(Ts(e.g)),!0)}),(function(e,t,r){if((t=Eo(go,t))!=null&&t.length){r=Cp(e,r);for(let i=0;i<t.length;i++)gc(e.g,t[i]);Ap(e,r)}}),Sw),Oe,-1,[0,Je,-1],Br,Je,-1],$w=[0,Oe,-2],hy=class extends se{constructor(e){super(e)}},Bw=[0],zw=[0,it,Je,1,Je,-3],kr=class extends se{constructor(e){super(e,2)}},vt={};vt[336783863]=[0,Oe,Je,-1,it,[0,[1,2,3,4,5,6,7,8],De,Bw,De,Mw,De,$w,De,zw,De,Fw,De,[0,Oe,-2],De,[0,Oe,Br],De,[0,Br,Oe]],[0,Oe],Je,[0,[1,3],[2,4],De,[0,Sc],-1,De,[0,Vt],-1,St,[0,Oe,-1]],Oe];var dy=[0,Kd,-1,qi,-3,Kd,Sc,Ss,zi,Kd,-1,qi,zi,qi,-2,Ss];function xr(e,t){kf(e,2,yo(t),"")}function Be(e,t){pc(e,3,t)}function ke(e,t){pc(e,4,t)}var Xt=class extends se{constructor(e){super(e,500)}o(e){return de(this,0,7,e)}},xa=[-1,{}],fy=[0,Oe,1,xa],py=[0,Oe,Vt,xa];function Tr(e,t){Gu(e,1,Xt,t)}function We(e,t){pc(e,10,t)}function Ce(e,t){pc(e,15,t)}var dr=class extends se{constructor(e){super(e,500)}o(e){return de(this,0,1001,e)}},Vw=[-500,St,[-500,Ss,-1,Vt,-3,[-2,vt,Je],St,ly,zi,-1,fy,py,St,[0,Ss,qi],Ss,dy,zi,Vt,987,Vt],4,St,[-500,Oe,-1,[-1,{}],998,Oe],St,[-500,Oe,Vt,-1,[-2,{},Je],997,Vt,-1],zi,St,[-500,Oe,Vt,xa,998,Vt],Vt,zi,fy,py,St,[0,Ss,-1,xa],Vt,-2,dy,Ss,-1,qi,[0,qi,Rx],978,xa,St,ly];dr.prototype.g=kc(Vw);var Px=Ps(dr,Vw),Ox=class extends se{constructor(e){super(e)}},Ww=class extends se{constructor(e){super(e)}g(){return Gn(this,Ox,1)}},Kw=[0,St,[0,it,yt,Oe,-1]],bc=Ps(Ww,Kw),Nx=class extends se{constructor(e){super(e)}},Ix=class extends se{constructor(e){super(e)}},Gd=class extends se{constructor(e){super(e)}h(){return Te(this,Nx,2)}g(){return Gn(this,Ix,5)}},Hw=Ps(class extends se{constructor(e){super(e)}},[0,Vt,Sc,Fp,[0,Br,[0,it,-3],[0,yt,-3],[0,it,-1,[0,St,[0,it,-2]]],St,[0,yt,-1,Oe,yt]],Oe,-1,Rs,St,[0,it,yt],Vt,Rs]),Gw=class extends se{constructor(e){super(e)}},Ji=Ps(class extends se{constructor(e){super(e)}},[0,St,[0,yt,-4]]),qw=class extends se{constructor(e){super(e)}},Ka=Ps(class extends se{constructor(e){super(e)}},[0,St,[0,yt,-4]]),Lx=class extends se{constructor(e){super(e)}},Dx=[0,it,-1,Fp,Br],Jw=class extends se{constructor(e){super(e)}};Jw.prototype.g=kc([0,yt,-4,Rs]);var Ux=class extends se{constructor(e){super(e)}},Fx=Ps(class extends se{constructor(e){super(e)}},[0,St,[0,1,it,Oe,Kw],Rs]),my=class extends se{constructor(e){super(e)}},Mx=class extends se{constructor(e){super(e)}oa(){const e=ow(this);return e??ai()}},$x=class extends se{constructor(e){super(e)}},Xw=[1,2],Bx=Ps(class extends se{constructor(e){super(e)}},[0,St,[0,Xw,De,[0,Fp],De,[0,Uw],it,Oe],Rs]),Mp=class extends se{constructor(e){super(e)}},Yw=[0,Oe,it,yt,Vt,-1],gy=class extends se{constructor(e){super(e)}},zx=[0,Je,-1],yy=class extends se{constructor(e){super(e)}},Cu=[1,2,3,4,5],Xu=class extends se{constructor(e){super(e)}g(){return ow(this)!=null}h(){return $r(this,2)!=null}},Ye=class extends se{constructor(e){super(e)}g(){return Z2(ro(this,2))??!1}},Qw=[0,Uw,Oe,[0,it,Rs,-1],[0,xx,Rs]],ct=[0,Qw,Je,[0,Cu,De,zw,De,Mw,De,Fw,De,Bw,De,$w],Br],xc=class extends se{constructor(e){super(e)}},$p=[0,ct,yt,-1,it],Vx=on(502141897,xc);vt[502141897]=$p;var Wx=Ps(class extends se{constructor(e){super(e)}},[0,[0,Br,-1,bx,Tx],Dx]),Zw=class extends se{constructor(e){super(e)}},e3=class extends se{constructor(e){super(e)}},Bp=[0,ct,yt,[0,ct],Je],t3=[0,ct,$p,Bp,yt,[0,[0,Qw]]],Kx=on(508968150,e3);vt[508968150]=t3,vt[508968149]=Bp;var r3=class extends se{constructor(e){super(e)}},Hx=on(513916220,r3);vt[513916220]=[0,ct,t3,it];var Fi=class extends se{constructor(e){super(e)}h(){return Te(this,Mp,2)}g(){$e(this,2)}},n3=[0,ct,Yw];vt[478825465]=n3;var Gx=class extends se{constructor(e){super(e)}},s3=class extends se{constructor(e){super(e)}},zp=class extends se{constructor(e){super(e)}},Vp=class extends se{constructor(e){super(e)}},i3=class extends se{constructor(e){super(e)}},vy=[0,ct,[0,ct],n3,-1],o3=[0,ct,yt,it],Wp=[0,ct,yt],a3=[0,ct,o3,Wp,yt],qx=on(479097054,i3);vt[479097054]=[0,ct,a3,vy],vt[463370452]=vy,vt[464864288]=o3;var Jx=on(462713202,Vp);vt[462713202]=a3,vt[474472470]=Wp;var Xx=class extends se{constructor(e){super(e)}},l3=class extends se{constructor(e){super(e)}},u3=class extends se{constructor(e){super(e)}},c3=class extends se{constructor(e){super(e)}},Kp=[0,ct,yt,-1,it],Cf=[0,ct,yt,Je];c3.prototype.g=kc([0,ct,Wp,[0,ct],$p,Bp,Kp,Cf]);var h3=class extends se{constructor(e){super(e)}},Yx=on(456383383,h3);vt[456383383]=[0,ct,Yw];var d3=class extends se{constructor(e){super(e)}},Qx=on(476348187,d3);vt[476348187]=[0,ct,zx];var f3=class extends se{constructor(e){super(e)}},wy=class extends se{constructor(e){super(e)}},p3=[0,Br,-1],Zx=on(458105876,class extends se{constructor(e){super(e)}g(){var e=this.u;const t=0|e[ue],r=2&t;return e=(function(i,o,a){var u=wy;const h=2&o;let d=!1;if(a==null){if(h)return ey();a=[]}else if(a.constructor===Mr){if((2&a.L)==0||h)return a;a=a.X()}else Array.isArray(a)?d=!!(2&(0|a[ue])):a=[];if(h){if(!a.length)return ey();d||(d=!0,mo(a))}else d&&(d=!1,a=aw(a));return d||(64&(0|a[ue])?a[ue]&=-33:32&o&&oc(a,32)),et(i,o,2,u=new Mr(a,u,ax,void 0)),u})(e,t,Xn(e,t,2)),!r&&wy&&(e.ra=!0),e}});vt[458105876]=[0,p3,kx,[!0,Rs,[0,Oe,-1,Vt]]];var Hp=class extends se{constructor(e){super(e)}},m3=on(458105758,Hp);vt[458105758]=[0,ct,Oe,p3];var g3=class extends se{constructor(e){super(e)}},e5=on(443442058,g3);vt[443442058]=[0,ct,Oe,it,yt,Vt,-1,Je,yt],vt[514774813]=Kp;var y3=class extends se{constructor(e){super(e)}},t5=on(516587230,y3);function Af(e,t){return t=t?t.clone():new Mp,e.displayNamesLocale!==void 0?$e(t,1,yo(e.displayNamesLocale)):e.displayNamesLocale===void 0&&$e(t,1),e.maxResults!==void 0?_n(t,2,e.maxResults):"maxResults"in e&&$e(t,2),e.scoreThreshold!==void 0?ae(t,3,e.scoreThreshold):"scoreThreshold"in e&&$e(t,3),e.categoryAllowlist!==void 0?qu(t,4,e.categoryAllowlist):"categoryAllowlist"in e&&$e(t,4),e.categoryDenylist!==void 0?qu(t,5,e.categoryDenylist):"categoryDenylist"in e&&$e(t,5),t}function Gp(e,t=-1,r=""){return{categories:e.map((i=>({index:Fr(i,1)??0??-1,score:ut(i,2)??0,categoryName:$r(i,3)??""??"",displayName:$r(i,4)??""??""}))),headIndex:t,headName:r}}function v3(e){var u,h;var t=ri(e,3,js,ti()),r=ri(e,2,go,ti()),i=ri(e,1,to,ti()),o=ri(e,9,to,ti());const a={categories:[],keypoints:[]};for(let d=0;d<t.length;d++)a.categories.push({score:t[d],index:r[d]??-1,categoryName:i[d]??"",displayName:o[d]??""});if((t=(u=Te(e,Gd,4))==null?void 0:u.h())&&(a.boundingBox={originX:Fr(t,1)??0,originY:Fr(t,2)??0,width:Fr(t,3)??0,height:Fr(t,4)??0,angle:0}),(h=Te(e,Gd,4))==null?void 0:h.g().length)for(const d of Te(e,Gd,4).g())a.keypoints.push({x:Tu(d,1)??0,y:Tu(d,2)??0,score:Tu(d,4)??0,label:$r(d,3)??""});return a}function Tc(e){const t=[];for(const r of Gn(e,qw,1))t.push({x:ut(r,1)??0,y:ut(r,2)??0,z:ut(r,3)??0,visibility:ut(r,4)??0});return t}function Ta(e){const t=[];for(const r of Gn(e,Gw,1))t.push({x:ut(r,1)??0,y:ut(r,2)??0,z:ut(r,3)??0,visibility:ut(r,4)??0});return t}function _y(e){return Array.from(e,(t=>t>127?t-256:t))}function Ey(e,t){if(e.length!==t.length)throw Error(`Cannot compute cosine similarity between embeddings of different sizes (${e.length} vs. ${t.length}).`);let r=0,i=0,o=0;for(let a=0;a<e.length;a++)r+=e[a]*t[a],i+=e[a]*e[a],o+=t[a]*t[a];if(i<=0||o<=0)throw Error("Cannot compute cosine similarity on embedding with 0 norm.");return r/Math.sqrt(i*o)}let mu;vt[516587230]=[0,ct,Kp,Cf,yt],vt[518928384]=Cf;const r5=new Uint8Array([0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11]);async function w3(){if(mu===void 0)try{await WebAssembly.instantiate(r5),mu=!0}catch{mu=!1}return mu}async function ma(e,t=Ax``){const r=await w3()?"wasm_internal":"wasm_nosimd_internal";return{wasmLoaderPath:`${t}/${e}_${r}.js`,wasmBinaryPath:`${t}/${e}_${r}.wasm`}}var vs=class{};function _3(){var e=navigator;return typeof OffscreenCanvas<"u"&&(!(function(t=navigator){return(t=t.userAgent).includes("Safari")&&!t.includes("Chrome")})(e)||!!((e=e.userAgent.match(/Version\/([\d]+).*Safari/))&&e.length>=1&&Number(e[1])>=17))}async function Sy(e){if(typeof importScripts!="function"){const t=document.createElement("script");return t.src=e.toString(),t.crossOrigin="anonymous",new Promise(((r,i)=>{t.addEventListener("load",(()=>{r()}),!1),t.addEventListener("error",(o=>{i(o)}),!1),document.body.appendChild(t)}))}importScripts(e.toString())}function E3(e){return e.videoWidth!==void 0?[e.videoWidth,e.videoHeight]:e.naturalWidth!==void 0?[e.naturalWidth,e.naturalHeight]:e.displayWidth!==void 0?[e.displayWidth,e.displayHeight]:[e.width,e.height]}function le(e,t,r){e.m||console.error("No wasm multistream support detected: ensure dependency inclusion of :gl_graph_runner_internal_multi_input target"),r(t=e.i.stringToNewUTF8(t)),e.i._free(t)}function ky(e,t,r){if(!e.i.canvas)throw Error("No OpenGL canvas configured.");if(r?e.i._bindTextureToStream(r):e.i._bindTextureToCanvas(),!(r=e.i.canvas.getContext("webgl2")||e.i.canvas.getContext("webgl")))throw Error("Failed to obtain WebGL context from the provided canvas. `getContext()` should only be invoked with `webgl` or `webgl2`.");e.i.gpuOriginForWebTexturesIsBottomLeft&&r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,!0),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,t),e.i.gpuOriginForWebTexturesIsBottomLeft&&r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,!1);const[i,o]=E3(t);return!e.l||i===e.i.canvas.width&&o===e.i.canvas.height||(e.i.canvas.width=i,e.i.canvas.height=o),[i,o]}function by(e,t,r){e.m||console.error("No wasm multistream support detected: ensure dependency inclusion of :gl_graph_runner_internal_multi_input target");const i=new Uint32Array(t.length);for(let o=0;o<t.length;o++)i[o]=e.i.stringToNewUTF8(t[o]);t=e.i._malloc(4*i.length),e.i.HEAPU32.set(i,t>>2),r(t);for(const o of i)e.i._free(o);e.i._free(t)}function fn(e,t,r){e.i.simpleListeners=e.i.simpleListeners||{},e.i.simpleListeners[t]=r}function ys(e,t,r){let i=[];e.i.simpleListeners=e.i.simpleListeners||{},e.i.simpleListeners[t]=(o,a,u)=>{a?(r(i,u),i=[]):i.push(o)}}vs.forVisionTasks=function(e){return ma("vision",e)},vs.forTextTasks=function(e){return ma("text",e)},vs.forGenAiExperimentalTasks=function(e){return ma("genai_experimental",e)},vs.forGenAiTasks=function(e){return ma("genai",e)},vs.forAudioTasks=function(e){return ma("audio",e)},vs.isSimdSupported=function(){return w3()};async function n5(e,t,r,i){return e=await(async(o,a,u,h,d)=>{if(a&&await Sy(a),!self.ModuleFactory||u&&(await Sy(u),!self.ModuleFactory))throw Error("ModuleFactory not set.");return self.Module&&d&&((a=self.Module).locateFile=d.locateFile,d.mainScriptUrlOrBlob&&(a.mainScriptUrlOrBlob=d.mainScriptUrlOrBlob)),d=await self.ModuleFactory(self.Module||d),self.ModuleFactory=self.Module=void 0,new o(d,h)})(e,r.wasmLoaderPath,r.assetLoaderPath,t,{locateFile:o=>o.endsWith(".wasm")?r.wasmBinaryPath.toString():r.assetBinaryPath&&o.endsWith(".data")?r.assetBinaryPath.toString():o}),await e.o(i),e}function qd(e,t){const r=Te(e.baseOptions,Xu,1)||new Xu;typeof t=="string"?($e(r,2,yo(t)),$e(r,1)):t instanceof Uint8Array&&($e(r,1,op(t,!1)),$e(r,2)),de(e.baseOptions,0,1,r)}function xy(e){try{const t=e.G.length;if(t===1)throw Error(e.G[0].message);if(t>1)throw Error("Encountered multiple errors: "+e.G.map((r=>r.message)).join(", "))}finally{e.G=[]}}function Z(e,t){e.B=Math.max(e.B,t)}function Rc(e,t){e.A=new Xt,xr(e.A,"PassThroughCalculator"),Be(e.A,"free_memory"),ke(e.A,"free_memory_unused_out"),We(t,"free_memory"),Tr(t,e.A)}function so(e,t){Be(e.A,t),ke(e.A,t+"_unused_out")}function Cc(e){e.g.addBoolToStream(!0,"free_memory",e.B)}var Au=class{constructor(e){this.g=e,this.G=[],this.B=0,this.g.setAutoRenderToScreen(!1)}l(e,t=!0){var r,i,o,a,u,h;if(t){const d=e.baseOptions||{};if((r=e.baseOptions)!=null&&r.modelAssetBuffer&&((i=e.baseOptions)!=null&&i.modelAssetPath))throw Error("Cannot set both baseOptions.modelAssetPath and baseOptions.modelAssetBuffer");if(!((o=Te(this.baseOptions,Xu,1))!=null&&o.g()||(a=Te(this.baseOptions,Xu,1))!=null&&a.h()||(u=e.baseOptions)!=null&&u.modelAssetBuffer||(h=e.baseOptions)!=null&&h.modelAssetPath))throw Error("Either baseOptions.modelAssetPath or baseOptions.modelAssetBuffer must be set");if((function(p,y){let v=Te(p.baseOptions,yy,3);if(!v){var _=v=new yy,E=new hy;ba(_,4,Cu,E)}"delegate"in y&&(y.delegate==="GPU"?(y=v,_=new jx,ba(y,2,Cu,_)):(y=v,_=new hy,ba(y,4,Cu,_))),de(p.baseOptions,0,3,v)})(this,d),d.modelAssetPath)return fetch(d.modelAssetPath.toString()).then((p=>{if(p.ok)return p.arrayBuffer();throw Error(`Failed to fetch model: ${d.modelAssetPath} (${p.status})`)})).then((p=>{try{this.g.i.FS_unlink("/model.dat")}catch{}this.g.i.FS_createDataFile("/","model.dat",new Uint8Array(p),!0,!1,!1),qd(this,"/model.dat"),this.m(),this.I()}));if(d.modelAssetBuffer instanceof Uint8Array)qd(this,d.modelAssetBuffer);else if(d.modelAssetBuffer)return(async function(p){const y=[];for(var v=0;;){const{done:_,value:E}=await p.read();if(_)break;y.push(E),v+=E.length}if(y.length===0)return new Uint8Array(0);if(y.length===1)return y[0];p=new Uint8Array(v),v=0;for(const _ of y)p.set(_,v),v+=_.length;return p})(d.modelAssetBuffer).then((p=>{qd(this,p),this.m(),this.I()}))}return this.m(),this.I(),Promise.resolve()}I(){}da(){let e;if(this.g.da((t=>{e=Px(t)})),!e)throw Error("Failed to retrieve CalculatorGraphConfig");return e}setGraph(e,t){this.g.attachErrorListener(((r,i)=>{this.G.push(Error(i))})),this.g.La(),this.g.setGraph(e,t),this.A=void 0,xy(this)}finishProcessing(){this.g.finishProcessing(),xy(this)}close(){this.A=void 0,this.g.closeGraph()}};function Jt(e,t){if(!e)throw Error(`Unable to obtain required WebGL resource: ${t}`);return e}Au.prototype.close=Au.prototype.close,(function(e,t){e=e.split(".");var r,i=oi;for((e[0]in i)||i.execScript===void 0||i.execScript("var "+e[0]);e.length&&(r=e.shift());)e.length||t===void 0?i=i[r]&&i[r]!==Object.prototype[r]?i[r]:i[r]={}:i[r]=t})("TaskRunner",Au);class s5{constructor(t,r,i,o){this.g=t,this.h=r,this.m=i,this.l=o}bind(){this.g.bindVertexArray(this.h)}close(){this.g.deleteVertexArray(this.h),this.g.deleteBuffer(this.m),this.g.deleteBuffer(this.l)}}function Ty(e,t,r){const i=e.g;if(r=Jt(i.createShader(r),"Failed to create WebGL shader"),i.shaderSource(r,t),i.compileShader(r),!i.getShaderParameter(r,i.COMPILE_STATUS))throw Error(`Could not compile WebGL shader: ${i.getShaderInfoLog(r)}`);return i.attachShader(e.h,r),r}function Ry(e,t){const r=e.g,i=Jt(r.createVertexArray(),"Failed to create vertex array");r.bindVertexArray(i);const o=Jt(r.createBuffer(),"Failed to create buffer");r.bindBuffer(r.ARRAY_BUFFER,o),r.enableVertexAttribArray(e.O),r.vertexAttribPointer(e.O,2,r.FLOAT,!1,0,0),r.bufferData(r.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,1,1,-1]),r.STATIC_DRAW);const a=Jt(r.createBuffer(),"Failed to create buffer");return r.bindBuffer(r.ARRAY_BUFFER,a),r.enableVertexAttribArray(e.I),r.vertexAttribPointer(e.I,2,r.FLOAT,!1,0,0),r.bufferData(r.ARRAY_BUFFER,new Float32Array(t?[0,1,0,0,1,0,1,1]:[0,0,0,1,1,1,1,0]),r.STATIC_DRAW),r.bindBuffer(r.ARRAY_BUFFER,null),r.bindVertexArray(null),new s5(r,i,o,a)}function qp(e,t){if(e.g){if(t!==e.g)throw Error("Cannot change GL context once initialized")}else e.g=t}function Ha(e,t,r,i){return qp(e,t),e.h||(e.m(),e.C()),r?(e.s||(e.s=Ry(e,!0)),r=e.s):(e.v||(e.v=Ry(e,!1)),r=e.v),t.useProgram(e.h),r.bind(),e.l(),e=i(),r.g.bindVertexArray(null),e}function Cs(e,t,r){return qp(e,t),e=Jt(t.createTexture(),"Failed to create texture"),t.bindTexture(t.TEXTURE_2D,e),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,r??t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,r??t.LINEAR),t.bindTexture(t.TEXTURE_2D,null),e}function Ac(e,t,r){qp(e,t),e.A||(e.A=Jt(t.createFramebuffer(),"Failed to create framebuffe.")),t.bindFramebuffer(t.FRAMEBUFFER,e.A),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,r,0)}function Jp(e){var t;(t=e.g)==null||t.bindFramebuffer(e.g.FRAMEBUFFER,null)}var ko=class{G(){return`
  precision mediump float;
  varying vec2 vTex;
  uniform sampler2D inputTexture;
  void main() {
    gl_FragColor = texture2D(inputTexture, vTex);
  }
 `}m(){const e=this.g;if(this.h=Jt(e.createProgram(),"Failed to create WebGL program"),this.aa=Ty(this,`
  attribute vec2 aVertex;
  attribute vec2 aTex;
  varying vec2 vTex;
  void main(void) {
    gl_Position = vec4(aVertex, 0.0, 1.0);
    vTex = aTex;
  }`,e.VERTEX_SHADER),this.Z=Ty(this,this.G(),e.FRAGMENT_SHADER),e.linkProgram(this.h),!e.getProgramParameter(this.h,e.LINK_STATUS))throw Error(`Error during program linking: ${e.getProgramInfoLog(this.h)}`);this.O=e.getAttribLocation(this.h,"aVertex"),this.I=e.getAttribLocation(this.h,"aTex")}C(){}l(){}close(){if(this.h){const e=this.g;e.deleteProgram(this.h),e.deleteShader(this.aa),e.deleteShader(this.Z)}this.A&&this.g.deleteFramebuffer(this.A),this.v&&this.v.close(),this.s&&this.s.close()}},i5=class extends ko{G(){return`
  precision mediump float;
  uniform sampler2D backgroundTexture;
  uniform sampler2D maskTexture;
  uniform sampler2D colorMappingTexture;
  varying vec2 vTex;
  void main() {
    vec4 backgroundColor = texture2D(backgroundTexture, vTex);
    float category = texture2D(maskTexture, vTex).r;
    vec4 categoryColor = texture2D(colorMappingTexture, vec2(category, 0.0));
    gl_FragColor = mix(backgroundColor, categoryColor, categoryColor.a);
  }
 `}C(){const e=this.g;e.activeTexture(e.TEXTURE1),this.B=Cs(this,e,e.LINEAR),e.activeTexture(e.TEXTURE2),this.j=Cs(this,e,e.NEAREST)}m(){super.m();const e=this.g;this.K=Jt(e.getUniformLocation(this.h,"backgroundTexture"),"Uniform location"),this.T=Jt(e.getUniformLocation(this.h,"colorMappingTexture"),"Uniform location"),this.J=Jt(e.getUniformLocation(this.h,"maskTexture"),"Uniform location")}l(){super.l();const e=this.g;e.uniform1i(this.J,0),e.uniform1i(this.K,1),e.uniform1i(this.T,2)}close(){this.B&&this.g.deleteTexture(this.B),this.j&&this.g.deleteTexture(this.j),super.close()}},o5=class extends ko{G(){return`
  precision mediump float;
  uniform sampler2D maskTexture;
  uniform sampler2D defaultTexture;
  uniform sampler2D overlayTexture;
  varying vec2 vTex;
  void main() {
    float confidence = texture2D(maskTexture, vTex).r;
    vec4 defaultColor = texture2D(defaultTexture, vTex);
    vec4 overlayColor = texture2D(overlayTexture, vTex);
    // Apply the alpha from the overlay and merge in the default color
    overlayColor = mix(defaultColor, overlayColor, overlayColor.a);
    gl_FragColor = mix(defaultColor, overlayColor, confidence);
  }
 `}C(){const e=this.g;e.activeTexture(e.TEXTURE1),this.j=Cs(this,e),e.activeTexture(e.TEXTURE2),this.B=Cs(this,e)}m(){super.m();const e=this.g;this.J=Jt(e.getUniformLocation(this.h,"defaultTexture"),"Uniform location"),this.K=Jt(e.getUniformLocation(this.h,"overlayTexture"),"Uniform location"),this.H=Jt(e.getUniformLocation(this.h,"maskTexture"),"Uniform location")}l(){super.l();const e=this.g;e.uniform1i(this.H,0),e.uniform1i(this.J,1),e.uniform1i(this.K,2)}close(){this.j&&this.g.deleteTexture(this.j),this.B&&this.g.deleteTexture(this.B),super.close()}};function Bn(e,t){switch(t){case 0:return e.g.find((r=>r instanceof Uint8Array));case 1:return e.g.find((r=>r instanceof Float32Array));case 2:return e.g.find((r=>typeof WebGLTexture<"u"&&r instanceof WebGLTexture));default:throw Error(`Type is not supported: ${t}`)}}function jf(e){var t=Bn(e,1);if(!t){if(t=Bn(e,0))t=new Float32Array(t).map((i=>i/255));else{t=new Float32Array(e.width*e.height);const i=io(e);var r=Xp(e);if(Ac(r,i,S3(e)),"iPad Simulator;iPhone Simulator;iPod Simulator;iPad;iPhone;iPod".split(";").includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"document"in self&&"ontouchend"in self.document){r=new Float32Array(e.width*e.height*4),i.readPixels(0,0,e.width,e.height,i.RGBA,i.FLOAT,r);for(let o=0,a=0;o<t.length;++o,a+=4)t[o]=r[a]}else i.readPixels(0,0,e.width,e.height,i.RED,i.FLOAT,t)}e.g.push(t)}return t}function S3(e){let t=Bn(e,2);if(!t){const r=io(e);t=b3(e);const i=jf(e),o=k3(e);r.texImage2D(r.TEXTURE_2D,0,o,e.width,e.height,0,r.RED,r.FLOAT,i),Pf(e)}return t}function io(e){if(!e.canvas)throw Error("Conversion to different image formats require that a canvas is passed when initializing the image.");return e.h||(e.h=Jt(e.canvas.getContext("webgl2"),"You cannot use a canvas that is already bound to a different type of rendering context.")),e.h}function k3(e){if(e=io(e),!gu)if(e.getExtension("EXT_color_buffer_float")&&e.getExtension("OES_texture_float_linear")&&e.getExtension("EXT_float_blend"))gu=e.R32F;else{if(!e.getExtension("EXT_color_buffer_half_float"))throw Error("GPU does not fully support 4-channel float32 or float16 formats");gu=e.R16F}return gu}function Xp(e){return e.l||(e.l=new ko),e.l}function b3(e){const t=io(e);t.viewport(0,0,e.width,e.height),t.activeTexture(t.TEXTURE0);let r=Bn(e,2);return r||(r=Cs(Xp(e),t,e.m?t.LINEAR:t.NEAREST),e.g.push(r),e.j=!0),t.bindTexture(t.TEXTURE_2D,r),r}function Pf(e){e.h.bindTexture(e.h.TEXTURE_2D,null)}var gu,Et=class{constructor(e,t,r,i,o,a,u){this.g=e,this.m=t,this.j=r,this.canvas=i,this.l=o,this.width=a,this.height=u,this.j&&--Cy===0&&console.error("You seem to be creating MPMask instances without invoking .close(). This leaks resources.")}Fa(){return!!Bn(this,0)}ja(){return!!Bn(this,1)}P(){return!!Bn(this,2)}ia(){return(t=Bn(e=this,0))||(t=jf(e),t=new Uint8Array(t.map((r=>255*r))),e.g.push(t)),t;var e,t}ha(){return jf(this)}M(){return S3(this)}clone(){const e=[];for(const t of this.g){let r;if(t instanceof Uint8Array)r=new Uint8Array(t);else if(t instanceof Float32Array)r=new Float32Array(t);else{if(!(t instanceof WebGLTexture))throw Error(`Type is not supported: ${t}`);{const i=io(this),o=Xp(this);i.activeTexture(i.TEXTURE1),r=Cs(o,i,this.m?i.LINEAR:i.NEAREST),i.bindTexture(i.TEXTURE_2D,r);const a=k3(this);i.texImage2D(i.TEXTURE_2D,0,a,this.width,this.height,0,i.RED,i.FLOAT,null),i.bindTexture(i.TEXTURE_2D,null),Ac(o,i,r),Ha(o,i,!1,(()=>{b3(this),i.clearColor(0,0,0,0),i.clear(i.COLOR_BUFFER_BIT),i.drawArrays(i.TRIANGLE_FAN,0,4),Pf(this)})),Jp(o),Pf(this)}}e.push(r)}return new Et(e,this.m,this.P(),this.canvas,this.l,this.width,this.height)}close(){this.j&&io(this).deleteTexture(Bn(this,2)),Cy=-1}};Et.prototype.close=Et.prototype.close,Et.prototype.clone=Et.prototype.clone,Et.prototype.getAsWebGLTexture=Et.prototype.M,Et.prototype.getAsFloat32Array=Et.prototype.ha,Et.prototype.getAsUint8Array=Et.prototype.ia,Et.prototype.hasWebGLTexture=Et.prototype.P,Et.prototype.hasFloat32Array=Et.prototype.ja,Et.prototype.hasUint8Array=Et.prototype.Fa;var Cy=250;const a5={color:"white",lineWidth:4,radius:6};function Jd(e){return{...a5,fillColor:(e=e||{}).color,...e}}function Fn(e,t){return e instanceof Function?e(t):e}function Ay(e,t,r){return Math.max(Math.min(t,r),Math.min(Math.max(t,r),e))}function ga(e){if(!e.l)throw Error("CPU rendering requested but CanvasRenderingContext2D not provided.");return e.l}function La(e){if(!e.j)throw Error("GPU rendering requested but WebGL2RenderingContext not provided.");return e.j}function jy(e,t,r){if(t.P())r(t.M());else{const i=t.ja()?t.ha():t.ia();e.m=e.m??new ko;const o=La(e);r((e=new Et([i],t.m,!1,o.canvas,e.m,t.width,t.height)).M()),e.close()}}function Py(e,t,r,i){const o=(function(h){return h.g||(h.g=new i5),h.g})(e),a=La(e),u=Array.isArray(r)?new ImageData(new Uint8ClampedArray(r),1,1):r;Ha(o,a,!0,(()=>{(function(d,p,y,v){const _=d.g;if(_.activeTexture(_.TEXTURE0),_.bindTexture(_.TEXTURE_2D,p),_.activeTexture(_.TEXTURE1),_.bindTexture(_.TEXTURE_2D,d.B),_.texImage2D(_.TEXTURE_2D,0,_.RGBA,_.RGBA,_.UNSIGNED_BYTE,y),d.H&&(function(E,S){if(E!==S)return!1;E=E.entries(),S=S.entries();for(const[T,A]of E){E=T;const I=A;var k=S.next();if(k.done)return!1;const[R,D]=k.value;if(k=D,E!==R||I[0]!==k[0]||I[1]!==k[1]||I[2]!==k[2]||I[3]!==k[3])return!1}return!!S.next().done})(d.H,v))_.activeTexture(_.TEXTURE2),_.bindTexture(_.TEXTURE_2D,d.j);else{d.H=v;const E=Array(1024).fill(0);v.forEach(((S,k)=>{if(S.length!==4)throw Error(`Color at index ${k} is not a four-channel value.`);E[4*k]=S[0],E[4*k+1]=S[1],E[4*k+2]=S[2],E[4*k+3]=S[3]})),_.activeTexture(_.TEXTURE2),_.bindTexture(_.TEXTURE_2D,d.j),_.texImage2D(_.TEXTURE_2D,0,_.RGBA,256,1,0,_.RGBA,_.UNSIGNED_BYTE,new Uint8Array(E))}})(o,t,u,i),a.clearColor(0,0,0,0),a.clear(a.COLOR_BUFFER_BIT),a.drawArrays(a.TRIANGLE_FAN,0,4);const h=o.g;h.activeTexture(h.TEXTURE0),h.bindTexture(h.TEXTURE_2D,null),h.activeTexture(h.TEXTURE1),h.bindTexture(h.TEXTURE_2D,null),h.activeTexture(h.TEXTURE2),h.bindTexture(h.TEXTURE_2D,null)}))}function Oy(e,t,r,i){const o=La(e),a=(function(d){return d.h||(d.h=new o5),d.h})(e),u=Array.isArray(r)?new ImageData(new Uint8ClampedArray(r),1,1):r,h=Array.isArray(i)?new ImageData(new Uint8ClampedArray(i),1,1):i;Ha(a,o,!0,(()=>{var d=a.g;d.activeTexture(d.TEXTURE0),d.bindTexture(d.TEXTURE_2D,t),d.activeTexture(d.TEXTURE1),d.bindTexture(d.TEXTURE_2D,a.j),d.texImage2D(d.TEXTURE_2D,0,d.RGBA,d.RGBA,d.UNSIGNED_BYTE,u),d.activeTexture(d.TEXTURE2),d.bindTexture(d.TEXTURE_2D,a.B),d.texImage2D(d.TEXTURE_2D,0,d.RGBA,d.RGBA,d.UNSIGNED_BYTE,h),o.clearColor(0,0,0,0),o.clear(o.COLOR_BUFFER_BIT),o.drawArrays(o.TRIANGLE_FAN,0,4),o.bindTexture(o.TEXTURE_2D,null),(d=a.g).activeTexture(d.TEXTURE0),d.bindTexture(d.TEXTURE_2D,null),d.activeTexture(d.TEXTURE1),d.bindTexture(d.TEXTURE_2D,null),d.activeTexture(d.TEXTURE2),d.bindTexture(d.TEXTURE_2D,null)}))}var zt=class{constructor(e,t){e instanceof CanvasRenderingContext2D||e instanceof OffscreenCanvasRenderingContext2D?(this.l=e,this.j=t):this.j=e}ya(e,t){if(e){var r=ga(this);t=Jd(t),r.save();var i=r.canvas,o=0;for(const a of e)r.fillStyle=Fn(t.fillColor,{index:o,from:a}),r.strokeStyle=Fn(t.color,{index:o,from:a}),r.lineWidth=Fn(t.lineWidth,{index:o,from:a}),(e=new Path2D).arc(a.x*i.width,a.y*i.height,Fn(t.radius,{index:o,from:a}),0,2*Math.PI),r.fill(e),r.stroke(e),++o;r.restore()}}xa(e,t,r){if(e&&t){var i=ga(this);r=Jd(r),i.save();var o=i.canvas,a=0;for(const u of t){i.beginPath(),t=e[u.start];const h=e[u.end];t&&h&&(i.strokeStyle=Fn(r.color,{index:a,from:t,to:h}),i.lineWidth=Fn(r.lineWidth,{index:a,from:t,to:h}),i.moveTo(t.x*o.width,t.y*o.height),i.lineTo(h.x*o.width,h.y*o.height)),++a,i.stroke()}i.restore()}}ua(e,t){const r=ga(this);t=Jd(t),r.save(),r.beginPath(),r.lineWidth=Fn(t.lineWidth,{}),r.strokeStyle=Fn(t.color,{}),r.fillStyle=Fn(t.fillColor,{}),r.moveTo(e.originX,e.originY),r.lineTo(e.originX+e.width,e.originY),r.lineTo(e.originX+e.width,e.originY+e.height),r.lineTo(e.originX,e.originY+e.height),r.lineTo(e.originX,e.originY),r.stroke(),r.fill(),r.restore()}va(e,t,r=[0,0,0,255]){this.l?(function(i,o,a,u){const h=La(i);jy(i,o,(d=>{Py(i,d,a,u),(d=ga(i)).drawImage(h.canvas,0,0,d.canvas.width,d.canvas.height)}))})(this,e,r,t):Py(this,e.M(),r,t)}wa(e,t,r){this.l?(function(i,o,a,u){const h=La(i);jy(i,o,(d=>{Oy(i,d,a,u),(d=ga(i)).drawImage(h.canvas,0,0,d.canvas.width,d.canvas.height)}))})(this,e,t,r):Oy(this,e.M(),t,r)}close(){var e,t,r;(e=this.g)==null||e.close(),this.g=void 0,(t=this.h)==null||t.close(),this.h=void 0,(r=this.m)==null||r.close(),this.m=void 0}};function vn(e,t){switch(t){case 0:return e.g.find((r=>r instanceof ImageData));case 1:return e.g.find((r=>typeof ImageBitmap<"u"&&r instanceof ImageBitmap));case 2:return e.g.find((r=>typeof WebGLTexture<"u"&&r instanceof WebGLTexture));default:throw Error(`Type is not supported: ${t}`)}}function x3(e){var t=vn(e,0);if(!t){t=oo(e);const r=jc(e),i=new Uint8Array(e.width*e.height*4);Ac(r,t,ju(e)),t.readPixels(0,0,e.width,e.height,t.RGBA,t.UNSIGNED_BYTE,i),Jp(r),t=new ImageData(new Uint8ClampedArray(i.buffer),e.width,e.height),e.g.push(t)}return t}function ju(e){let t=vn(e,2);if(!t){const r=oo(e);t=Pu(e);const i=vn(e,1)||x3(e);r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,i),ka(e)}return t}function oo(e){if(!e.canvas)throw Error("Conversion to different image formats require that a canvas is passed when initializing the image.");return e.h||(e.h=Jt(e.canvas.getContext("webgl2"),"You cannot use a canvas that is already bound to a different type of rendering context.")),e.h}function jc(e){return e.l||(e.l=new ko),e.l}function Pu(e){const t=oo(e);t.viewport(0,0,e.width,e.height),t.activeTexture(t.TEXTURE0);let r=vn(e,2);return r||(r=Cs(jc(e),t),e.g.push(r),e.m=!0),t.bindTexture(t.TEXTURE_2D,r),r}function ka(e){e.h.bindTexture(e.h.TEXTURE_2D,null)}function Ny(e){const t=oo(e);return Ha(jc(e),t,!0,(()=>(function(r,i){const o=r.canvas;if(o.width===r.width&&o.height===r.height)return i();const a=o.width,u=o.height;return o.width=r.width,o.height=r.height,r=i(),o.width=a,o.height=u,r})(e,(()=>{if(t.bindFramebuffer(t.FRAMEBUFFER,null),t.clearColor(0,0,0,0),t.clear(t.COLOR_BUFFER_BIT),t.drawArrays(t.TRIANGLE_FAN,0,4),!(e.canvas instanceof OffscreenCanvas))throw Error("Conversion to ImageBitmap requires that the MediaPipe Tasks is initialized with an OffscreenCanvas");return e.canvas.transferToImageBitmap()}))))}zt.prototype.close=zt.prototype.close,zt.prototype.drawConfidenceMask=zt.prototype.wa,zt.prototype.drawCategoryMask=zt.prototype.va,zt.prototype.drawBoundingBox=zt.prototype.ua,zt.prototype.drawConnectors=zt.prototype.xa,zt.prototype.drawLandmarks=zt.prototype.ya,zt.lerp=function(e,t,r,i,o){return Ay(i*(1-(e-t)/(r-t))+o*(1-(r-e)/(r-t)),i,o)},zt.clamp=Ay;var Ct=class{constructor(e,t,r,i,o,a,u){this.g=e,this.j=t,this.m=r,this.canvas=i,this.l=o,this.width=a,this.height=u,(this.j||this.m)&&--Iy===0&&console.error("You seem to be creating MPImage instances without invoking .close(). This leaks resources.")}Ea(){return!!vn(this,0)}ka(){return!!vn(this,1)}P(){return!!vn(this,2)}Ca(){return x3(this)}Ba(){var e=vn(this,1);return e||(ju(this),Pu(this),e=Ny(this),ka(this),this.g.push(e),this.j=!0),e}M(){return ju(this)}clone(){const e=[];for(const t of this.g){let r;if(t instanceof ImageData)r=new ImageData(t.data,this.width,this.height);else if(t instanceof WebGLTexture){const i=oo(this),o=jc(this);i.activeTexture(i.TEXTURE1),r=Cs(o,i),i.bindTexture(i.TEXTURE_2D,r),i.texImage2D(i.TEXTURE_2D,0,i.RGBA,this.width,this.height,0,i.RGBA,i.UNSIGNED_BYTE,null),i.bindTexture(i.TEXTURE_2D,null),Ac(o,i,r),Ha(o,i,!1,(()=>{Pu(this),i.clearColor(0,0,0,0),i.clear(i.COLOR_BUFFER_BIT),i.drawArrays(i.TRIANGLE_FAN,0,4),ka(this)})),Jp(o),ka(this)}else{if(!(t instanceof ImageBitmap))throw Error(`Type is not supported: ${t}`);ju(this),Pu(this),r=Ny(this),ka(this)}e.push(r)}return new Ct(e,this.ka(),this.P(),this.canvas,this.l,this.width,this.height)}close(){this.j&&vn(this,1).close(),this.m&&oo(this).deleteTexture(vn(this,2)),Iy=-1}};Ct.prototype.close=Ct.prototype.close,Ct.prototype.clone=Ct.prototype.clone,Ct.prototype.getAsWebGLTexture=Ct.prototype.M,Ct.prototype.getAsImageBitmap=Ct.prototype.Ba,Ct.prototype.getAsImageData=Ct.prototype.Ca,Ct.prototype.hasWebGLTexture=Ct.prototype.P,Ct.prototype.hasImageBitmap=Ct.prototype.ka,Ct.prototype.hasImageData=Ct.prototype.Ea;var Iy=250;function an(...e){return e.map((([t,r])=>({start:t,end:r})))}const l5=(function(e){return class extends e{La(){this.i._registerModelResourcesGraphService()}}})((Ly=class{constructor(e,t){this.l=!0,this.i=e,this.g=null,this.h=0,this.m=typeof this.i._addIntToInputStream=="function",t!==void 0?this.i.canvas=t:_3()?this.i.canvas=new OffscreenCanvas(1,1):(console.warn("OffscreenCanvas not supported and GraphRunner constructor glCanvas parameter is undefined. Creating backup canvas."),this.i.canvas=document.createElement("canvas"))}async initializeGraph(e){const t=await(await fetch(e)).arrayBuffer();e=!(e.endsWith(".pbtxt")||e.endsWith(".textproto")),this.setGraph(new Uint8Array(t),e)}setGraphFromString(e){this.setGraph(new TextEncoder().encode(e),!1)}setGraph(e,t){const r=e.length,i=this.i._malloc(r);this.i.HEAPU8.set(e,i),t?this.i._changeBinaryGraph(r,i):this.i._changeTextGraph(r,i),this.i._free(i)}configureAudio(e,t,r,i,o){this.i._configureAudio||console.warn('Attempting to use configureAudio without support for input audio. Is build dep ":gl_graph_runner_audio" missing?'),le(this,i||"input_audio",(a=>{le(this,o=o||"audio_header",(u=>{this.i._configureAudio(a,u,e,t??0,r)}))}))}setAutoResizeCanvas(e){this.l=e}setAutoRenderToScreen(e){this.i._setAutoRenderToScreen(e)}setGpuBufferVerticalFlip(e){this.i.gpuOriginForWebTexturesIsBottomLeft=e}da(e){fn(this,"__graph_config__",(t=>{e(t)})),le(this,"__graph_config__",(t=>{this.i._getGraphConfig(t,void 0)})),delete this.i.simpleListeners.__graph_config__}attachErrorListener(e){this.i.errorListener=e}attachEmptyPacketListener(e,t){this.i.emptyPacketListeners=this.i.emptyPacketListeners||{},this.i.emptyPacketListeners[e]=t}addAudioToStream(e,t,r){this.addAudioToStreamWithShape(e,0,0,t,r)}addAudioToStreamWithShape(e,t,r,i,o){const a=4*e.length;this.h!==a&&(this.g&&this.i._free(this.g),this.g=this.i._malloc(a),this.h=a),this.i.HEAPF32.set(e,this.g/4),le(this,i,(u=>{this.i._addAudioToInputStream(this.g,t,r,u,o)}))}addGpuBufferToStream(e,t,r){le(this,t,(i=>{const[o,a]=ky(this,e,i);this.i._addBoundTextureToStream(i,o,a,r)}))}addBoolToStream(e,t,r){le(this,t,(i=>{this.i._addBoolToInputStream(e,i,r)}))}addDoubleToStream(e,t,r){le(this,t,(i=>{this.i._addDoubleToInputStream(e,i,r)}))}addFloatToStream(e,t,r){le(this,t,(i=>{this.i._addFloatToInputStream(e,i,r)}))}addIntToStream(e,t,r){le(this,t,(i=>{this.i._addIntToInputStream(e,i,r)}))}addUintToStream(e,t,r){le(this,t,(i=>{this.i._addUintToInputStream(e,i,r)}))}addStringToStream(e,t,r){le(this,t,(i=>{le(this,e,(o=>{this.i._addStringToInputStream(o,i,r)}))}))}addStringRecordToStream(e,t,r){le(this,t,(i=>{by(this,Object.keys(e),(o=>{by(this,Object.values(e),(a=>{this.i._addFlatHashMapToInputStream(o,a,Object.keys(e).length,i,r)}))}))}))}addProtoToStream(e,t,r,i){le(this,r,(o=>{le(this,t,(a=>{const u=this.i._malloc(e.length);this.i.HEAPU8.set(e,u),this.i._addProtoToInputStream(u,e.length,a,o,i),this.i._free(u)}))}))}addEmptyPacketToStream(e,t){le(this,e,(r=>{this.i._addEmptyPacketToInputStream(r,t)}))}addBoolVectorToStream(e,t,r){le(this,t,(i=>{const o=this.i._allocateBoolVector(e.length);if(!o)throw Error("Unable to allocate new bool vector on heap.");for(const a of e)this.i._addBoolVectorEntry(o,a);this.i._addBoolVectorToInputStream(o,i,r)}))}addDoubleVectorToStream(e,t,r){le(this,t,(i=>{const o=this.i._allocateDoubleVector(e.length);if(!o)throw Error("Unable to allocate new double vector on heap.");for(const a of e)this.i._addDoubleVectorEntry(o,a);this.i._addDoubleVectorToInputStream(o,i,r)}))}addFloatVectorToStream(e,t,r){le(this,t,(i=>{const o=this.i._allocateFloatVector(e.length);if(!o)throw Error("Unable to allocate new float vector on heap.");for(const a of e)this.i._addFloatVectorEntry(o,a);this.i._addFloatVectorToInputStream(o,i,r)}))}addIntVectorToStream(e,t,r){le(this,t,(i=>{const o=this.i._allocateIntVector(e.length);if(!o)throw Error("Unable to allocate new int vector on heap.");for(const a of e)this.i._addIntVectorEntry(o,a);this.i._addIntVectorToInputStream(o,i,r)}))}addUintVectorToStream(e,t,r){le(this,t,(i=>{const o=this.i._allocateUintVector(e.length);if(!o)throw Error("Unable to allocate new unsigned int vector on heap.");for(const a of e)this.i._addUintVectorEntry(o,a);this.i._addUintVectorToInputStream(o,i,r)}))}addStringVectorToStream(e,t,r){le(this,t,(i=>{const o=this.i._allocateStringVector(e.length);if(!o)throw Error("Unable to allocate new string vector on heap.");for(const a of e)le(this,a,(u=>{this.i._addStringVectorEntry(o,u)}));this.i._addStringVectorToInputStream(o,i,r)}))}addBoolToInputSidePacket(e,t){le(this,t,(r=>{this.i._addBoolToInputSidePacket(e,r)}))}addDoubleToInputSidePacket(e,t){le(this,t,(r=>{this.i._addDoubleToInputSidePacket(e,r)}))}addFloatToInputSidePacket(e,t){le(this,t,(r=>{this.i._addFloatToInputSidePacket(e,r)}))}addIntToInputSidePacket(e,t){le(this,t,(r=>{this.i._addIntToInputSidePacket(e,r)}))}addUintToInputSidePacket(e,t){le(this,t,(r=>{this.i._addUintToInputSidePacket(e,r)}))}addStringToInputSidePacket(e,t){le(this,t,(r=>{le(this,e,(i=>{this.i._addStringToInputSidePacket(i,r)}))}))}addProtoToInputSidePacket(e,t,r){le(this,r,(i=>{le(this,t,(o=>{const a=this.i._malloc(e.length);this.i.HEAPU8.set(e,a),this.i._addProtoToInputSidePacket(a,e.length,o,i),this.i._free(a)}))}))}addBoolVectorToInputSidePacket(e,t){le(this,t,(r=>{const i=this.i._allocateBoolVector(e.length);if(!i)throw Error("Unable to allocate new bool vector on heap.");for(const o of e)this.i._addBoolVectorEntry(i,o);this.i._addBoolVectorToInputSidePacket(i,r)}))}addDoubleVectorToInputSidePacket(e,t){le(this,t,(r=>{const i=this.i._allocateDoubleVector(e.length);if(!i)throw Error("Unable to allocate new double vector on heap.");for(const o of e)this.i._addDoubleVectorEntry(i,o);this.i._addDoubleVectorToInputSidePacket(i,r)}))}addFloatVectorToInputSidePacket(e,t){le(this,t,(r=>{const i=this.i._allocateFloatVector(e.length);if(!i)throw Error("Unable to allocate new float vector on heap.");for(const o of e)this.i._addFloatVectorEntry(i,o);this.i._addFloatVectorToInputSidePacket(i,r)}))}addIntVectorToInputSidePacket(e,t){le(this,t,(r=>{const i=this.i._allocateIntVector(e.length);if(!i)throw Error("Unable to allocate new int vector on heap.");for(const o of e)this.i._addIntVectorEntry(i,o);this.i._addIntVectorToInputSidePacket(i,r)}))}addUintVectorToInputSidePacket(e,t){le(this,t,(r=>{const i=this.i._allocateUintVector(e.length);if(!i)throw Error("Unable to allocate new unsigned int vector on heap.");for(const o of e)this.i._addUintVectorEntry(i,o);this.i._addUintVectorToInputSidePacket(i,r)}))}addStringVectorToInputSidePacket(e,t){le(this,t,(r=>{const i=this.i._allocateStringVector(e.length);if(!i)throw Error("Unable to allocate new string vector on heap.");for(const o of e)le(this,o,(a=>{this.i._addStringVectorEntry(i,a)}));this.i._addStringVectorToInputSidePacket(i,r)}))}attachBoolListener(e,t){fn(this,e,t),le(this,e,(r=>{this.i._attachBoolListener(r)}))}attachBoolVectorListener(e,t){ys(this,e,t),le(this,e,(r=>{this.i._attachBoolVectorListener(r)}))}attachIntListener(e,t){fn(this,e,t),le(this,e,(r=>{this.i._attachIntListener(r)}))}attachIntVectorListener(e,t){ys(this,e,t),le(this,e,(r=>{this.i._attachIntVectorListener(r)}))}attachUintListener(e,t){fn(this,e,t),le(this,e,(r=>{this.i._attachUintListener(r)}))}attachUintVectorListener(e,t){ys(this,e,t),le(this,e,(r=>{this.i._attachUintVectorListener(r)}))}attachDoubleListener(e,t){fn(this,e,t),le(this,e,(r=>{this.i._attachDoubleListener(r)}))}attachDoubleVectorListener(e,t){ys(this,e,t),le(this,e,(r=>{this.i._attachDoubleVectorListener(r)}))}attachFloatListener(e,t){fn(this,e,t),le(this,e,(r=>{this.i._attachFloatListener(r)}))}attachFloatVectorListener(e,t){ys(this,e,t),le(this,e,(r=>{this.i._attachFloatVectorListener(r)}))}attachStringListener(e,t){fn(this,e,t),le(this,e,(r=>{this.i._attachStringListener(r)}))}attachStringVectorListener(e,t){ys(this,e,t),le(this,e,(r=>{this.i._attachStringVectorListener(r)}))}attachProtoListener(e,t,r){fn(this,e,t),le(this,e,(i=>{this.i._attachProtoListener(i,r||!1)}))}attachProtoVectorListener(e,t,r){ys(this,e,t),le(this,e,(i=>{this.i._attachProtoVectorListener(i,r||!1)}))}attachAudioListener(e,t,r){this.i._attachAudioListener||console.warn('Attempting to use attachAudioListener without support for output audio. Is build dep ":gl_graph_runner_audio_out" missing?'),fn(this,e,((i,o)=>{i=new Float32Array(i.buffer,i.byteOffset,i.length/4),t(i,o)})),le(this,e,(i=>{this.i._attachAudioListener(i,r||!1)}))}finishProcessing(){this.i._waitUntilIdle()}closeGraph(){this.i._closeGraph(),this.i.simpleListeners=void 0,this.i.emptyPacketListeners=void 0}},class extends Ly{get ea(){return this.i}qa(e,t,r){le(this,t,(i=>{const[o,a]=ky(this,e,i);this.ea._addBoundTextureAsImageToStream(i,o,a,r)}))}U(e,t){fn(this,e,t),le(this,e,(r=>{this.ea._attachImageListener(r)}))}ca(e,t){ys(this,e,t),le(this,e,(r=>{this.ea._attachImageVectorListener(r)}))}}));var Ly,Wr=class extends l5{};async function Se(e,t,r){return(async function(i,o,a,u){return n5(i,o,a,u)})(e,r.canvas??(_3()?void 0:document.createElement("canvas")),t,r)}function T3(e,t,r,i){if(e.T){const a=new Jw;if(r!=null&&r.regionOfInterest){if(!e.pa)throw Error("This task doesn't support region-of-interest.");var o=r.regionOfInterest;if(o.left>=o.right||o.top>=o.bottom)throw Error("Expected RectF with left < right and top < bottom.");if(o.left<0||o.top<0||o.right>1||o.bottom>1)throw Error("Expected RectF values to be in [0,1].");ae(a,1,(o.left+o.right)/2),ae(a,2,(o.top+o.bottom)/2),ae(a,4,o.right-o.left),ae(a,3,o.bottom-o.top)}else ae(a,1,.5),ae(a,2,.5),ae(a,4,1),ae(a,3,1);if(r!=null&&r.rotationDegrees){if((r==null?void 0:r.rotationDegrees)%90!=0)throw Error("Expected rotation to be a multiple of 90.");if(ae(a,5,-Math.PI*r.rotationDegrees/180),(r==null?void 0:r.rotationDegrees)%180!=0){const[u,h]=E3(t);r=ut(a,3)*h/u,o=ut(a,4)*u/h,ae(a,4,r),ae(a,3,o)}}e.g.addProtoToStream(a.g(),"mediapipe.NormalizedRect",e.T,i)}e.g.qa(t,e.aa,i??performance.now()),e.finishProcessing()}function Kr(e,t,r){var i;if((i=e.baseOptions)!=null&&i.g())throw Error("Task is not initialized with image mode. 'runningMode' must be set to 'IMAGE'.");T3(e,t,r,e.B+1)}function bn(e,t,r,i){var o;if(!((o=e.baseOptions)!=null&&o.g()))throw Error("Task is not initialized with video mode. 'runningMode' must be set to 'VIDEO'.");T3(e,t,r,i)}function ao(e,t,r,i){var o=t.data;const a=t.width,u=a*(t=t.height);if((o instanceof Uint8Array||o instanceof Float32Array)&&o.length!==u)throw Error("Unsupported channel count: "+o.length/u);return e=new Et([o],r,!1,e.g.i.canvas,e.O,a,t),i?e.clone():e}var hr=class extends Au{constructor(e,t,r,i){super(e),this.g=e,this.aa=t,this.T=r,this.pa=i,this.O=new ko}l(e,t=!0){if("runningMode"in e&&Na(this.baseOptions,2,!!e.runningMode&&e.runningMode!=="IMAGE"),e.canvas!==void 0&&this.g.i.canvas!==e.canvas)throw Error("You must create a new task to reset the canvas.");return super.l(e,t)}close(){this.O.close(),super.close()}};hr.prototype.close=hr.prototype.close;var Ir=class extends hr{constructor(e,t){super(new Wr(e,t),"image_in","norm_rect_in",!1),this.j={detections:[]},de(e=this.h=new xc,0,1,t=new Ye),ae(this.h,2,.5),ae(this.h,3,.3)}get baseOptions(){return Te(this.h,Ye,1)}set baseOptions(e){de(this.h,0,1,e)}o(e){return"minDetectionConfidence"in e&&ae(this.h,2,e.minDetectionConfidence??.5),"minSuppressionThreshold"in e&&ae(this.h,3,e.minSuppressionThreshold??.3),this.l(e)}D(e,t){return this.j={detections:[]},Kr(this,e,t),this.j}F(e,t,r){return this.j={detections:[]},bn(this,e,r,t),this.j}m(){var e=new dr;We(e,"image_in"),We(e,"norm_rect_in"),Ce(e,"detections");const t=new kr;nn(t,Vx,this.h);const r=new Xt;xr(r,"mediapipe.tasks.vision.face_detector.FaceDetectorGraph"),Be(r,"IMAGE:image_in"),Be(r,"NORM_RECT:norm_rect_in"),ke(r,"DETECTIONS:detections"),r.o(t),Tr(e,r),this.g.attachProtoVectorListener("detections",((i,o)=>{for(const a of i)i=Hw(a),this.j.detections.push(v3(i));Z(this,o)})),this.g.attachEmptyPacketListener("detections",(i=>{Z(this,i)})),e=e.g(),this.setGraph(new Uint8Array(e),!0)}};Ir.prototype.detectForVideo=Ir.prototype.F,Ir.prototype.detect=Ir.prototype.D,Ir.prototype.setOptions=Ir.prototype.o,Ir.createFromModelPath=async function(e,t){return Se(Ir,e,{baseOptions:{modelAssetPath:t}})},Ir.createFromModelBuffer=function(e,t){return Se(Ir,e,{baseOptions:{modelAssetBuffer:t}})},Ir.createFromOptions=function(e,t){return Se(Ir,e,t)};var Yp=an([61,146],[146,91],[91,181],[181,84],[84,17],[17,314],[314,405],[405,321],[321,375],[375,291],[61,185],[185,40],[40,39],[39,37],[37,0],[0,267],[267,269],[269,270],[270,409],[409,291],[78,95],[95,88],[88,178],[178,87],[87,14],[14,317],[317,402],[402,318],[318,324],[324,308],[78,191],[191,80],[80,81],[81,82],[82,13],[13,312],[312,311],[311,310],[310,415],[415,308]),Qp=an([263,249],[249,390],[390,373],[373,374],[374,380],[380,381],[381,382],[382,362],[263,466],[466,388],[388,387],[387,386],[386,385],[385,384],[384,398],[398,362]),Zp=an([276,283],[283,282],[282,295],[295,285],[300,293],[293,334],[334,296],[296,336]),R3=an([474,475],[475,476],[476,477],[477,474]),em=an([33,7],[7,163],[163,144],[144,145],[145,153],[153,154],[154,155],[155,133],[33,246],[246,161],[161,160],[160,159],[159,158],[158,157],[157,173],[173,133]),tm=an([46,53],[53,52],[52,65],[65,55],[70,63],[63,105],[105,66],[66,107]),C3=an([469,470],[470,471],[471,472],[472,469]),rm=an([10,338],[338,297],[297,332],[332,284],[284,251],[251,389],[389,356],[356,454],[454,323],[323,361],[361,288],[288,397],[397,365],[365,379],[379,378],[378,400],[400,377],[377,152],[152,148],[148,176],[176,149],[149,150],[150,136],[136,172],[172,58],[58,132],[132,93],[93,234],[234,127],[127,162],[162,21],[21,54],[54,103],[103,67],[67,109],[109,10]),A3=[...Yp,...Qp,...Zp,...em,...tm,...rm],j3=an([127,34],[34,139],[139,127],[11,0],[0,37],[37,11],[232,231],[231,120],[120,232],[72,37],[37,39],[39,72],[128,121],[121,47],[47,128],[232,121],[121,128],[128,232],[104,69],[69,67],[67,104],[175,171],[171,148],[148,175],[118,50],[50,101],[101,118],[73,39],[39,40],[40,73],[9,151],[151,108],[108,9],[48,115],[115,131],[131,48],[194,204],[204,211],[211,194],[74,40],[40,185],[185,74],[80,42],[42,183],[183,80],[40,92],[92,186],[186,40],[230,229],[229,118],[118,230],[202,212],[212,214],[214,202],[83,18],[18,17],[17,83],[76,61],[61,146],[146,76],[160,29],[29,30],[30,160],[56,157],[157,173],[173,56],[106,204],[204,194],[194,106],[135,214],[214,192],[192,135],[203,165],[165,98],[98,203],[21,71],[71,68],[68,21],[51,45],[45,4],[4,51],[144,24],[24,23],[23,144],[77,146],[146,91],[91,77],[205,50],[50,187],[187,205],[201,200],[200,18],[18,201],[91,106],[106,182],[182,91],[90,91],[91,181],[181,90],[85,84],[84,17],[17,85],[206,203],[203,36],[36,206],[148,171],[171,140],[140,148],[92,40],[40,39],[39,92],[193,189],[189,244],[244,193],[159,158],[158,28],[28,159],[247,246],[246,161],[161,247],[236,3],[3,196],[196,236],[54,68],[68,104],[104,54],[193,168],[168,8],[8,193],[117,228],[228,31],[31,117],[189,193],[193,55],[55,189],[98,97],[97,99],[99,98],[126,47],[47,100],[100,126],[166,79],[79,218],[218,166],[155,154],[154,26],[26,155],[209,49],[49,131],[131,209],[135,136],[136,150],[150,135],[47,126],[126,217],[217,47],[223,52],[52,53],[53,223],[45,51],[51,134],[134,45],[211,170],[170,140],[140,211],[67,69],[69,108],[108,67],[43,106],[106,91],[91,43],[230,119],[119,120],[120,230],[226,130],[130,247],[247,226],[63,53],[53,52],[52,63],[238,20],[20,242],[242,238],[46,70],[70,156],[156,46],[78,62],[62,96],[96,78],[46,53],[53,63],[63,46],[143,34],[34,227],[227,143],[123,117],[117,111],[111,123],[44,125],[125,19],[19,44],[236,134],[134,51],[51,236],[216,206],[206,205],[205,216],[154,153],[153,22],[22,154],[39,37],[37,167],[167,39],[200,201],[201,208],[208,200],[36,142],[142,100],[100,36],[57,212],[212,202],[202,57],[20,60],[60,99],[99,20],[28,158],[158,157],[157,28],[35,226],[226,113],[113,35],[160,159],[159,27],[27,160],[204,202],[202,210],[210,204],[113,225],[225,46],[46,113],[43,202],[202,204],[204,43],[62,76],[76,77],[77,62],[137,123],[123,116],[116,137],[41,38],[38,72],[72,41],[203,129],[129,142],[142,203],[64,98],[98,240],[240,64],[49,102],[102,64],[64,49],[41,73],[73,74],[74,41],[212,216],[216,207],[207,212],[42,74],[74,184],[184,42],[169,170],[170,211],[211,169],[170,149],[149,176],[176,170],[105,66],[66,69],[69,105],[122,6],[6,168],[168,122],[123,147],[147,187],[187,123],[96,77],[77,90],[90,96],[65,55],[55,107],[107,65],[89,90],[90,180],[180,89],[101,100],[100,120],[120,101],[63,105],[105,104],[104,63],[93,137],[137,227],[227,93],[15,86],[86,85],[85,15],[129,102],[102,49],[49,129],[14,87],[87,86],[86,14],[55,8],[8,9],[9,55],[100,47],[47,121],[121,100],[145,23],[23,22],[22,145],[88,89],[89,179],[179,88],[6,122],[122,196],[196,6],[88,95],[95,96],[96,88],[138,172],[172,136],[136,138],[215,58],[58,172],[172,215],[115,48],[48,219],[219,115],[42,80],[80,81],[81,42],[195,3],[3,51],[51,195],[43,146],[146,61],[61,43],[171,175],[175,199],[199,171],[81,82],[82,38],[38,81],[53,46],[46,225],[225,53],[144,163],[163,110],[110,144],[52,65],[65,66],[66,52],[229,228],[228,117],[117,229],[34,127],[127,234],[234,34],[107,108],[108,69],[69,107],[109,108],[108,151],[151,109],[48,64],[64,235],[235,48],[62,78],[78,191],[191,62],[129,209],[209,126],[126,129],[111,35],[35,143],[143,111],[117,123],[123,50],[50,117],[222,65],[65,52],[52,222],[19,125],[125,141],[141,19],[221,55],[55,65],[65,221],[3,195],[195,197],[197,3],[25,7],[7,33],[33,25],[220,237],[237,44],[44,220],[70,71],[71,139],[139,70],[122,193],[193,245],[245,122],[247,130],[130,33],[33,247],[71,21],[21,162],[162,71],[170,169],[169,150],[150,170],[188,174],[174,196],[196,188],[216,186],[186,92],[92,216],[2,97],[97,167],[167,2],[141,125],[125,241],[241,141],[164,167],[167,37],[37,164],[72,38],[38,12],[12,72],[38,82],[82,13],[13,38],[63,68],[68,71],[71,63],[226,35],[35,111],[111,226],[101,50],[50,205],[205,101],[206,92],[92,165],[165,206],[209,198],[198,217],[217,209],[165,167],[167,97],[97,165],[220,115],[115,218],[218,220],[133,112],[112,243],[243,133],[239,238],[238,241],[241,239],[214,135],[135,169],[169,214],[190,173],[173,133],[133,190],[171,208],[208,32],[32,171],[125,44],[44,237],[237,125],[86,87],[87,178],[178,86],[85,86],[86,179],[179,85],[84,85],[85,180],[180,84],[83,84],[84,181],[181,83],[201,83],[83,182],[182,201],[137,93],[93,132],[132,137],[76,62],[62,183],[183,76],[61,76],[76,184],[184,61],[57,61],[61,185],[185,57],[212,57],[57,186],[186,212],[214,207],[207,187],[187,214],[34,143],[143,156],[156,34],[79,239],[239,237],[237,79],[123,137],[137,177],[177,123],[44,1],[1,4],[4,44],[201,194],[194,32],[32,201],[64,102],[102,129],[129,64],[213,215],[215,138],[138,213],[59,166],[166,219],[219,59],[242,99],[99,97],[97,242],[2,94],[94,141],[141,2],[75,59],[59,235],[235,75],[24,110],[110,228],[228,24],[25,130],[130,226],[226,25],[23,24],[24,229],[229,23],[22,23],[23,230],[230,22],[26,22],[22,231],[231,26],[112,26],[26,232],[232,112],[189,190],[190,243],[243,189],[221,56],[56,190],[190,221],[28,56],[56,221],[221,28],[27,28],[28,222],[222,27],[29,27],[27,223],[223,29],[30,29],[29,224],[224,30],[247,30],[30,225],[225,247],[238,79],[79,20],[20,238],[166,59],[59,75],[75,166],[60,75],[75,240],[240,60],[147,177],[177,215],[215,147],[20,79],[79,166],[166,20],[187,147],[147,213],[213,187],[112,233],[233,244],[244,112],[233,128],[128,245],[245,233],[128,114],[114,188],[188,128],[114,217],[217,174],[174,114],[131,115],[115,220],[220,131],[217,198],[198,236],[236,217],[198,131],[131,134],[134,198],[177,132],[132,58],[58,177],[143,35],[35,124],[124,143],[110,163],[163,7],[7,110],[228,110],[110,25],[25,228],[356,389],[389,368],[368,356],[11,302],[302,267],[267,11],[452,350],[350,349],[349,452],[302,303],[303,269],[269,302],[357,343],[343,277],[277,357],[452,453],[453,357],[357,452],[333,332],[332,297],[297,333],[175,152],[152,377],[377,175],[347,348],[348,330],[330,347],[303,304],[304,270],[270,303],[9,336],[336,337],[337,9],[278,279],[279,360],[360,278],[418,262],[262,431],[431,418],[304,408],[408,409],[409,304],[310,415],[415,407],[407,310],[270,409],[409,410],[410,270],[450,348],[348,347],[347,450],[422,430],[430,434],[434,422],[313,314],[314,17],[17,313],[306,307],[307,375],[375,306],[387,388],[388,260],[260,387],[286,414],[414,398],[398,286],[335,406],[406,418],[418,335],[364,367],[367,416],[416,364],[423,358],[358,327],[327,423],[251,284],[284,298],[298,251],[281,5],[5,4],[4,281],[373,374],[374,253],[253,373],[307,320],[320,321],[321,307],[425,427],[427,411],[411,425],[421,313],[313,18],[18,421],[321,405],[405,406],[406,321],[320,404],[404,405],[405,320],[315,16],[16,17],[17,315],[426,425],[425,266],[266,426],[377,400],[400,369],[369,377],[322,391],[391,269],[269,322],[417,465],[465,464],[464,417],[386,257],[257,258],[258,386],[466,260],[260,388],[388,466],[456,399],[399,419],[419,456],[284,332],[332,333],[333,284],[417,285],[285,8],[8,417],[346,340],[340,261],[261,346],[413,441],[441,285],[285,413],[327,460],[460,328],[328,327],[355,371],[371,329],[329,355],[392,439],[439,438],[438,392],[382,341],[341,256],[256,382],[429,420],[420,360],[360,429],[364,394],[394,379],[379,364],[277,343],[343,437],[437,277],[443,444],[444,283],[283,443],[275,440],[440,363],[363,275],[431,262],[262,369],[369,431],[297,338],[338,337],[337,297],[273,375],[375,321],[321,273],[450,451],[451,349],[349,450],[446,342],[342,467],[467,446],[293,334],[334,282],[282,293],[458,461],[461,462],[462,458],[276,353],[353,383],[383,276],[308,324],[324,325],[325,308],[276,300],[300,293],[293,276],[372,345],[345,447],[447,372],[352,345],[345,340],[340,352],[274,1],[1,19],[19,274],[456,248],[248,281],[281,456],[436,427],[427,425],[425,436],[381,256],[256,252],[252,381],[269,391],[391,393],[393,269],[200,199],[199,428],[428,200],[266,330],[330,329],[329,266],[287,273],[273,422],[422,287],[250,462],[462,328],[328,250],[258,286],[286,384],[384,258],[265,353],[353,342],[342,265],[387,259],[259,257],[257,387],[424,431],[431,430],[430,424],[342,353],[353,276],[276,342],[273,335],[335,424],[424,273],[292,325],[325,307],[307,292],[366,447],[447,345],[345,366],[271,303],[303,302],[302,271],[423,266],[266,371],[371,423],[294,455],[455,460],[460,294],[279,278],[278,294],[294,279],[271,272],[272,304],[304,271],[432,434],[434,427],[427,432],[272,407],[407,408],[408,272],[394,430],[430,431],[431,394],[395,369],[369,400],[400,395],[334,333],[333,299],[299,334],[351,417],[417,168],[168,351],[352,280],[280,411],[411,352],[325,319],[319,320],[320,325],[295,296],[296,336],[336,295],[319,403],[403,404],[404,319],[330,348],[348,349],[349,330],[293,298],[298,333],[333,293],[323,454],[454,447],[447,323],[15,16],[16,315],[315,15],[358,429],[429,279],[279,358],[14,15],[15,316],[316,14],[285,336],[336,9],[9,285],[329,349],[349,350],[350,329],[374,380],[380,252],[252,374],[318,402],[402,403],[403,318],[6,197],[197,419],[419,6],[318,319],[319,325],[325,318],[367,364],[364,365],[365,367],[435,367],[367,397],[397,435],[344,438],[438,439],[439,344],[272,271],[271,311],[311,272],[195,5],[5,281],[281,195],[273,287],[287,291],[291,273],[396,428],[428,199],[199,396],[311,271],[271,268],[268,311],[283,444],[444,445],[445,283],[373,254],[254,339],[339,373],[282,334],[334,296],[296,282],[449,347],[347,346],[346,449],[264,447],[447,454],[454,264],[336,296],[296,299],[299,336],[338,10],[10,151],[151,338],[278,439],[439,455],[455,278],[292,407],[407,415],[415,292],[358,371],[371,355],[355,358],[340,345],[345,372],[372,340],[346,347],[347,280],[280,346],[442,443],[443,282],[282,442],[19,94],[94,370],[370,19],[441,442],[442,295],[295,441],[248,419],[419,197],[197,248],[263,255],[255,359],[359,263],[440,275],[275,274],[274,440],[300,383],[383,368],[368,300],[351,412],[412,465],[465,351],[263,467],[467,466],[466,263],[301,368],[368,389],[389,301],[395,378],[378,379],[379,395],[412,351],[351,419],[419,412],[436,426],[426,322],[322,436],[2,164],[164,393],[393,2],[370,462],[462,461],[461,370],[164,0],[0,267],[267,164],[302,11],[11,12],[12,302],[268,12],[12,13],[13,268],[293,300],[300,301],[301,293],[446,261],[261,340],[340,446],[330,266],[266,425],[425,330],[426,423],[423,391],[391,426],[429,355],[355,437],[437,429],[391,327],[327,326],[326,391],[440,457],[457,438],[438,440],[341,382],[382,362],[362,341],[459,457],[457,461],[461,459],[434,430],[430,394],[394,434],[414,463],[463,362],[362,414],[396,369],[369,262],[262,396],[354,461],[461,457],[457,354],[316,403],[403,402],[402,316],[315,404],[404,403],[403,315],[314,405],[405,404],[404,314],[313,406],[406,405],[405,313],[421,418],[418,406],[406,421],[366,401],[401,361],[361,366],[306,408],[408,407],[407,306],[291,409],[409,408],[408,291],[287,410],[410,409],[409,287],[432,436],[436,410],[410,432],[434,416],[416,411],[411,434],[264,368],[368,383],[383,264],[309,438],[438,457],[457,309],[352,376],[376,401],[401,352],[274,275],[275,4],[4,274],[421,428],[428,262],[262,421],[294,327],[327,358],[358,294],[433,416],[416,367],[367,433],[289,455],[455,439],[439,289],[462,370],[370,326],[326,462],[2,326],[326,370],[370,2],[305,460],[460,455],[455,305],[254,449],[449,448],[448,254],[255,261],[261,446],[446,255],[253,450],[450,449],[449,253],[252,451],[451,450],[450,252],[256,452],[452,451],[451,256],[341,453],[453,452],[452,341],[413,464],[464,463],[463,413],[441,413],[413,414],[414,441],[258,442],[442,441],[441,258],[257,443],[443,442],[442,257],[259,444],[444,443],[443,259],[260,445],[445,444],[444,260],[467,342],[342,445],[445,467],[459,458],[458,250],[250,459],[289,392],[392,290],[290,289],[290,328],[328,460],[460,290],[376,433],[433,435],[435,376],[250,290],[290,392],[392,250],[411,416],[416,433],[433,411],[341,463],[463,464],[464,341],[453,464],[464,465],[465,453],[357,465],[465,412],[412,357],[343,412],[412,399],[399,343],[360,363],[363,440],[440,360],[437,399],[399,456],[456,437],[420,456],[456,363],[363,420],[401,435],[435,288],[288,401],[372,383],[383,353],[353,372],[339,255],[255,249],[249,339],[448,261],[261,255],[255,448],[133,243],[243,190],[190,133],[133,155],[155,112],[112,133],[33,246],[246,247],[247,33],[33,130],[130,25],[25,33],[398,384],[384,286],[286,398],[362,398],[398,414],[414,362],[362,463],[463,341],[341,362],[263,359],[359,467],[467,263],[263,249],[249,255],[255,263],[466,467],[467,260],[260,466],[75,60],[60,166],[166,75],[238,239],[239,79],[79,238],[162,127],[127,139],[139,162],[72,11],[11,37],[37,72],[121,232],[232,120],[120,121],[73,72],[72,39],[39,73],[114,128],[128,47],[47,114],[233,232],[232,128],[128,233],[103,104],[104,67],[67,103],[152,175],[175,148],[148,152],[119,118],[118,101],[101,119],[74,73],[73,40],[40,74],[107,9],[9,108],[108,107],[49,48],[48,131],[131,49],[32,194],[194,211],[211,32],[184,74],[74,185],[185,184],[191,80],[80,183],[183,191],[185,40],[40,186],[186,185],[119,230],[230,118],[118,119],[210,202],[202,214],[214,210],[84,83],[83,17],[17,84],[77,76],[76,146],[146,77],[161,160],[160,30],[30,161],[190,56],[56,173],[173,190],[182,106],[106,194],[194,182],[138,135],[135,192],[192,138],[129,203],[203,98],[98,129],[54,21],[21,68],[68,54],[5,51],[51,4],[4,5],[145,144],[144,23],[23,145],[90,77],[77,91],[91,90],[207,205],[205,187],[187,207],[83,201],[201,18],[18,83],[181,91],[91,182],[182,181],[180,90],[90,181],[181,180],[16,85],[85,17],[17,16],[205,206],[206,36],[36,205],[176,148],[148,140],[140,176],[165,92],[92,39],[39,165],[245,193],[193,244],[244,245],[27,159],[159,28],[28,27],[30,247],[247,161],[161,30],[174,236],[236,196],[196,174],[103,54],[54,104],[104,103],[55,193],[193,8],[8,55],[111,117],[117,31],[31,111],[221,189],[189,55],[55,221],[240,98],[98,99],[99,240],[142,126],[126,100],[100,142],[219,166],[166,218],[218,219],[112,155],[155,26],[26,112],[198,209],[209,131],[131,198],[169,135],[135,150],[150,169],[114,47],[47,217],[217,114],[224,223],[223,53],[53,224],[220,45],[45,134],[134,220],[32,211],[211,140],[140,32],[109,67],[67,108],[108,109],[146,43],[43,91],[91,146],[231,230],[230,120],[120,231],[113,226],[226,247],[247,113],[105,63],[63,52],[52,105],[241,238],[238,242],[242,241],[124,46],[46,156],[156,124],[95,78],[78,96],[96,95],[70,46],[46,63],[63,70],[116,143],[143,227],[227,116],[116,123],[123,111],[111,116],[1,44],[44,19],[19,1],[3,236],[236,51],[51,3],[207,216],[216,205],[205,207],[26,154],[154,22],[22,26],[165,39],[39,167],[167,165],[199,200],[200,208],[208,199],[101,36],[36,100],[100,101],[43,57],[57,202],[202,43],[242,20],[20,99],[99,242],[56,28],[28,157],[157,56],[124,35],[35,113],[113,124],[29,160],[160,27],[27,29],[211,204],[204,210],[210,211],[124,113],[113,46],[46,124],[106,43],[43,204],[204,106],[96,62],[62,77],[77,96],[227,137],[137,116],[116,227],[73,41],[41,72],[72,73],[36,203],[203,142],[142,36],[235,64],[64,240],[240,235],[48,49],[49,64],[64,48],[42,41],[41,74],[74,42],[214,212],[212,207],[207,214],[183,42],[42,184],[184,183],[210,169],[169,211],[211,210],[140,170],[170,176],[176,140],[104,105],[105,69],[69,104],[193,122],[122,168],[168,193],[50,123],[123,187],[187,50],[89,96],[96,90],[90,89],[66,65],[65,107],[107,66],[179,89],[89,180],[180,179],[119,101],[101,120],[120,119],[68,63],[63,104],[104,68],[234,93],[93,227],[227,234],[16,15],[15,85],[85,16],[209,129],[129,49],[49,209],[15,14],[14,86],[86,15],[107,55],[55,9],[9,107],[120,100],[100,121],[121,120],[153,145],[145,22],[22,153],[178,88],[88,179],[179,178],[197,6],[6,196],[196,197],[89,88],[88,96],[96,89],[135,138],[138,136],[136,135],[138,215],[215,172],[172,138],[218,115],[115,219],[219,218],[41,42],[42,81],[81,41],[5,195],[195,51],[51,5],[57,43],[43,61],[61,57],[208,171],[171,199],[199,208],[41,81],[81,38],[38,41],[224,53],[53,225],[225,224],[24,144],[144,110],[110,24],[105,52],[52,66],[66,105],[118,229],[229,117],[117,118],[227,34],[34,234],[234,227],[66,107],[107,69],[69,66],[10,109],[109,151],[151,10],[219,48],[48,235],[235,219],[183,62],[62,191],[191,183],[142,129],[129,126],[126,142],[116,111],[111,143],[143,116],[118,117],[117,50],[50,118],[223,222],[222,52],[52,223],[94,19],[19,141],[141,94],[222,221],[221,65],[65,222],[196,3],[3,197],[197,196],[45,220],[220,44],[44,45],[156,70],[70,139],[139,156],[188,122],[122,245],[245,188],[139,71],[71,162],[162,139],[149,170],[170,150],[150,149],[122,188],[188,196],[196,122],[206,216],[216,92],[92,206],[164,2],[2,167],[167,164],[242,141],[141,241],[241,242],[0,164],[164,37],[37,0],[11,72],[72,12],[12,11],[12,38],[38,13],[13,12],[70,63],[63,71],[71,70],[31,226],[226,111],[111,31],[36,101],[101,205],[205,36],[203,206],[206,165],[165,203],[126,209],[209,217],[217,126],[98,165],[165,97],[97,98],[237,220],[220,218],[218,237],[237,239],[239,241],[241,237],[210,214],[214,169],[169,210],[140,171],[171,32],[32,140],[241,125],[125,237],[237,241],[179,86],[86,178],[178,179],[180,85],[85,179],[179,180],[181,84],[84,180],[180,181],[182,83],[83,181],[181,182],[194,201],[201,182],[182,194],[177,137],[137,132],[132,177],[184,76],[76,183],[183,184],[185,61],[61,184],[184,185],[186,57],[57,185],[185,186],[216,212],[212,186],[186,216],[192,214],[214,187],[187,192],[139,34],[34,156],[156,139],[218,79],[79,237],[237,218],[147,123],[123,177],[177,147],[45,44],[44,4],[4,45],[208,201],[201,32],[32,208],[98,64],[64,129],[129,98],[192,213],[213,138],[138,192],[235,59],[59,219],[219,235],[141,242],[242,97],[97,141],[97,2],[2,141],[141,97],[240,75],[75,235],[235,240],[229,24],[24,228],[228,229],[31,25],[25,226],[226,31],[230,23],[23,229],[229,230],[231,22],[22,230],[230,231],[232,26],[26,231],[231,232],[233,112],[112,232],[232,233],[244,189],[189,243],[243,244],[189,221],[221,190],[190,189],[222,28],[28,221],[221,222],[223,27],[27,222],[222,223],[224,29],[29,223],[223,224],[225,30],[30,224],[224,225],[113,247],[247,225],[225,113],[99,60],[60,240],[240,99],[213,147],[147,215],[215,213],[60,20],[20,166],[166,60],[192,187],[187,213],[213,192],[243,112],[112,244],[244,243],[244,233],[233,245],[245,244],[245,128],[128,188],[188,245],[188,114],[114,174],[174,188],[134,131],[131,220],[220,134],[174,217],[217,236],[236,174],[236,198],[198,134],[134,236],[215,177],[177,58],[58,215],[156,143],[143,124],[124,156],[25,110],[110,7],[7,25],[31,228],[228,25],[25,31],[264,356],[356,368],[368,264],[0,11],[11,267],[267,0],[451,452],[452,349],[349,451],[267,302],[302,269],[269,267],[350,357],[357,277],[277,350],[350,452],[452,357],[357,350],[299,333],[333,297],[297,299],[396,175],[175,377],[377,396],[280,347],[347,330],[330,280],[269,303],[303,270],[270,269],[151,9],[9,337],[337,151],[344,278],[278,360],[360,344],[424,418],[418,431],[431,424],[270,304],[304,409],[409,270],[272,310],[310,407],[407,272],[322,270],[270,410],[410,322],[449,450],[450,347],[347,449],[432,422],[422,434],[434,432],[18,313],[313,17],[17,18],[291,306],[306,375],[375,291],[259,387],[387,260],[260,259],[424,335],[335,418],[418,424],[434,364],[364,416],[416,434],[391,423],[423,327],[327,391],[301,251],[251,298],[298,301],[275,281],[281,4],[4,275],[254,373],[373,253],[253,254],[375,307],[307,321],[321,375],[280,425],[425,411],[411,280],[200,421],[421,18],[18,200],[335,321],[321,406],[406,335],[321,320],[320,405],[405,321],[314,315],[315,17],[17,314],[423,426],[426,266],[266,423],[396,377],[377,369],[369,396],[270,322],[322,269],[269,270],[413,417],[417,464],[464,413],[385,386],[386,258],[258,385],[248,456],[456,419],[419,248],[298,284],[284,333],[333,298],[168,417],[417,8],[8,168],[448,346],[346,261],[261,448],[417,413],[413,285],[285,417],[326,327],[327,328],[328,326],[277,355],[355,329],[329,277],[309,392],[392,438],[438,309],[381,382],[382,256],[256,381],[279,429],[429,360],[360,279],[365,364],[364,379],[379,365],[355,277],[277,437],[437,355],[282,443],[443,283],[283,282],[281,275],[275,363],[363,281],[395,431],[431,369],[369,395],[299,297],[297,337],[337,299],[335,273],[273,321],[321,335],[348,450],[450,349],[349,348],[359,446],[446,467],[467,359],[283,293],[293,282],[282,283],[250,458],[458,462],[462,250],[300,276],[276,383],[383,300],[292,308],[308,325],[325,292],[283,276],[276,293],[293,283],[264,372],[372,447],[447,264],[346,352],[352,340],[340,346],[354,274],[274,19],[19,354],[363,456],[456,281],[281,363],[426,436],[436,425],[425,426],[380,381],[381,252],[252,380],[267,269],[269,393],[393,267],[421,200],[200,428],[428,421],[371,266],[266,329],[329,371],[432,287],[287,422],[422,432],[290,250],[250,328],[328,290],[385,258],[258,384],[384,385],[446,265],[265,342],[342,446],[386,387],[387,257],[257,386],[422,424],[424,430],[430,422],[445,342],[342,276],[276,445],[422,273],[273,424],[424,422],[306,292],[292,307],[307,306],[352,366],[366,345],[345,352],[268,271],[271,302],[302,268],[358,423],[423,371],[371,358],[327,294],[294,460],[460,327],[331,279],[279,294],[294,331],[303,271],[271,304],[304,303],[436,432],[432,427],[427,436],[304,272],[272,408],[408,304],[395,394],[394,431],[431,395],[378,395],[395,400],[400,378],[296,334],[334,299],[299,296],[6,351],[351,168],[168,6],[376,352],[352,411],[411,376],[307,325],[325,320],[320,307],[285,295],[295,336],[336,285],[320,319],[319,404],[404,320],[329,330],[330,349],[349,329],[334,293],[293,333],[333,334],[366,323],[323,447],[447,366],[316,15],[15,315],[315,316],[331,358],[358,279],[279,331],[317,14],[14,316],[316,317],[8,285],[285,9],[9,8],[277,329],[329,350],[350,277],[253,374],[374,252],[252,253],[319,318],[318,403],[403,319],[351,6],[6,419],[419,351],[324,318],[318,325],[325,324],[397,367],[367,365],[365,397],[288,435],[435,397],[397,288],[278,344],[344,439],[439,278],[310,272],[272,311],[311,310],[248,195],[195,281],[281,248],[375,273],[273,291],[291,375],[175,396],[396,199],[199,175],[312,311],[311,268],[268,312],[276,283],[283,445],[445,276],[390,373],[373,339],[339,390],[295,282],[282,296],[296,295],[448,449],[449,346],[346,448],[356,264],[264,454],[454,356],[337,336],[336,299],[299,337],[337,338],[338,151],[151,337],[294,278],[278,455],[455,294],[308,292],[292,415],[415,308],[429,358],[358,355],[355,429],[265,340],[340,372],[372,265],[352,346],[346,280],[280,352],[295,442],[442,282],[282,295],[354,19],[19,370],[370,354],[285,441],[441,295],[295,285],[195,248],[248,197],[197,195],[457,440],[440,274],[274,457],[301,300],[300,368],[368,301],[417,351],[351,465],[465,417],[251,301],[301,389],[389,251],[394,395],[395,379],[379,394],[399,412],[412,419],[419,399],[410,436],[436,322],[322,410],[326,2],[2,393],[393,326],[354,370],[370,461],[461,354],[393,164],[164,267],[267,393],[268,302],[302,12],[12,268],[312,268],[268,13],[13,312],[298,293],[293,301],[301,298],[265,446],[446,340],[340,265],[280,330],[330,425],[425,280],[322,426],[426,391],[391,322],[420,429],[429,437],[437,420],[393,391],[391,326],[326,393],[344,440],[440,438],[438,344],[458,459],[459,461],[461,458],[364,434],[434,394],[394,364],[428,396],[396,262],[262,428],[274,354],[354,457],[457,274],[317,316],[316,402],[402,317],[316,315],[315,403],[403,316],[315,314],[314,404],[404,315],[314,313],[313,405],[405,314],[313,421],[421,406],[406,313],[323,366],[366,361],[361,323],[292,306],[306,407],[407,292],[306,291],[291,408],[408,306],[291,287],[287,409],[409,291],[287,432],[432,410],[410,287],[427,434],[434,411],[411,427],[372,264],[264,383],[383,372],[459,309],[309,457],[457,459],[366,352],[352,401],[401,366],[1,274],[274,4],[4,1],[418,421],[421,262],[262,418],[331,294],[294,358],[358,331],[435,433],[433,367],[367,435],[392,289],[289,439],[439,392],[328,462],[462,326],[326,328],[94,2],[2,370],[370,94],[289,305],[305,455],[455,289],[339,254],[254,448],[448,339],[359,255],[255,446],[446,359],[254,253],[253,449],[449,254],[253,252],[252,450],[450,253],[252,256],[256,451],[451,252],[256,341],[341,452],[452,256],[414,413],[413,463],[463,414],[286,441],[441,414],[414,286],[286,258],[258,441],[441,286],[258,257],[257,442],[442,258],[257,259],[259,443],[443,257],[259,260],[260,444],[444,259],[260,467],[467,445],[445,260],[309,459],[459,250],[250,309],[305,289],[289,290],[290,305],[305,290],[290,460],[460,305],[401,376],[376,435],[435,401],[309,250],[250,392],[392,309],[376,411],[411,433],[433,376],[453,341],[341,464],[464,453],[357,453],[453,465],[465,357],[343,357],[357,412],[412,343],[437,343],[343,399],[399,437],[344,360],[360,440],[440,344],[420,437],[437,456],[456,420],[360,420],[420,363],[363,360],[361,401],[401,288],[288,361],[265,372],[372,353],[353,265],[390,339],[339,249],[249,390],[339,448],[448,255],[255,339]);function Dy(e){e.j={faceLandmarks:[],faceBlendshapes:[],facialTransformationMatrixes:[]}}var nt=class extends hr{constructor(e,t){super(new Wr(e,t),"image_in","norm_rect",!1),this.j={faceLandmarks:[],faceBlendshapes:[],facialTransformationMatrixes:[]},this.outputFacialTransformationMatrixes=this.outputFaceBlendshapes=!1,de(e=this.h=new e3,0,1,t=new Ye),this.v=new Zw,de(this.h,0,3,this.v),this.s=new xc,de(this.h,0,2,this.s),_n(this.s,4,1),ae(this.s,2,.5),ae(this.v,2,.5),ae(this.h,4,.5)}get baseOptions(){return Te(this.h,Ye,1)}set baseOptions(e){de(this.h,0,1,e)}o(e){return"numFaces"in e&&_n(this.s,4,e.numFaces??1),"minFaceDetectionConfidence"in e&&ae(this.s,2,e.minFaceDetectionConfidence??.5),"minTrackingConfidence"in e&&ae(this.h,4,e.minTrackingConfidence??.5),"minFacePresenceConfidence"in e&&ae(this.v,2,e.minFacePresenceConfidence??.5),"outputFaceBlendshapes"in e&&(this.outputFaceBlendshapes=!!e.outputFaceBlendshapes),"outputFacialTransformationMatrixes"in e&&(this.outputFacialTransformationMatrixes=!!e.outputFacialTransformationMatrixes),this.l(e)}D(e,t){return Dy(this),Kr(this,e,t),this.j}F(e,t,r){return Dy(this),bn(this,e,r,t),this.j}m(){var e=new dr;We(e,"image_in"),We(e,"norm_rect"),Ce(e,"face_landmarks");const t=new kr;nn(t,Kx,this.h);const r=new Xt;xr(r,"mediapipe.tasks.vision.face_landmarker.FaceLandmarkerGraph"),Be(r,"IMAGE:image_in"),Be(r,"NORM_RECT:norm_rect"),ke(r,"NORM_LANDMARKS:face_landmarks"),r.o(t),Tr(e,r),this.g.attachProtoVectorListener("face_landmarks",((i,o)=>{for(const a of i)i=Ka(a),this.j.faceLandmarks.push(Tc(i));Z(this,o)})),this.g.attachEmptyPacketListener("face_landmarks",(i=>{Z(this,i)})),this.outputFaceBlendshapes&&(Ce(e,"blendshapes"),ke(r,"BLENDSHAPES:blendshapes"),this.g.attachProtoVectorListener("blendshapes",((i,o)=>{if(this.outputFaceBlendshapes)for(const a of i)i=bc(a),this.j.faceBlendshapes.push(Gp(i.g()??[]));Z(this,o)})),this.g.attachEmptyPacketListener("blendshapes",(i=>{Z(this,i)}))),this.outputFacialTransformationMatrixes&&(Ce(e,"face_geometry"),ke(r,"FACE_GEOMETRY:face_geometry"),this.g.attachProtoVectorListener("face_geometry",((i,o)=>{if(this.outputFacialTransformationMatrixes)for(const a of i)(i=Te(Wx(a),Lx,2))&&this.j.facialTransformationMatrixes.push({rows:Fr(i,1)??0??0,columns:Fr(i,2)??0??0,data:ri(i,3,js,ti()).slice()??[]});Z(this,o)})),this.g.attachEmptyPacketListener("face_geometry",(i=>{Z(this,i)}))),e=e.g(),this.setGraph(new Uint8Array(e),!0)}};nt.prototype.detectForVideo=nt.prototype.F,nt.prototype.detect=nt.prototype.D,nt.prototype.setOptions=nt.prototype.o,nt.createFromModelPath=function(e,t){return Se(nt,e,{baseOptions:{modelAssetPath:t}})},nt.createFromModelBuffer=function(e,t){return Se(nt,e,{baseOptions:{modelAssetBuffer:t}})},nt.createFromOptions=function(e,t){return Se(nt,e,t)},nt.FACE_LANDMARKS_LIPS=Yp,nt.FACE_LANDMARKS_LEFT_EYE=Qp,nt.FACE_LANDMARKS_LEFT_EYEBROW=Zp,nt.FACE_LANDMARKS_LEFT_IRIS=R3,nt.FACE_LANDMARKS_RIGHT_EYE=em,nt.FACE_LANDMARKS_RIGHT_EYEBROW=tm,nt.FACE_LANDMARKS_RIGHT_IRIS=C3,nt.FACE_LANDMARKS_FACE_OVAL=rm,nt.FACE_LANDMARKS_CONTOURS=A3,nt.FACE_LANDMARKS_TESSELATION=j3;var pn=class extends hr{constructor(e,t){super(new Wr(e,t),"image_in","norm_rect",!0),de(e=this.j=new r3,0,1,t=new Ye)}get baseOptions(){return Te(this.j,Ye,1)}set baseOptions(e){de(this.j,0,1,e)}o(e){return super.l(e)}Oa(e,t,r){const i=typeof t!="function"?t:{};if(this.h=typeof t=="function"?t:r,Kr(this,e,i??{}),!this.h)return this.s}m(){var e=new dr;We(e,"image_in"),We(e,"norm_rect"),Ce(e,"stylized_image");const t=new kr;nn(t,Hx,this.j);const r=new Xt;xr(r,"mediapipe.tasks.vision.face_stylizer.FaceStylizerGraph"),Be(r,"IMAGE:image_in"),Be(r,"NORM_RECT:norm_rect"),ke(r,"STYLIZED_IMAGE:stylized_image"),r.o(t),Tr(e,r),this.g.U("stylized_image",((i,o)=>{var a=!this.h,u=i.data,h=i.width;const d=h*(i=i.height);if(u instanceof Uint8Array)if(u.length===3*d){const p=new Uint8ClampedArray(4*d);for(let y=0;y<d;++y)p[4*y]=u[3*y],p[4*y+1]=u[3*y+1],p[4*y+2]=u[3*y+2],p[4*y+3]=255;u=new ImageData(p,h,i)}else{if(u.length!==4*d)throw Error("Unsupported channel count: "+u.length/d);u=new ImageData(new Uint8ClampedArray(u.buffer,u.byteOffset,u.length),h,i)}else if(!(u instanceof WebGLTexture))throw Error(`Unsupported format: ${u.constructor.name}`);h=new Ct([u],!1,!1,this.g.i.canvas,this.O,h,i),this.s=a=a?h.clone():h,this.h&&this.h(a),Z(this,o)})),this.g.attachEmptyPacketListener("stylized_image",(i=>{this.s=null,this.h&&this.h(null),Z(this,i)})),e=e.g(),this.setGraph(new Uint8Array(e),!0)}};pn.prototype.stylize=pn.prototype.Oa,pn.prototype.setOptions=pn.prototype.o,pn.createFromModelPath=function(e,t){return Se(pn,e,{baseOptions:{modelAssetPath:t}})},pn.createFromModelBuffer=function(e,t){return Se(pn,e,{baseOptions:{modelAssetBuffer:t}})},pn.createFromOptions=function(e,t){return Se(pn,e,t)};var nm=an([0,1],[1,2],[2,3],[3,4],[0,5],[5,6],[6,7],[7,8],[5,9],[9,10],[10,11],[11,12],[9,13],[13,14],[14,15],[15,16],[13,17],[0,17],[17,18],[18,19],[19,20]);function Uy(e){e.gestures=[],e.landmarks=[],e.worldLandmarks=[],e.handedness=[]}function Fy(e){return e.gestures.length===0?{gestures:[],landmarks:[],worldLandmarks:[],handedness:[],handednesses:[]}:{gestures:e.gestures,landmarks:e.landmarks,worldLandmarks:e.worldLandmarks,handedness:e.handedness,handednesses:e.handedness}}function My(e,t=!0){const r=[];for(const o of e){var i=bc(o);e=[];for(const a of i.g())i=t&&Fr(a,1)!=null?Fr(a,1)??0:-1,e.push({score:ut(a,2)??0,index:i,categoryName:$r(a,3)??""??"",displayName:$r(a,4)??""??""});r.push(e)}return r}var yr=class extends hr{constructor(e,t){super(new Wr(e,t),"image_in","norm_rect",!1),this.gestures=[],this.landmarks=[],this.worldLandmarks=[],this.handedness=[],de(e=this.j=new i3,0,1,t=new Ye),this.s=new Vp,de(this.j,0,2,this.s),this.C=new zp,de(this.s,0,3,this.C),this.v=new s3,de(this.s,0,2,this.v),this.h=new Gx,de(this.j,0,3,this.h),ae(this.v,2,.5),ae(this.s,4,.5),ae(this.C,2,.5)}get baseOptions(){return Te(this.j,Ye,1)}set baseOptions(e){de(this.j,0,1,e)}o(e){var o,a,u,h;if(_n(this.v,3,e.numHands??1),"minHandDetectionConfidence"in e&&ae(this.v,2,e.minHandDetectionConfidence??.5),"minTrackingConfidence"in e&&ae(this.s,4,e.minTrackingConfidence??.5),"minHandPresenceConfidence"in e&&ae(this.C,2,e.minHandPresenceConfidence??.5),e.cannedGesturesClassifierOptions){var t=new Fi,r=t,i=Af(e.cannedGesturesClassifierOptions,(o=Te(this.h,Fi,3))==null?void 0:o.h());de(r,0,2,i),de(this.h,0,3,t)}else e.cannedGesturesClassifierOptions===void 0&&((a=Te(this.h,Fi,3))==null||a.g());return e.customGesturesClassifierOptions?(de(r=t=new Fi,0,2,i=Af(e.customGesturesClassifierOptions,(u=Te(this.h,Fi,4))==null?void 0:u.h())),de(this.h,0,4,t)):e.customGesturesClassifierOptions===void 0&&((h=Te(this.h,Fi,4))==null||h.g()),this.l(e)}Ja(e,t){return Uy(this),Kr(this,e,t),Fy(this)}Ka(e,t,r){return Uy(this),bn(this,e,r,t),Fy(this)}m(){var e=new dr;We(e,"image_in"),We(e,"norm_rect"),Ce(e,"hand_gestures"),Ce(e,"hand_landmarks"),Ce(e,"world_hand_landmarks"),Ce(e,"handedness");const t=new kr;nn(t,qx,this.j);const r=new Xt;xr(r,"mediapipe.tasks.vision.gesture_recognizer.GestureRecognizerGraph"),Be(r,"IMAGE:image_in"),Be(r,"NORM_RECT:norm_rect"),ke(r,"HAND_GESTURES:hand_gestures"),ke(r,"LANDMARKS:hand_landmarks"),ke(r,"WORLD_LANDMARKS:world_hand_landmarks"),ke(r,"HANDEDNESS:handedness"),r.o(t),Tr(e,r),this.g.attachProtoVectorListener("hand_landmarks",((i,o)=>{for(const a of i){i=Ka(a);const u=[];for(const h of Gn(i,qw,1))u.push({x:ut(h,1)??0,y:ut(h,2)??0,z:ut(h,3)??0,visibility:ut(h,4)??0});this.landmarks.push(u)}Z(this,o)})),this.g.attachEmptyPacketListener("hand_landmarks",(i=>{Z(this,i)})),this.g.attachProtoVectorListener("world_hand_landmarks",((i,o)=>{for(const a of i){i=Ji(a);const u=[];for(const h of Gn(i,Gw,1))u.push({x:ut(h,1)??0,y:ut(h,2)??0,z:ut(h,3)??0,visibility:ut(h,4)??0});this.worldLandmarks.push(u)}Z(this,o)})),this.g.attachEmptyPacketListener("world_hand_landmarks",(i=>{Z(this,i)})),this.g.attachProtoVectorListener("hand_gestures",((i,o)=>{this.gestures.push(...My(i,!1)),Z(this,o)})),this.g.attachEmptyPacketListener("hand_gestures",(i=>{Z(this,i)})),this.g.attachProtoVectorListener("handedness",((i,o)=>{this.handedness.push(...My(i)),Z(this,o)})),this.g.attachEmptyPacketListener("handedness",(i=>{Z(this,i)})),e=e.g(),this.setGraph(new Uint8Array(e),!0)}};function $y(e){return{landmarks:e.landmarks,worldLandmarks:e.worldLandmarks,handednesses:e.handedness,handedness:e.handedness}}yr.prototype.recognizeForVideo=yr.prototype.Ka,yr.prototype.recognize=yr.prototype.Ja,yr.prototype.setOptions=yr.prototype.o,yr.createFromModelPath=function(e,t){return Se(yr,e,{baseOptions:{modelAssetPath:t}})},yr.createFromModelBuffer=function(e,t){return Se(yr,e,{baseOptions:{modelAssetBuffer:t}})},yr.createFromOptions=function(e,t){return Se(yr,e,t)},yr.HAND_CONNECTIONS=nm;var vr=class extends hr{constructor(e,t){super(new Wr(e,t),"image_in","norm_rect",!1),this.landmarks=[],this.worldLandmarks=[],this.handedness=[],de(e=this.h=new Vp,0,1,t=new Ye),this.s=new zp,de(this.h,0,3,this.s),this.j=new s3,de(this.h,0,2,this.j),_n(this.j,3,1),ae(this.j,2,.5),ae(this.s,2,.5),ae(this.h,4,.5)}get baseOptions(){return Te(this.h,Ye,1)}set baseOptions(e){de(this.h,0,1,e)}o(e){return"numHands"in e&&_n(this.j,3,e.numHands??1),"minHandDetectionConfidence"in e&&ae(this.j,2,e.minHandDetectionConfidence??.5),"minTrackingConfidence"in e&&ae(this.h,4,e.minTrackingConfidence??.5),"minHandPresenceConfidence"in e&&ae(this.s,2,e.minHandPresenceConfidence??.5),this.l(e)}D(e,t){return this.landmarks=[],this.worldLandmarks=[],this.handedness=[],Kr(this,e,t),$y(this)}F(e,t,r){return this.landmarks=[],this.worldLandmarks=[],this.handedness=[],bn(this,e,r,t),$y(this)}m(){var e=new dr;We(e,"image_in"),We(e,"norm_rect"),Ce(e,"hand_landmarks"),Ce(e,"world_hand_landmarks"),Ce(e,"handedness");const t=new kr;nn(t,Jx,this.h);const r=new Xt;xr(r,"mediapipe.tasks.vision.hand_landmarker.HandLandmarkerGraph"),Be(r,"IMAGE:image_in"),Be(r,"NORM_RECT:norm_rect"),ke(r,"LANDMARKS:hand_landmarks"),ke(r,"WORLD_LANDMARKS:world_hand_landmarks"),ke(r,"HANDEDNESS:handedness"),r.o(t),Tr(e,r),this.g.attachProtoVectorListener("hand_landmarks",((i,o)=>{for(const a of i)i=Ka(a),this.landmarks.push(Tc(i));Z(this,o)})),this.g.attachEmptyPacketListener("hand_landmarks",(i=>{Z(this,i)})),this.g.attachProtoVectorListener("world_hand_landmarks",((i,o)=>{for(const a of i)i=Ji(a),this.worldLandmarks.push(Ta(i));Z(this,o)})),this.g.attachEmptyPacketListener("world_hand_landmarks",(i=>{Z(this,i)})),this.g.attachProtoVectorListener("handedness",((i,o)=>{var a=this.handedness,u=a.push;const h=[];for(const d of i){i=bc(d);const p=[];for(const y of i.g())p.push({score:ut(y,2)??0,index:Fr(y,1)??0??-1,categoryName:$r(y,3)??""??"",displayName:$r(y,4)??""??""});h.push(p)}u.call(a,...h),Z(this,o)})),this.g.attachEmptyPacketListener("handedness",(i=>{Z(this,i)})),e=e.g(),this.setGraph(new Uint8Array(e),!0)}};vr.prototype.detectForVideo=vr.prototype.F,vr.prototype.detect=vr.prototype.D,vr.prototype.setOptions=vr.prototype.o,vr.createFromModelPath=function(e,t){return Se(vr,e,{baseOptions:{modelAssetPath:t}})},vr.createFromModelBuffer=function(e,t){return Se(vr,e,{baseOptions:{modelAssetBuffer:t}})},vr.createFromOptions=function(e,t){return Se(vr,e,t)},vr.HAND_CONNECTIONS=nm;var P3=an([0,1],[1,2],[2,3],[3,7],[0,4],[4,5],[5,6],[6,8],[9,10],[11,12],[11,13],[13,15],[15,17],[15,19],[15,21],[17,19],[12,14],[14,16],[16,18],[16,20],[16,22],[18,20],[11,23],[12,24],[23,24],[23,25],[24,26],[25,27],[26,28],[27,29],[28,30],[29,31],[30,32],[27,31],[28,32]);function By(e){e.h={faceLandmarks:[],faceBlendshapes:[],poseLandmarks:[],poseWorldLandmarks:[],poseSegmentationMasks:[],leftHandLandmarks:[],leftHandWorldLandmarks:[],rightHandLandmarks:[],rightHandWorldLandmarks:[]}}function zy(e){try{if(!e.C)return e.h;e.C(e.h)}finally{Cc(e)}}function yu(e,t){e=Ka(e),t.push(Tc(e))}var Ge=class extends hr{constructor(e,t){super(new Wr(e,t),"input_frames_image",null,!1),this.h={faceLandmarks:[],faceBlendshapes:[],poseLandmarks:[],poseWorldLandmarks:[],poseSegmentationMasks:[],leftHandLandmarks:[],leftHandWorldLandmarks:[],rightHandLandmarks:[],rightHandWorldLandmarks:[]},this.outputPoseSegmentationMasks=this.outputFaceBlendshapes=!1,de(e=this.j=new c3,0,1,t=new Ye),this.J=new zp,de(this.j,0,2,this.J),this.Z=new Xx,de(this.j,0,3,this.Z),this.s=new xc,de(this.j,0,4,this.s),this.H=new Zw,de(this.j,0,5,this.H),this.v=new l3,de(this.j,0,6,this.v),this.K=new u3,de(this.j,0,7,this.K),ae(this.s,2,.5),ae(this.s,3,.3),ae(this.H,2,.5),ae(this.v,2,.5),ae(this.v,3,.3),ae(this.K,2,.5),ae(this.J,2,.5)}get baseOptions(){return Te(this.j,Ye,1)}set baseOptions(e){de(this.j,0,1,e)}o(e){return"minFaceDetectionConfidence"in e&&ae(this.s,2,e.minFaceDetectionConfidence??.5),"minFaceSuppressionThreshold"in e&&ae(this.s,3,e.minFaceSuppressionThreshold??.3),"minFacePresenceConfidence"in e&&ae(this.H,2,e.minFacePresenceConfidence??.5),"outputFaceBlendshapes"in e&&(this.outputFaceBlendshapes=!!e.outputFaceBlendshapes),"minPoseDetectionConfidence"in e&&ae(this.v,2,e.minPoseDetectionConfidence??.5),"minPoseSuppressionThreshold"in e&&ae(this.v,3,e.minPoseSuppressionThreshold??.3),"minPosePresenceConfidence"in e&&ae(this.K,2,e.minPosePresenceConfidence??.5),"outputPoseSegmentationMasks"in e&&(this.outputPoseSegmentationMasks=!!e.outputPoseSegmentationMasks),"minHandLandmarksConfidence"in e&&ae(this.J,2,e.minHandLandmarksConfidence??.5),this.l(e)}D(e,t,r){const i=typeof t!="function"?t:{};return this.C=typeof t=="function"?t:r,By(this),Kr(this,e,i),zy(this)}F(e,t,r,i){const o=typeof r!="function"?r:{};return this.C=typeof r=="function"?r:i,By(this),bn(this,e,o,t),zy(this)}m(){var e=new dr;We(e,"input_frames_image"),Ce(e,"pose_landmarks"),Ce(e,"pose_world_landmarks"),Ce(e,"face_landmarks"),Ce(e,"left_hand_landmarks"),Ce(e,"left_hand_world_landmarks"),Ce(e,"right_hand_landmarks"),Ce(e,"right_hand_world_landmarks");const t=new kr,r=new ay;kf(r,1,yo("type.googleapis.com/mediapipe.tasks.vision.holistic_landmarker.proto.HolisticLandmarkerGraphOptions"),""),(function(o,a){if(a!=null)if(Array.isArray(a))$e(o,2,sw(a));else{if(!(typeof a=="string"||a instanceof Wn||Ba(a)))throw Error("invalid value in Any.value field: "+a+" expected a ByteString, a base64 encoded string, a Uint8Array or a jspb array");kf(o,2,op(a,!1),ai())}})(r,this.j.g());const i=new Xt;xr(i,"mediapipe.tasks.vision.holistic_landmarker.HolisticLandmarkerGraph"),Gu(i,8,ay,r),Be(i,"IMAGE:input_frames_image"),ke(i,"POSE_LANDMARKS:pose_landmarks"),ke(i,"POSE_WORLD_LANDMARKS:pose_world_landmarks"),ke(i,"FACE_LANDMARKS:face_landmarks"),ke(i,"LEFT_HAND_LANDMARKS:left_hand_landmarks"),ke(i,"LEFT_HAND_WORLD_LANDMARKS:left_hand_world_landmarks"),ke(i,"RIGHT_HAND_LANDMARKS:right_hand_landmarks"),ke(i,"RIGHT_HAND_WORLD_LANDMARKS:right_hand_world_landmarks"),i.o(t),Tr(e,i),Rc(this,e),this.g.attachProtoListener("pose_landmarks",((o,a)=>{yu(o,this.h.poseLandmarks),Z(this,a)})),this.g.attachEmptyPacketListener("pose_landmarks",(o=>{Z(this,o)})),this.g.attachProtoListener("pose_world_landmarks",((o,a)=>{var u=this.h.poseWorldLandmarks;o=Ji(o),u.push(Ta(o)),Z(this,a)})),this.g.attachEmptyPacketListener("pose_world_landmarks",(o=>{Z(this,o)})),this.outputPoseSegmentationMasks&&(ke(i,"POSE_SEGMENTATION_MASK:pose_segmentation_mask"),so(this,"pose_segmentation_mask"),this.g.U("pose_segmentation_mask",((o,a)=>{this.h.poseSegmentationMasks=[ao(this,o,!0,!this.C)],Z(this,a)})),this.g.attachEmptyPacketListener("pose_segmentation_mask",(o=>{this.h.poseSegmentationMasks=[],Z(this,o)}))),this.g.attachProtoListener("face_landmarks",((o,a)=>{yu(o,this.h.faceLandmarks),Z(this,a)})),this.g.attachEmptyPacketListener("face_landmarks",(o=>{Z(this,o)})),this.outputFaceBlendshapes&&(Ce(e,"extra_blendshapes"),ke(i,"FACE_BLENDSHAPES:extra_blendshapes"),this.g.attachProtoListener("extra_blendshapes",((o,a)=>{var u=this.h.faceBlendshapes;this.outputFaceBlendshapes&&(o=bc(o),u.push(Gp(o.g()??[]))),Z(this,a)})),this.g.attachEmptyPacketListener("extra_blendshapes",(o=>{Z(this,o)}))),this.g.attachProtoListener("left_hand_landmarks",((o,a)=>{yu(o,this.h.leftHandLandmarks),Z(this,a)})),this.g.attachEmptyPacketListener("left_hand_landmarks",(o=>{Z(this,o)})),this.g.attachProtoListener("left_hand_world_landmarks",((o,a)=>{var u=this.h.leftHandWorldLandmarks;o=Ji(o),u.push(Ta(o)),Z(this,a)})),this.g.attachEmptyPacketListener("left_hand_world_landmarks",(o=>{Z(this,o)})),this.g.attachProtoListener("right_hand_landmarks",((o,a)=>{yu(o,this.h.rightHandLandmarks),Z(this,a)})),this.g.attachEmptyPacketListener("right_hand_landmarks",(o=>{Z(this,o)})),this.g.attachProtoListener("right_hand_world_landmarks",((o,a)=>{var u=this.h.rightHandWorldLandmarks;o=Ji(o),u.push(Ta(o)),Z(this,a)})),this.g.attachEmptyPacketListener("right_hand_world_landmarks",(o=>{Z(this,o)})),e=e.g(),this.setGraph(new Uint8Array(e),!0)}};Ge.prototype.detectForVideo=Ge.prototype.F,Ge.prototype.detect=Ge.prototype.D,Ge.prototype.setOptions=Ge.prototype.o,Ge.createFromModelPath=function(e,t){return Se(Ge,e,{baseOptions:{modelAssetPath:t}})},Ge.createFromModelBuffer=function(e,t){return Se(Ge,e,{baseOptions:{modelAssetBuffer:t}})},Ge.createFromOptions=function(e,t){return Se(Ge,e,t)},Ge.HAND_CONNECTIONS=nm,Ge.POSE_CONNECTIONS=P3,Ge.FACE_LANDMARKS_LIPS=Yp,Ge.FACE_LANDMARKS_LEFT_EYE=Qp,Ge.FACE_LANDMARKS_LEFT_EYEBROW=Zp,Ge.FACE_LANDMARKS_LEFT_IRIS=R3,Ge.FACE_LANDMARKS_RIGHT_EYE=em,Ge.FACE_LANDMARKS_RIGHT_EYEBROW=tm,Ge.FACE_LANDMARKS_RIGHT_IRIS=C3,Ge.FACE_LANDMARKS_FACE_OVAL=rm,Ge.FACE_LANDMARKS_CONTOURS=A3,Ge.FACE_LANDMARKS_TESSELATION=j3;var Lr=class extends hr{constructor(e,t){super(new Wr(e,t),"input_image","norm_rect",!0),this.j={classifications:[]},de(e=this.h=new h3,0,1,t=new Ye)}get baseOptions(){return Te(this.h,Ye,1)}set baseOptions(e){de(this.h,0,1,e)}o(e){return de(this.h,0,2,Af(e,Te(this.h,Mp,2))),this.l(e)}sa(e,t){return this.j={classifications:[]},Kr(this,e,t),this.j}ta(e,t,r){return this.j={classifications:[]},bn(this,e,r,t),this.j}m(){var e=new dr;We(e,"input_image"),We(e,"norm_rect"),Ce(e,"classifications");const t=new kr;nn(t,Yx,this.h);const r=new Xt;xr(r,"mediapipe.tasks.vision.image_classifier.ImageClassifierGraph"),Be(r,"IMAGE:input_image"),Be(r,"NORM_RECT:norm_rect"),ke(r,"CLASSIFICATIONS:classifications"),r.o(t),Tr(e,r),this.g.attachProtoListener("classifications",((i,o)=>{this.j=(function(a){const u={classifications:Gn(a,Ux,1).map((h=>{var d;return Gp(((d=Te(h,Ww,4))==null?void 0:d.g())??[],Fr(h,2)??0,$r(h,3)??"")}))};return Hu(ro(a,2))!=null&&(u.timestampMs=Hu(ro(a,2))??0),u})(Fx(i)),Z(this,o)})),this.g.attachEmptyPacketListener("classifications",(i=>{Z(this,i)})),e=e.g(),this.setGraph(new Uint8Array(e),!0)}};Lr.prototype.classifyForVideo=Lr.prototype.ta,Lr.prototype.classify=Lr.prototype.sa,Lr.prototype.setOptions=Lr.prototype.o,Lr.createFromModelPath=function(e,t){return Se(Lr,e,{baseOptions:{modelAssetPath:t}})},Lr.createFromModelBuffer=function(e,t){return Se(Lr,e,{baseOptions:{modelAssetBuffer:t}})},Lr.createFromOptions=function(e,t){return Se(Lr,e,t)};var wr=class extends hr{constructor(e,t){super(new Wr(e,t),"image_in","norm_rect",!0),this.h=new d3,this.embeddings={embeddings:[]},de(e=this.h,0,1,t=new Ye)}get baseOptions(){return Te(this.h,Ye,1)}set baseOptions(e){de(this.h,0,1,e)}o(e){var t=this.h,r=Te(this.h,gy,2);return r=r?r.clone():new gy,e.l2Normalize!==void 0?Na(r,1,e.l2Normalize):"l2Normalize"in e&&$e(r,1),e.quantize!==void 0?Na(r,2,e.quantize):"quantize"in e&&$e(r,2),de(t,0,2,r),this.l(e)}za(e,t){return Kr(this,e,t),this.embeddings}Aa(e,t,r){return bn(this,e,r,t),this.embeddings}m(){var e=new dr;We(e,"image_in"),We(e,"norm_rect"),Ce(e,"embeddings_out");const t=new kr;nn(t,Qx,this.h);const r=new Xt;xr(r,"mediapipe.tasks.vision.image_embedder.ImageEmbedderGraph"),Be(r,"IMAGE:image_in"),Be(r,"NORM_RECT:norm_rect"),ke(r,"EMBEDDINGS:embeddings_out"),r.o(t),Tr(e,r),this.g.attachProtoListener("embeddings_out",((i,o)=>{i=Bx(i),this.embeddings=(function(a){return{embeddings:Gn(a,$x,1).map((u=>{var d,p;const h={headIndex:Fr(u,3)??0??-1,headName:$r(u,4)??""??""};if(uw(u,my,Vd(u,1))!==void 0)u=ri(u=Te(u,my,Vd(u,1)),1,js,ti()),h.floatEmbedding=u.slice();else{const y=new Uint8Array(0);h.quantizedEmbedding=((p=(d=Te(u,Mx,Vd(u,2)))==null?void 0:d.oa())==null?void 0:p.h())??y}return h})),timestampMs:Hu(ro(a,2))??0}})(i),Z(this,o)})),this.g.attachEmptyPacketListener("embeddings_out",(i=>{Z(this,i)})),e=e.g(),this.setGraph(new Uint8Array(e),!0)}};wr.cosineSimilarity=function(e,t){if(e.floatEmbedding&&t.floatEmbedding)e=Ey(e.floatEmbedding,t.floatEmbedding);else{if(!e.quantizedEmbedding||!t.quantizedEmbedding)throw Error("Cannot compute cosine similarity between quantized and float embeddings.");e=Ey(_y(e.quantizedEmbedding),_y(t.quantizedEmbedding))}return e},wr.prototype.embedForVideo=wr.prototype.Aa,wr.prototype.embed=wr.prototype.za,wr.prototype.setOptions=wr.prototype.o,wr.createFromModelPath=function(e,t){return Se(wr,e,{baseOptions:{modelAssetPath:t}})},wr.createFromModelBuffer=function(e,t){return Se(wr,e,{baseOptions:{modelAssetBuffer:t}})},wr.createFromOptions=function(e,t){return Se(wr,e,t)};var Of=class{constructor(e,t,r){this.confidenceMasks=e,this.categoryMask=t,this.qualityScores=r}close(){var e,t;(e=this.confidenceMasks)==null||e.forEach((r=>{r.close()})),(t=this.categoryMask)==null||t.close()}};function Vy(e){e.categoryMask=void 0,e.confidenceMasks=void 0,e.qualityScores=void 0}function Wy(e){try{const t=new Of(e.confidenceMasks,e.categoryMask,e.qualityScores);if(!e.j)return t;e.j(t)}finally{Cc(e)}}Of.prototype.close=Of.prototype.close;var ar=class extends hr{constructor(e,t){super(new Wr(e,t),"image_in","norm_rect",!1),this.s=[],this.outputCategoryMask=!1,this.outputConfidenceMasks=!0,this.h=new Hp,this.v=new f3,de(this.h,0,3,this.v),de(e=this.h,0,1,t=new Ye)}get baseOptions(){return Te(this.h,Ye,1)}set baseOptions(e){de(this.h,0,1,e)}o(e){return e.displayNamesLocale!==void 0?$e(this.h,2,yo(e.displayNamesLocale)):"displayNamesLocale"in e&&$e(this.h,2),"outputCategoryMask"in e&&(this.outputCategoryMask=e.outputCategoryMask??!1),"outputConfidenceMasks"in e&&(this.outputConfidenceMasks=e.outputConfidenceMasks??!0),super.l(e)}I(){(function(e){var r,i;const t=Gn(e.da(),Xt,1).filter((o=>($r(o,1)??"").includes("mediapipe.tasks.TensorsToSegmentationCalculator")));if(e.s=[],t.length>1)throw Error("The graph has more than one mediapipe.tasks.TensorsToSegmentationCalculator.");t.length===1&&(((i=(r=Te(t[0],kr,7))==null?void 0:r.l())==null?void 0:i.g())??new Map).forEach(((o,a)=>{e.s[Number(a)]=$r(o,1)??""}))})(this)}segment(e,t,r){const i=typeof t!="function"?t:{};return this.j=typeof t=="function"?t:r,Vy(this),Kr(this,e,i),Wy(this)}Ma(e,t,r,i){const o=typeof r!="function"?r:{};return this.j=typeof r=="function"?r:i,Vy(this),bn(this,e,o,t),Wy(this)}Da(){return this.s}m(){var e=new dr;We(e,"image_in"),We(e,"norm_rect");const t=new kr;nn(t,m3,this.h);const r=new Xt;xr(r,"mediapipe.tasks.vision.image_segmenter.ImageSegmenterGraph"),Be(r,"IMAGE:image_in"),Be(r,"NORM_RECT:norm_rect"),r.o(t),Tr(e,r),Rc(this,e),this.outputConfidenceMasks&&(Ce(e,"confidence_masks"),ke(r,"CONFIDENCE_MASKS:confidence_masks"),so(this,"confidence_masks"),this.g.ca("confidence_masks",((i,o)=>{this.confidenceMasks=i.map((a=>ao(this,a,!0,!this.j))),Z(this,o)})),this.g.attachEmptyPacketListener("confidence_masks",(i=>{this.confidenceMasks=[],Z(this,i)}))),this.outputCategoryMask&&(Ce(e,"category_mask"),ke(r,"CATEGORY_MASK:category_mask"),so(this,"category_mask"),this.g.U("category_mask",((i,o)=>{this.categoryMask=ao(this,i,!1,!this.j),Z(this,o)})),this.g.attachEmptyPacketListener("category_mask",(i=>{this.categoryMask=void 0,Z(this,i)}))),Ce(e,"quality_scores"),ke(r,"QUALITY_SCORES:quality_scores"),this.g.attachFloatVectorListener("quality_scores",((i,o)=>{this.qualityScores=i,Z(this,o)})),this.g.attachEmptyPacketListener("quality_scores",(i=>{this.categoryMask=void 0,Z(this,i)})),e=e.g(),this.setGraph(new Uint8Array(e),!0)}};ar.prototype.getLabels=ar.prototype.Da,ar.prototype.segmentForVideo=ar.prototype.Ma,ar.prototype.segment=ar.prototype.segment,ar.prototype.setOptions=ar.prototype.o,ar.createFromModelPath=function(e,t){return Se(ar,e,{baseOptions:{modelAssetPath:t}})},ar.createFromModelBuffer=function(e,t){return Se(ar,e,{baseOptions:{modelAssetBuffer:t}})},ar.createFromOptions=function(e,t){return Se(ar,e,t)};var Nf=class{constructor(e,t,r){this.confidenceMasks=e,this.categoryMask=t,this.qualityScores=r}close(){var e,t;(e=this.confidenceMasks)==null||e.forEach((r=>{r.close()})),(t=this.categoryMask)==null||t.close()}};Nf.prototype.close=Nf.prototype.close;var u5=class extends se{constructor(e){super(e)}},Mi=[0,it,-2],Yu=[0,Mn,-3,Je,Mn,-1],Ky=[0,Yu],Hy=[0,Yu,it,-1],Xd=class extends se{constructor(e){super(e)}},Gy=[0,Mn,-1,Je],c5=class extends se{constructor(e){super(e)}},qy=class extends se{constructor(e){super(e)}},If=[1,2,3,4,5,6,7,8,9,10,14,15],O3=class extends se{constructor(e){super(e)}};O3.prototype.g=kc([0,St,[0,If,De,Yu,De,[0,Yu,Mi],De,Ky,De,[0,Ky,Mi],De,Gy,De,[0,Mn,-3,Je,Br],De,[0,Mn,-3,Je],De,[0,Oe,Mn,-2,Je,it,Je,-1,2,Mn,Mi],De,Hy,De,[0,Hy,Mi],Mn,Mi,Oe,De,[0,Mn,-3,Je,Mi,-1],De,[0,St,Gy]],Oe,[0,Oe,it,-1,Je]]);var mn=class extends hr{constructor(e,t){super(new Wr(e,t),"image_in","norm_rect_in",!1),this.outputCategoryMask=!1,this.outputConfidenceMasks=!0,this.h=new Hp,this.s=new f3,de(this.h,0,3,this.s),de(e=this.h,0,1,t=new Ye)}get baseOptions(){return Te(this.h,Ye,1)}set baseOptions(e){de(this.h,0,1,e)}o(e){return"outputCategoryMask"in e&&(this.outputCategoryMask=e.outputCategoryMask??!1),"outputConfidenceMasks"in e&&(this.outputConfidenceMasks=e.outputConfidenceMasks??!0),super.l(e)}segment(e,t,r,i){const o=typeof r!="function"?r:{};this.j=typeof r=="function"?r:i,this.qualityScores=this.categoryMask=this.confidenceMasks=void 0,r=this.B+1,i=new O3;const a=new qy;var u=new u5;if(_n(u,1,255),de(a,0,12,u),t.keypoint&&t.scribble)throw Error("Cannot provide both keypoint and scribble.");if(t.keypoint){var h=new Xd;Na(h,3,!0),ae(h,1,t.keypoint.x),ae(h,2,t.keypoint.y),ba(a,5,If,h)}else{if(!t.scribble)throw Error("Must provide either a keypoint or a scribble.");for(h of(u=new c5,t.scribble))Na(t=new Xd,3,!0),ae(t,1,h.x),ae(t,2,h.y),Gu(u,1,Xd,t);ba(a,15,If,u)}Gu(i,1,qy,a),this.g.addProtoToStream(i.g(),"drishti.RenderData","roi_in",r),Kr(this,e,o);e:{try{const p=new Nf(this.confidenceMasks,this.categoryMask,this.qualityScores);if(!this.j){var d=p;break e}this.j(p)}finally{Cc(this)}d=void 0}return d}m(){var e=new dr;We(e,"image_in"),We(e,"roi_in"),We(e,"norm_rect_in");const t=new kr;nn(t,m3,this.h);const r=new Xt;xr(r,"mediapipe.tasks.vision.interactive_segmenter.InteractiveSegmenterGraph"),Be(r,"IMAGE:image_in"),Be(r,"ROI:roi_in"),Be(r,"NORM_RECT:norm_rect_in"),r.o(t),Tr(e,r),Rc(this,e),this.outputConfidenceMasks&&(Ce(e,"confidence_masks"),ke(r,"CONFIDENCE_MASKS:confidence_masks"),so(this,"confidence_masks"),this.g.ca("confidence_masks",((i,o)=>{this.confidenceMasks=i.map((a=>ao(this,a,!0,!this.j))),Z(this,o)})),this.g.attachEmptyPacketListener("confidence_masks",(i=>{this.confidenceMasks=[],Z(this,i)}))),this.outputCategoryMask&&(Ce(e,"category_mask"),ke(r,"CATEGORY_MASK:category_mask"),so(this,"category_mask"),this.g.U("category_mask",((i,o)=>{this.categoryMask=ao(this,i,!1,!this.j),Z(this,o)})),this.g.attachEmptyPacketListener("category_mask",(i=>{this.categoryMask=void 0,Z(this,i)}))),Ce(e,"quality_scores"),ke(r,"QUALITY_SCORES:quality_scores"),this.g.attachFloatVectorListener("quality_scores",((i,o)=>{this.qualityScores=i,Z(this,o)})),this.g.attachEmptyPacketListener("quality_scores",(i=>{this.categoryMask=void 0,Z(this,i)})),e=e.g(),this.setGraph(new Uint8Array(e),!0)}};mn.prototype.segment=mn.prototype.segment,mn.prototype.setOptions=mn.prototype.o,mn.createFromModelPath=function(e,t){return Se(mn,e,{baseOptions:{modelAssetPath:t}})},mn.createFromModelBuffer=function(e,t){return Se(mn,e,{baseOptions:{modelAssetBuffer:t}})},mn.createFromOptions=function(e,t){return Se(mn,e,t)};var Dr=class extends hr{constructor(e,t){super(new Wr(e,t),"input_frame_gpu","norm_rect",!1),this.j={detections:[]},de(e=this.h=new g3,0,1,t=new Ye)}get baseOptions(){return Te(this.h,Ye,1)}set baseOptions(e){de(this.h,0,1,e)}o(e){return e.displayNamesLocale!==void 0?$e(this.h,2,yo(e.displayNamesLocale)):"displayNamesLocale"in e&&$e(this.h,2),e.maxResults!==void 0?_n(this.h,3,e.maxResults):"maxResults"in e&&$e(this.h,3),e.scoreThreshold!==void 0?ae(this.h,4,e.scoreThreshold):"scoreThreshold"in e&&$e(this.h,4),e.categoryAllowlist!==void 0?qu(this.h,5,e.categoryAllowlist):"categoryAllowlist"in e&&$e(this.h,5),e.categoryDenylist!==void 0?qu(this.h,6,e.categoryDenylist):"categoryDenylist"in e&&$e(this.h,6),this.l(e)}D(e,t){return this.j={detections:[]},Kr(this,e,t),this.j}F(e,t,r){return this.j={detections:[]},bn(this,e,r,t),this.j}m(){var e=new dr;We(e,"input_frame_gpu"),We(e,"norm_rect"),Ce(e,"detections");const t=new kr;nn(t,e5,this.h);const r=new Xt;xr(r,"mediapipe.tasks.vision.ObjectDetectorGraph"),Be(r,"IMAGE:input_frame_gpu"),Be(r,"NORM_RECT:norm_rect"),ke(r,"DETECTIONS:detections"),r.o(t),Tr(e,r),this.g.attachProtoVectorListener("detections",((i,o)=>{for(const a of i)i=Hw(a),this.j.detections.push(v3(i));Z(this,o)})),this.g.attachEmptyPacketListener("detections",(i=>{Z(this,i)})),e=e.g(),this.setGraph(new Uint8Array(e),!0)}};Dr.prototype.detectForVideo=Dr.prototype.F,Dr.prototype.detect=Dr.prototype.D,Dr.prototype.setOptions=Dr.prototype.o,Dr.createFromModelPath=async function(e,t){return Se(Dr,e,{baseOptions:{modelAssetPath:t}})},Dr.createFromModelBuffer=function(e,t){return Se(Dr,e,{baseOptions:{modelAssetBuffer:t}})},Dr.createFromOptions=function(e,t){return Se(Dr,e,t)};var Lf=class{constructor(e,t,r){this.landmarks=e,this.worldLandmarks=t,this.segmentationMasks=r}close(){var e;(e=this.segmentationMasks)==null||e.forEach((t=>{t.close()}))}};function Jy(e){e.landmarks=[],e.worldLandmarks=[],e.segmentationMasks=void 0}function Xy(e){try{const t=new Lf(e.landmarks,e.worldLandmarks,e.segmentationMasks);if(!e.s)return t;e.s(t)}finally{Cc(e)}}Lf.prototype.close=Lf.prototype.close;var Lt=class extends hr{constructor(e,t){super(new Wr(e,t),"image_in","norm_rect",!1),this.landmarks=[],this.worldLandmarks=[],this.outputSegmentationMasks=!1,de(e=this.h=new y3,0,1,t=new Ye),this.v=new u3,de(this.h,0,3,this.v),this.j=new l3,de(this.h,0,2,this.j),_n(this.j,4,1),ae(this.j,2,.5),ae(this.v,2,.5),ae(this.h,4,.5)}get baseOptions(){return Te(this.h,Ye,1)}set baseOptions(e){de(this.h,0,1,e)}o(e){return"numPoses"in e&&_n(this.j,4,e.numPoses??1),"minPoseDetectionConfidence"in e&&ae(this.j,2,e.minPoseDetectionConfidence??.5),"minTrackingConfidence"in e&&ae(this.h,4,e.minTrackingConfidence??.5),"minPosePresenceConfidence"in e&&ae(this.v,2,e.minPosePresenceConfidence??.5),"outputSegmentationMasks"in e&&(this.outputSegmentationMasks=e.outputSegmentationMasks??!1),this.l(e)}D(e,t,r){const i=typeof t!="function"?t:{};return this.s=typeof t=="function"?t:r,Jy(this),Kr(this,e,i),Xy(this)}F(e,t,r,i){const o=typeof r!="function"?r:{};return this.s=typeof r=="function"?r:i,Jy(this),bn(this,e,o,t),Xy(this)}m(){var e=new dr;We(e,"image_in"),We(e,"norm_rect"),Ce(e,"normalized_landmarks"),Ce(e,"world_landmarks"),Ce(e,"segmentation_masks");const t=new kr;nn(t,t5,this.h);const r=new Xt;xr(r,"mediapipe.tasks.vision.pose_landmarker.PoseLandmarkerGraph"),Be(r,"IMAGE:image_in"),Be(r,"NORM_RECT:norm_rect"),ke(r,"NORM_LANDMARKS:normalized_landmarks"),ke(r,"WORLD_LANDMARKS:world_landmarks"),r.o(t),Tr(e,r),Rc(this,e),this.g.attachProtoVectorListener("normalized_landmarks",((i,o)=>{this.landmarks=[];for(const a of i)i=Ka(a),this.landmarks.push(Tc(i));Z(this,o)})),this.g.attachEmptyPacketListener("normalized_landmarks",(i=>{this.landmarks=[],Z(this,i)})),this.g.attachProtoVectorListener("world_landmarks",((i,o)=>{this.worldLandmarks=[];for(const a of i)i=Ji(a),this.worldLandmarks.push(Ta(i));Z(this,o)})),this.g.attachEmptyPacketListener("world_landmarks",(i=>{this.worldLandmarks=[],Z(this,i)})),this.outputSegmentationMasks&&(ke(r,"SEGMENTATION_MASK:segmentation_masks"),so(this,"segmentation_masks"),this.g.ca("segmentation_masks",((i,o)=>{this.segmentationMasks=i.map((a=>ao(this,a,!0,!this.s))),Z(this,o)})),this.g.attachEmptyPacketListener("segmentation_masks",(i=>{this.segmentationMasks=[],Z(this,i)}))),e=e.g(),this.setGraph(new Uint8Array(e),!0)}};Lt.prototype.detectForVideo=Lt.prototype.F,Lt.prototype.detect=Lt.prototype.D,Lt.prototype.setOptions=Lt.prototype.o,Lt.createFromModelPath=function(e,t){return Se(Lt,e,{baseOptions:{modelAssetPath:t}})},Lt.createFromModelBuffer=function(e,t){return Se(Lt,e,{baseOptions:{modelAssetBuffer:t}})},Lt.createFromOptions=function(e,t){return Se(Lt,e,t)},Lt.POSE_CONNECTIONS=P3;function h5(e={}){const[t,r]=x.useState(!0),[i,o]=x.useState(!1),[a,u]=x.useState(null),[h,d]=x.useState(0),[p,y]=x.useState(null),[v,_]=x.useState(null),E=x.useRef(null),S=x.useRef(null),k=x.useRef(null),T=x.useRef(0),A=x.useRef(0),I=x.useRef(null),R=x.useRef({left:[],right:[]});x.useEffect(()=>((async()=>{try{r(!0);const B=await vs.forVisionTasks("https://cdn.jsdelivr.net/npm/@mediapipe/tasks-vision@0.10.21/wasm");S.current=await Lt.createFromOptions(B,{baseOptions:{modelAssetPath:"https://storage.googleapis.com/mediapipe-models/pose_landmarker/pose_landmarker_lite/float16/1/pose_landmarker_lite.task",delegate:"GPU"},runningMode:"VIDEO",numPoses:1}),r(!1)}catch(B){const M=B instanceof Error?B:new Error("MediaPipe");u(M),r(!1),console.error("MediaPipe init error:",B)}})(),()=>{S.current&&S.current.close()}),[]);const D=x.useCallback(F=>{if(!S.current||!E.current)return;o(!0),A.current=0,R.current={left:[],right:[]};const B=E.current,M=B.getContext("2d");if(!M)return;const te=new zt(M);I.current=window.setInterval(()=>{d(A.current),A.current=0},1e3);const ve=()=>{var kt,bt;if(!S.current||!F.videoWidth){k.current=requestAnimationFrame(ve);return}const Ae=performance.now();if(Ae<=T.current){k.current=requestAnimationFrame(ve);return}B.width=F.videoWidth,B.height=F.videoHeight;const je=S.current.detectForVideo(F,Ae);if(T.current=Ae,A.current++,M.drawImage(F,0,0,B.width,B.height),je.landmarks&&je.landmarks.length>0){const Ke=je.landmarks[0],ht=((kt=je.worldLandmarks)==null?void 0:kt[0])||Ke;y(Ke),_(ht),te.drawConnectors(Ke,Lt.POSE_CONNECTIONS,{color:"#00FF00",lineWidth:3}),te.drawLandmarks(Ke,{color:"#FF0000",radius:4});const be=Ke[26],G=Ke[25],ce=Ke[28],J=Ke[27];be&&ce&&(R.current.left.push({x:be.x*B.width,y:be.y*B.height}),R.current.left.length>30&&R.current.left.shift()),G&&J&&(R.current.right.push({x:G.x*B.width,y:G.y*B.height}),R.current.right.length>30&&R.current.right.shift());const P=($,Y)=>{if(!($.length<2)){M.beginPath(),M.moveTo($[0].x,$[0].y);for(let q=1;q<$.length;q++)M.lineTo($[q].x,$[q].y);M.strokeStyle=Y,M.lineWidth=4,M.lineCap="round",M.stroke(),$.forEach((q,me)=>{const we=me/$.length*.6;M.beginPath(),M.arc(q.x,q.y,3,0,2*Math.PI),M.fillStyle=Y.replace("1)",`${we})`),M.fill()})}};P(R.current.left,"rgba(0, 255, 255, 1)"),P(R.current.right,"rgba(255, 0, 255, 1)");const U=($,Y)=>{if(!$)return;const q=$.x*B.width,me=$.y*B.height;M.beginPath(),M.arc(q,me,16,0,2*Math.PI),M.fillStyle=Y.replace("1)","0.3)"),M.fill(),M.beginPath(),M.arc(q,me,8,0,2*Math.PI),M.fillStyle=Y,M.fill(),M.strokeStyle="white",M.lineWidth=2,M.stroke()};if(U(be,"rgba(0, 255, 255, 1)"),U(G,"rgba(255, 0, 255, 1)"),be&&ce){const $=(be.x-ce.x)*B.width;if(Math.abs($)>10){const Y=be.x*B.width,q=be.y*B.height,me=Math.min(Math.abs($),50),we=$>0?1:-1;M.beginPath(),M.moveTo(Y,q),M.lineTo(Y+we*me,q),M.strokeStyle="rgba(255, 200, 0, 0.9)",M.lineWidth=3,M.stroke();const he=10;M.beginPath(),M.moveTo(Y+we*me,q),M.lineTo(Y+we*(me-he),q-he/2),M.lineTo(Y+we*(me-he),q+he/2),M.closePath(),M.fillStyle="rgba(255, 200, 0, 0.9)",M.fill()}}if(G&&J){const $=(G.x-J.x)*B.width;if(Math.abs($)>10){const Y=G.x*B.width,q=G.y*B.height,me=Math.min(Math.abs($),50),we=$>0?1:-1;M.beginPath(),M.moveTo(Y,q),M.lineTo(Y+we*me,q),M.strokeStyle="rgba(255, 200, 0, 0.9)",M.lineWidth=3,M.stroke();const he=10;M.beginPath(),M.moveTo(Y+we*me,q),M.lineTo(Y+we*(me-he),q-he/2),M.lineTo(Y+we*(me-he),q+he/2),M.closePath(),M.fillStyle="rgba(255, 200, 0, 0.9)",M.fill()}}(bt=e.onResults)==null||bt.call(e,Ke,ht)}k.current=requestAnimationFrame(ve)};k.current=requestAnimationFrame(ve)},[e]),V=x.useCallback(()=>{o(!1),k.current&&(cancelAnimationFrame(k.current),k.current=null),I.current&&(clearInterval(I.current),I.current=null)},[]);return x.useEffect(()=>()=>{V()},[V]),{isLoading:t,isProcessing:i,error:a,fps:h,landmarks:p,worldLandmarks:v,canvasRef:E,startDetection:D,stopDetection:V}}function d5(){const e=Vr(),[t,r]=x.useState(!0),[i,o]=x.useState(window.innerWidth>window.innerHeight),{videoRef:a,isReady:u,error:h,facingMode:d,switchCamera:p,startCamera:y,stopCamera:v}=Db(),{isRecording:_,duration:E,startRecording:S,stopRecording:k,addFrame:T}=Ub(),{isLoading:A,fps:I,canvasRef:R,startDetection:D,stopDetection:V}=h5({onResults:(M,te)=>{T(M,te)}});x.useEffect(()=>{const M=()=>{o(window.innerWidth>window.innerHeight)};return window.addEventListener("resize",M),()=>window.removeEventListener("resize",M)},[]),x.useEffect(()=>((async()=>{await y()})(),()=>{V(),v()}),[]),x.useEffect(()=>{if(u&&a.current&&!A){const M=setTimeout(()=>{a.current&&D(a.current)},100);return()=>clearTimeout(M)}},[u,A,D,a]);const F=x.useCallback(()=>{if(_){const M=k();V(),v(),sessionStorage.setItem("recordedFrames",JSON.stringify(M)),e("/results")}else r(!1),S()},[_,k,S,V,v,e]),B=M=>{const te=Math.floor(M/60),ve=Math.floor(M%60);return`${te.toString().padStart(2,"0")}:${ve.toString().padStart(2,"0")}`};return h?g.jsx("div",{className:"record-page",children:g.jsxs("div",{className:"error-container",children:[g.jsx("h2",{children:""}),g.jsx("p",{children:h.message}),g.jsx("button",{className:"btn btn-primary",onClick:()=>e("/"),children:""})]})}):g.jsxs("div",{className:"record-page",children:[!i&&g.jsxs("div",{className:"orientation-warning",children:[g.jsx("span",{className:"rotate-icon",children:""}),""]}),g.jsxs("div",{className:"camera-container",children:[g.jsx("video",{ref:a,autoPlay:!0,playsInline:!0,muted:!0,className:"camera-video"}),g.jsx("canvas",{ref:R,className:"pose-overlay"}),t&&!_&&g.jsxs("div",{className:"position-guide",children:[g.jsxs("svg",{viewBox:"0 0 200 300",className:"guide-silhouette",children:[g.jsx("ellipse",{cx:"100",cy:"30",rx:"20",ry:"25",stroke:"white",strokeWidth:"2",fill:"none",strokeDasharray:"5,5"}),g.jsx("line",{x1:"100",y1:"55",x2:"100",y2:"140",stroke:"white",strokeWidth:"2",strokeDasharray:"5,5"}),g.jsx("line",{x1:"100",y1:"80",x2:"60",y2:"120",stroke:"white",strokeWidth:"2",strokeDasharray:"5,5"}),g.jsx("line",{x1:"100",y1:"80",x2:"140",y2:"120",stroke:"white",strokeWidth:"2",strokeDasharray:"5,5"}),g.jsx("line",{x1:"100",y1:"140",x2:"70",y2:"220",stroke:"white",strokeWidth:"2",strokeDasharray:"5,5"}),g.jsx("line",{x1:"100",y1:"140",x2:"130",y2:"220",stroke:"white",strokeWidth:"2",strokeDasharray:"5,5"}),g.jsx("line",{x1:"70",y1:"220",x2:"65",y2:"290",stroke:"white",strokeWidth:"2",strokeDasharray:"5,5"}),g.jsx("line",{x1:"130",y1:"220",x2:"135",y2:"290",stroke:"white",strokeWidth:"2",strokeDasharray:"5,5"})]}),g.jsx("p",{className:"guide-text",children:""})]}),g.jsxs("div",{className:"status-bar",children:[g.jsxs("span",{className:"fps-display",children:[I," FPS"]}),A&&g.jsx("span",{className:"loading-text",children:"..."})]})]}),g.jsxs("div",{className:"controls-container",children:[g.jsx("button",{className:"btn btn-secondary back-button",onClick:()=>e("/"),disabled:_,children:""}),g.jsxs("div",{className:"record-control",children:[g.jsx("button",{className:`record-button ${_?"recording":""}`,onClick:F,disabled:A||!u,children:_?g.jsx("span",{className:"stop-icon"}):g.jsx("span",{className:"rec-icon"})}),g.jsx("span",{className:"duration-display",children:B(E)})]}),g.jsx("button",{className:"btn btn-secondary flip-button",onClick:p,disabled:_,children:""})]}),_&&g.jsxs("div",{className:"recording-indicator",children:[g.jsx("span",{className:"rec-dot"}),"REC"]})]})}const f5="modulepreload",p5=function(e){return"/"+e},Yy={},m5=function(t,r,i){let o=Promise.resolve();if(r&&r.length>0){let u=function(p){return Promise.all(p.map(y=>Promise.resolve(y).then(v=>({status:"fulfilled",value:v}),v=>({status:"rejected",reason:v}))))};document.getElementsByTagName("link");const h=document.querySelector("meta[property=csp-nonce]"),d=(h==null?void 0:h.nonce)||(h==null?void 0:h.getAttribute("nonce"));o=u(r.map(p=>{if(p=p5(p),p in Yy)return;Yy[p]=!0;const y=p.endsWith(".css"),v=y?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${p}"]${v}`))return;const _=document.createElement("link");if(_.rel=y?"stylesheet":f5,y||(_.as="script"),_.crossOrigin="",_.href=p,d&&_.setAttribute("nonce",d),document.head.appendChild(_),y)return new Promise((E,S)=>{_.addEventListener("load",E),_.addEventListener("error",()=>S(new Error(`Unable to preload CSS for ${p}`)))})}))}function a(u){const h=new Event("vite:preloadError",{cancelable:!0});if(h.payload=u,window.dispatchEvent(h),!h.defaultPrevented)throw u}return o.then(u=>{for(const h of u||[])h.status==="rejected"&&a(h.reason);return t().catch(a)})},wn={LEFT_HIP:23,RIGHT_HIP:24,LEFT_KNEE:25,RIGHT_KNEE:26,LEFT_ANKLE:27,RIGHT_ANKLE:28};function g5(e){return{analysis:x.useMemo(()=>{if(e.length<30)return null;const r=N3(e),i=L3(r,e.length),o=I3(e,r),a=e.length>0?(e[e.length-1].timestamp-e[0].timestamp)/1e3:0;return{stancePhases:r,gaitCycles:i,lateralThrust:o,totalFrames:e.length,duration:a}},[e]),isAnalyzing:!1}}function N3(e){if(e.length<10)return[];const t=[],r=e.map(S=>{var k;return((k=S.landmarks[wn.LEFT_ANKLE])==null?void 0:k.y)??0}),i=e.map(S=>{var k;return((k=S.landmarks[wn.RIGHT_ANKLE])==null?void 0:k.y)??0}),o=e.map(S=>{var k;return((k=S.landmarks[wn.LEFT_KNEE])==null?void 0:k.y)??0}),a=e.map(S=>{var k;return((k=S.landmarks[wn.RIGHT_KNEE])==null?void 0:k.y)??0}),u=Qy(r),h=Qy(i),d=Df(r,5),p=Df(i,5),y=.6,v=.6,_=.025,E=6;return Zy(d,u,o,y,_,E,"left",t),Zy(p,h,a,v,_,E,"right",t),console.log("[Consistency Check] Stance phases detected:",t.length),console.log("[Consistency Check] Left phases:",t.filter(S=>S.leg==="left").length),console.log("[Consistency Check] Right phases:",t.filter(S=>S.leg==="right").length),console.log("[Consistency Check] FIXED threshold:",y.toFixed(4),"(both legs)"),console.log("[Consistency Check] Min phase duration:",E,"frames"),console.log("[Consistency Check] Hysteresis:",_),t.sort((S,k)=>S.startFrame-k.startFrame)}function Qy(e){const t=[0];for(let r=1;r<e.length;r++)t.push(e[r]-e[r-1]);return t}function Df(e,t){const r=[],i=Math.floor(t/2);for(let o=0;o<e.length;o++){const a=Math.max(0,o-i),u=Math.min(e.length,o+i+1),h=e.slice(a,u),d=h.reduce((p,y)=>p+y,0)/h.length;r.push(d)}return r}function Zy(e,t,r,i,o,a,u,h){let d=!1,p=0;const y=i+o,v=i-o;for(let _=0;_<e.length;_++){const E=e[_]>y,S=e[_]<v,k=Math.abs(t[_])<.012;!d&&E&&k?(d=!0,p=_):d&&(S||!k)&&(d=!1,_-p>=a&&h.push({leg:u,startFrame:p,endFrame:_-1}))}d&&e.length-p>=a&&h.push({leg:u,startFrame:p,endFrame:e.length-1})}function I3(e,t){const r=ev(e,t.filter(u=>u.leg==="left"),"left"),i=ev(e,t.filter(u=>u.leg==="right"),"right"),o=Math.max(r.amplitude,i.amplitude),a=o>0?Math.abs(r.amplitude-i.amplitude)/o*100:0;return{leftKnee:r,rightKnee:i,asymmetryPercent:Math.round(a)}}function ev(e,t,r){const i=r==="left"?wn.LEFT_KNEE:wn.RIGHT_KNEE,o=r==="left"?wn.LEFT_ANKLE:wn.RIGHT_ANKLE,a=r==="left"?wn.LEFT_HIP:wn.RIGHT_HIP,u=new Array(e.length).fill(!1);for(const T of t)for(let A=T.startFrame;A<=T.endFrame;A++)A<e.length&&(u[A]=!0);const h=[],d=[];let p=0,y=0;for(let T=0;T<e.length;T++){const A=e[T].landmarks[a],I=e[T].landmarks[i],R=e[T].landmarks[o];if(A&&I&&R){const D=R.x-A.x,V=R.y-A.y,F=Math.sqrt(D*D+V*V);let B=0;F>0&&(B=Math.abs((R.x-A.x)*(A.y-I.y)-(A.x-I.x)*(R.y-A.y))/F*100),u[T]?(h.push(B),d.push(e[T].timestamp),p++):(h.push(0),d.push(e[T].timestamp),y++)}else h.push(0),d.push(e[T].timestamp)}const v=Df(h,9);let _=0,E=0;for(const T of t){const A=[];for(let I=T.startFrame;I<=T.endFrame&&I<v.length;I++)v[I]>0&&A.push(v[I]);if(A.length>0){const I=Math.min(...A),R=Math.max(...A),D=R-I;D>_&&(_=D);const V=Math.max(Math.abs(I),Math.abs(R));V>E&&(E=V)}}let S;_<2?S="low":_<4?S="moderate":S="high";const k={amplitude:Math.round(_*10)/10,maxDisplacement:Math.round(E*10)/10,waveform:v,timePoints:d,severity:S};return console.log("[Consistency Check] Thrust calculation - Amplitude:",k.amplitude,"Severity:",k.severity),console.log("[Consistency Check] Stance frames:",p,"/ Total:",h.length),console.log("[Consistency Check] Swing frames (excluded):",y),console.log("[Consistency Check] Stance phases used:",t.length),k}function L3(e,t){const r=[],i=e.filter(a=>a.leg==="left").sort((a,u)=>a.startFrame-u.startFrame),o=e.filter(a=>a.leg==="right").sort((a,u)=>a.startFrame-u.startFrame);return[{leg:"left",stances:i},{leg:"right",stances:o}].forEach(({leg:a,stances:u})=>{for(let h=0;h<u.length-1;h++){const d=u[h],p=u[h+1],y=d.startFrame,v=p.startFrame;if(v-y<10)continue;const E=y5(y,v,d.endFrame,a);r.push({leg:a,startFrame:y,endFrame:v,phases:E})}}),r.sort((a,u)=>a.startFrame-u.startFrame)}function y5(e,t,r,i){const o=t-e,a=[],u=[["IC",0,2],["LR",2,12],["MSt",12,31],["TSt",31,50],["PSw",50,62],["ISw",62,75],["MSw",75,87],["TSw",87,100]];for(const[h,d,p]of u){const y=Math.round(e+o*d/100),v=Math.round(e+o*p/100);a.push({leg:i,type:h,startFrame:y,endFrame:v,startPercent:d,endPercent:p})}return a}function v5(e){if(e.length<30)return null;const t=N3(e),r=L3(t,e.length),i=I3(e,t),o=e.length>0?(e[e.length-1].timestamp-e[0].timestamp)/1e3:0;return{stancePhases:t,gaitCycles:r,lateralThrust:i,totalFrames:e.length,duration:o}}const w5="GaitKneeViewDB",_5=1,En="sessions";function Pc(){return new Promise((e,t)=>{const r=indexedDB.open(w5,_5);r.onerror=()=>t(r.error),r.onsuccess=()=>e(r.result),r.onupgradeneeded=i=>{const o=i.target.result;o.objectStoreNames.contains(En)||o.createObjectStore(En,{keyPath:"id"}).createIndex("timestamp","timestamp",{unique:!1})}})}async function E5(e,t,r,i){const o=await Pc(),a=`session_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,u={id:a,timestamp:Date.now(),name:r||` ${new Date().toLocaleDateString("ja-JP")}`,notes:i,frames:e,analysis:t};return new Promise((h,d)=>{const v=o.transaction([En],"readwrite").objectStore(En).add(u);v.onsuccess=()=>h(a),v.onerror=()=>d(v.error)})}async function S5(){const e=await Pc();return new Promise((t,r)=>{const a=e.transaction([En],"readonly").objectStore(En).getAll();a.onsuccess=()=>{const u=a.result;u.sort((h,d)=>d.timestamp-h.timestamp),t(u)},a.onerror=()=>r(a.error)})}async function tv(e){const t=await Pc();return new Promise((r,i)=>{const u=t.transaction([En],"readonly").objectStore(En).get(e);u.onsuccess=()=>r(u.result||null),u.onerror=()=>i(u.error)})}async function k5(e){const t=await Pc();return new Promise((r,i)=>{const u=t.transaction([En],"readwrite").objectStore(En).delete(e);u.onsuccess=()=>r(),u.onerror=()=>i(u.error)})}function b5(){var V;const e=Vr(),[t,r]=x.useState(!1),[i,o]=x.useState(""),[a,u]=x.useState(""),h=x.useMemo(()=>{const F=sessionStorage.getItem("recordedFrames");if(F)try{return JSON.parse(F)}catch{return[]}return[]},[]),d=x.useMemo(()=>{const F=sessionStorage.getItem("allTrialResults");if(F)try{return JSON.parse(F)}catch{return null}return null},[]),{analysis:p}=g5(h);x.useEffect(()=>{h.length===0&&e("/")},[h,e]);const y=x.useCallback(async()=>{const F=document.querySelector(".results-content");if(!F){alert("");return}try{const B=(await m5(async()=>{const{default:Ae}=await import("./html2canvas.esm-QH1iLAAe.js");return{default:Ae}},[])).default,te=(await B(F,{useCORS:!0,allowTaint:!0,scale:2,backgroundColor:"#1e3a5f"})).toDataURL("image/png");if(/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)){const Ae=window.open("","_blank");if(Ae)Ae.document.write(`
                        <!DOCTYPE html>
                        <html>
                            <head>
                                <meta name="viewport" content="width=device-width, initial-scale=1.0">
                                <title>GaitKnee-View </title>
                                <style>
                                    body { margin: 0; padding: 20px; background: #f0f0f0; text-align: center; }
                                    p { color: #333; margin-bottom: 16px; font-family: sans-serif; }
                                    img { max-width: 100%; height: auto; border-radius: 8px; box-shadow: 0 4px 12px rgba(0,0,0,0.2); }
                                </style>
                            </head>
                            <body>
                                <p> </p>
                                <img src="${te}" />
                            </body>
                        </html>
                    `),Ae.document.close();else{const je=document.createElement("a");je.href=te,je.download=`gaitknee-result-${Date.now()}.png`,document.body.appendChild(je),je.click(),document.body.removeChild(je)}}else{const Ae=document.createElement("a");Ae.download=`gaitknee-result-${Date.now()}.png`,Ae.href=te,Ae.click()}}catch(B){console.error("Failed to save image:",B),alert(": "+B.message)}},[]),v=x.useCallback(()=>{const F={metadata:{exportDate:new Date().toISOString(),version:"1.0",totalFrames:(p==null?void 0:p.totalFrames)??0,duration:(p==null?void 0:p.duration)??0},analysis:{lateralThrust:{leftKnee:{amplitude:(p==null?void 0:p.lateralThrust.leftKnee.amplitude)??0,maxDisplacement:(p==null?void 0:p.lateralThrust.leftKnee.maxDisplacement)??0,severity:(p==null?void 0:p.lateralThrust.leftKnee.severity)??"low",waveform:(p==null?void 0:p.lateralThrust.leftKnee.waveform)??[],timePoints:(p==null?void 0:p.lateralThrust.leftKnee.timePoints)??[]},rightKnee:{amplitude:(p==null?void 0:p.lateralThrust.rightKnee.amplitude)??0,maxDisplacement:(p==null?void 0:p.lateralThrust.rightKnee.maxDisplacement)??0,severity:(p==null?void 0:p.lateralThrust.rightKnee.severity)??"low",waveform:(p==null?void 0:p.lateralThrust.rightKnee.waveform)??[],timePoints:(p==null?void 0:p.lateralThrust.rightKnee.timePoints)??[]},asymmetryPercent:(p==null?void 0:p.lateralThrust.asymmetryPercent)??0},stancePhases:(p==null?void 0:p.stancePhases)??[],gaitCycles:(p==null?void 0:p.gaitCycles)??[]},frames:h.map(te=>({timestamp:te.timestamp,landmarks:te.landmarks,worldLandmarks:te.worldLandmarks}))},B=new Blob([JSON.stringify(F,null,2)],{type:"application/json"}),M=document.createElement("a");M.download=`gaitknee-data-${Date.now()}.json`,M.href=URL.createObjectURL(B),M.click(),URL.revokeObjectURL(M.href)},[h,p]),_=x.useCallback(()=>{sessionStorage.removeItem("recordedFrames"),e("/record")},[e]),E=x.useCallback(async()=>{if(p)try{const F=await E5(h,p,i||void 0,a||void 0);console.log("Session saved:",F),alert(""),r(!1),o(""),u("")}catch(F){console.error("Failed to save session:",F),alert("")}},[h,p,i,a]),S=F=>({low:"",moderate:"",high:""})[F];if(!p)return g.jsx("div",{className:"results-page",children:g.jsxs("div",{className:"loading-container",children:[g.jsx("div",{className:"spinner"}),g.jsx("p",{children:"..."})]})});const k=F=>F>=1.5?"high":F>=.8?"moderate":"low",T=(d==null?void 0:d.averages)!=null,A=d==null?void 0:d.averages,I=((V=d==null?void 0:d.trials)==null?void 0:V.length)??1,R=T?{rightAmplitude:Number(A.rightAmplitude.toFixed(1)),leftAmplitude:Number(A.leftAmplitude.toFixed(1)),asymmetryPercent:Math.round(A.asymmetry),rightSeverity:k(A.rightAmplitude),leftSeverity:k(A.leftAmplitude)}:{rightAmplitude:p.lateralThrust.rightKnee.amplitude,leftAmplitude:p.lateralThrust.leftKnee.amplitude,asymmetryPercent:p.lateralThrust.asymmetryPercent,rightSeverity:p.lateralThrust.rightKnee.severity,leftSeverity:p.lateralThrust.leftKnee.severity},{lateralThrust:D}=p;return g.jsxs("div",{className:"results-page",children:[g.jsxs("header",{className:"results-header",children:[g.jsx("h1",{children:""}),g.jsxs("div",{className:"header-badges",children:[T&&g.jsxs("span",{className:"average-badge",children:[I,""]}),g.jsxs("span",{className:"duration-badge",children:[p.duration.toFixed(1)," / ",p.totalFrames,""]})]})]}),g.jsxs("div",{className:"results-content",children:[g.jsx("section",{className:"score-overview",children:g.jsxs("div",{className:"score-cards",children:[g.jsxs("div",{className:"score-card score-card-right",children:[g.jsx("div",{className:"score-header",children:g.jsx("span",{className:"knee-label",children:""})}),g.jsxs("div",{className:"score-main",children:[g.jsxs("div",{className:`score-badge score-badge-${R.rightSeverity}`,children:[g.jsxs("div",{className:"severity-icon",children:[R.rightSeverity==="high"&&"",R.rightSeverity==="moderate"&&"",R.rightSeverity==="low"&&""]}),g.jsx("div",{className:"severity-label",children:S(R.rightSeverity)})]}),g.jsxs("div",{className:"amplitude-display",children:[g.jsxs("span",{className:"amplitude-value",children:[R.rightAmplitude," cm"]}),g.jsx("span",{className:"amplitude-unit",children:""})]})]})]}),g.jsxs("div",{className:"score-card score-card-asymmetry",children:[g.jsx("div",{className:"asymmetry-label",children:""}),g.jsxs("div",{className:"asymmetry-value",children:[R.asymmetryPercent,g.jsx("span",{className:"asymmetry-unit",children:"%"})]}),R.asymmetryPercent>20&&g.jsx("div",{className:"asymmetry-warning",children:""})]}),g.jsxs("div",{className:"score-card score-card-left",children:[g.jsx("div",{className:"score-header",children:g.jsx("span",{className:"knee-label",children:""})}),g.jsxs("div",{className:"score-main",children:[g.jsxs("div",{className:`score-badge score-badge-${R.leftSeverity}`,children:[g.jsxs("div",{className:"severity-icon",children:[R.leftSeverity==="high"&&"",R.leftSeverity==="moderate"&&"",R.leftSeverity==="low"&&""]}),g.jsx("div",{className:"severity-label",children:S(R.leftSeverity)})]}),g.jsxs("div",{className:"amplitude-display",children:[g.jsxs("span",{className:"amplitude-value",children:[R.leftAmplitude," cm"]}),g.jsx("span",{className:"amplitude-unit",children:""})]})]})]})]})}),g.jsxs("section",{className:"chart-section",children:[g.jsx("h2",{children:"Lateral Thrust "}),g.jsxs("div",{className:"waveform-container",children:[g.jsxs("div",{className:"waveform-card",children:[g.jsxs("div",{className:"waveform-header",children:[g.jsx("span",{className:"leg-label",children:""}),g.jsx("span",{className:`badge badge-${D.rightKnee.severity}`,children:S(D.rightKnee.severity)})]}),g.jsx(rv,{data:D.rightKnee.waveform,severity:D.rightKnee.severity,gaitCycles:p.gaitCycles.filter(F=>F.leg==="right"),_leg:"right"}),g.jsx("div",{className:"waveform-stats",children:g.jsxs("span",{children:[": ",g.jsxs("strong",{children:[D.rightKnee.amplitude," cm"]})]})})]}),g.jsxs("div",{className:"waveform-card",children:[g.jsxs("div",{className:"waveform-header",children:[g.jsx("span",{className:"leg-label",children:""}),g.jsx("span",{className:`badge badge-${D.leftKnee.severity}`,children:S(D.leftKnee.severity)})]}),g.jsx(rv,{data:D.leftKnee.waveform,severity:D.leftKnee.severity,gaitCycles:p.gaitCycles.filter(F=>F.leg==="left"),_leg:"left"}),g.jsx("div",{className:"waveform-stats",children:g.jsxs("span",{children:[": ",g.jsxs("strong",{children:[D.leftKnee.amplitude," cm"]})]})})]})]})]}),g.jsxs("section",{className:"summary-section",children:[g.jsx("h2",{children:""}),g.jsxs("div",{className:"summary-cards",children:[g.jsxs("div",{className:"summary-card",children:[g.jsx("span",{className:"summary-label",children:""}),g.jsxs("span",{className:"summary-value",children:[R.asymmetryPercent,"%"]})]}),g.jsxs("div",{className:"summary-card",children:[g.jsx("span",{className:"summary-label",children:""}),g.jsx("div",{className:"summary-detail",children:g.jsx("span",{className:`badge badge-${R.rightSeverity}`,children:S(R.rightSeverity)})})]}),g.jsxs("div",{className:"summary-card",children:[g.jsx("span",{className:"summary-label",children:""}),g.jsx("div",{className:"summary-detail",children:g.jsx("span",{className:`badge badge-${R.leftSeverity}`,children:S(R.leftSeverity)})})]})]}),g.jsxs("div",{className:"auto-comment",children:[g.jsx("h3",{children:""}),g.jsx("p",{children:x5({leftKnee:{amplitude:R.leftAmplitude,severity:R.leftSeverity},rightKnee:{amplitude:R.rightAmplitude,severity:R.rightSeverity},asymmetryPercent:R.asymmetryPercent})})]})]}),d&&d.trials&&d.trials.length>0&&g.jsxs("section",{className:"trial-table-section",children:[g.jsx("h2",{children:""}),g.jsx("div",{className:"trial-table-wrapper",children:g.jsxs("table",{className:"trial-table",children:[g.jsx("thead",{children:g.jsxs("tr",{children:[g.jsx("th",{children:""}),g.jsx("th",{children:" (cm)"}),g.jsx("th",{children:" (cm)"}),g.jsx("th",{children:" (%)"})]})}),g.jsxs("tbody",{children:[d.trials.map((F,B)=>g.jsxs("tr",{className:B===d.bestTrialIndex?"best-trial":"",children:[g.jsxs("td",{children:[B+1,"",B===d.bestTrialIndex&&g.jsx("span",{className:"best-badge",children:""})]}),g.jsx("td",{children:F.lateralThrust.rightKnee.amplitude}),g.jsx("td",{children:F.lateralThrust.leftKnee.amplitude}),g.jsx("td",{children:F.lateralThrust.asymmetryPercent})]},B)),g.jsxs("tr",{className:"average-row",children:[g.jsx("td",{children:g.jsx("strong",{children:""})}),g.jsx("td",{children:g.jsx("strong",{children:R.rightAmplitude})}),g.jsx("td",{children:g.jsx("strong",{children:R.leftAmplitude})}),g.jsx("td",{children:g.jsx("strong",{children:R.asymmetryPercent})})]})]})]})})]})]}),g.jsxs("div",{className:"results-actions",children:[g.jsx("button",{className:"btn btn-secondary",onClick:_,children:""}),g.jsx("button",{className:"btn btn-outline",onClick:()=>r(!0),children:""}),g.jsx("button",{className:"btn btn-outline",onClick:v,children:" (JSON)"}),g.jsx("button",{className:"btn btn-primary",onClick:y,children:" (PNG)"})]}),t&&g.jsx("div",{className:"dialog-overlay",onClick:()=>r(!1),children:g.jsxs("div",{className:"dialog-content",onClick:F=>F.stopPropagation(),children:[g.jsx("h2",{children:""}),g.jsxs("div",{className:"dialog-body",children:[g.jsxs("div",{className:"form-group",children:[g.jsx("label",{htmlFor:"session-name",children:""}),g.jsx("input",{id:"session-name",type:"text",className:"form-input",placeholder:` ${new Date().toLocaleDateString("ja-JP")}`,value:i,onChange:F=>o(F.target.value)})]}),g.jsxs("div",{className:"form-group",children:[g.jsx("label",{htmlFor:"session-notes",children:""}),g.jsx("textarea",{id:"session-notes",className:"form-textarea",placeholder:"",rows:3,value:a,onChange:F=>u(F.target.value)})]})]}),g.jsxs("div",{className:"dialog-actions",children:[g.jsx("button",{className:"btn btn-secondary",onClick:()=>r(!1),children:""}),g.jsx("button",{className:"btn btn-primary",onClick:E,children:""})]})]})})]})}function rv({data:e,severity:t,gaitCycles:r=[],_leg:i}){if(e.length===0)return g.jsx("div",{className:"waveform-empty",children:""});const a=Math.max(1,Math.floor(e.length/100)),u=e.filter((A,I)=>I%a===0),h=100,d=40,p=2,y=Math.min(...e),v=Math.max(...e),_=v-y||1,S=`M ${u.map((A,I)=>{const R=p+I/(u.length-1)*(h-2*p),D=p+(v-A)/_*(d-2*p);return`${R},${D}`}).join(" L ")}`,k=t==="high"?"var(--color-danger)":t==="moderate"?"var(--color-warning)":"var(--color-success)",T={IC:"#4ade80",LR:"#facc15",MSt:"#60a5fa",TSt:"#a78bfa",PSw:"#fb923c",ISw:"#f472b6",MSw:"#8b5cf6",TSw:"#06b6d4"};return g.jsxs("svg",{viewBox:`0 0 ${h} ${d}`,className:"waveform-svg",preserveAspectRatio:"none",children:[g.jsx("line",{x1:p,y1:d/2,x2:h-p,y2:d/2,stroke:"var(--color-border)",strokeWidth:"0.5",strokeDasharray:"2,2"}),r.map((A,I)=>g.jsx("g",{children:A.phases.map((R,D)=>{const V=p+R.startFrame/(e.length-1)*(h-2*p),B=p+R.endFrame/(e.length-1)*(h-2*p)-V,M=T[R.type]||"#666";return g.jsxs("g",{children:[g.jsx("rect",{x:V,y:p,width:B,height:d-2*p,fill:M,opacity:"0.15"}),D===0&&g.jsx("line",{x1:V,y1:p,x2:V,y2:d-p,stroke:M,strokeWidth:"0.5",strokeDasharray:"1,1",opacity:"0.8"}),B>3&&["IC","LR","MSt","TSt","PSw","ISw"].includes(R.type)&&g.jsx("text",{x:V+B/2,y:p+3,fontSize:"2.5",fill:M,textAnchor:"middle",fontWeight:"600",children:R.type})]},`${I}-${D}`)})},I)),g.jsx("path",{d:S,fill:"none",stroke:k,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]})}function x5(e){const t=[];return e.rightKnee.amplitude>e.leftKnee.amplitude?t.push(`lateral thrust: ${e.rightKnee.amplitude} cm vs ${e.leftKnee.amplitude} cm`):e.leftKnee.amplitude>e.rightKnee.amplitude?t.push(`lateral thrust: ${e.leftKnee.amplitude} cm vs ${e.rightKnee.amplitude} cm`):t.push("lateral thrust"),e.asymmetryPercent>30&&t.push(`${e.asymmetryPercent}%`),(e.rightKnee.severity==="high"||e.leftKnee.severity==="high")&&t.push("lateral thrust"),t.join(" ")}var Le;(function(e){e.LOAD="LOAD",e.EXEC="EXEC",e.FFPROBE="FFPROBE",e.WRITE_FILE="WRITE_FILE",e.READ_FILE="READ_FILE",e.DELETE_FILE="DELETE_FILE",e.RENAME="RENAME",e.CREATE_DIR="CREATE_DIR",e.LIST_DIR="LIST_DIR",e.DELETE_DIR="DELETE_DIR",e.ERROR="ERROR",e.DOWNLOAD="DOWNLOAD",e.PROGRESS="PROGRESS",e.LOG="LOG",e.MOUNT="MOUNT",e.UNMOUNT="UNMOUNT"})(Le||(Le={}));const T5=(()=>{let e=0;return()=>e++})(),R5=new Error("ffmpeg is not loaded, call `await ffmpeg.load()` first"),C5=new Error("called FFmpeg.terminate()");var _r,ks,$n,ni,si,Qu,qt;class A5{constructor(){gs(this,_r,null);gs(this,ks,{});gs(this,$n,{});gs(this,ni,[]);gs(this,si,[]);Gt(this,"loaded",!1);gs(this,Qu,()=>{_e(this,_r)&&(_e(this,_r).onmessage=({data:{id:t,type:r,data:i}})=>{switch(r){case Le.LOAD:this.loaded=!0,_e(this,ks)[t](i);break;case Le.MOUNT:case Le.UNMOUNT:case Le.EXEC:case Le.FFPROBE:case Le.WRITE_FILE:case Le.READ_FILE:case Le.DELETE_FILE:case Le.RENAME:case Le.CREATE_DIR:case Le.LIST_DIR:case Le.DELETE_DIR:_e(this,ks)[t](i);break;case Le.LOG:_e(this,ni).forEach(o=>o(i));break;case Le.PROGRESS:_e(this,si).forEach(o=>o(i));break;case Le.ERROR:_e(this,$n)[t](i);break}delete _e(this,ks)[t],delete _e(this,$n)[t]})});gs(this,qt,({type:t,data:r},i=[],o)=>_e(this,_r)?new Promise((a,u)=>{const h=T5();_e(this,_r)&&_e(this,_r).postMessage({id:h,type:t,data:r},i),_e(this,ks)[h]=a,_e(this,$n)[h]=u,o==null||o.addEventListener("abort",()=>{u(new DOMException(`Message # ${h} was aborted`,"AbortError"))},{once:!0})}):Promise.reject(R5));Gt(this,"load",({classWorkerURL:t,...r}={},{signal:i}={})=>(_e(this,_r)||(ua(this,_r,t?new Worker(new URL(t,import.meta.url),{type:"module"}):new Worker(new URL("/assets/worker-BAOIWoxA.js",import.meta.url),{type:"module"})),_e(this,Qu).call(this)),_e(this,qt).call(this,{type:Le.LOAD,data:r},void 0,i)));Gt(this,"exec",(t,r=-1,{signal:i}={})=>_e(this,qt).call(this,{type:Le.EXEC,data:{args:t,timeout:r}},void 0,i));Gt(this,"ffprobe",(t,r=-1,{signal:i}={})=>_e(this,qt).call(this,{type:Le.FFPROBE,data:{args:t,timeout:r}},void 0,i));Gt(this,"terminate",()=>{const t=Object.keys(_e(this,$n));for(const r of t)_e(this,$n)[r](C5),delete _e(this,$n)[r],delete _e(this,ks)[r];_e(this,_r)&&(_e(this,_r).terminate(),ua(this,_r,null),this.loaded=!1)});Gt(this,"writeFile",(t,r,{signal:i}={})=>{const o=[];return r instanceof Uint8Array&&o.push(r.buffer),_e(this,qt).call(this,{type:Le.WRITE_FILE,data:{path:t,data:r}},o,i)});Gt(this,"mount",(t,r,i)=>{const o=[];return _e(this,qt).call(this,{type:Le.MOUNT,data:{fsType:t,options:r,mountPoint:i}},o)});Gt(this,"unmount",t=>{const r=[];return _e(this,qt).call(this,{type:Le.UNMOUNT,data:{mountPoint:t}},r)});Gt(this,"readFile",(t,r="binary",{signal:i}={})=>_e(this,qt).call(this,{type:Le.READ_FILE,data:{path:t,encoding:r}},void 0,i));Gt(this,"deleteFile",(t,{signal:r}={})=>_e(this,qt).call(this,{type:Le.DELETE_FILE,data:{path:t}},void 0,r));Gt(this,"rename",(t,r,{signal:i}={})=>_e(this,qt).call(this,{type:Le.RENAME,data:{oldPath:t,newPath:r}},void 0,i));Gt(this,"createDir",(t,{signal:r}={})=>_e(this,qt).call(this,{type:Le.CREATE_DIR,data:{path:t}},void 0,r));Gt(this,"listDir",(t,{signal:r}={})=>_e(this,qt).call(this,{type:Le.LIST_DIR,data:{path:t}},void 0,r));Gt(this,"deleteDir",(t,{signal:r}={})=>_e(this,qt).call(this,{type:Le.DELETE_DIR,data:{path:t}},void 0,r))}on(t,r){t==="log"?_e(this,ni).push(r):t==="progress"&&_e(this,si).push(r)}off(t,r){t==="log"?ua(this,ni,_e(this,ni).filter(i=>i!==r)):t==="progress"&&ua(this,si,_e(this,si).filter(i=>i!==r))}}_r=new WeakMap,ks=new WeakMap,$n=new WeakMap,ni=new WeakMap,si=new WeakMap,Qu=new WeakMap,qt=new WeakMap;var nv;(function(e){e.MEMFS="MEMFS",e.NODEFS="NODEFS",e.NODERAWFS="NODERAWFS",e.IDBFS="IDBFS",e.WORKERFS="WORKERFS",e.PROXYFS="PROXYFS"})(nv||(nv={}));const j5=new Error("failed to get response body reader"),P5=new Error("failed to complete download"),O5="Content-Length",N5=e=>new Promise((t,r)=>{const i=new FileReader;i.onload=()=>{const{result:o}=i;o instanceof ArrayBuffer?t(new Uint8Array(o)):t(new Uint8Array)},i.onerror=o=>{var a,u;r(Error(`File could not be read! Code=${((u=(a=o==null?void 0:o.target)==null?void 0:a.error)==null?void 0:u.code)||-1}`))},i.readAsArrayBuffer(e)}),I5=async e=>{let t;if(typeof e=="string")/data:_data\/([a-zA-Z]*);base64,([^"]*)/.test(e)?t=atob(e.split(",")[1]).split("").map(r=>r.charCodeAt(0)):t=await(await fetch(e)).arrayBuffer();else if(e instanceof URL)t=await(await fetch(e)).arrayBuffer();else if(e instanceof File||e instanceof Blob)t=await N5(e);else return new Uint8Array;return new Uint8Array(t)},L5=async(e,t)=>{var o;const r=await fetch(e);let i;try{const a=parseInt(r.headers.get(O5)||"-1"),u=(o=r.body)==null?void 0:o.getReader();if(!u)throw j5;const h=[];let d=0;for(;;){const{done:v,value:_}=await u.read(),E=_?_.length:0;if(v){if(a!=-1&&a!==d)throw P5;t&&t({url:e,total:a,received:d,delta:E,done:v});break}h.push(_),d+=E,t&&t({url:e,total:a,received:d,delta:E,done:v})}const p=new Uint8Array(d);let y=0;for(const v of h)p.set(v,y),y+=v.length;i=p.buffer}catch(a){console.log("failed to send download progress event: ",a),i=await r.arrayBuffer()}return i},sv=async(e,t,r=!1,i)=>{const o=r?await L5(e,i):await(await fetch(e)).arrayBuffer(),a=new Blob([o],{type:t});return URL.createObjectURL(a)};function D5(){const e=Vr(),{user:t,refreshUsage:r}=po(),[i,o]=x.useState(null),[a,u]=x.useState(null),[h,d]=x.useState(!1),[p,y]=x.useState(0),[v,_]=x.useState(null),[E,S]=x.useState(!0),[k,T]=x.useState(null),[A,I]=x.useState(null),[R,D]=x.useState(!1),[V,F]=x.useState(0),[B,M]=x.useState(0),[te]=x.useState(5),ve=x.useRef(null),Ae=x.useRef(null),je=x.useRef(null),kt=x.useRef(null),bt=x.useRef([]),Ke=x.useRef(null),[ht,be]=x.useState(!1);x.useEffect(()=>((async()=>{try{S(!0);const $=await vs.forVisionTasks("https://cdn.jsdelivr.net/npm/@mediapipe/tasks-vision@0.10.21/wasm");je.current=await Lt.createFromOptions($,{baseOptions:{modelAssetPath:"https://storage.googleapis.com/mediapipe-models/pose_landmarker/pose_landmarker_lite/float16/1/pose_landmarker_lite.task",delegate:"GPU"},runningMode:"VIDEO",numPoses:1}),S(!1)}catch($){console.error("[UploadPage] MediaPipe init error:",$),_("MediaPipe"),S(!1)}})(),()=>{je.current&&je.current.close()}),[]),x.useEffect(()=>{(async()=>{try{const $=new A5;Ke.current=$,$.on("log",({message:q})=>{console.log("[FFmpeg]",q)}),$.on("progress",({progress:q})=>{F(Math.round(q*100))});const Y="https://unpkg.com/@ffmpeg/core@0.12.6/dist/umd";await $.load({coreURL:await sv(`${Y}/ffmpeg-core.js`,"text/javascript"),wasmURL:await sv(`${Y}/ffmpeg-core.wasm`,"application/wasm")}),be(!0)}catch($){console.error("[FFmpeg] Load error:",$)}})()},[]),x.useEffect(()=>{const U=$=>{if(h)return $.preventDefault(),$.returnValue="",$.returnValue};return window.addEventListener("beforeunload",U),()=>window.removeEventListener("beforeunload",U)},[h]),x.useEffect(()=>()=>{a&&URL.revokeObjectURL(a)},[a]),x.useEffect(()=>()=>{k&&URL.revokeObjectURL(k)},[k]);const G=x.useCallback(U=>{var q;const $=(q=U.target.files)==null?void 0:q[0];if(!$)return;if(!$.type.startsWith("video/")){_("");return}if($.size>100*1024*1024){_("100MB");return}_(null),o($),a&&URL.revokeObjectURL(a);const Y=URL.createObjectURL($);u(Y)},[a]),ce=x.useCallback(async U=>{if(!Ke.current||!ht)throw new Error("FFmpeg");D(!0),F(0);try{const $=Ke.current;await $.writeFile("input.webm",await I5(U)),await $.exec(["-i","input.webm","-c:v","libx264","-pix_fmt","yuv420p","-profile:v","baseline","-level","3.0","-movflags","faststart","-f","mp4","output.mp4"]);const Y=await $.readFile("output.mp4"),q=new Blob([new Uint8Array(Y)],{type:"video/mp4"});return await $.deleteFile("input.webm"),await $.deleteFile("output.mp4"),D(!1),q}catch($){throw console.error("[FFmpeg] Conversion error:",$),D(!1),$}},[ht]),J=x.useCallback(async(U,$,Y,q,me,we)=>{var Rn;const he=[],Pe=U.duration,ot=.1,xn=Math.floor(Pe/ot);U.currentTime=0,U.pause();const tt=$.getContext("2d"),Tn=Rr=>new Promise(Ne=>{const dt=()=>{U.removeEventListener("seeked",dt),Ne()};U.addEventListener("seeked",dt),U.currentTime=Rr});for(let Rr=0;Rr<xn;Rr++){const Ne=Rr*ot;await Tn(Ne),tt.clearRect(0,0,$.width,$.height),tt.drawImage(U,0,0,$.width,$.height);const dt=performance.now(),Hr=Y.detectForVideo(U,dt);if(Hr.landmarks&&Hr.landmarks.length>0){const jt=Hr.landmarks[0],Zt=((Rn=Hr.worldLandmarks)==null?void 0:Rn[0])||jt;if(we){q.drawConnectors(jt,Lt.POSE_CONNECTIONS,{color:"#00FF00",lineWidth:2}),q.drawLandmarks(jt,{color:"#FF0000",fillColor:"#FF0000",radius:3});const Wt=jt[26],er=jt[25];Wt&&(tt.fillStyle="rgba(255, 0, 255, 0.3)",tt.beginPath(),tt.arc(Wt.x*$.width,Wt.y*$.height,16,0,2*Math.PI),tt.fill(),tt.fillStyle="#FF00FF",tt.beginPath(),tt.arc(Wt.x*$.width,Wt.y*$.height,8,0,2*Math.PI),tt.fill()),er&&(tt.fillStyle="rgba(0, 255, 255, 0.3)",tt.beginPath(),tt.arc(er.x*$.width,er.y*$.height,16,0,2*Math.PI),tt.fill(),tt.fillStyle="#00FFFF",tt.beginPath(),tt.arc(er.x*$.width,er.y*$.height,8,0,2*Math.PI),tt.fill())}he.push({timestamp:Ne*1e3,landmarks:jt,worldLandmarks:Zt})}const Dt=Math.round(Rr/xn*100);y(Dt)}return he},[]),P=x.useCallback(async()=>{if(!ve.current||!Ae.current||!je.current||!a||E)return;if(t&&!(await M2(t.id)).allowed){_(`${ja}`);return}d(!0),y(0),_(null),T(null),M(0),sessionStorage.removeItem("recordedFrames"),sessionStorage.removeItem("allTrialResults");const U=ve.current,$=Ae.current,Y=je.current;try{await new Promise((Ne,dt)=>{U.readyState>=1?Ne():(U.onloadedmetadata=()=>Ne(),U.onerror=()=>dt(new Error("")))});const q=U.duration;$.width=U.videoWidth,$.height=U.videoHeight;const me=$.getContext("2d");if(!me)throw new Error("Canvas context not available");const we=new zt(me),he=[],Pe=[];for(let Ne=0;Ne<te;Ne++){M(Ne+1),y(0),console.log(`[Trial ${Ne+1}/${te}] Starting analysis...`);const dt=!0,Hr=Ne===te-1;let Dt=null;if(Hr){bt.current=[];const Wt=$.captureStream(30);Dt=new MediaRecorder(Wt,{mimeType:"video/webm;codecs=vp9",videoBitsPerSecond:25e5}),Dt.ondataavailable=er=>{er.data.size>0&&bt.current.push(er.data)},Dt.start(),kt.current=Dt}const jt=await J(U,$,Y,we,Ne+1,dt);if(Dt&&Dt.state==="recording"&&(Dt.stop(),await new Promise(Wt=>{Dt.onstop=async()=>{const er=new Blob(bt.current,{type:"video/webm"}),bo=URL.createObjectURL(er);I(bo);try{const ui=await ce(er),Ga=URL.createObjectURL(ui);T(Ga)}catch(ui){console.error("[UploadPage] MP4 conversion error:",ui),T(bo)}Wt()}})),jt.length===0){console.warn(`[Trial ${Ne+1}] No frames detected`);continue}Pe.push(jt);const Zt=v5(jt);Zt&&(he.push(Zt),console.log(`[Trial ${Ne+1}] Analysis complete:`,{frames:jt.length,stancePhases:Zt.stancePhases.length,rightAmplitude:Zt.lateralThrust.rightKnee.amplitude,leftAmplitude:Zt.lateralThrust.leftKnee.amplitude})),Ne<te-1&&await new Promise(Wt=>setTimeout(Wt,500))}if(he.length===0)throw new Error("3");const ot=Pe.reduce((Ne,dt,Hr,Dt)=>dt.length>Dt[Ne].length?Hr:Ne,0),xn=Pe[ot],tt=he[ot];console.log(`[Analysis Summary] Best trial: ${ot+1}/${te}`),console.log(`[Analysis Summary] Total successful trials: ${he.length}`);const Tn=he.reduce((Ne,dt)=>Ne+dt.lateralThrust.rightKnee.amplitude,0)/he.length,Rn=he.reduce((Ne,dt)=>Ne+dt.lateralThrust.leftKnee.amplitude,0)/he.length,Rr=he.reduce((Ne,dt)=>Ne+dt.lateralThrust.asymmetryPercent,0)/he.length;console.log(`[Analysis Summary] Average values across ${he.length} trials:`,{rightAmplitude:Tn.toFixed(2),leftAmplitude:Rn.toFixed(2),asymmetry:Rr.toFixed(1)}),sessionStorage.setItem("recordedFrames",JSON.stringify(xn)),sessionStorage.setItem("allTrialResults",JSON.stringify({trials:he,bestTrialIndex:ot,averages:{rightAmplitude:Tn,leftAmplitude:Rn,asymmetry:Rr}})),t&&(await Nb(t.id),await r()),d(!1),M(0)}catch(q){console.error("[UploadPage] Analysis error:",q),_(q instanceof Error?q.message:""),d(!1),M(0)}},[a,E,te,J,ce]);return g.jsxs("div",{className:"upload-page",children:[g.jsxs("header",{className:"upload-header",children:[g.jsx("button",{className:"back-btn",onClick:()=>e("/"),children:" "}),g.jsx("h1",{children:""})]}),g.jsxs("main",{className:"upload-main",children:[i?g.jsxs("div",{className:"preview-container",children:[g.jsxs("div",{className:"video-wrapper",children:[g.jsx("video",{ref:ve,src:a||void 0,className:"preview-video",controls:!h,muted:!0,playsInline:!0}),g.jsx("canvas",{ref:Ae,className:`analysis-overlay ${h?"visible":""}`})]}),g.jsxs("div",{className:"file-info",children:[g.jsx("span",{className:"file-name",children:i.name}),g.jsx("button",{className:"change-file-btn",onClick:()=>{o(null),a&&URL.revokeObjectURL(a),u(null),k&&URL.revokeObjectURL(k),T(null)},disabled:h,children:""})]}),h&&g.jsxs("div",{className:"progress-container",children:[g.jsx("div",{className:"progress-bar",children:g.jsx("div",{className:"progress-fill",style:{width:`${p}%`}})}),g.jsxs("span",{className:"progress-text",children:[B>0?` ${B}/${te} `:"","... ",p,"%"]})]}),R&&g.jsxs("div",{className:"progress-container",children:[g.jsx("div",{className:"progress-bar",children:g.jsx("div",{className:"progress-fill",style:{width:`${V}%`}})}),g.jsxs("span",{className:"progress-text",children:["MP4... ",V,"%"]})]}),k&&!h&&!R&&g.jsxs("div",{className:"completion-actions",children:[g.jsx("div",{className:"success-message",children:" "}),g.jsxs("div",{className:"action-buttons",children:[g.jsx("a",{href:k,download:`gaitknee-analyzed-${Date.now()}.mp4`,className:"download-video-btn",children:" MP4"}),A&&g.jsx("a",{href:A,download:`gaitknee-analyzed-${Date.now()}.webm`,className:"download-video-btn secondary",children:" WebM"}),g.jsx("button",{onClick:()=>e("/results"),className:"view-results-btn",children:" "})]}),g.jsx("p",{className:"download-hint",children:" MP4WebM"})]})]}):g.jsxs("div",{className:"upload-zone",children:[g.jsx("input",{type:"file",accept:"video/*",onChange:G,className:"file-input",id:"video-input"}),g.jsxs("label",{htmlFor:"video-input",className:"upload-label",children:[g.jsx("div",{className:"upload-icon",children:""}),g.jsx("p",{className:"upload-text",children:""}),g.jsx("p",{className:"upload-hint",children:"MP4, MOV, WebM100MB"})]})]}),v&&g.jsx("div",{className:"error-message",children:v})]}),g.jsx("footer",{className:"upload-footer",children:g.jsx("button",{className:"btn btn-primary btn-large",onClick:P,disabled:!i||h||E,children:E?"...":h?"...":""})})]})}function U5(){const e=Vr(),[t,r]=x.useState([]),[i,o]=x.useState(!0),[a,u]=x.useState([]);x.useEffect(()=>{h()},[]);const h=x.useCallback(async()=>{o(!0);try{const E=await S5();r(E)}catch(E){console.error("Failed to load sessions:",E)}finally{o(!1)}},[]),d=x.useCallback(async E=>{if(confirm(""))try{await k5(E),r(S=>S.filter(k=>k.id!==E)),u(S=>S.filter(k=>k!==E))}catch(S){console.error("Failed to delete session:",S),alert("")}},[]),p=x.useCallback(E=>{sessionStorage.setItem("recordedFrames",JSON.stringify(E.frames)),e("/results")},[e]),y=x.useCallback(E=>{u(S=>S.includes(E)?S.filter(k=>k!==E):S.length<2?[...S,E]:S)},[]),v=x.useCallback(()=>{a.length===2&&e(`/compare?sessions=${a.join(",")}`)},[a,e]),_=E=>({low:"",moderate:"",high:""})[E];return i?g.jsx("div",{className:"history-page",children:g.jsxs("div",{className:"loading-container",children:[g.jsx("div",{className:"spinner"}),g.jsx("p",{children:"..."})]})}):g.jsxs("div",{className:"history-page",children:[g.jsxs("header",{className:"history-header",children:[g.jsx("button",{className:"back-btn",onClick:()=>e("/"),children:" "}),g.jsx("h1",{children:""}),a.length===2&&g.jsx("button",{className:"compare-btn",onClick:v,children:""})]}),g.jsxs("main",{className:"history-main",children:[t.length===0?g.jsxs("div",{className:"empty-state",children:[g.jsx("p",{children:""}),g.jsx("button",{className:"btn btn-primary",onClick:()=>e("/record"),children:""})]}):g.jsx("div",{className:"sessions-list",children:t.map(E=>g.jsxs("div",{className:`session-card ${a.includes(E.id)?"selected":""}`,children:[g.jsxs("div",{className:"session-header",children:[g.jsx("input",{type:"checkbox",checked:a.includes(E.id),onChange:()=>y(E.id),disabled:a.length>=2&&!a.includes(E.id)}),g.jsxs("div",{className:"session-info",children:[g.jsx("h3",{children:E.name}),g.jsx("span",{className:"session-date",children:new Date(E.timestamp).toLocaleString("ja-JP")})]})]}),E.notes&&g.jsx("p",{className:"session-notes",children:E.notes}),g.jsxs("div",{className:"session-metrics",children:[g.jsxs("div",{className:"metric",children:[g.jsx("span",{className:"metric-label",children:""}),g.jsxs("div",{className:"metric-value",children:[g.jsx("span",{className:`badge badge-${E.analysis.lateralThrust.rightKnee.severity}`,children:_(E.analysis.lateralThrust.rightKnee.severity)}),g.jsx("span",{children:E.analysis.lateralThrust.rightKnee.amplitude})]})]}),g.jsxs("div",{className:"metric",children:[g.jsx("span",{className:"metric-label",children:""}),g.jsxs("div",{className:"metric-value",children:[g.jsx("span",{className:`badge badge-${E.analysis.lateralThrust.leftKnee.severity}`,children:_(E.analysis.lateralThrust.leftKnee.severity)}),g.jsx("span",{children:E.analysis.lateralThrust.leftKnee.amplitude})]})]}),g.jsxs("div",{className:"metric",children:[g.jsx("span",{className:"metric-label",children:""}),g.jsxs("span",{className:"metric-value",children:[E.analysis.lateralThrust.asymmetryPercent,"%"]})]})]}),g.jsxs("div",{className:"session-actions",children:[g.jsx("button",{className:"btn btn-outline btn-small",onClick:()=>p(E),children:""}),g.jsx("button",{className:"btn btn-secondary btn-small",onClick:()=>d(E.id),children:""})]})]},E.id))}),a.length>0&&a.length<2&&g.jsx("div",{className:"selection-hint",children:"1"})]})]})}function F5(){const e=Vr(),[t]=Ev(),[r,i]=x.useState([null,null]),[o,a]=x.useState(!0);x.useEffect(()=>{var y;const p=((y=t.get("sessions"))==null?void 0:y.split(","))||[];if(p.length!==2){e("/history");return}Promise.all([tv(p[0]),tv(p[1])]).then(([v,_])=>{if(!v||!_){alert(""),e("/history");return}i([v,_]),a(!1)})},[t,e]);const u=x.useMemo(()=>{if(!r[0]||!r[1])return null;const[p,y]=r;return{rightKneeDiff:y.analysis.lateralThrust.rightKnee.amplitude-p.analysis.lateralThrust.rightKnee.amplitude,leftKneeDiff:y.analysis.lateralThrust.leftKnee.amplitude-p.analysis.lateralThrust.leftKnee.amplitude,asymmetryDiff:y.analysis.lateralThrust.asymmetryPercent-p.analysis.lateralThrust.asymmetryPercent,rightKneeChangePercent:(y.analysis.lateralThrust.rightKnee.amplitude-p.analysis.lateralThrust.rightKnee.amplitude)/(p.analysis.lateralThrust.rightKnee.amplitude||1)*100,leftKneeChangePercent:(y.analysis.lateralThrust.leftKnee.amplitude-p.analysis.lateralThrust.leftKnee.amplitude)/(p.analysis.lateralThrust.leftKnee.amplitude||1)*100}},[r]),h=p=>Math.abs(p)<.5?"":p>0?"":"",d=p=>({low:"",moderate:"",high:""})[p];return o||!r[0]||!r[1]?g.jsx("div",{className:"compare-page",children:g.jsxs("div",{className:"loading-container",children:[g.jsx("div",{className:"spinner"}),g.jsx("p",{children:"..."})]})}):g.jsxs("div",{className:"compare-page",children:[g.jsxs("header",{className:"compare-header",children:[g.jsx("button",{className:"back-btn",onClick:()=>e("/history"),children:" "}),g.jsx("h1",{children:""})]}),g.jsxs("main",{className:"compare-main",children:[g.jsxs("div",{className:"session-headers",children:[g.jsxs("div",{className:"session-header-card",children:[g.jsx("h2",{children:r[0].name}),g.jsx("p",{className:"session-date",children:new Date(r[0].timestamp).toLocaleString("ja-JP")}),r[0].notes&&g.jsx("p",{className:"session-notes",children:r[0].notes})]}),g.jsxs("div",{className:"session-header-card",children:[g.jsx("h2",{children:r[1].name}),g.jsx("p",{className:"session-date",children:new Date(r[1].timestamp).toLocaleString("ja-JP")}),r[1].notes&&g.jsx("p",{className:"session-notes",children:r[1].notes})]})]}),g.jsxs("section",{className:"comparison-summary",children:[g.jsx("h3",{children:""}),g.jsxs("div",{className:"summary-grid",children:[g.jsxs("div",{className:"summary-item",children:[g.jsx("span",{className:"summary-label",children:" Lateral Thrust"}),g.jsxs("div",{className:"summary-values",children:[g.jsxs("span",{children:[r[0].analysis.lateralThrust.rightKnee.amplitude," cm"]}),g.jsx("span",{className:"arrow",children:""}),g.jsxs("span",{children:[r[1].analysis.lateralThrust.rightKnee.amplitude," cm"]})]}),g.jsxs("div",{className:`change-indicator ${u.rightKneeDiff>0?"negative":u.rightKneeDiff<0?"positive":"neutral"}`,children:[h(u.rightKneeDiff),Math.abs(u.rightKneeDiff)>=.5&&g.jsxs("span",{className:"change-percent",children:["(",u.rightKneeChangePercent>0?"+":"",u.rightKneeChangePercent.toFixed(1),"%)"]})]})]}),g.jsxs("div",{className:"summary-item",children:[g.jsx("span",{className:"summary-label",children:" Lateral Thrust"}),g.jsxs("div",{className:"summary-values",children:[g.jsxs("span",{children:[r[0].analysis.lateralThrust.leftKnee.amplitude," cm"]}),g.jsx("span",{className:"arrow",children:""}),g.jsxs("span",{children:[r[1].analysis.lateralThrust.leftKnee.amplitude," cm"]})]}),g.jsxs("div",{className:`change-indicator ${u.leftKneeDiff>0?"negative":u.leftKneeDiff<0?"positive":"neutral"}`,children:[h(u.leftKneeDiff),Math.abs(u.leftKneeDiff)>=.5&&g.jsxs("span",{className:"change-percent",children:["(",u.leftKneeChangePercent>0?"+":"",u.leftKneeChangePercent.toFixed(1),"%)"]})]})]}),g.jsxs("div",{className:"summary-item",children:[g.jsx("span",{className:"summary-label",children:""}),g.jsxs("div",{className:"summary-values",children:[g.jsxs("span",{children:[r[0].analysis.lateralThrust.asymmetryPercent,"%"]}),g.jsx("span",{className:"arrow",children:""}),g.jsxs("span",{children:[r[1].analysis.lateralThrust.asymmetryPercent,"%"]})]}),g.jsxs("div",{className:`change-indicator ${u.asymmetryDiff>0?"negative":u.asymmetryDiff<0?"positive":"neutral"}`,children:[h(u.asymmetryDiff),Math.abs(u.asymmetryDiff)>=1&&g.jsxs("span",{className:"change-percent",children:["(",u.asymmetryDiff>0?"+":"",u.asymmetryDiff,"%)"]})]})]})]})]}),g.jsxs("section",{className:"detailed-comparison",children:[g.jsx("h3",{children:""}),g.jsx("div",{className:"comparison-table",children:g.jsxs("table",{children:[g.jsx("thead",{children:g.jsxs("tr",{children:[g.jsx("th",{children:""}),g.jsx("th",{children:r[0].name}),g.jsx("th",{children:r[1].name})]})}),g.jsxs("tbody",{children:[g.jsxs("tr",{children:[g.jsx("td",{children:" "}),g.jsxs("td",{children:[r[0].analysis.lateralThrust.rightKnee.amplitude," cm"]}),g.jsxs("td",{children:[r[1].analysis.lateralThrust.rightKnee.amplitude," cm"]})]}),g.jsxs("tr",{children:[g.jsx("td",{children:" "}),g.jsx("td",{children:g.jsx("span",{className:`badge badge-${r[0].analysis.lateralThrust.rightKnee.severity}`,children:d(r[0].analysis.lateralThrust.rightKnee.severity)})}),g.jsx("td",{children:g.jsx("span",{className:`badge badge-${r[1].analysis.lateralThrust.rightKnee.severity}`,children:d(r[1].analysis.lateralThrust.rightKnee.severity)})})]}),g.jsxs("tr",{children:[g.jsx("td",{children:" "}),g.jsxs("td",{children:[r[0].analysis.lateralThrust.leftKnee.amplitude," cm"]}),g.jsxs("td",{children:[r[1].analysis.lateralThrust.leftKnee.amplitude," cm"]})]}),g.jsxs("tr",{children:[g.jsx("td",{children:" "}),g.jsx("td",{children:g.jsx("span",{className:`badge badge-${r[0].analysis.lateralThrust.leftKnee.severity}`,children:d(r[0].analysis.lateralThrust.leftKnee.severity)})}),g.jsx("td",{children:g.jsx("span",{className:`badge badge-${r[1].analysis.lateralThrust.leftKnee.severity}`,children:d(r[1].analysis.lateralThrust.leftKnee.severity)})})]}),g.jsxs("tr",{children:[g.jsx("td",{children:""}),g.jsxs("td",{children:[r[0].analysis.duration.toFixed(1),""]}),g.jsxs("td",{children:[r[1].analysis.duration.toFixed(1),""]})]}),g.jsxs("tr",{children:[g.jsx("td",{children:""}),g.jsx("td",{children:r[0].analysis.totalFrames}),g.jsx("td",{children:r[1].analysis.totalFrames})]})]})]})})]}),g.jsxs("section",{className:"clinical-interpretation",children:[g.jsx("h3",{children:""}),g.jsx("div",{className:"interpretation-content",children:M5(r[0],r[1],u)})]})]})]})}function M5(e,t,r){const i=[],o=Math.floor((t.timestamp-e.timestamp)/864e5);return o>0&&i.push(`${o}`),Math.abs(r.rightKneeDiff)<.5?i.push("lateral thrust"):r.rightKneeDiff>0?i.push(`lateral thrust+${r.rightKneeDiff.toFixed(1)}`):i.push(`lateral thrust${r.rightKneeDiff.toFixed(1)}`),Math.abs(r.leftKneeDiff)<.5?i.push("lateral thrust"):r.leftKneeDiff>0?i.push(`lateral thrust+${r.leftKneeDiff.toFixed(1)}`):i.push(`lateral thrust${r.leftKneeDiff.toFixed(1)}`),Math.abs(r.asymmetryDiff)>5&&i.push(`${r.asymmetryDiff>0?"":""}`),i.join(" ")}function $5(){const e=Vr(),{signIn:t,signUp:r,signInWithGoogle:i,resetPassword:o}=po(),[a,u]=x.useState(!0),[h,d]=x.useState(""),[p,y]=x.useState(""),[v,_]=x.useState(""),[E,S]=x.useState(""),[k,T]=x.useState(""),[A,I]=x.useState(!1),[R,D]=x.useState(null),[V,F]=x.useState(null),B=async()=>{if(!h){D("");return}I(!0),D(null);const{error:te}=await o(h);te?D(""):F(""),I(!1)},M=async te=>{if(te.preventDefault(),D(null),F(null),!h||!p){D("");return}if(!a&&(!E||!k)){D("");return}if(!a&&p!==v){D("");return}if(p.length<6){D("6");return}I(!0);try{if(a){const{error:ve}=await t(h,p);ve?ve.message.includes("Invalid login")?D(""):D(ve.message):e("/")}else{const{error:ve}=await r(h,p,E,k);ve?D(ve.message):F("")}}catch{D("")}finally{I(!1)}};return g.jsx("div",{className:"login-page",children:g.jsxs("div",{className:"login-container",children:[g.jsxs("div",{className:"login-header",children:[g.jsx("h1",{children:"GaitKnee-View"}),g.jsx("p",{className:"login-subtitle",children:" Lateral Thrust "})]}),g.jsxs("div",{className:"login-card",children:[g.jsxs("div",{className:"login-tabs",children:[g.jsx("button",{className:`tab ${a?"active":""}`,onClick:()=>{u(!0),D(null),F(null)},children:""}),g.jsx("button",{className:`tab ${a?"":"active"}`,onClick:()=>{u(!1),D(null),F(null)},children:""})]}),g.jsxs("form",{onSubmit:M,className:"login-form",children:[g.jsxs("div",{className:"form-group",children:[g.jsx("label",{htmlFor:"email",children:""}),g.jsx("input",{type:"email",id:"email",value:h,onChange:te=>d(te.target.value),placeholder:"example@email.com",disabled:A})]}),g.jsxs("div",{className:"form-group",children:[g.jsx("label",{htmlFor:"password",children:""}),g.jsx("input",{type:"password",id:"password",value:p,onChange:te=>y(te.target.value),placeholder:"6",disabled:A}),a&&g.jsx("button",{type:"button",className:"forgot-password-link",onClick:B,disabled:A,children:""})]}),!a&&g.jsxs(g.Fragment,{children:[g.jsxs("div",{className:"form-row",children:[g.jsxs("div",{className:"form-group half",children:[g.jsxs("label",{htmlFor:"lastName",children:[" ",g.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),g.jsx("input",{type:"text",id:"lastName",value:E,onChange:te=>S(te.target.value),placeholder:"",disabled:A,required:!0})]}),g.jsxs("div",{className:"form-group half",children:[g.jsxs("label",{htmlFor:"firstName",children:[" ",g.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),g.jsx("input",{type:"text",id:"firstName",value:k,onChange:te=>T(te.target.value),placeholder:"",disabled:A,required:!0})]})]}),g.jsxs("div",{className:"form-group",children:[g.jsx("label",{htmlFor:"confirmPassword",children:""}),g.jsx("input",{type:"password",id:"confirmPassword",value:v,onChange:te=>_(te.target.value),placeholder:"",disabled:A})]})]}),R&&g.jsx("div",{className:"error-message",children:R}),V&&g.jsx("div",{className:"success-message",children:V}),g.jsx("button",{type:"submit",className:"submit-btn",disabled:A,children:A?"...":a?"":""})]}),g.jsx("div",{className:"divider",children:g.jsx("span",{children:""})}),g.jsxs("button",{className:"google-btn",onClick:async()=>{I(!0),await i()},disabled:A,children:[g.jsxs("svg",{viewBox:"0 0 24 24",width:"20",height:"20",children:[g.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),g.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),g.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),g.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),a?"Google":"Google"]}),g.jsxs("div",{className:"login-info",children:[g.jsx("p",{children:" 5"}),g.jsx("p",{children:" "})]})]})]})})}var D3="clover",B5=function(t){return t===3?"v3":t},U3="https://js.stripe.com",z5="".concat(U3,"/").concat(D3,"/stripe.js"),V5=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,W5=/^https:\/\/js\.stripe\.com\/(v3|[a-z]+)\/stripe\.js(\?.*)?$/;var K5=function(t){return V5.test(t)||W5.test(t)},H5=function(){for(var t=document.querySelectorAll('script[src^="'.concat(U3,'"]')),r=0;r<t.length;r++){var i=t[r];if(K5(i.src))return i}return null},iv=function(t){var r="",i=document.createElement("script");i.src="".concat(z5).concat(r);var o=document.head||document.body;if(!o)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return o.appendChild(i),i},G5=function(t,r){!t||!t._registerWrapper||t._registerWrapper({name:"stripe-js",version:"8.6.0",startTime:r})},ya=null,vu=null,wu=null,q5=function(t){return function(r){t(new Error("Failed to load Stripe.js",{cause:r}))}},J5=function(t,r){return function(){window.Stripe?t(window.Stripe):r(new Error("Stripe.js not available"))}},X5=function(t){return ya!==null?ya:(ya=new Promise(function(r,i){if(typeof window>"u"||typeof document>"u"){r(null);return}if(window.Stripe){r(window.Stripe);return}try{var o=H5();if(!(o&&t)){if(!o)o=iv(t);else if(o&&wu!==null&&vu!==null){var a;o.removeEventListener("load",wu),o.removeEventListener("error",vu),(a=o.parentNode)===null||a===void 0||a.removeChild(o),o=iv(t)}}wu=J5(r,i),vu=q5(i),o.addEventListener("load",wu),o.addEventListener("error",vu)}catch(u){i(u);return}}),ya.catch(function(r){return ya=null,Promise.reject(r)}))},Y5=function(t,r,i){if(t===null)return null;var o=r[0],a=o.match(/^pk_test/),u=B5(t.version),h=D3;a&&u!==h&&console.warn("Stripe.js@".concat(u," was loaded on the page, but @stripe/stripe-js@").concat("8.6.0"," expected Stripe.js@").concat(h,". This may result in unexpected behavior. For more information, see https://docs.stripe.com/sdks/stripejs-versioning"));var d=t.apply(void 0,r);return G5(d,i),d},va,F3=!1,M3=function(){return va||(va=X5(null).catch(function(t){return va=null,Promise.reject(t)}),va)};Promise.resolve().then(function(){return M3()}).catch(function(e){F3||console.warn(e)});var Q5=function(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];F3=!0;var o=Date.now();return M3().then(function(a){return Y5(a,r,o)})};const Z5="pk_live_51MY7g4FcZOGgYBHRkGUCoflQLEPkYgaD0cRUKXTRR0JjIphFzZanWHzlVn73I3gt3QDyUMi6L2ljcCNahVlPUtfD00kpPnEdPZ";Q5(Z5);const eT=[{id:"5_credits",name:"5",credits:5,price:980,priceId:"price_1SfNRfFcZOGgYBHRcFIr2QUO",description:""},{id:"10_credits",name:"10",credits:10,price:1980,priceId:"price_1SfNSDFcZOGgYBHRKXKA81SG",description:"No.1",popular:!0},{id:"30_credits",name:"30",credits:30,price:4980,priceId:"price_1SfNTCFcZOGgYBHRu1p1nFaS",description:"17%"}];function tT(){const e=Vr(),[t]=Ev(),{user:r,usage:i,refreshUsage:o}=po(),[a,u]=x.useState(null),h=t.get("success"),d=t.get("canceled");h==="true"&&o();const p=async y=>{if(!r){e("/login");return}u(y.id);try{const{data:v,error:_}=await At.functions.invoke("create-checkout-session",{body:{priceId:y.priceId,credits:y.credits,userId:r.id,userEmail:r.email}});if(_){console.error("Checkout error:",_),alert("");return}v!=null&&v.url&&(window.location.href=v.url)}catch(v){console.error("Purchase error:",v),alert("")}finally{u(null)}};return g.jsxs("div",{className:"purchase-page",children:[g.jsxs("header",{className:"purchase-header",children:[g.jsx("button",{className:"back-btn",onClick:()=>e("/"),children:" "}),g.jsx("h1",{children:""})]}),g.jsxs("main",{className:"purchase-main",children:[h==="true"&&g.jsx("div",{className:"success-message",children:" "}),d==="true"&&g.jsx("div",{className:"canceled-message",children:""}),g.jsxs("div",{className:"current-credits",children:[g.jsx("span",{className:"credits-label",children:""}),g.jsx("span",{className:"credits-value",children:(i==null?void 0:i.remaining)||0})]}),g.jsx("div",{className:"packs-grid",children:eT.map(y=>g.jsxs("div",{className:`pack-card ${y.popular?"popular":""}`,children:[y.popular&&g.jsx("div",{className:"popular-badge",children:""}),g.jsx("h2",{className:"pack-name",children:y.name}),g.jsxs("div",{className:"pack-credits",children:[y.credits,""]}),g.jsxs("div",{className:"pack-price",children:[g.jsx("span",{className:"price-yen",children:""}),g.jsx("span",{className:"price-value",children:y.price.toLocaleString()})]}),g.jsxs("div",{className:"pack-unit",children:["",Math.round(y.price/y.credits),"/"]}),g.jsx("p",{className:"pack-description",children:y.description}),g.jsx("button",{className:"purchase-btn",onClick:()=>p(y),disabled:a===y.id,children:a===y.id?"...":""})]},y.id))}),g.jsxs("div",{className:"purchase-notes",children:[g.jsx("h3",{children:""}),g.jsxs("ul",{children:[g.jsx("li",{children:""}),g.jsx("li",{children:"5"}),g.jsx("li",{children:""})]})]})]})]})}function rT(){const e=Vr(),{user:t}=po(),[r,i]=x.useState(""),[o,a]=x.useState(""),[u,h]=x.useState(!1),[d,p]=x.useState(null),y=async v=>{if(v.preventDefault(),p(null),!r.trim()||!o.trim()){p("");return}if(!t){p("");return}h(!0);try{const{data:_}=await At.from("profiles").select("*").eq("id",t.id).single();if(_){const{error:E}=await At.from("profiles").update({last_name:r.trim(),first_name:o.trim()}).eq("id",t.id);if(E)throw E}else{const{error:E}=await At.from("profiles").insert({id:t.id,last_name:r.trim(),first_name:o.trim()});if(E)throw E}e("/")}catch(_){console.error("Profile update error:",_),p("")}finally{h(!1)}};return g.jsx("div",{className:"login-page",children:g.jsxs("div",{className:"login-container",children:[g.jsxs("div",{className:"login-header",children:[g.jsx("h1",{children:"GaitKnee-View"}),g.jsx("p",{className:"login-subtitle",children:""})]}),g.jsxs("div",{className:"login-card",children:[g.jsx("div",{style:{textAlign:"center",marginBottom:"1.5rem"},children:g.jsxs("p",{style:{color:"#64748b",fontSize:"0.95rem"},children:["",g.jsx("br",{}),""]})}),g.jsxs("form",{onSubmit:y,className:"login-form",children:[g.jsxs("div",{className:"form-row",children:[g.jsxs("div",{className:"form-group half",children:[g.jsxs("label",{htmlFor:"lastName",children:[" ",g.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),g.jsx("input",{type:"text",id:"lastName",value:r,onChange:v=>i(v.target.value),placeholder:"",disabled:u,required:!0})]}),g.jsxs("div",{className:"form-group half",children:[g.jsxs("label",{htmlFor:"firstName",children:[" ",g.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),g.jsx("input",{type:"text",id:"firstName",value:o,onChange:v=>a(v.target.value),placeholder:"",disabled:u,required:!0})]})]}),d&&g.jsx("div",{className:"error-message",children:d}),g.jsx("button",{type:"submit",className:"submit-btn",disabled:u,children:u?"...":""})]})]})]})})}function qs({children:e}){const{user:t,loading:r,profileLoading:i,isProfileComplete:o}=po(),a=kn();return r||i?g.jsxs("div",{className:"loading-screen",children:[g.jsx("div",{className:"spinner"}),g.jsx("p",{children:"..."})]}):t?!o&&a.pathname!=="/complete-profile"?g.jsx(o1,{to:"/complete-profile",replace:!0}):g.jsx(g.Fragment,{children:e}):g.jsx(o1,{to:"/login",replace:!0})}function nT(){return g.jsxs($E,{children:[g.jsx(gn,{path:"/login",element:g.jsx($5,{})}),g.jsx(gn,{path:"/complete-profile",element:g.jsx(rT,{})}),g.jsx(gn,{path:"/",element:g.jsx(qs,{children:g.jsx(Lb,{})})}),g.jsx(gn,{path:"/record",element:g.jsx(qs,{children:g.jsx(d5,{})})}),g.jsx(gn,{path:"/upload",element:g.jsx(qs,{children:g.jsx(D5,{})})}),g.jsx(gn,{path:"/results",element:g.jsx(qs,{children:g.jsx(b5,{})})}),g.jsx(gn,{path:"/history",element:g.jsx(qs,{children:g.jsx(U5,{})})}),g.jsx(gn,{path:"/compare",element:g.jsx(qs,{children:g.jsx(F5,{})})}),g.jsx(gn,{path:"/purchase",element:g.jsx(qs,{children:g.jsx(tT,{})})})]})}function sT(){return g.jsx(Ib,{children:g.jsx(nT,{})})}function iT(){"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/service-worker.js").then(e=>{console.log("[PWA] Service Worker registered:",e.scope),setInterval(()=>{e.update()},6e4)}).catch(e=>{console.error("[PWA] Service Worker registration failed:",e)})})}function oT(){let e=null;window.addEventListener("beforeinstallprompt",t=>{t.preventDefault(),e=t,console.log("[PWA] Install prompt available")}),window.installPWA=()=>{if(!e){console.log("[PWA] Install prompt not available");return}e.prompt(),e.userChoice.then(t=>{t.outcome==="accepted"?console.log("[PWA] User accepted install prompt"):console.log("[PWA] User dismissed install prompt"),e=null})}}q4.createRoot(document.getElementById("root")).render(g.jsx(x.StrictMode,{children:g.jsx(cS,{children:g.jsx(sT,{})})}));iT();oT();
