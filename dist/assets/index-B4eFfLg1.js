var L4=Object.defineProperty;var V0=e=>{throw TypeError(e)};var D4=(e,t,r)=>t in e?L4(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var Ht=(e,t,r)=>D4(e,typeof t!="symbol"?t+"":t,r),W0=(e,t,r)=>t.has(e)||V0("Cannot "+r);var we=(e,t,r)=>(W0(e,t,"read from private field"),r?r.call(e):t.get(e)),ms=(e,t,r)=>t.has(e)?V0("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),la=(e,t,r,i)=>(W0(e,t,"write to private field"),i?i.call(e,r):t.set(e,r),r);function U4(e,t){for(var r=0;r<t.length;r++){const i=t[r];if(typeof i!="string"&&!Array.isArray(i)){for(const o in i)if(o!=="default"&&!(o in e)){const a=Object.getOwnPropertyDescriptor(i,o);a&&Object.defineProperty(e,o,a.get?a:{enumerable:!0,get:()=>i[o]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const u of a.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function r(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(o){if(o.ep)return;o.ep=!0;const a=r(o);fetch(o.href,a)}})();function F4(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function La(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var t=e.default;if(typeof t=="function"){var r=function i(){return this instanceof i?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(i){var o=Object.getOwnPropertyDescriptor(e,i);Object.defineProperty(r,i,o.get?o:{enumerable:!0,get:function(){return e[i]}})}),r}var Ed={exports:{}},ua={},Sd={exports:{}},_e={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var K0;function M4(){if(K0)return _e;K0=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),u=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),v=Symbol.iterator;function _(j){return j===null||typeof j!="object"?null:(j=v&&j[v]||j["@@iterator"],typeof j=="function"?j:null)}var E={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,k={};function x(j,D,M){this.props=j,this.context=D,this.refs=k,this.updater=M||E}x.prototype.isReactComponent={},x.prototype.setState=function(j,D){if(typeof j!="object"&&typeof j!="function"&&j!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,j,D,"setState")},x.prototype.forceUpdate=function(j){this.updater.enqueueForceUpdate(this,j,"forceUpdate")};function P(){}P.prototype=x.prototype;function L(j,D,M){this.props=j,this.context=D,this.refs=k,this.updater=M||E}var R=L.prototype=new P;R.constructor=L,S(R,x.prototype),R.isPureReactComponent=!0;var U=Array.isArray,G=Object.prototype.hasOwnProperty,B={current:null},W={key:!0,ref:!0,__self:!0,__source:!0};function F(j,D,M){var Y,q={},pe=null,ve=null;if(D!=null)for(Y in D.ref!==void 0&&(ve=D.ref),D.key!==void 0&&(pe=""+D.key),D)G.call(D,Y)&&!W.hasOwnProperty(Y)&&(q[Y]=D[Y]);var ce=arguments.length-2;if(ce===1)q.children=M;else if(1<ce){for(var Ae=Array(ce),it=0;it<ce;it++)Ae[it]=arguments[it+2];q.children=Ae}if(j&&j.defaultProps)for(Y in ce=j.defaultProps,ce)q[Y]===void 0&&(q[Y]=ce[Y]);return{$$typeof:e,type:j,key:pe,ref:ve,props:q,_owner:B.current}}function ge(j,D){return{$$typeof:e,type:j.type,key:D,ref:j.ref,props:j.props,_owner:j._owner}}function Re(j){return typeof j=="object"&&j!==null&&j.$$typeof===e}function ct(j){var D={"=":"=0",":":"=2"};return"$"+j.replace(/[=:]/g,function(M){return D[M]})}var We=/\/+/g;function kt(j,D){return typeof j=="object"&&j!==null&&j.key!=null?ct(""+j.key):D.toString(36)}function bt(j,D,M,Y,q){var pe=typeof j;(pe==="undefined"||pe==="boolean")&&(j=null);var ve=!1;if(j===null)ve=!0;else switch(pe){case"string":case"number":ve=!0;break;case"object":switch(j.$$typeof){case e:case t:ve=!0}}if(ve)return ve=j,q=q(ve),j=Y===""?"."+kt(ve,0):Y,U(q)?(M="",j!=null&&(M=j.replace(We,"$&/")+"/"),bt(q,D,M,"",function(it){return it})):q!=null&&(Re(q)&&(q=ge(q,M+(!q.key||ve&&ve.key===q.key?"":(""+q.key).replace(We,"$&/")+"/")+j)),D.push(q)),1;if(ve=0,Y=Y===""?".":Y+":",U(j))for(var ce=0;ce<j.length;ce++){pe=j[ce];var Ae=Y+kt(pe,ce);ve+=bt(pe,D,M,Ae,q)}else if(Ae=_(j),typeof Ae=="function")for(j=Ae.call(j),ce=0;!(pe=j.next()).done;)pe=pe.value,Ae=Y+kt(pe,ce++),ve+=bt(pe,D,M,Ae,q);else if(pe==="object")throw D=String(j),Error("Objects are not valid as a React child (found: "+(D==="[object Object]"?"object with keys {"+Object.keys(j).join(", ")+"}":D)+"). If you meant to render a collection of children, use an array instead.");return ve}function Ke(j,D,M){if(j==null)return j;var Y=[],q=0;return bt(j,Y,"","",function(pe){return D.call(M,pe,q++)}),Y}function ht(j){if(j._status===-1){var D=j._result;D=D(),D.then(function(M){(j._status===0||j._status===-1)&&(j._status=1,j._result=M)},function(M){(j._status===0||j._status===-1)&&(j._status=2,j._result=M)}),j._status===-1&&(j._status=0,j._result=D)}if(j._status===1)return j._result.default;throw j._result}var be={current:null},H={transition:null},ue={ReactCurrentDispatcher:be,ReactCurrentBatchConfig:H,ReactCurrentOwner:B};function J(){throw Error("act(...) is not supported in production builds of React.")}return _e.Children={map:Ke,forEach:function(j,D,M){Ke(j,function(){D.apply(this,arguments)},M)},count:function(j){var D=0;return Ke(j,function(){D++}),D},toArray:function(j){return Ke(j,function(D){return D})||[]},only:function(j){if(!Re(j))throw Error("React.Children.only expected to receive a single React element child.");return j}},_e.Component=x,_e.Fragment=r,_e.Profiler=o,_e.PureComponent=L,_e.StrictMode=i,_e.Suspense=d,_e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ue,_e.act=J,_e.cloneElement=function(j,D,M){if(j==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+j+".");var Y=S({},j.props),q=j.key,pe=j.ref,ve=j._owner;if(D!=null){if(D.ref!==void 0&&(pe=D.ref,ve=B.current),D.key!==void 0&&(q=""+D.key),j.type&&j.type.defaultProps)var ce=j.type.defaultProps;for(Ae in D)G.call(D,Ae)&&!W.hasOwnProperty(Ae)&&(Y[Ae]=D[Ae]===void 0&&ce!==void 0?ce[Ae]:D[Ae])}var Ae=arguments.length-2;if(Ae===1)Y.children=M;else if(1<Ae){ce=Array(Ae);for(var it=0;it<Ae;it++)ce[it]=arguments[it+2];Y.children=ce}return{$$typeof:e,type:j.type,key:q,ref:pe,props:Y,_owner:ve}},_e.createContext=function(j){return j={$$typeof:u,_currentValue:j,_currentValue2:j,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},j.Provider={$$typeof:a,_context:j},j.Consumer=j},_e.createElement=F,_e.createFactory=function(j){var D=F.bind(null,j);return D.type=j,D},_e.createRef=function(){return{current:null}},_e.forwardRef=function(j){return{$$typeof:h,render:j}},_e.isValidElement=Re,_e.lazy=function(j){return{$$typeof:g,_payload:{_status:-1,_result:j},_init:ht}},_e.memo=function(j,D){return{$$typeof:p,type:j,compare:D===void 0?null:D}},_e.startTransition=function(j){var D=H.transition;H.transition={};try{j()}finally{H.transition=D}},_e.unstable_act=J,_e.useCallback=function(j,D){return be.current.useCallback(j,D)},_e.useContext=function(j){return be.current.useContext(j)},_e.useDebugValue=function(){},_e.useDeferredValue=function(j){return be.current.useDeferredValue(j)},_e.useEffect=function(j,D){return be.current.useEffect(j,D)},_e.useId=function(){return be.current.useId()},_e.useImperativeHandle=function(j,D,M){return be.current.useImperativeHandle(j,D,M)},_e.useInsertionEffect=function(j,D){return be.current.useInsertionEffect(j,D)},_e.useLayoutEffect=function(j,D){return be.current.useLayoutEffect(j,D)},_e.useMemo=function(j,D){return be.current.useMemo(j,D)},_e.useReducer=function(j,D,M){return be.current.useReducer(j,D,M)},_e.useRef=function(j){return be.current.useRef(j)},_e.useState=function(j){return be.current.useState(j)},_e.useSyncExternalStore=function(j,D,M){return be.current.useSyncExternalStore(j,D,M)},_e.useTransition=function(){return be.current.useTransition()},_e.version="18.3.1",_e}var H0;function Df(){return H0||(H0=1,Sd.exports=M4()),Sd.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var G0;function $4(){if(G0)return ua;G0=1;var e=Df(),t=Symbol.for("react.element"),r=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,o=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function u(h,d,p){var g,v={},_=null,E=null;p!==void 0&&(_=""+p),d.key!==void 0&&(_=""+d.key),d.ref!==void 0&&(E=d.ref);for(g in d)i.call(d,g)&&!a.hasOwnProperty(g)&&(v[g]=d[g]);if(h&&h.defaultProps)for(g in d=h.defaultProps,d)v[g]===void 0&&(v[g]=d[g]);return{$$typeof:t,type:h,key:_,ref:E,props:v,_owner:o.current}}return ua.Fragment=r,ua.jsx=u,ua.jsxs=u,ua}var q0;function B4(){return q0||(q0=1,Ed.exports=$4()),Ed.exports}var y=B4(),T=Df(),ru={},kd={exports:{}},ir={},bd={exports:{}},xd={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var J0;function z4(){return J0||(J0=1,(function(e){function t(H,ue){var J=H.length;H.push(ue);e:for(;0<J;){var j=J-1>>>1,D=H[j];if(0<o(D,ue))H[j]=ue,H[J]=D,J=j;else break e}}function r(H){return H.length===0?null:H[0]}function i(H){if(H.length===0)return null;var ue=H[0],J=H.pop();if(J!==ue){H[0]=J;e:for(var j=0,D=H.length,M=D>>>1;j<M;){var Y=2*(j+1)-1,q=H[Y],pe=Y+1,ve=H[pe];if(0>o(q,J))pe<D&&0>o(ve,q)?(H[j]=ve,H[pe]=J,j=pe):(H[j]=q,H[Y]=J,j=Y);else if(pe<D&&0>o(ve,J))H[j]=ve,H[pe]=J,j=pe;else break e}}return ue}function o(H,ue){var J=H.sortIndex-ue.sortIndex;return J!==0?J:H.id-ue.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var u=Date,h=u.now();e.unstable_now=function(){return u.now()-h}}var d=[],p=[],g=1,v=null,_=3,E=!1,S=!1,k=!1,x=typeof setTimeout=="function"?setTimeout:null,P=typeof clearTimeout=="function"?clearTimeout:null,L=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function R(H){for(var ue=r(p);ue!==null;){if(ue.callback===null)i(p);else if(ue.startTime<=H)i(p),ue.sortIndex=ue.expirationTime,t(d,ue);else break;ue=r(p)}}function U(H){if(k=!1,R(H),!S)if(r(d)!==null)S=!0,ht(G);else{var ue=r(p);ue!==null&&be(U,ue.startTime-H)}}function G(H,ue){S=!1,k&&(k=!1,P(F),F=-1),E=!0;var J=_;try{for(R(ue),v=r(d);v!==null&&(!(v.expirationTime>ue)||H&&!ct());){var j=v.callback;if(typeof j=="function"){v.callback=null,_=v.priorityLevel;var D=j(v.expirationTime<=ue);ue=e.unstable_now(),typeof D=="function"?v.callback=D:v===r(d)&&i(d),R(ue)}else i(d);v=r(d)}if(v!==null)var M=!0;else{var Y=r(p);Y!==null&&be(U,Y.startTime-ue),M=!1}return M}finally{v=null,_=J,E=!1}}var B=!1,W=null,F=-1,ge=5,Re=-1;function ct(){return!(e.unstable_now()-Re<ge)}function We(){if(W!==null){var H=e.unstable_now();Re=H;var ue=!0;try{ue=W(!0,H)}finally{ue?kt():(B=!1,W=null)}}else B=!1}var kt;if(typeof L=="function")kt=function(){L(We)};else if(typeof MessageChannel<"u"){var bt=new MessageChannel,Ke=bt.port2;bt.port1.onmessage=We,kt=function(){Ke.postMessage(null)}}else kt=function(){x(We,0)};function ht(H){W=H,B||(B=!0,kt())}function be(H,ue){F=x(function(){H(e.unstable_now())},ue)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(H){H.callback=null},e.unstable_continueExecution=function(){S||E||(S=!0,ht(G))},e.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ge=0<H?Math.floor(1e3/H):5},e.unstable_getCurrentPriorityLevel=function(){return _},e.unstable_getFirstCallbackNode=function(){return r(d)},e.unstable_next=function(H){switch(_){case 1:case 2:case 3:var ue=3;break;default:ue=_}var J=_;_=ue;try{return H()}finally{_=J}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(H,ue){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var J=_;_=H;try{return ue()}finally{_=J}},e.unstable_scheduleCallback=function(H,ue,J){var j=e.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?j+J:j):J=j,H){case 1:var D=-1;break;case 2:D=250;break;case 5:D=1073741823;break;case 4:D=1e4;break;default:D=5e3}return D=J+D,H={id:g++,callback:ue,priorityLevel:H,startTime:J,expirationTime:D,sortIndex:-1},J>j?(H.sortIndex=J,t(p,H),r(d)===null&&H===r(p)&&(k?(P(F),F=-1):k=!0,be(U,J-j))):(H.sortIndex=D,t(d,H),S||E||(S=!0,ht(G))),H},e.unstable_shouldYield=ct,e.unstable_wrapCallback=function(H){var ue=_;return function(){var J=_;_=ue;try{return H.apply(this,arguments)}finally{_=J}}}})(xd)),xd}var X0;function V4(){return X0||(X0=1,bd.exports=z4()),bd.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Y0;function W4(){if(Y0)return ir;Y0=1;var e=Df(),t=V4();function r(n){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+n,l=1;l<arguments.length;l++)s+="&args[]="+encodeURIComponent(arguments[l]);return"Minified React error #"+n+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,o={};function a(n,s){u(n,s),u(n+"Capture",s)}function u(n,s){for(o[n]=s,n=0;n<s.length;n++)i.add(s[n])}var h=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),d=Object.prototype.hasOwnProperty,p=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,g={},v={};function _(n){return d.call(v,n)?!0:d.call(g,n)?!1:p.test(n)?v[n]=!0:(g[n]=!0,!1)}function E(n,s,l,c){if(l!==null&&l.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return c?!1:l!==null?!l.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function S(n,s,l,c){if(s===null||typeof s>"u"||E(n,s,l,c))return!0;if(c)return!1;if(l!==null)switch(l.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function k(n,s,l,c,f,m,w){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=c,this.attributeNamespace=f,this.mustUseProperty=l,this.propertyName=n,this.type=s,this.sanitizeURL=m,this.removeEmptyString=w}var x={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){x[n]=new k(n,0,!1,n,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var s=n[0];x[s]=new k(s,1,!1,n[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(n){x[n]=new k(n,2,!1,n.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){x[n]=new k(n,2,!1,n,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){x[n]=new k(n,3,!1,n.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(n){x[n]=new k(n,3,!0,n,null,!1,!1)}),["capture","download"].forEach(function(n){x[n]=new k(n,4,!1,n,null,!1,!1)}),["cols","rows","size","span"].forEach(function(n){x[n]=new k(n,6,!1,n,null,!1,!1)}),["rowSpan","start"].forEach(function(n){x[n]=new k(n,5,!1,n.toLowerCase(),null,!1,!1)});var P=/[\-:]([a-z])/g;function L(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var s=n.replace(P,L);x[s]=new k(s,1,!1,n,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var s=n.replace(P,L);x[s]=new k(s,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(n){var s=n.replace(P,L);x[s]=new k(s,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(n){x[n]=new k(n,1,!1,n.toLowerCase(),null,!1,!1)}),x.xlinkHref=new k("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(n){x[n]=new k(n,1,!1,n.toLowerCase(),null,!0,!0)});function R(n,s,l,c){var f=x.hasOwnProperty(s)?x[s]:null;(f!==null?f.type!==0:c||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(S(s,l,f,c)&&(l=null),c||f===null?_(s)&&(l===null?n.removeAttribute(s):n.setAttribute(s,""+l)):f.mustUseProperty?n[f.propertyName]=l===null?f.type===3?!1:"":l:(s=f.attributeName,c=f.attributeNamespace,l===null?n.removeAttribute(s):(f=f.type,l=f===3||f===4&&l===!0?"":""+l,c?n.setAttributeNS(c,s,l):n.setAttribute(s,l))))}var U=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,G=Symbol.for("react.element"),B=Symbol.for("react.portal"),W=Symbol.for("react.fragment"),F=Symbol.for("react.strict_mode"),ge=Symbol.for("react.profiler"),Re=Symbol.for("react.provider"),ct=Symbol.for("react.context"),We=Symbol.for("react.forward_ref"),kt=Symbol.for("react.suspense"),bt=Symbol.for("react.suspense_list"),Ke=Symbol.for("react.memo"),ht=Symbol.for("react.lazy"),be=Symbol.for("react.offscreen"),H=Symbol.iterator;function ue(n){return n===null||typeof n!="object"?null:(n=H&&n[H]||n["@@iterator"],typeof n=="function"?n:null)}var J=Object.assign,j;function D(n){if(j===void 0)try{throw Error()}catch(l){var s=l.stack.trim().match(/\n( *(at )?)/);j=s&&s[1]||""}return`
`+j+n}var M=!1;function Y(n,s){if(!n||M)return"";M=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch(I){var c=I}Reflect.construct(n,[],s)}else{try{s.call()}catch(I){c=I}n.call(s.prototype)}else{try{throw Error()}catch(I){c=I}n()}}catch(I){if(I&&c&&typeof I.stack=="string"){for(var f=I.stack.split(`
`),m=c.stack.split(`
`),w=f.length-1,b=m.length-1;1<=w&&0<=b&&f[w]!==m[b];)b--;for(;1<=w&&0<=b;w--,b--)if(f[w]!==m[b]){if(w!==1||b!==1)do if(w--,b--,0>b||f[w]!==m[b]){var A=`
`+f[w].replace(" at new "," at ");return n.displayName&&A.includes("<anonymous>")&&(A=A.replace("<anonymous>",n.displayName)),A}while(1<=w&&0<=b);break}}}finally{M=!1,Error.prepareStackTrace=l}return(n=n?n.displayName||n.name:"")?D(n):""}function q(n){switch(n.tag){case 5:return D(n.type);case 16:return D("Lazy");case 13:return D("Suspense");case 19:return D("SuspenseList");case 0:case 2:case 15:return n=Y(n.type,!1),n;case 11:return n=Y(n.type.render,!1),n;case 1:return n=Y(n.type,!0),n;default:return""}}function pe(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case W:return"Fragment";case B:return"Portal";case ge:return"Profiler";case F:return"StrictMode";case kt:return"Suspense";case bt:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case ct:return(n.displayName||"Context")+".Consumer";case Re:return(n._context.displayName||"Context")+".Provider";case We:var s=n.render;return n=n.displayName,n||(n=s.displayName||s.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case Ke:return s=n.displayName||null,s!==null?s:pe(n.type)||"Memo";case ht:s=n._payload,n=n._init;try{return pe(n(s))}catch{}}return null}function ve(n){var s=n.type;switch(n.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=s.render,n=n.displayName||n.name||"",s.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return pe(s);case 8:return s===F?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function ce(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Ae(n){var s=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function it(n){var s=Ae(n)?"checked":"value",l=Object.getOwnPropertyDescriptor(n.constructor.prototype,s),c=""+n[s];if(!n.hasOwnProperty(s)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var f=l.get,m=l.set;return Object.defineProperty(n,s,{configurable:!0,get:function(){return f.call(this)},set:function(w){c=""+w,m.call(this,w)}}),Object.defineProperty(n,s,{enumerable:l.enumerable}),{getValue:function(){return c},setValue:function(w){c=""+w},stopTracking:function(){n._valueTracker=null,delete n[s]}}}}function Vr(n){n._valueTracker||(n._valueTracker=it(n))}function So(n){if(!n)return!1;var s=n._valueTracker;if(!s)return!0;var l=s.getValue(),c="";return n&&(c=Ae(n)?n.checked?"true":"false":n.value),n=c,n!==l?(s.setValue(n),!0):!1}function an(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function zt(n,s){var l=s.checked;return J({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:l??n._wrapperState.initialChecked})}function ln(n,s){var l=s.defaultValue==null?"":s.defaultValue,c=s.checked!=null?s.checked:s.defaultChecked;l=ce(s.value!=null?s.value:l),n._wrapperState={initialChecked:c,initialValue:l,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function Le(n,s){s=s.checked,s!=null&&R(n,"checked",s,!1)}function ke(n,s){Le(n,s);var l=ce(s.value),c=s.type;if(l!=null)c==="number"?(l===0&&n.value===""||n.value!=l)&&(n.value=""+l):n.value!==""+l&&(n.value=""+l);else if(c==="submit"||c==="reset"){n.removeAttribute("value");return}s.hasOwnProperty("value")?vt(n,s.type,l):s.hasOwnProperty("defaultValue")&&vt(n,s.type,ce(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(n.defaultChecked=!!s.defaultChecked)}function Jn(n,s,l){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var c=s.type;if(!(c!=="submit"&&c!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+n._wrapperState.initialValue,l||s===n.value||(n.value=s),n.defaultValue=s}l=n.name,l!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,l!==""&&(n.name=l)}function vt(n,s,l){(s!=="number"||an(n.ownerDocument)!==n)&&(l==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+l&&(n.defaultValue=""+l))}var Ct=Array.isArray;function Qt(n,s,l,c){if(n=n.options,s){s={};for(var f=0;f<l.length;f++)s["$"+l[f]]=!0;for(l=0;l<n.length;l++)f=s.hasOwnProperty("$"+n[l].value),n[l].selected!==f&&(n[l].selected=f),f&&c&&(n[l].defaultSelected=!0)}else{for(l=""+ce(l),s=null,f=0;f<n.length;f++){if(n[f].value===l){n[f].selected=!0,c&&(n[f].defaultSelected=!0);return}s!==null||n[f].disabled||(s=n[f])}s!==null&&(s.selected=!0)}}function Vt(n,s){if(s.dangerouslySetInnerHTML!=null)throw Error(r(91));return J({},s,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function Zt(n,s){var l=s.value;if(l==null){if(l=s.children,s=s.defaultValue,l!=null){if(s!=null)throw Error(r(92));if(Ct(l)){if(1<l.length)throw Error(r(93));l=l[0]}s=l}s==null&&(s=""),l=s}n._wrapperState={initialValue:ce(l)}}function ko(n,s){var l=ce(s.value),c=ce(s.defaultValue);l!=null&&(l=""+l,l!==n.value&&(n.value=l),s.defaultValue==null&&n.defaultValue!==l&&(n.defaultValue=l)),c!=null&&(n.defaultValue=""+c)}function li(n){var s=n.textContent;s===n._wrapperState.initialValue&&s!==""&&s!==null&&(n.value=s)}function Ga(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Oc(n,s){return n==null||n==="http://www.w3.org/1999/xhtml"?Ga(s):n==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var qa,nm=(function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,l,c,f){MSApp.execUnsafeLocalFunction(function(){return n(s,l,c,f)})}:n})(function(n,s){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=s;else{for(qa=qa||document.createElement("div"),qa.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=qa.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;s.firstChild;)n.appendChild(s.firstChild)}});function bo(n,s){if(s){var l=n.firstChild;if(l&&l===n.lastChild&&l.nodeType===3){l.nodeValue=s;return}}n.textContent=s}var xo={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},M3=["Webkit","ms","Moz","O"];Object.keys(xo).forEach(function(n){M3.forEach(function(s){s=s+n.charAt(0).toUpperCase()+n.substring(1),xo[s]=xo[n]})});function sm(n,s,l){return s==null||typeof s=="boolean"||s===""?"":l||typeof s!="number"||s===0||xo.hasOwnProperty(n)&&xo[n]?(""+s).trim():s+"px"}function im(n,s){n=n.style;for(var l in s)if(s.hasOwnProperty(l)){var c=l.indexOf("--")===0,f=sm(l,s[l],c);l==="float"&&(l="cssFloat"),c?n.setProperty(l,f):n[l]=f}}var $3=J({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Nc(n,s){if(s){if($3[n]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(r(137,n));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(r(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(r(61))}if(s.style!=null&&typeof s.style!="object")throw Error(r(62))}}function Ic(n,s){if(n.indexOf("-")===-1)return typeof s.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Lc=null;function Dc(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Uc=null,ui=null,ci=null;function om(n){if(n=Go(n)){if(typeof Uc!="function")throw Error(r(280));var s=n.stateNode;s&&(s=yl(s),Uc(n.stateNode,n.type,s))}}function am(n){ui?ci?ci.push(n):ci=[n]:ui=n}function lm(){if(ui){var n=ui,s=ci;if(ci=ui=null,om(n),s)for(n=0;n<s.length;n++)om(s[n])}}function um(n,s){return n(s)}function cm(){}var Fc=!1;function hm(n,s,l){if(Fc)return n(s,l);Fc=!0;try{return um(n,s,l)}finally{Fc=!1,(ui!==null||ci!==null)&&(cm(),lm())}}function To(n,s){var l=n.stateNode;if(l===null)return null;var c=yl(l);if(c===null)return null;l=c[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(n=n.type,c=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!c;break e;default:n=!1}if(n)return null;if(l&&typeof l!="function")throw Error(r(231,s,typeof l));return l}var Mc=!1;if(h)try{var Ro={};Object.defineProperty(Ro,"passive",{get:function(){Mc=!0}}),window.addEventListener("test",Ro,Ro),window.removeEventListener("test",Ro,Ro)}catch{Mc=!1}function B3(n,s,l,c,f,m,w,b,A){var I=Array.prototype.slice.call(arguments,3);try{s.apply(l,I)}catch(z){this.onError(z)}}var Ao=!1,Ja=null,Xa=!1,$c=null,z3={onError:function(n){Ao=!0,Ja=n}};function V3(n,s,l,c,f,m,w,b,A){Ao=!1,Ja=null,B3.apply(z3,arguments)}function W3(n,s,l,c,f,m,w,b,A){if(V3.apply(this,arguments),Ao){if(Ao){var I=Ja;Ao=!1,Ja=null}else throw Error(r(198));Xa||(Xa=!0,$c=I)}}function js(n){var s=n,l=n;if(n.alternate)for(;s.return;)s=s.return;else{n=s;do s=n,(s.flags&4098)!==0&&(l=s.return),n=s.return;while(n)}return s.tag===3?l:null}function dm(n){if(n.tag===13){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function fm(n){if(js(n)!==n)throw Error(r(188))}function K3(n){var s=n.alternate;if(!s){if(s=js(n),s===null)throw Error(r(188));return s!==n?null:n}for(var l=n,c=s;;){var f=l.return;if(f===null)break;var m=f.alternate;if(m===null){if(c=f.return,c!==null){l=c;continue}break}if(f.child===m.child){for(m=f.child;m;){if(m===l)return fm(f),n;if(m===c)return fm(f),s;m=m.sibling}throw Error(r(188))}if(l.return!==c.return)l=f,c=m;else{for(var w=!1,b=f.child;b;){if(b===l){w=!0,l=f,c=m;break}if(b===c){w=!0,c=f,l=m;break}b=b.sibling}if(!w){for(b=m.child;b;){if(b===l){w=!0,l=m,c=f;break}if(b===c){w=!0,c=m,l=f;break}b=b.sibling}if(!w)throw Error(r(189))}}if(l.alternate!==c)throw Error(r(190))}if(l.tag!==3)throw Error(r(188));return l.stateNode.current===l?n:s}function pm(n){return n=K3(n),n!==null?mm(n):null}function mm(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var s=mm(n);if(s!==null)return s;n=n.sibling}return null}var gm=t.unstable_scheduleCallback,ym=t.unstable_cancelCallback,H3=t.unstable_shouldYield,G3=t.unstable_requestPaint,ot=t.unstable_now,q3=t.unstable_getCurrentPriorityLevel,Bc=t.unstable_ImmediatePriority,vm=t.unstable_UserBlockingPriority,Ya=t.unstable_NormalPriority,J3=t.unstable_LowPriority,wm=t.unstable_IdlePriority,Qa=null,un=null;function X3(n){if(un&&typeof un.onCommitFiberRoot=="function")try{un.onCommitFiberRoot(Qa,n,void 0,(n.current.flags&128)===128)}catch{}}var Wr=Math.clz32?Math.clz32:Z3,Y3=Math.log,Q3=Math.LN2;function Z3(n){return n>>>=0,n===0?32:31-(Y3(n)/Q3|0)|0}var Za=64,el=4194304;function Co(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function tl(n,s){var l=n.pendingLanes;if(l===0)return 0;var c=0,f=n.suspendedLanes,m=n.pingedLanes,w=l&268435455;if(w!==0){var b=w&~f;b!==0?c=Co(b):(m&=w,m!==0&&(c=Co(m)))}else w=l&~f,w!==0?c=Co(w):m!==0&&(c=Co(m));if(c===0)return 0;if(s!==0&&s!==c&&(s&f)===0&&(f=c&-c,m=s&-s,f>=m||f===16&&(m&4194240)!==0))return s;if((c&4)!==0&&(c|=l&16),s=n.entangledLanes,s!==0)for(n=n.entanglements,s&=c;0<s;)l=31-Wr(s),f=1<<l,c|=n[l],s&=~f;return c}function e_(n,s){switch(n){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function t_(n,s){for(var l=n.suspendedLanes,c=n.pingedLanes,f=n.expirationTimes,m=n.pendingLanes;0<m;){var w=31-Wr(m),b=1<<w,A=f[w];A===-1?((b&l)===0||(b&c)!==0)&&(f[w]=e_(b,s)):A<=s&&(n.expiredLanes|=b),m&=~b}}function zc(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function _m(){var n=Za;return Za<<=1,(Za&4194240)===0&&(Za=64),n}function Vc(n){for(var s=[],l=0;31>l;l++)s.push(n);return s}function Po(n,s,l){n.pendingLanes|=s,s!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,s=31-Wr(s),n[s]=l}function r_(n,s){var l=n.pendingLanes&~s;n.pendingLanes=s,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=s,n.mutableReadLanes&=s,n.entangledLanes&=s,s=n.entanglements;var c=n.eventTimes;for(n=n.expirationTimes;0<l;){var f=31-Wr(l),m=1<<f;s[f]=0,c[f]=-1,n[f]=-1,l&=~m}}function Wc(n,s){var l=n.entangledLanes|=s;for(n=n.entanglements;l;){var c=31-Wr(l),f=1<<c;f&s|n[c]&s&&(n[c]|=s),l&=~f}}var Oe=0;function Em(n){return n&=-n,1<n?4<n?(n&268435455)!==0?16:536870912:4:1}var Sm,Kc,km,bm,xm,Hc=!1,rl=[],Xn=null,Yn=null,Qn=null,jo=new Map,Oo=new Map,Zn=[],n_="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Tm(n,s){switch(n){case"focusin":case"focusout":Xn=null;break;case"dragenter":case"dragleave":Yn=null;break;case"mouseover":case"mouseout":Qn=null;break;case"pointerover":case"pointerout":jo.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Oo.delete(s.pointerId)}}function No(n,s,l,c,f,m){return n===null||n.nativeEvent!==m?(n={blockedOn:s,domEventName:l,eventSystemFlags:c,nativeEvent:m,targetContainers:[f]},s!==null&&(s=Go(s),s!==null&&Kc(s)),n):(n.eventSystemFlags|=c,s=n.targetContainers,f!==null&&s.indexOf(f)===-1&&s.push(f),n)}function s_(n,s,l,c,f){switch(s){case"focusin":return Xn=No(Xn,n,s,l,c,f),!0;case"dragenter":return Yn=No(Yn,n,s,l,c,f),!0;case"mouseover":return Qn=No(Qn,n,s,l,c,f),!0;case"pointerover":var m=f.pointerId;return jo.set(m,No(jo.get(m)||null,n,s,l,c,f)),!0;case"gotpointercapture":return m=f.pointerId,Oo.set(m,No(Oo.get(m)||null,n,s,l,c,f)),!0}return!1}function Rm(n){var s=Os(n.target);if(s!==null){var l=js(s);if(l!==null){if(s=l.tag,s===13){if(s=dm(l),s!==null){n.blockedOn=s,xm(n.priority,function(){km(l)});return}}else if(s===3&&l.stateNode.current.memoizedState.isDehydrated){n.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}n.blockedOn=null}function nl(n){if(n.blockedOn!==null)return!1;for(var s=n.targetContainers;0<s.length;){var l=qc(n.domEventName,n.eventSystemFlags,s[0],n.nativeEvent);if(l===null){l=n.nativeEvent;var c=new l.constructor(l.type,l);Lc=c,l.target.dispatchEvent(c),Lc=null}else return s=Go(l),s!==null&&Kc(s),n.blockedOn=l,!1;s.shift()}return!0}function Am(n,s,l){nl(n)&&l.delete(s)}function i_(){Hc=!1,Xn!==null&&nl(Xn)&&(Xn=null),Yn!==null&&nl(Yn)&&(Yn=null),Qn!==null&&nl(Qn)&&(Qn=null),jo.forEach(Am),Oo.forEach(Am)}function Io(n,s){n.blockedOn===s&&(n.blockedOn=null,Hc||(Hc=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,i_)))}function Lo(n){function s(f){return Io(f,n)}if(0<rl.length){Io(rl[0],n);for(var l=1;l<rl.length;l++){var c=rl[l];c.blockedOn===n&&(c.blockedOn=null)}}for(Xn!==null&&Io(Xn,n),Yn!==null&&Io(Yn,n),Qn!==null&&Io(Qn,n),jo.forEach(s),Oo.forEach(s),l=0;l<Zn.length;l++)c=Zn[l],c.blockedOn===n&&(c.blockedOn=null);for(;0<Zn.length&&(l=Zn[0],l.blockedOn===null);)Rm(l),l.blockedOn===null&&Zn.shift()}var hi=U.ReactCurrentBatchConfig,sl=!0;function o_(n,s,l,c){var f=Oe,m=hi.transition;hi.transition=null;try{Oe=1,Gc(n,s,l,c)}finally{Oe=f,hi.transition=m}}function a_(n,s,l,c){var f=Oe,m=hi.transition;hi.transition=null;try{Oe=4,Gc(n,s,l,c)}finally{Oe=f,hi.transition=m}}function Gc(n,s,l,c){if(sl){var f=qc(n,s,l,c);if(f===null)hh(n,s,c,il,l),Tm(n,c);else if(s_(f,n,s,l,c))c.stopPropagation();else if(Tm(n,c),s&4&&-1<n_.indexOf(n)){for(;f!==null;){var m=Go(f);if(m!==null&&Sm(m),m=qc(n,s,l,c),m===null&&hh(n,s,c,il,l),m===f)break;f=m}f!==null&&c.stopPropagation()}else hh(n,s,c,null,l)}}var il=null;function qc(n,s,l,c){if(il=null,n=Dc(c),n=Os(n),n!==null)if(s=js(n),s===null)n=null;else if(l=s.tag,l===13){if(n=dm(s),n!==null)return n;n=null}else if(l===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;n=null}else s!==n&&(n=null);return il=n,null}function Cm(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(q3()){case Bc:return 1;case vm:return 4;case Ya:case J3:return 16;case wm:return 536870912;default:return 16}default:return 16}}var es=null,Jc=null,ol=null;function Pm(){if(ol)return ol;var n,s=Jc,l=s.length,c,f="value"in es?es.value:es.textContent,m=f.length;for(n=0;n<l&&s[n]===f[n];n++);var w=l-n;for(c=1;c<=w&&s[l-c]===f[m-c];c++);return ol=f.slice(n,1<c?1-c:void 0)}function al(n){var s=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&s===13&&(n=13)):n=s,n===10&&(n=13),32<=n||n===13?n:0}function ll(){return!0}function jm(){return!1}function dr(n){function s(l,c,f,m,w){this._reactName=l,this._targetInst=f,this.type=c,this.nativeEvent=m,this.target=w,this.currentTarget=null;for(var b in n)n.hasOwnProperty(b)&&(l=n[b],this[b]=l?l(m):m[b]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?ll:jm,this.isPropagationStopped=jm,this}return J(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=ll)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=ll)},persist:function(){},isPersistent:ll}),s}var di={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Xc=dr(di),Do=J({},di,{view:0,detail:0}),l_=dr(Do),Yc,Qc,Uo,ul=J({},Do,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:eh,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Uo&&(Uo&&n.type==="mousemove"?(Yc=n.screenX-Uo.screenX,Qc=n.screenY-Uo.screenY):Qc=Yc=0,Uo=n),Yc)},movementY:function(n){return"movementY"in n?n.movementY:Qc}}),Om=dr(ul),u_=J({},ul,{dataTransfer:0}),c_=dr(u_),h_=J({},Do,{relatedTarget:0}),Zc=dr(h_),d_=J({},di,{animationName:0,elapsedTime:0,pseudoElement:0}),f_=dr(d_),p_=J({},di,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),m_=dr(p_),g_=J({},di,{data:0}),Nm=dr(g_),y_={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},v_={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},w_={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function __(n){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(n):(n=w_[n])?!!s[n]:!1}function eh(){return __}var E_=J({},Do,{key:function(n){if(n.key){var s=y_[n.key]||n.key;if(s!=="Unidentified")return s}return n.type==="keypress"?(n=al(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?v_[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:eh,charCode:function(n){return n.type==="keypress"?al(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?al(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),S_=dr(E_),k_=J({},ul,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Im=dr(k_),b_=J({},Do,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:eh}),x_=dr(b_),T_=J({},di,{propertyName:0,elapsedTime:0,pseudoElement:0}),R_=dr(T_),A_=J({},ul,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),C_=dr(A_),P_=[9,13,27,32],th=h&&"CompositionEvent"in window,Fo=null;h&&"documentMode"in document&&(Fo=document.documentMode);var j_=h&&"TextEvent"in window&&!Fo,Lm=h&&(!th||Fo&&8<Fo&&11>=Fo),Dm=" ",Um=!1;function Fm(n,s){switch(n){case"keyup":return P_.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Mm(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var fi=!1;function O_(n,s){switch(n){case"compositionend":return Mm(s);case"keypress":return s.which!==32?null:(Um=!0,Dm);case"textInput":return n=s.data,n===Dm&&Um?null:n;default:return null}}function N_(n,s){if(fi)return n==="compositionend"||!th&&Fm(n,s)?(n=Pm(),ol=Jc=es=null,fi=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return Lm&&s.locale!=="ko"?null:s.data;default:return null}}var I_={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function $m(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s==="input"?!!I_[n.type]:s==="textarea"}function Bm(n,s,l,c){am(c),s=pl(s,"onChange"),0<s.length&&(l=new Xc("onChange","change",null,l,c),n.push({event:l,listeners:s}))}var Mo=null,$o=null;function L_(n){ig(n,0)}function cl(n){var s=vi(n);if(So(s))return n}function D_(n,s){if(n==="change")return s}var zm=!1;if(h){var rh;if(h){var nh="oninput"in document;if(!nh){var Vm=document.createElement("div");Vm.setAttribute("oninput","return;"),nh=typeof Vm.oninput=="function"}rh=nh}else rh=!1;zm=rh&&(!document.documentMode||9<document.documentMode)}function Wm(){Mo&&(Mo.detachEvent("onpropertychange",Km),$o=Mo=null)}function Km(n){if(n.propertyName==="value"&&cl($o)){var s=[];Bm(s,$o,n,Dc(n)),hm(L_,s)}}function U_(n,s,l){n==="focusin"?(Wm(),Mo=s,$o=l,Mo.attachEvent("onpropertychange",Km)):n==="focusout"&&Wm()}function F_(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return cl($o)}function M_(n,s){if(n==="click")return cl(s)}function $_(n,s){if(n==="input"||n==="change")return cl(s)}function B_(n,s){return n===s&&(n!==0||1/n===1/s)||n!==n&&s!==s}var Kr=typeof Object.is=="function"?Object.is:B_;function Bo(n,s){if(Kr(n,s))return!0;if(typeof n!="object"||n===null||typeof s!="object"||s===null)return!1;var l=Object.keys(n),c=Object.keys(s);if(l.length!==c.length)return!1;for(c=0;c<l.length;c++){var f=l[c];if(!d.call(s,f)||!Kr(n[f],s[f]))return!1}return!0}function Hm(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Gm(n,s){var l=Hm(n);n=0;for(var c;l;){if(l.nodeType===3){if(c=n+l.textContent.length,n<=s&&c>=s)return{node:l,offset:s-n};n=c}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=Hm(l)}}function qm(n,s){return n&&s?n===s?!0:n&&n.nodeType===3?!1:s&&s.nodeType===3?qm(n,s.parentNode):"contains"in n?n.contains(s):n.compareDocumentPosition?!!(n.compareDocumentPosition(s)&16):!1:!1}function Jm(){for(var n=window,s=an();s instanceof n.HTMLIFrameElement;){try{var l=typeof s.contentWindow.location.href=="string"}catch{l=!1}if(l)n=s.contentWindow;else break;s=an(n.document)}return s}function sh(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s&&(s==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||s==="textarea"||n.contentEditable==="true")}function z_(n){var s=Jm(),l=n.focusedElem,c=n.selectionRange;if(s!==l&&l&&l.ownerDocument&&qm(l.ownerDocument.documentElement,l)){if(c!==null&&sh(l)){if(s=c.start,n=c.end,n===void 0&&(n=s),"selectionStart"in l)l.selectionStart=s,l.selectionEnd=Math.min(n,l.value.length);else if(n=(s=l.ownerDocument||document)&&s.defaultView||window,n.getSelection){n=n.getSelection();var f=l.textContent.length,m=Math.min(c.start,f);c=c.end===void 0?m:Math.min(c.end,f),!n.extend&&m>c&&(f=c,c=m,m=f),f=Gm(l,m);var w=Gm(l,c);f&&w&&(n.rangeCount!==1||n.anchorNode!==f.node||n.anchorOffset!==f.offset||n.focusNode!==w.node||n.focusOffset!==w.offset)&&(s=s.createRange(),s.setStart(f.node,f.offset),n.removeAllRanges(),m>c?(n.addRange(s),n.extend(w.node,w.offset)):(s.setEnd(w.node,w.offset),n.addRange(s)))}}for(s=[],n=l;n=n.parentNode;)n.nodeType===1&&s.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<s.length;l++)n=s[l],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var V_=h&&"documentMode"in document&&11>=document.documentMode,pi=null,ih=null,zo=null,oh=!1;function Xm(n,s,l){var c=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;oh||pi==null||pi!==an(c)||(c=pi,"selectionStart"in c&&sh(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),zo&&Bo(zo,c)||(zo=c,c=pl(ih,"onSelect"),0<c.length&&(s=new Xc("onSelect","select",null,s,l),n.push({event:s,listeners:c}),s.target=pi)))}function hl(n,s){var l={};return l[n.toLowerCase()]=s.toLowerCase(),l["Webkit"+n]="webkit"+s,l["Moz"+n]="moz"+s,l}var mi={animationend:hl("Animation","AnimationEnd"),animationiteration:hl("Animation","AnimationIteration"),animationstart:hl("Animation","AnimationStart"),transitionend:hl("Transition","TransitionEnd")},ah={},Ym={};h&&(Ym=document.createElement("div").style,"AnimationEvent"in window||(delete mi.animationend.animation,delete mi.animationiteration.animation,delete mi.animationstart.animation),"TransitionEvent"in window||delete mi.transitionend.transition);function dl(n){if(ah[n])return ah[n];if(!mi[n])return n;var s=mi[n],l;for(l in s)if(s.hasOwnProperty(l)&&l in Ym)return ah[n]=s[l];return n}var Qm=dl("animationend"),Zm=dl("animationiteration"),eg=dl("animationstart"),tg=dl("transitionend"),rg=new Map,ng="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ts(n,s){rg.set(n,s),a(s,[n])}for(var lh=0;lh<ng.length;lh++){var uh=ng[lh],W_=uh.toLowerCase(),K_=uh[0].toUpperCase()+uh.slice(1);ts(W_,"on"+K_)}ts(Qm,"onAnimationEnd"),ts(Zm,"onAnimationIteration"),ts(eg,"onAnimationStart"),ts("dblclick","onDoubleClick"),ts("focusin","onFocus"),ts("focusout","onBlur"),ts(tg,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Vo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),H_=new Set("cancel close invalid load scroll toggle".split(" ").concat(Vo));function sg(n,s,l){var c=n.type||"unknown-event";n.currentTarget=l,W3(c,s,void 0,n),n.currentTarget=null}function ig(n,s){s=(s&4)!==0;for(var l=0;l<n.length;l++){var c=n[l],f=c.event;c=c.listeners;e:{var m=void 0;if(s)for(var w=c.length-1;0<=w;w--){var b=c[w],A=b.instance,I=b.currentTarget;if(b=b.listener,A!==m&&f.isPropagationStopped())break e;sg(f,b,I),m=A}else for(w=0;w<c.length;w++){if(b=c[w],A=b.instance,I=b.currentTarget,b=b.listener,A!==m&&f.isPropagationStopped())break e;sg(f,b,I),m=A}}}if(Xa)throw n=$c,Xa=!1,$c=null,n}function Be(n,s){var l=s[yh];l===void 0&&(l=s[yh]=new Set);var c=n+"__bubble";l.has(c)||(og(s,n,2,!1),l.add(c))}function ch(n,s,l){var c=0;s&&(c|=4),og(l,n,c,s)}var fl="_reactListening"+Math.random().toString(36).slice(2);function Wo(n){if(!n[fl]){n[fl]=!0,i.forEach(function(l){l!=="selectionchange"&&(H_.has(l)||ch(l,!1,n),ch(l,!0,n))});var s=n.nodeType===9?n:n.ownerDocument;s===null||s[fl]||(s[fl]=!0,ch("selectionchange",!1,s))}}function og(n,s,l,c){switch(Cm(s)){case 1:var f=o_;break;case 4:f=a_;break;default:f=Gc}l=f.bind(null,s,l,n),f=void 0,!Mc||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(f=!0),c?f!==void 0?n.addEventListener(s,l,{capture:!0,passive:f}):n.addEventListener(s,l,!0):f!==void 0?n.addEventListener(s,l,{passive:f}):n.addEventListener(s,l,!1)}function hh(n,s,l,c,f){var m=c;if((s&1)===0&&(s&2)===0&&c!==null)e:for(;;){if(c===null)return;var w=c.tag;if(w===3||w===4){var b=c.stateNode.containerInfo;if(b===f||b.nodeType===8&&b.parentNode===f)break;if(w===4)for(w=c.return;w!==null;){var A=w.tag;if((A===3||A===4)&&(A=w.stateNode.containerInfo,A===f||A.nodeType===8&&A.parentNode===f))return;w=w.return}for(;b!==null;){if(w=Os(b),w===null)return;if(A=w.tag,A===5||A===6){c=m=w;continue e}b=b.parentNode}}c=c.return}hm(function(){var I=m,z=Dc(l),V=[];e:{var $=rg.get(n);if($!==void 0){var X=Xc,te=n;switch(n){case"keypress":if(al(l)===0)break e;case"keydown":case"keyup":X=S_;break;case"focusin":te="focus",X=Zc;break;case"focusout":te="blur",X=Zc;break;case"beforeblur":case"afterblur":X=Zc;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":X=Om;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":X=c_;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":X=x_;break;case Qm:case Zm:case eg:X=f_;break;case tg:X=R_;break;case"scroll":X=l_;break;case"wheel":X=C_;break;case"copy":case"cut":case"paste":X=m_;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":X=Im}var re=(s&4)!==0,at=!re&&n==="scroll",O=re?$!==null?$+"Capture":null:$;re=[];for(var C=I,N;C!==null;){N=C;var K=N.stateNode;if(N.tag===5&&K!==null&&(N=K,O!==null&&(K=To(C,O),K!=null&&re.push(Ko(C,K,N)))),at)break;C=C.return}0<re.length&&($=new X($,te,null,l,z),V.push({event:$,listeners:re}))}}if((s&7)===0){e:{if($=n==="mouseover"||n==="pointerover",X=n==="mouseout"||n==="pointerout",$&&l!==Lc&&(te=l.relatedTarget||l.fromElement)&&(Os(te)||te[bn]))break e;if((X||$)&&($=z.window===z?z:($=z.ownerDocument)?$.defaultView||$.parentWindow:window,X?(te=l.relatedTarget||l.toElement,X=I,te=te?Os(te):null,te!==null&&(at=js(te),te!==at||te.tag!==5&&te.tag!==6)&&(te=null)):(X=null,te=I),X!==te)){if(re=Om,K="onMouseLeave",O="onMouseEnter",C="mouse",(n==="pointerout"||n==="pointerover")&&(re=Im,K="onPointerLeave",O="onPointerEnter",C="pointer"),at=X==null?$:vi(X),N=te==null?$:vi(te),$=new re(K,C+"leave",X,l,z),$.target=at,$.relatedTarget=N,K=null,Os(z)===I&&(re=new re(O,C+"enter",te,l,z),re.target=N,re.relatedTarget=at,K=re),at=K,X&&te)t:{for(re=X,O=te,C=0,N=re;N;N=gi(N))C++;for(N=0,K=O;K;K=gi(K))N++;for(;0<C-N;)re=gi(re),C--;for(;0<N-C;)O=gi(O),N--;for(;C--;){if(re===O||O!==null&&re===O.alternate)break t;re=gi(re),O=gi(O)}re=null}else re=null;X!==null&&ag(V,$,X,re,!1),te!==null&&at!==null&&ag(V,at,te,re,!0)}}e:{if($=I?vi(I):window,X=$.nodeName&&$.nodeName.toLowerCase(),X==="select"||X==="input"&&$.type==="file")var se=D_;else if($m($))if(zm)se=$_;else{se=F_;var de=U_}else(X=$.nodeName)&&X.toLowerCase()==="input"&&($.type==="checkbox"||$.type==="radio")&&(se=M_);if(se&&(se=se(n,I))){Bm(V,se,l,z);break e}de&&de(n,$,I),n==="focusout"&&(de=$._wrapperState)&&de.controlled&&$.type==="number"&&vt($,"number",$.value)}switch(de=I?vi(I):window,n){case"focusin":($m(de)||de.contentEditable==="true")&&(pi=de,ih=I,zo=null);break;case"focusout":zo=ih=pi=null;break;case"mousedown":oh=!0;break;case"contextmenu":case"mouseup":case"dragend":oh=!1,Xm(V,l,z);break;case"selectionchange":if(V_)break;case"keydown":case"keyup":Xm(V,l,z)}var fe;if(th)e:{switch(n){case"compositionstart":var ye="onCompositionStart";break e;case"compositionend":ye="onCompositionEnd";break e;case"compositionupdate":ye="onCompositionUpdate";break e}ye=void 0}else fi?Fm(n,l)&&(ye="onCompositionEnd"):n==="keydown"&&l.keyCode===229&&(ye="onCompositionStart");ye&&(Lm&&l.locale!=="ko"&&(fi||ye!=="onCompositionStart"?ye==="onCompositionEnd"&&fi&&(fe=Pm()):(es=z,Jc="value"in es?es.value:es.textContent,fi=!0)),de=pl(I,ye),0<de.length&&(ye=new Nm(ye,n,null,l,z),V.push({event:ye,listeners:de}),fe?ye.data=fe:(fe=Mm(l),fe!==null&&(ye.data=fe)))),(fe=j_?O_(n,l):N_(n,l))&&(I=pl(I,"onBeforeInput"),0<I.length&&(z=new Nm("onBeforeInput","beforeinput",null,l,z),V.push({event:z,listeners:I}),z.data=fe))}ig(V,s)})}function Ko(n,s,l){return{instance:n,listener:s,currentTarget:l}}function pl(n,s){for(var l=s+"Capture",c=[];n!==null;){var f=n,m=f.stateNode;f.tag===5&&m!==null&&(f=m,m=To(n,l),m!=null&&c.unshift(Ko(n,m,f)),m=To(n,s),m!=null&&c.push(Ko(n,m,f))),n=n.return}return c}function gi(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function ag(n,s,l,c,f){for(var m=s._reactName,w=[];l!==null&&l!==c;){var b=l,A=b.alternate,I=b.stateNode;if(A!==null&&A===c)break;b.tag===5&&I!==null&&(b=I,f?(A=To(l,m),A!=null&&w.unshift(Ko(l,A,b))):f||(A=To(l,m),A!=null&&w.push(Ko(l,A,b)))),l=l.return}w.length!==0&&n.push({event:s,listeners:w})}var G_=/\r\n?/g,q_=/\u0000|\uFFFD/g;function lg(n){return(typeof n=="string"?n:""+n).replace(G_,`
`).replace(q_,"")}function ml(n,s,l){if(s=lg(s),lg(n)!==s&&l)throw Error(r(425))}function gl(){}var dh=null,fh=null;function ph(n,s){return n==="textarea"||n==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var mh=typeof setTimeout=="function"?setTimeout:void 0,J_=typeof clearTimeout=="function"?clearTimeout:void 0,ug=typeof Promise=="function"?Promise:void 0,X_=typeof queueMicrotask=="function"?queueMicrotask:typeof ug<"u"?function(n){return ug.resolve(null).then(n).catch(Y_)}:mh;function Y_(n){setTimeout(function(){throw n})}function gh(n,s){var l=s,c=0;do{var f=l.nextSibling;if(n.removeChild(l),f&&f.nodeType===8)if(l=f.data,l==="/$"){if(c===0){n.removeChild(f),Lo(s);return}c--}else l!=="$"&&l!=="$?"&&l!=="$!"||c++;l=f}while(l);Lo(s)}function rs(n){for(;n!=null;n=n.nextSibling){var s=n.nodeType;if(s===1||s===3)break;if(s===8){if(s=n.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return n}function cg(n){n=n.previousSibling;for(var s=0;n;){if(n.nodeType===8){var l=n.data;if(l==="$"||l==="$!"||l==="$?"){if(s===0)return n;s--}else l==="/$"&&s++}n=n.previousSibling}return null}var yi=Math.random().toString(36).slice(2),cn="__reactFiber$"+yi,Ho="__reactProps$"+yi,bn="__reactContainer$"+yi,yh="__reactEvents$"+yi,Q_="__reactListeners$"+yi,Z_="__reactHandles$"+yi;function Os(n){var s=n[cn];if(s)return s;for(var l=n.parentNode;l;){if(s=l[bn]||l[cn]){if(l=s.alternate,s.child!==null||l!==null&&l.child!==null)for(n=cg(n);n!==null;){if(l=n[cn])return l;n=cg(n)}return s}n=l,l=n.parentNode}return null}function Go(n){return n=n[cn]||n[bn],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function vi(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(r(33))}function yl(n){return n[Ho]||null}var vh=[],wi=-1;function ns(n){return{current:n}}function ze(n){0>wi||(n.current=vh[wi],vh[wi]=null,wi--)}function Ue(n,s){wi++,vh[wi]=n.current,n.current=s}var ss={},Lt=ns(ss),er=ns(!1),Ns=ss;function _i(n,s){var l=n.type.contextTypes;if(!l)return ss;var c=n.stateNode;if(c&&c.__reactInternalMemoizedUnmaskedChildContext===s)return c.__reactInternalMemoizedMaskedChildContext;var f={},m;for(m in l)f[m]=s[m];return c&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=s,n.__reactInternalMemoizedMaskedChildContext=f),f}function tr(n){return n=n.childContextTypes,n!=null}function vl(){ze(er),ze(Lt)}function hg(n,s,l){if(Lt.current!==ss)throw Error(r(168));Ue(Lt,s),Ue(er,l)}function dg(n,s,l){var c=n.stateNode;if(s=s.childContextTypes,typeof c.getChildContext!="function")return l;c=c.getChildContext();for(var f in c)if(!(f in s))throw Error(r(108,ve(n)||"Unknown",f));return J({},l,c)}function wl(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||ss,Ns=Lt.current,Ue(Lt,n),Ue(er,er.current),!0}function fg(n,s,l){var c=n.stateNode;if(!c)throw Error(r(169));l?(n=dg(n,s,Ns),c.__reactInternalMemoizedMergedChildContext=n,ze(er),ze(Lt),Ue(Lt,n)):ze(er),Ue(er,l)}var xn=null,_l=!1,wh=!1;function pg(n){xn===null?xn=[n]:xn.push(n)}function e4(n){_l=!0,pg(n)}function is(){if(!wh&&xn!==null){wh=!0;var n=0,s=Oe;try{var l=xn;for(Oe=1;n<l.length;n++){var c=l[n];do c=c(!0);while(c!==null)}xn=null,_l=!1}catch(f){throw xn!==null&&(xn=xn.slice(n+1)),gm(Bc,is),f}finally{Oe=s,wh=!1}}return null}var Ei=[],Si=0,El=null,Sl=0,Tr=[],Rr=0,Is=null,Tn=1,Rn="";function Ls(n,s){Ei[Si++]=Sl,Ei[Si++]=El,El=n,Sl=s}function mg(n,s,l){Tr[Rr++]=Tn,Tr[Rr++]=Rn,Tr[Rr++]=Is,Is=n;var c=Tn;n=Rn;var f=32-Wr(c)-1;c&=~(1<<f),l+=1;var m=32-Wr(s)+f;if(30<m){var w=f-f%5;m=(c&(1<<w)-1).toString(32),c>>=w,f-=w,Tn=1<<32-Wr(s)+f|l<<f|c,Rn=m+n}else Tn=1<<m|l<<f|c,Rn=n}function _h(n){n.return!==null&&(Ls(n,1),mg(n,1,0))}function Eh(n){for(;n===El;)El=Ei[--Si],Ei[Si]=null,Sl=Ei[--Si],Ei[Si]=null;for(;n===Is;)Is=Tr[--Rr],Tr[Rr]=null,Rn=Tr[--Rr],Tr[Rr]=null,Tn=Tr[--Rr],Tr[Rr]=null}var fr=null,pr=null,He=!1,Hr=null;function gg(n,s){var l=jr(5,null,null,0);l.elementType="DELETED",l.stateNode=s,l.return=n,s=n.deletions,s===null?(n.deletions=[l],n.flags|=16):s.push(l)}function yg(n,s){switch(n.tag){case 5:var l=n.type;return s=s.nodeType!==1||l.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(n.stateNode=s,fr=n,pr=rs(s.firstChild),!0):!1;case 6:return s=n.pendingProps===""||s.nodeType!==3?null:s,s!==null?(n.stateNode=s,fr=n,pr=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(l=Is!==null?{id:Tn,overflow:Rn}:null,n.memoizedState={dehydrated:s,treeContext:l,retryLane:1073741824},l=jr(18,null,null,0),l.stateNode=s,l.return=n,n.child=l,fr=n,pr=null,!0):!1;default:return!1}}function Sh(n){return(n.mode&1)!==0&&(n.flags&128)===0}function kh(n){if(He){var s=pr;if(s){var l=s;if(!yg(n,s)){if(Sh(n))throw Error(r(418));s=rs(l.nextSibling);var c=fr;s&&yg(n,s)?gg(c,l):(n.flags=n.flags&-4097|2,He=!1,fr=n)}}else{if(Sh(n))throw Error(r(418));n.flags=n.flags&-4097|2,He=!1,fr=n}}}function vg(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;fr=n}function kl(n){if(n!==fr)return!1;if(!He)return vg(n),He=!0,!1;var s;if((s=n.tag!==3)&&!(s=n.tag!==5)&&(s=n.type,s=s!=="head"&&s!=="body"&&!ph(n.type,n.memoizedProps)),s&&(s=pr)){if(Sh(n))throw wg(),Error(r(418));for(;s;)gg(n,s),s=rs(s.nextSibling)}if(vg(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(r(317));e:{for(n=n.nextSibling,s=0;n;){if(n.nodeType===8){var l=n.data;if(l==="/$"){if(s===0){pr=rs(n.nextSibling);break e}s--}else l!=="$"&&l!=="$!"&&l!=="$?"||s++}n=n.nextSibling}pr=null}}else pr=fr?rs(n.stateNode.nextSibling):null;return!0}function wg(){for(var n=pr;n;)n=rs(n.nextSibling)}function ki(){pr=fr=null,He=!1}function bh(n){Hr===null?Hr=[n]:Hr.push(n)}var t4=U.ReactCurrentBatchConfig;function qo(n,s,l){if(n=l.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(l._owner){if(l=l._owner,l){if(l.tag!==1)throw Error(r(309));var c=l.stateNode}if(!c)throw Error(r(147,n));var f=c,m=""+n;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===m?s.ref:(s=function(w){var b=f.refs;w===null?delete b[m]:b[m]=w},s._stringRef=m,s)}if(typeof n!="string")throw Error(r(284));if(!l._owner)throw Error(r(290,n))}return n}function bl(n,s){throw n=Object.prototype.toString.call(s),Error(r(31,n==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":n))}function _g(n){var s=n._init;return s(n._payload)}function Eg(n){function s(O,C){if(n){var N=O.deletions;N===null?(O.deletions=[C],O.flags|=16):N.push(C)}}function l(O,C){if(!n)return null;for(;C!==null;)s(O,C),C=C.sibling;return null}function c(O,C){for(O=new Map;C!==null;)C.key!==null?O.set(C.key,C):O.set(C.index,C),C=C.sibling;return O}function f(O,C){return O=fs(O,C),O.index=0,O.sibling=null,O}function m(O,C,N){return O.index=N,n?(N=O.alternate,N!==null?(N=N.index,N<C?(O.flags|=2,C):N):(O.flags|=2,C)):(O.flags|=1048576,C)}function w(O){return n&&O.alternate===null&&(O.flags|=2),O}function b(O,C,N,K){return C===null||C.tag!==6?(C=md(N,O.mode,K),C.return=O,C):(C=f(C,N),C.return=O,C)}function A(O,C,N,K){var se=N.type;return se===W?z(O,C,N.props.children,K,N.key):C!==null&&(C.elementType===se||typeof se=="object"&&se!==null&&se.$$typeof===ht&&_g(se)===C.type)?(K=f(C,N.props),K.ref=qo(O,C,N),K.return=O,K):(K=ql(N.type,N.key,N.props,null,O.mode,K),K.ref=qo(O,C,N),K.return=O,K)}function I(O,C,N,K){return C===null||C.tag!==4||C.stateNode.containerInfo!==N.containerInfo||C.stateNode.implementation!==N.implementation?(C=gd(N,O.mode,K),C.return=O,C):(C=f(C,N.children||[]),C.return=O,C)}function z(O,C,N,K,se){return C===null||C.tag!==7?(C=Vs(N,O.mode,K,se),C.return=O,C):(C=f(C,N),C.return=O,C)}function V(O,C,N){if(typeof C=="string"&&C!==""||typeof C=="number")return C=md(""+C,O.mode,N),C.return=O,C;if(typeof C=="object"&&C!==null){switch(C.$$typeof){case G:return N=ql(C.type,C.key,C.props,null,O.mode,N),N.ref=qo(O,null,C),N.return=O,N;case B:return C=gd(C,O.mode,N),C.return=O,C;case ht:var K=C._init;return V(O,K(C._payload),N)}if(Ct(C)||ue(C))return C=Vs(C,O.mode,N,null),C.return=O,C;bl(O,C)}return null}function $(O,C,N,K){var se=C!==null?C.key:null;if(typeof N=="string"&&N!==""||typeof N=="number")return se!==null?null:b(O,C,""+N,K);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case G:return N.key===se?A(O,C,N,K):null;case B:return N.key===se?I(O,C,N,K):null;case ht:return se=N._init,$(O,C,se(N._payload),K)}if(Ct(N)||ue(N))return se!==null?null:z(O,C,N,K,null);bl(O,N)}return null}function X(O,C,N,K,se){if(typeof K=="string"&&K!==""||typeof K=="number")return O=O.get(N)||null,b(C,O,""+K,se);if(typeof K=="object"&&K!==null){switch(K.$$typeof){case G:return O=O.get(K.key===null?N:K.key)||null,A(C,O,K,se);case B:return O=O.get(K.key===null?N:K.key)||null,I(C,O,K,se);case ht:var de=K._init;return X(O,C,N,de(K._payload),se)}if(Ct(K)||ue(K))return O=O.get(N)||null,z(C,O,K,se,null);bl(C,K)}return null}function te(O,C,N,K){for(var se=null,de=null,fe=C,ye=C=0,Rt=null;fe!==null&&ye<N.length;ye++){fe.index>ye?(Rt=fe,fe=null):Rt=fe.sibling;var Ce=$(O,fe,N[ye],K);if(Ce===null){fe===null&&(fe=Rt);break}n&&fe&&Ce.alternate===null&&s(O,fe),C=m(Ce,C,ye),de===null?se=Ce:de.sibling=Ce,de=Ce,fe=Rt}if(ye===N.length)return l(O,fe),He&&Ls(O,ye),se;if(fe===null){for(;ye<N.length;ye++)fe=V(O,N[ye],K),fe!==null&&(C=m(fe,C,ye),de===null?se=fe:de.sibling=fe,de=fe);return He&&Ls(O,ye),se}for(fe=c(O,fe);ye<N.length;ye++)Rt=X(fe,O,ye,N[ye],K),Rt!==null&&(n&&Rt.alternate!==null&&fe.delete(Rt.key===null?ye:Rt.key),C=m(Rt,C,ye),de===null?se=Rt:de.sibling=Rt,de=Rt);return n&&fe.forEach(function(ps){return s(O,ps)}),He&&Ls(O,ye),se}function re(O,C,N,K){var se=ue(N);if(typeof se!="function")throw Error(r(150));if(N=se.call(N),N==null)throw Error(r(151));for(var de=se=null,fe=C,ye=C=0,Rt=null,Ce=N.next();fe!==null&&!Ce.done;ye++,Ce=N.next()){fe.index>ye?(Rt=fe,fe=null):Rt=fe.sibling;var ps=$(O,fe,Ce.value,K);if(ps===null){fe===null&&(fe=Rt);break}n&&fe&&ps.alternate===null&&s(O,fe),C=m(ps,C,ye),de===null?se=ps:de.sibling=ps,de=ps,fe=Rt}if(Ce.done)return l(O,fe),He&&Ls(O,ye),se;if(fe===null){for(;!Ce.done;ye++,Ce=N.next())Ce=V(O,Ce.value,K),Ce!==null&&(C=m(Ce,C,ye),de===null?se=Ce:de.sibling=Ce,de=Ce);return He&&Ls(O,ye),se}for(fe=c(O,fe);!Ce.done;ye++,Ce=N.next())Ce=X(fe,O,ye,Ce.value,K),Ce!==null&&(n&&Ce.alternate!==null&&fe.delete(Ce.key===null?ye:Ce.key),C=m(Ce,C,ye),de===null?se=Ce:de.sibling=Ce,de=Ce);return n&&fe.forEach(function(I4){return s(O,I4)}),He&&Ls(O,ye),se}function at(O,C,N,K){if(typeof N=="object"&&N!==null&&N.type===W&&N.key===null&&(N=N.props.children),typeof N=="object"&&N!==null){switch(N.$$typeof){case G:e:{for(var se=N.key,de=C;de!==null;){if(de.key===se){if(se=N.type,se===W){if(de.tag===7){l(O,de.sibling),C=f(de,N.props.children),C.return=O,O=C;break e}}else if(de.elementType===se||typeof se=="object"&&se!==null&&se.$$typeof===ht&&_g(se)===de.type){l(O,de.sibling),C=f(de,N.props),C.ref=qo(O,de,N),C.return=O,O=C;break e}l(O,de);break}else s(O,de);de=de.sibling}N.type===W?(C=Vs(N.props.children,O.mode,K,N.key),C.return=O,O=C):(K=ql(N.type,N.key,N.props,null,O.mode,K),K.ref=qo(O,C,N),K.return=O,O=K)}return w(O);case B:e:{for(de=N.key;C!==null;){if(C.key===de)if(C.tag===4&&C.stateNode.containerInfo===N.containerInfo&&C.stateNode.implementation===N.implementation){l(O,C.sibling),C=f(C,N.children||[]),C.return=O,O=C;break e}else{l(O,C);break}else s(O,C);C=C.sibling}C=gd(N,O.mode,K),C.return=O,O=C}return w(O);case ht:return de=N._init,at(O,C,de(N._payload),K)}if(Ct(N))return te(O,C,N,K);if(ue(N))return re(O,C,N,K);bl(O,N)}return typeof N=="string"&&N!==""||typeof N=="number"?(N=""+N,C!==null&&C.tag===6?(l(O,C.sibling),C=f(C,N),C.return=O,O=C):(l(O,C),C=md(N,O.mode,K),C.return=O,O=C),w(O)):l(O,C)}return at}var bi=Eg(!0),Sg=Eg(!1),xl=ns(null),Tl=null,xi=null,xh=null;function Th(){xh=xi=Tl=null}function Rh(n){var s=xl.current;ze(xl),n._currentValue=s}function Ah(n,s,l){for(;n!==null;){var c=n.alternate;if((n.childLanes&s)!==s?(n.childLanes|=s,c!==null&&(c.childLanes|=s)):c!==null&&(c.childLanes&s)!==s&&(c.childLanes|=s),n===l)break;n=n.return}}function Ti(n,s){Tl=n,xh=xi=null,n=n.dependencies,n!==null&&n.firstContext!==null&&((n.lanes&s)!==0&&(rr=!0),n.firstContext=null)}function Ar(n){var s=n._currentValue;if(xh!==n)if(n={context:n,memoizedValue:s,next:null},xi===null){if(Tl===null)throw Error(r(308));xi=n,Tl.dependencies={lanes:0,firstContext:n}}else xi=xi.next=n;return s}var Ds=null;function Ch(n){Ds===null?Ds=[n]:Ds.push(n)}function kg(n,s,l,c){var f=s.interleaved;return f===null?(l.next=l,Ch(s)):(l.next=f.next,f.next=l),s.interleaved=l,An(n,c)}function An(n,s){n.lanes|=s;var l=n.alternate;for(l!==null&&(l.lanes|=s),l=n,n=n.return;n!==null;)n.childLanes|=s,l=n.alternate,l!==null&&(l.childLanes|=s),l=n,n=n.return;return l.tag===3?l.stateNode:null}var os=!1;function Ph(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function bg(n,s){n=n.updateQueue,s.updateQueue===n&&(s.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function Cn(n,s){return{eventTime:n,lane:s,tag:0,payload:null,callback:null,next:null}}function as(n,s,l){var c=n.updateQueue;if(c===null)return null;if(c=c.shared,(xe&2)!==0){var f=c.pending;return f===null?s.next=s:(s.next=f.next,f.next=s),c.pending=s,An(n,l)}return f=c.interleaved,f===null?(s.next=s,Ch(c)):(s.next=f.next,f.next=s),c.interleaved=s,An(n,l)}function Rl(n,s,l){if(s=s.updateQueue,s!==null&&(s=s.shared,(l&4194240)!==0)){var c=s.lanes;c&=n.pendingLanes,l|=c,s.lanes=l,Wc(n,l)}}function xg(n,s){var l=n.updateQueue,c=n.alternate;if(c!==null&&(c=c.updateQueue,l===c)){var f=null,m=null;if(l=l.firstBaseUpdate,l!==null){do{var w={eventTime:l.eventTime,lane:l.lane,tag:l.tag,payload:l.payload,callback:l.callback,next:null};m===null?f=m=w:m=m.next=w,l=l.next}while(l!==null);m===null?f=m=s:m=m.next=s}else f=m=s;l={baseState:c.baseState,firstBaseUpdate:f,lastBaseUpdate:m,shared:c.shared,effects:c.effects},n.updateQueue=l;return}n=l.lastBaseUpdate,n===null?l.firstBaseUpdate=s:n.next=s,l.lastBaseUpdate=s}function Al(n,s,l,c){var f=n.updateQueue;os=!1;var m=f.firstBaseUpdate,w=f.lastBaseUpdate,b=f.shared.pending;if(b!==null){f.shared.pending=null;var A=b,I=A.next;A.next=null,w===null?m=I:w.next=I,w=A;var z=n.alternate;z!==null&&(z=z.updateQueue,b=z.lastBaseUpdate,b!==w&&(b===null?z.firstBaseUpdate=I:b.next=I,z.lastBaseUpdate=A))}if(m!==null){var V=f.baseState;w=0,z=I=A=null,b=m;do{var $=b.lane,X=b.eventTime;if((c&$)===$){z!==null&&(z=z.next={eventTime:X,lane:0,tag:b.tag,payload:b.payload,callback:b.callback,next:null});e:{var te=n,re=b;switch($=s,X=l,re.tag){case 1:if(te=re.payload,typeof te=="function"){V=te.call(X,V,$);break e}V=te;break e;case 3:te.flags=te.flags&-65537|128;case 0:if(te=re.payload,$=typeof te=="function"?te.call(X,V,$):te,$==null)break e;V=J({},V,$);break e;case 2:os=!0}}b.callback!==null&&b.lane!==0&&(n.flags|=64,$=f.effects,$===null?f.effects=[b]:$.push(b))}else X={eventTime:X,lane:$,tag:b.tag,payload:b.payload,callback:b.callback,next:null},z===null?(I=z=X,A=V):z=z.next=X,w|=$;if(b=b.next,b===null){if(b=f.shared.pending,b===null)break;$=b,b=$.next,$.next=null,f.lastBaseUpdate=$,f.shared.pending=null}}while(!0);if(z===null&&(A=V),f.baseState=A,f.firstBaseUpdate=I,f.lastBaseUpdate=z,s=f.shared.interleaved,s!==null){f=s;do w|=f.lane,f=f.next;while(f!==s)}else m===null&&(f.shared.lanes=0);Ms|=w,n.lanes=w,n.memoizedState=V}}function Tg(n,s,l){if(n=s.effects,s.effects=null,n!==null)for(s=0;s<n.length;s++){var c=n[s],f=c.callback;if(f!==null){if(c.callback=null,c=l,typeof f!="function")throw Error(r(191,f));f.call(c)}}}var Jo={},hn=ns(Jo),Xo=ns(Jo),Yo=ns(Jo);function Us(n){if(n===Jo)throw Error(r(174));return n}function jh(n,s){switch(Ue(Yo,s),Ue(Xo,n),Ue(hn,Jo),n=s.nodeType,n){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:Oc(null,"");break;default:n=n===8?s.parentNode:s,s=n.namespaceURI||null,n=n.tagName,s=Oc(s,n)}ze(hn),Ue(hn,s)}function Ri(){ze(hn),ze(Xo),ze(Yo)}function Rg(n){Us(Yo.current);var s=Us(hn.current),l=Oc(s,n.type);s!==l&&(Ue(Xo,n),Ue(hn,l))}function Oh(n){Xo.current===n&&(ze(hn),ze(Xo))}var Qe=ns(0);function Cl(n){for(var s=n;s!==null;){if(s.tag===13){var l=s.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||l.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Nh=[];function Ih(){for(var n=0;n<Nh.length;n++)Nh[n]._workInProgressVersionPrimary=null;Nh.length=0}var Pl=U.ReactCurrentDispatcher,Lh=U.ReactCurrentBatchConfig,Fs=0,Ze=null,wt=null,xt=null,jl=!1,Qo=!1,Zo=0,r4=0;function Dt(){throw Error(r(321))}function Dh(n,s){if(s===null)return!1;for(var l=0;l<s.length&&l<n.length;l++)if(!Kr(n[l],s[l]))return!1;return!0}function Uh(n,s,l,c,f,m){if(Fs=m,Ze=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,Pl.current=n===null||n.memoizedState===null?o4:a4,n=l(c,f),Qo){m=0;do{if(Qo=!1,Zo=0,25<=m)throw Error(r(301));m+=1,xt=wt=null,s.updateQueue=null,Pl.current=l4,n=l(c,f)}while(Qo)}if(Pl.current=Il,s=wt!==null&&wt.next!==null,Fs=0,xt=wt=Ze=null,jl=!1,s)throw Error(r(300));return n}function Fh(){var n=Zo!==0;return Zo=0,n}function dn(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return xt===null?Ze.memoizedState=xt=n:xt=xt.next=n,xt}function Cr(){if(wt===null){var n=Ze.alternate;n=n!==null?n.memoizedState:null}else n=wt.next;var s=xt===null?Ze.memoizedState:xt.next;if(s!==null)xt=s,wt=n;else{if(n===null)throw Error(r(310));wt=n,n={memoizedState:wt.memoizedState,baseState:wt.baseState,baseQueue:wt.baseQueue,queue:wt.queue,next:null},xt===null?Ze.memoizedState=xt=n:xt=xt.next=n}return xt}function ea(n,s){return typeof s=="function"?s(n):s}function Mh(n){var s=Cr(),l=s.queue;if(l===null)throw Error(r(311));l.lastRenderedReducer=n;var c=wt,f=c.baseQueue,m=l.pending;if(m!==null){if(f!==null){var w=f.next;f.next=m.next,m.next=w}c.baseQueue=f=m,l.pending=null}if(f!==null){m=f.next,c=c.baseState;var b=w=null,A=null,I=m;do{var z=I.lane;if((Fs&z)===z)A!==null&&(A=A.next={lane:0,action:I.action,hasEagerState:I.hasEagerState,eagerState:I.eagerState,next:null}),c=I.hasEagerState?I.eagerState:n(c,I.action);else{var V={lane:z,action:I.action,hasEagerState:I.hasEagerState,eagerState:I.eagerState,next:null};A===null?(b=A=V,w=c):A=A.next=V,Ze.lanes|=z,Ms|=z}I=I.next}while(I!==null&&I!==m);A===null?w=c:A.next=b,Kr(c,s.memoizedState)||(rr=!0),s.memoizedState=c,s.baseState=w,s.baseQueue=A,l.lastRenderedState=c}if(n=l.interleaved,n!==null){f=n;do m=f.lane,Ze.lanes|=m,Ms|=m,f=f.next;while(f!==n)}else f===null&&(l.lanes=0);return[s.memoizedState,l.dispatch]}function $h(n){var s=Cr(),l=s.queue;if(l===null)throw Error(r(311));l.lastRenderedReducer=n;var c=l.dispatch,f=l.pending,m=s.memoizedState;if(f!==null){l.pending=null;var w=f=f.next;do m=n(m,w.action),w=w.next;while(w!==f);Kr(m,s.memoizedState)||(rr=!0),s.memoizedState=m,s.baseQueue===null&&(s.baseState=m),l.lastRenderedState=m}return[m,c]}function Ag(){}function Cg(n,s){var l=Ze,c=Cr(),f=s(),m=!Kr(c.memoizedState,f);if(m&&(c.memoizedState=f,rr=!0),c=c.queue,Bh(Og.bind(null,l,c,n),[n]),c.getSnapshot!==s||m||xt!==null&&xt.memoizedState.tag&1){if(l.flags|=2048,ta(9,jg.bind(null,l,c,f,s),void 0,null),Tt===null)throw Error(r(349));(Fs&30)!==0||Pg(l,s,f)}return f}function Pg(n,s,l){n.flags|=16384,n={getSnapshot:s,value:l},s=Ze.updateQueue,s===null?(s={lastEffect:null,stores:null},Ze.updateQueue=s,s.stores=[n]):(l=s.stores,l===null?s.stores=[n]:l.push(n))}function jg(n,s,l,c){s.value=l,s.getSnapshot=c,Ng(s)&&Ig(n)}function Og(n,s,l){return l(function(){Ng(s)&&Ig(n)})}function Ng(n){var s=n.getSnapshot;n=n.value;try{var l=s();return!Kr(n,l)}catch{return!0}}function Ig(n){var s=An(n,1);s!==null&&Xr(s,n,1,-1)}function Lg(n){var s=dn();return typeof n=="function"&&(n=n()),s.memoizedState=s.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ea,lastRenderedState:n},s.queue=n,n=n.dispatch=i4.bind(null,Ze,n),[s.memoizedState,n]}function ta(n,s,l,c){return n={tag:n,create:s,destroy:l,deps:c,next:null},s=Ze.updateQueue,s===null?(s={lastEffect:null,stores:null},Ze.updateQueue=s,s.lastEffect=n.next=n):(l=s.lastEffect,l===null?s.lastEffect=n.next=n:(c=l.next,l.next=n,n.next=c,s.lastEffect=n)),n}function Dg(){return Cr().memoizedState}function Ol(n,s,l,c){var f=dn();Ze.flags|=n,f.memoizedState=ta(1|s,l,void 0,c===void 0?null:c)}function Nl(n,s,l,c){var f=Cr();c=c===void 0?null:c;var m=void 0;if(wt!==null){var w=wt.memoizedState;if(m=w.destroy,c!==null&&Dh(c,w.deps)){f.memoizedState=ta(s,l,m,c);return}}Ze.flags|=n,f.memoizedState=ta(1|s,l,m,c)}function Ug(n,s){return Ol(8390656,8,n,s)}function Bh(n,s){return Nl(2048,8,n,s)}function Fg(n,s){return Nl(4,2,n,s)}function Mg(n,s){return Nl(4,4,n,s)}function $g(n,s){if(typeof s=="function")return n=n(),s(n),function(){s(null)};if(s!=null)return n=n(),s.current=n,function(){s.current=null}}function Bg(n,s,l){return l=l!=null?l.concat([n]):null,Nl(4,4,$g.bind(null,s,n),l)}function zh(){}function zg(n,s){var l=Cr();s=s===void 0?null:s;var c=l.memoizedState;return c!==null&&s!==null&&Dh(s,c[1])?c[0]:(l.memoizedState=[n,s],n)}function Vg(n,s){var l=Cr();s=s===void 0?null:s;var c=l.memoizedState;return c!==null&&s!==null&&Dh(s,c[1])?c[0]:(n=n(),l.memoizedState=[n,s],n)}function Wg(n,s,l){return(Fs&21)===0?(n.baseState&&(n.baseState=!1,rr=!0),n.memoizedState=l):(Kr(l,s)||(l=_m(),Ze.lanes|=l,Ms|=l,n.baseState=!0),s)}function n4(n,s){var l=Oe;Oe=l!==0&&4>l?l:4,n(!0);var c=Lh.transition;Lh.transition={};try{n(!1),s()}finally{Oe=l,Lh.transition=c}}function Kg(){return Cr().memoizedState}function s4(n,s,l){var c=hs(n);if(l={lane:c,action:l,hasEagerState:!1,eagerState:null,next:null},Hg(n))Gg(s,l);else if(l=kg(n,s,l,c),l!==null){var f=Kt();Xr(l,n,c,f),qg(l,s,c)}}function i4(n,s,l){var c=hs(n),f={lane:c,action:l,hasEagerState:!1,eagerState:null,next:null};if(Hg(n))Gg(s,f);else{var m=n.alternate;if(n.lanes===0&&(m===null||m.lanes===0)&&(m=s.lastRenderedReducer,m!==null))try{var w=s.lastRenderedState,b=m(w,l);if(f.hasEagerState=!0,f.eagerState=b,Kr(b,w)){var A=s.interleaved;A===null?(f.next=f,Ch(s)):(f.next=A.next,A.next=f),s.interleaved=f;return}}catch{}finally{}l=kg(n,s,f,c),l!==null&&(f=Kt(),Xr(l,n,c,f),qg(l,s,c))}}function Hg(n){var s=n.alternate;return n===Ze||s!==null&&s===Ze}function Gg(n,s){Qo=jl=!0;var l=n.pending;l===null?s.next=s:(s.next=l.next,l.next=s),n.pending=s}function qg(n,s,l){if((l&4194240)!==0){var c=s.lanes;c&=n.pendingLanes,l|=c,s.lanes=l,Wc(n,l)}}var Il={readContext:Ar,useCallback:Dt,useContext:Dt,useEffect:Dt,useImperativeHandle:Dt,useInsertionEffect:Dt,useLayoutEffect:Dt,useMemo:Dt,useReducer:Dt,useRef:Dt,useState:Dt,useDebugValue:Dt,useDeferredValue:Dt,useTransition:Dt,useMutableSource:Dt,useSyncExternalStore:Dt,useId:Dt,unstable_isNewReconciler:!1},o4={readContext:Ar,useCallback:function(n,s){return dn().memoizedState=[n,s===void 0?null:s],n},useContext:Ar,useEffect:Ug,useImperativeHandle:function(n,s,l){return l=l!=null?l.concat([n]):null,Ol(4194308,4,$g.bind(null,s,n),l)},useLayoutEffect:function(n,s){return Ol(4194308,4,n,s)},useInsertionEffect:function(n,s){return Ol(4,2,n,s)},useMemo:function(n,s){var l=dn();return s=s===void 0?null:s,n=n(),l.memoizedState=[n,s],n},useReducer:function(n,s,l){var c=dn();return s=l!==void 0?l(s):s,c.memoizedState=c.baseState=s,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:s},c.queue=n,n=n.dispatch=s4.bind(null,Ze,n),[c.memoizedState,n]},useRef:function(n){var s=dn();return n={current:n},s.memoizedState=n},useState:Lg,useDebugValue:zh,useDeferredValue:function(n){return dn().memoizedState=n},useTransition:function(){var n=Lg(!1),s=n[0];return n=n4.bind(null,n[1]),dn().memoizedState=n,[s,n]},useMutableSource:function(){},useSyncExternalStore:function(n,s,l){var c=Ze,f=dn();if(He){if(l===void 0)throw Error(r(407));l=l()}else{if(l=s(),Tt===null)throw Error(r(349));(Fs&30)!==0||Pg(c,s,l)}f.memoizedState=l;var m={value:l,getSnapshot:s};return f.queue=m,Ug(Og.bind(null,c,m,n),[n]),c.flags|=2048,ta(9,jg.bind(null,c,m,l,s),void 0,null),l},useId:function(){var n=dn(),s=Tt.identifierPrefix;if(He){var l=Rn,c=Tn;l=(c&~(1<<32-Wr(c)-1)).toString(32)+l,s=":"+s+"R"+l,l=Zo++,0<l&&(s+="H"+l.toString(32)),s+=":"}else l=r4++,s=":"+s+"r"+l.toString(32)+":";return n.memoizedState=s},unstable_isNewReconciler:!1},a4={readContext:Ar,useCallback:zg,useContext:Ar,useEffect:Bh,useImperativeHandle:Bg,useInsertionEffect:Fg,useLayoutEffect:Mg,useMemo:Vg,useReducer:Mh,useRef:Dg,useState:function(){return Mh(ea)},useDebugValue:zh,useDeferredValue:function(n){var s=Cr();return Wg(s,wt.memoizedState,n)},useTransition:function(){var n=Mh(ea)[0],s=Cr().memoizedState;return[n,s]},useMutableSource:Ag,useSyncExternalStore:Cg,useId:Kg,unstable_isNewReconciler:!1},l4={readContext:Ar,useCallback:zg,useContext:Ar,useEffect:Bh,useImperativeHandle:Bg,useInsertionEffect:Fg,useLayoutEffect:Mg,useMemo:Vg,useReducer:$h,useRef:Dg,useState:function(){return $h(ea)},useDebugValue:zh,useDeferredValue:function(n){var s=Cr();return wt===null?s.memoizedState=n:Wg(s,wt.memoizedState,n)},useTransition:function(){var n=$h(ea)[0],s=Cr().memoizedState;return[n,s]},useMutableSource:Ag,useSyncExternalStore:Cg,useId:Kg,unstable_isNewReconciler:!1};function Gr(n,s){if(n&&n.defaultProps){s=J({},s),n=n.defaultProps;for(var l in n)s[l]===void 0&&(s[l]=n[l]);return s}return s}function Vh(n,s,l,c){s=n.memoizedState,l=l(c,s),l=l==null?s:J({},s,l),n.memoizedState=l,n.lanes===0&&(n.updateQueue.baseState=l)}var Ll={isMounted:function(n){return(n=n._reactInternals)?js(n)===n:!1},enqueueSetState:function(n,s,l){n=n._reactInternals;var c=Kt(),f=hs(n),m=Cn(c,f);m.payload=s,l!=null&&(m.callback=l),s=as(n,m,f),s!==null&&(Xr(s,n,f,c),Rl(s,n,f))},enqueueReplaceState:function(n,s,l){n=n._reactInternals;var c=Kt(),f=hs(n),m=Cn(c,f);m.tag=1,m.payload=s,l!=null&&(m.callback=l),s=as(n,m,f),s!==null&&(Xr(s,n,f,c),Rl(s,n,f))},enqueueForceUpdate:function(n,s){n=n._reactInternals;var l=Kt(),c=hs(n),f=Cn(l,c);f.tag=2,s!=null&&(f.callback=s),s=as(n,f,c),s!==null&&(Xr(s,n,c,l),Rl(s,n,c))}};function Jg(n,s,l,c,f,m,w){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(c,m,w):s.prototype&&s.prototype.isPureReactComponent?!Bo(l,c)||!Bo(f,m):!0}function Xg(n,s,l){var c=!1,f=ss,m=s.contextType;return typeof m=="object"&&m!==null?m=Ar(m):(f=tr(s)?Ns:Lt.current,c=s.contextTypes,m=(c=c!=null)?_i(n,f):ss),s=new s(l,m),n.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=Ll,n.stateNode=s,s._reactInternals=n,c&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=f,n.__reactInternalMemoizedMaskedChildContext=m),s}function Yg(n,s,l,c){n=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(l,c),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(l,c),s.state!==n&&Ll.enqueueReplaceState(s,s.state,null)}function Wh(n,s,l,c){var f=n.stateNode;f.props=l,f.state=n.memoizedState,f.refs={},Ph(n);var m=s.contextType;typeof m=="object"&&m!==null?f.context=Ar(m):(m=tr(s)?Ns:Lt.current,f.context=_i(n,m)),f.state=n.memoizedState,m=s.getDerivedStateFromProps,typeof m=="function"&&(Vh(n,s,m,l),f.state=n.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(s=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),s!==f.state&&Ll.enqueueReplaceState(f,f.state,null),Al(n,l,f,c),f.state=n.memoizedState),typeof f.componentDidMount=="function"&&(n.flags|=4194308)}function Ai(n,s){try{var l="",c=s;do l+=q(c),c=c.return;while(c);var f=l}catch(m){f=`
Error generating stack: `+m.message+`
`+m.stack}return{value:n,source:s,stack:f,digest:null}}function Kh(n,s,l){return{value:n,source:null,stack:l??null,digest:s??null}}function Hh(n,s){try{console.error(s.value)}catch(l){setTimeout(function(){throw l})}}var u4=typeof WeakMap=="function"?WeakMap:Map;function Qg(n,s,l){l=Cn(-1,l),l.tag=3,l.payload={element:null};var c=s.value;return l.callback=function(){zl||(zl=!0,ad=c),Hh(n,s)},l}function Zg(n,s,l){l=Cn(-1,l),l.tag=3;var c=n.type.getDerivedStateFromError;if(typeof c=="function"){var f=s.value;l.payload=function(){return c(f)},l.callback=function(){Hh(n,s)}}var m=n.stateNode;return m!==null&&typeof m.componentDidCatch=="function"&&(l.callback=function(){Hh(n,s),typeof c!="function"&&(us===null?us=new Set([this]):us.add(this));var w=s.stack;this.componentDidCatch(s.value,{componentStack:w!==null?w:""})}),l}function e0(n,s,l){var c=n.pingCache;if(c===null){c=n.pingCache=new u4;var f=new Set;c.set(s,f)}else f=c.get(s),f===void 0&&(f=new Set,c.set(s,f));f.has(l)||(f.add(l),n=k4.bind(null,n,s,l),s.then(n,n))}function t0(n){do{var s;if((s=n.tag===13)&&(s=n.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return n;n=n.return}while(n!==null);return null}function r0(n,s,l,c,f){return(n.mode&1)===0?(n===s?n.flags|=65536:(n.flags|=128,l.flags|=131072,l.flags&=-52805,l.tag===1&&(l.alternate===null?l.tag=17:(s=Cn(-1,1),s.tag=2,as(l,s,1))),l.lanes|=1),n):(n.flags|=65536,n.lanes=f,n)}var c4=U.ReactCurrentOwner,rr=!1;function Wt(n,s,l,c){s.child=n===null?Sg(s,null,l,c):bi(s,n.child,l,c)}function n0(n,s,l,c,f){l=l.render;var m=s.ref;return Ti(s,f),c=Uh(n,s,l,c,m,f),l=Fh(),n!==null&&!rr?(s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~f,Pn(n,s,f)):(He&&l&&_h(s),s.flags|=1,Wt(n,s,c,f),s.child)}function s0(n,s,l,c,f){if(n===null){var m=l.type;return typeof m=="function"&&!pd(m)&&m.defaultProps===void 0&&l.compare===null&&l.defaultProps===void 0?(s.tag=15,s.type=m,i0(n,s,m,c,f)):(n=ql(l.type,null,c,s,s.mode,f),n.ref=s.ref,n.return=s,s.child=n)}if(m=n.child,(n.lanes&f)===0){var w=m.memoizedProps;if(l=l.compare,l=l!==null?l:Bo,l(w,c)&&n.ref===s.ref)return Pn(n,s,f)}return s.flags|=1,n=fs(m,c),n.ref=s.ref,n.return=s,s.child=n}function i0(n,s,l,c,f){if(n!==null){var m=n.memoizedProps;if(Bo(m,c)&&n.ref===s.ref)if(rr=!1,s.pendingProps=c=m,(n.lanes&f)!==0)(n.flags&131072)!==0&&(rr=!0);else return s.lanes=n.lanes,Pn(n,s,f)}return Gh(n,s,l,c,f)}function o0(n,s,l){var c=s.pendingProps,f=c.children,m=n!==null?n.memoizedState:null;if(c.mode==="hidden")if((s.mode&1)===0)s.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ue(Pi,mr),mr|=l;else{if((l&1073741824)===0)return n=m!==null?m.baseLanes|l:l,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:n,cachePool:null,transitions:null},s.updateQueue=null,Ue(Pi,mr),mr|=n,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},c=m!==null?m.baseLanes:l,Ue(Pi,mr),mr|=c}else m!==null?(c=m.baseLanes|l,s.memoizedState=null):c=l,Ue(Pi,mr),mr|=c;return Wt(n,s,f,l),s.child}function a0(n,s){var l=s.ref;(n===null&&l!==null||n!==null&&n.ref!==l)&&(s.flags|=512,s.flags|=2097152)}function Gh(n,s,l,c,f){var m=tr(l)?Ns:Lt.current;return m=_i(s,m),Ti(s,f),l=Uh(n,s,l,c,m,f),c=Fh(),n!==null&&!rr?(s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~f,Pn(n,s,f)):(He&&c&&_h(s),s.flags|=1,Wt(n,s,l,f),s.child)}function l0(n,s,l,c,f){if(tr(l)){var m=!0;wl(s)}else m=!1;if(Ti(s,f),s.stateNode===null)Ul(n,s),Xg(s,l,c),Wh(s,l,c,f),c=!0;else if(n===null){var w=s.stateNode,b=s.memoizedProps;w.props=b;var A=w.context,I=l.contextType;typeof I=="object"&&I!==null?I=Ar(I):(I=tr(l)?Ns:Lt.current,I=_i(s,I));var z=l.getDerivedStateFromProps,V=typeof z=="function"||typeof w.getSnapshotBeforeUpdate=="function";V||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(b!==c||A!==I)&&Yg(s,w,c,I),os=!1;var $=s.memoizedState;w.state=$,Al(s,c,w,f),A=s.memoizedState,b!==c||$!==A||er.current||os?(typeof z=="function"&&(Vh(s,l,z,c),A=s.memoizedState),(b=os||Jg(s,l,b,c,$,A,I))?(V||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(s.flags|=4194308)):(typeof w.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=c,s.memoizedState=A),w.props=c,w.state=A,w.context=I,c=b):(typeof w.componentDidMount=="function"&&(s.flags|=4194308),c=!1)}else{w=s.stateNode,bg(n,s),b=s.memoizedProps,I=s.type===s.elementType?b:Gr(s.type,b),w.props=I,V=s.pendingProps,$=w.context,A=l.contextType,typeof A=="object"&&A!==null?A=Ar(A):(A=tr(l)?Ns:Lt.current,A=_i(s,A));var X=l.getDerivedStateFromProps;(z=typeof X=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(b!==V||$!==A)&&Yg(s,w,c,A),os=!1,$=s.memoizedState,w.state=$,Al(s,c,w,f);var te=s.memoizedState;b!==V||$!==te||er.current||os?(typeof X=="function"&&(Vh(s,l,X,c),te=s.memoizedState),(I=os||Jg(s,l,I,c,$,te,A)||!1)?(z||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(c,te,A),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(c,te,A)),typeof w.componentDidUpdate=="function"&&(s.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof w.componentDidUpdate!="function"||b===n.memoizedProps&&$===n.memoizedState||(s.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||b===n.memoizedProps&&$===n.memoizedState||(s.flags|=1024),s.memoizedProps=c,s.memoizedState=te),w.props=c,w.state=te,w.context=A,c=I):(typeof w.componentDidUpdate!="function"||b===n.memoizedProps&&$===n.memoizedState||(s.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||b===n.memoizedProps&&$===n.memoizedState||(s.flags|=1024),c=!1)}return qh(n,s,l,c,m,f)}function qh(n,s,l,c,f,m){a0(n,s);var w=(s.flags&128)!==0;if(!c&&!w)return f&&fg(s,l,!1),Pn(n,s,m);c=s.stateNode,c4.current=s;var b=w&&typeof l.getDerivedStateFromError!="function"?null:c.render();return s.flags|=1,n!==null&&w?(s.child=bi(s,n.child,null,m),s.child=bi(s,null,b,m)):Wt(n,s,b,m),s.memoizedState=c.state,f&&fg(s,l,!0),s.child}function u0(n){var s=n.stateNode;s.pendingContext?hg(n,s.pendingContext,s.pendingContext!==s.context):s.context&&hg(n,s.context,!1),jh(n,s.containerInfo)}function c0(n,s,l,c,f){return ki(),bh(f),s.flags|=256,Wt(n,s,l,c),s.child}var Jh={dehydrated:null,treeContext:null,retryLane:0};function Xh(n){return{baseLanes:n,cachePool:null,transitions:null}}function h0(n,s,l){var c=s.pendingProps,f=Qe.current,m=!1,w=(s.flags&128)!==0,b;if((b=w)||(b=n!==null&&n.memoizedState===null?!1:(f&2)!==0),b?(m=!0,s.flags&=-129):(n===null||n.memoizedState!==null)&&(f|=1),Ue(Qe,f&1),n===null)return kh(s),n=s.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?((s.mode&1)===0?s.lanes=1:n.data==="$!"?s.lanes=8:s.lanes=1073741824,null):(w=c.children,n=c.fallback,m?(c=s.mode,m=s.child,w={mode:"hidden",children:w},(c&1)===0&&m!==null?(m.childLanes=0,m.pendingProps=w):m=Jl(w,c,0,null),n=Vs(n,c,l,null),m.return=s,n.return=s,m.sibling=n,s.child=m,s.child.memoizedState=Xh(l),s.memoizedState=Jh,n):Yh(s,w));if(f=n.memoizedState,f!==null&&(b=f.dehydrated,b!==null))return h4(n,s,w,c,b,f,l);if(m){m=c.fallback,w=s.mode,f=n.child,b=f.sibling;var A={mode:"hidden",children:c.children};return(w&1)===0&&s.child!==f?(c=s.child,c.childLanes=0,c.pendingProps=A,s.deletions=null):(c=fs(f,A),c.subtreeFlags=f.subtreeFlags&14680064),b!==null?m=fs(b,m):(m=Vs(m,w,l,null),m.flags|=2),m.return=s,c.return=s,c.sibling=m,s.child=c,c=m,m=s.child,w=n.child.memoizedState,w=w===null?Xh(l):{baseLanes:w.baseLanes|l,cachePool:null,transitions:w.transitions},m.memoizedState=w,m.childLanes=n.childLanes&~l,s.memoizedState=Jh,c}return m=n.child,n=m.sibling,c=fs(m,{mode:"visible",children:c.children}),(s.mode&1)===0&&(c.lanes=l),c.return=s,c.sibling=null,n!==null&&(l=s.deletions,l===null?(s.deletions=[n],s.flags|=16):l.push(n)),s.child=c,s.memoizedState=null,c}function Yh(n,s){return s=Jl({mode:"visible",children:s},n.mode,0,null),s.return=n,n.child=s}function Dl(n,s,l,c){return c!==null&&bh(c),bi(s,n.child,null,l),n=Yh(s,s.pendingProps.children),n.flags|=2,s.memoizedState=null,n}function h4(n,s,l,c,f,m,w){if(l)return s.flags&256?(s.flags&=-257,c=Kh(Error(r(422))),Dl(n,s,w,c)):s.memoizedState!==null?(s.child=n.child,s.flags|=128,null):(m=c.fallback,f=s.mode,c=Jl({mode:"visible",children:c.children},f,0,null),m=Vs(m,f,w,null),m.flags|=2,c.return=s,m.return=s,c.sibling=m,s.child=c,(s.mode&1)!==0&&bi(s,n.child,null,w),s.child.memoizedState=Xh(w),s.memoizedState=Jh,m);if((s.mode&1)===0)return Dl(n,s,w,null);if(f.data==="$!"){if(c=f.nextSibling&&f.nextSibling.dataset,c)var b=c.dgst;return c=b,m=Error(r(419)),c=Kh(m,c,void 0),Dl(n,s,w,c)}if(b=(w&n.childLanes)!==0,rr||b){if(c=Tt,c!==null){switch(w&-w){case 4:f=2;break;case 16:f=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:f=32;break;case 536870912:f=268435456;break;default:f=0}f=(f&(c.suspendedLanes|w))!==0?0:f,f!==0&&f!==m.retryLane&&(m.retryLane=f,An(n,f),Xr(c,n,f,-1))}return fd(),c=Kh(Error(r(421))),Dl(n,s,w,c)}return f.data==="$?"?(s.flags|=128,s.child=n.child,s=b4.bind(null,n),f._reactRetry=s,null):(n=m.treeContext,pr=rs(f.nextSibling),fr=s,He=!0,Hr=null,n!==null&&(Tr[Rr++]=Tn,Tr[Rr++]=Rn,Tr[Rr++]=Is,Tn=n.id,Rn=n.overflow,Is=s),s=Yh(s,c.children),s.flags|=4096,s)}function d0(n,s,l){n.lanes|=s;var c=n.alternate;c!==null&&(c.lanes|=s),Ah(n.return,s,l)}function Qh(n,s,l,c,f){var m=n.memoizedState;m===null?n.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:c,tail:l,tailMode:f}:(m.isBackwards=s,m.rendering=null,m.renderingStartTime=0,m.last=c,m.tail=l,m.tailMode=f)}function f0(n,s,l){var c=s.pendingProps,f=c.revealOrder,m=c.tail;if(Wt(n,s,c.children,l),c=Qe.current,(c&2)!==0)c=c&1|2,s.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=s.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&d0(n,l,s);else if(n.tag===19)d0(n,l,s);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===s)break e;for(;n.sibling===null;){if(n.return===null||n.return===s)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}c&=1}if(Ue(Qe,c),(s.mode&1)===0)s.memoizedState=null;else switch(f){case"forwards":for(l=s.child,f=null;l!==null;)n=l.alternate,n!==null&&Cl(n)===null&&(f=l),l=l.sibling;l=f,l===null?(f=s.child,s.child=null):(f=l.sibling,l.sibling=null),Qh(s,!1,f,l,m);break;case"backwards":for(l=null,f=s.child,s.child=null;f!==null;){if(n=f.alternate,n!==null&&Cl(n)===null){s.child=f;break}n=f.sibling,f.sibling=l,l=f,f=n}Qh(s,!0,l,null,m);break;case"together":Qh(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function Ul(n,s){(s.mode&1)===0&&n!==null&&(n.alternate=null,s.alternate=null,s.flags|=2)}function Pn(n,s,l){if(n!==null&&(s.dependencies=n.dependencies),Ms|=s.lanes,(l&s.childLanes)===0)return null;if(n!==null&&s.child!==n.child)throw Error(r(153));if(s.child!==null){for(n=s.child,l=fs(n,n.pendingProps),s.child=l,l.return=s;n.sibling!==null;)n=n.sibling,l=l.sibling=fs(n,n.pendingProps),l.return=s;l.sibling=null}return s.child}function d4(n,s,l){switch(s.tag){case 3:u0(s),ki();break;case 5:Rg(s);break;case 1:tr(s.type)&&wl(s);break;case 4:jh(s,s.stateNode.containerInfo);break;case 10:var c=s.type._context,f=s.memoizedProps.value;Ue(xl,c._currentValue),c._currentValue=f;break;case 13:if(c=s.memoizedState,c!==null)return c.dehydrated!==null?(Ue(Qe,Qe.current&1),s.flags|=128,null):(l&s.child.childLanes)!==0?h0(n,s,l):(Ue(Qe,Qe.current&1),n=Pn(n,s,l),n!==null?n.sibling:null);Ue(Qe,Qe.current&1);break;case 19:if(c=(l&s.childLanes)!==0,(n.flags&128)!==0){if(c)return f0(n,s,l);s.flags|=128}if(f=s.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),Ue(Qe,Qe.current),c)break;return null;case 22:case 23:return s.lanes=0,o0(n,s,l)}return Pn(n,s,l)}var p0,Zh,m0,g0;p0=function(n,s){for(var l=s.child;l!==null;){if(l.tag===5||l.tag===6)n.appendChild(l.stateNode);else if(l.tag!==4&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===s)break;for(;l.sibling===null;){if(l.return===null||l.return===s)return;l=l.return}l.sibling.return=l.return,l=l.sibling}},Zh=function(){},m0=function(n,s,l,c){var f=n.memoizedProps;if(f!==c){n=s.stateNode,Us(hn.current);var m=null;switch(l){case"input":f=zt(n,f),c=zt(n,c),m=[];break;case"select":f=J({},f,{value:void 0}),c=J({},c,{value:void 0}),m=[];break;case"textarea":f=Vt(n,f),c=Vt(n,c),m=[];break;default:typeof f.onClick!="function"&&typeof c.onClick=="function"&&(n.onclick=gl)}Nc(l,c);var w;l=null;for(I in f)if(!c.hasOwnProperty(I)&&f.hasOwnProperty(I)&&f[I]!=null)if(I==="style"){var b=f[I];for(w in b)b.hasOwnProperty(w)&&(l||(l={}),l[w]="")}else I!=="dangerouslySetInnerHTML"&&I!=="children"&&I!=="suppressContentEditableWarning"&&I!=="suppressHydrationWarning"&&I!=="autoFocus"&&(o.hasOwnProperty(I)?m||(m=[]):(m=m||[]).push(I,null));for(I in c){var A=c[I];if(b=f!=null?f[I]:void 0,c.hasOwnProperty(I)&&A!==b&&(A!=null||b!=null))if(I==="style")if(b){for(w in b)!b.hasOwnProperty(w)||A&&A.hasOwnProperty(w)||(l||(l={}),l[w]="");for(w in A)A.hasOwnProperty(w)&&b[w]!==A[w]&&(l||(l={}),l[w]=A[w])}else l||(m||(m=[]),m.push(I,l)),l=A;else I==="dangerouslySetInnerHTML"?(A=A?A.__html:void 0,b=b?b.__html:void 0,A!=null&&b!==A&&(m=m||[]).push(I,A)):I==="children"?typeof A!="string"&&typeof A!="number"||(m=m||[]).push(I,""+A):I!=="suppressContentEditableWarning"&&I!=="suppressHydrationWarning"&&(o.hasOwnProperty(I)?(A!=null&&I==="onScroll"&&Be("scroll",n),m||b===A||(m=[])):(m=m||[]).push(I,A))}l&&(m=m||[]).push("style",l);var I=m;(s.updateQueue=I)&&(s.flags|=4)}},g0=function(n,s,l,c){l!==c&&(s.flags|=4)};function ra(n,s){if(!He)switch(n.tailMode){case"hidden":s=n.tail;for(var l=null;s!==null;)s.alternate!==null&&(l=s),s=s.sibling;l===null?n.tail=null:l.sibling=null;break;case"collapsed":l=n.tail;for(var c=null;l!==null;)l.alternate!==null&&(c=l),l=l.sibling;c===null?s||n.tail===null?n.tail=null:n.tail.sibling=null:c.sibling=null}}function Ut(n){var s=n.alternate!==null&&n.alternate.child===n.child,l=0,c=0;if(s)for(var f=n.child;f!==null;)l|=f.lanes|f.childLanes,c|=f.subtreeFlags&14680064,c|=f.flags&14680064,f.return=n,f=f.sibling;else for(f=n.child;f!==null;)l|=f.lanes|f.childLanes,c|=f.subtreeFlags,c|=f.flags,f.return=n,f=f.sibling;return n.subtreeFlags|=c,n.childLanes=l,s}function f4(n,s,l){var c=s.pendingProps;switch(Eh(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ut(s),null;case 1:return tr(s.type)&&vl(),Ut(s),null;case 3:return c=s.stateNode,Ri(),ze(er),ze(Lt),Ih(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(n===null||n.child===null)&&(kl(s)?s.flags|=4:n===null||n.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Hr!==null&&(cd(Hr),Hr=null))),Zh(n,s),Ut(s),null;case 5:Oh(s);var f=Us(Yo.current);if(l=s.type,n!==null&&s.stateNode!=null)m0(n,s,l,c,f),n.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!c){if(s.stateNode===null)throw Error(r(166));return Ut(s),null}if(n=Us(hn.current),kl(s)){c=s.stateNode,l=s.type;var m=s.memoizedProps;switch(c[cn]=s,c[Ho]=m,n=(s.mode&1)!==0,l){case"dialog":Be("cancel",c),Be("close",c);break;case"iframe":case"object":case"embed":Be("load",c);break;case"video":case"audio":for(f=0;f<Vo.length;f++)Be(Vo[f],c);break;case"source":Be("error",c);break;case"img":case"image":case"link":Be("error",c),Be("load",c);break;case"details":Be("toggle",c);break;case"input":ln(c,m),Be("invalid",c);break;case"select":c._wrapperState={wasMultiple:!!m.multiple},Be("invalid",c);break;case"textarea":Zt(c,m),Be("invalid",c)}Nc(l,m),f=null;for(var w in m)if(m.hasOwnProperty(w)){var b=m[w];w==="children"?typeof b=="string"?c.textContent!==b&&(m.suppressHydrationWarning!==!0&&ml(c.textContent,b,n),f=["children",b]):typeof b=="number"&&c.textContent!==""+b&&(m.suppressHydrationWarning!==!0&&ml(c.textContent,b,n),f=["children",""+b]):o.hasOwnProperty(w)&&b!=null&&w==="onScroll"&&Be("scroll",c)}switch(l){case"input":Vr(c),Jn(c,m,!0);break;case"textarea":Vr(c),li(c);break;case"select":case"option":break;default:typeof m.onClick=="function"&&(c.onclick=gl)}c=f,s.updateQueue=c,c!==null&&(s.flags|=4)}else{w=f.nodeType===9?f:f.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=Ga(l)),n==="http://www.w3.org/1999/xhtml"?l==="script"?(n=w.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof c.is=="string"?n=w.createElement(l,{is:c.is}):(n=w.createElement(l),l==="select"&&(w=n,c.multiple?w.multiple=!0:c.size&&(w.size=c.size))):n=w.createElementNS(n,l),n[cn]=s,n[Ho]=c,p0(n,s,!1,!1),s.stateNode=n;e:{switch(w=Ic(l,c),l){case"dialog":Be("cancel",n),Be("close",n),f=c;break;case"iframe":case"object":case"embed":Be("load",n),f=c;break;case"video":case"audio":for(f=0;f<Vo.length;f++)Be(Vo[f],n);f=c;break;case"source":Be("error",n),f=c;break;case"img":case"image":case"link":Be("error",n),Be("load",n),f=c;break;case"details":Be("toggle",n),f=c;break;case"input":ln(n,c),f=zt(n,c),Be("invalid",n);break;case"option":f=c;break;case"select":n._wrapperState={wasMultiple:!!c.multiple},f=J({},c,{value:void 0}),Be("invalid",n);break;case"textarea":Zt(n,c),f=Vt(n,c),Be("invalid",n);break;default:f=c}Nc(l,f),b=f;for(m in b)if(b.hasOwnProperty(m)){var A=b[m];m==="style"?im(n,A):m==="dangerouslySetInnerHTML"?(A=A?A.__html:void 0,A!=null&&nm(n,A)):m==="children"?typeof A=="string"?(l!=="textarea"||A!=="")&&bo(n,A):typeof A=="number"&&bo(n,""+A):m!=="suppressContentEditableWarning"&&m!=="suppressHydrationWarning"&&m!=="autoFocus"&&(o.hasOwnProperty(m)?A!=null&&m==="onScroll"&&Be("scroll",n):A!=null&&R(n,m,A,w))}switch(l){case"input":Vr(n),Jn(n,c,!1);break;case"textarea":Vr(n),li(n);break;case"option":c.value!=null&&n.setAttribute("value",""+ce(c.value));break;case"select":n.multiple=!!c.multiple,m=c.value,m!=null?Qt(n,!!c.multiple,m,!1):c.defaultValue!=null&&Qt(n,!!c.multiple,c.defaultValue,!0);break;default:typeof f.onClick=="function"&&(n.onclick=gl)}switch(l){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}}c&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return Ut(s),null;case 6:if(n&&s.stateNode!=null)g0(n,s,n.memoizedProps,c);else{if(typeof c!="string"&&s.stateNode===null)throw Error(r(166));if(l=Us(Yo.current),Us(hn.current),kl(s)){if(c=s.stateNode,l=s.memoizedProps,c[cn]=s,(m=c.nodeValue!==l)&&(n=fr,n!==null))switch(n.tag){case 3:ml(c.nodeValue,l,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&ml(c.nodeValue,l,(n.mode&1)!==0)}m&&(s.flags|=4)}else c=(l.nodeType===9?l:l.ownerDocument).createTextNode(c),c[cn]=s,s.stateNode=c}return Ut(s),null;case 13:if(ze(Qe),c=s.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(He&&pr!==null&&(s.mode&1)!==0&&(s.flags&128)===0)wg(),ki(),s.flags|=98560,m=!1;else if(m=kl(s),c!==null&&c.dehydrated!==null){if(n===null){if(!m)throw Error(r(318));if(m=s.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(r(317));m[cn]=s}else ki(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Ut(s),m=!1}else Hr!==null&&(cd(Hr),Hr=null),m=!0;if(!m)return s.flags&65536?s:null}return(s.flags&128)!==0?(s.lanes=l,s):(c=c!==null,c!==(n!==null&&n.memoizedState!==null)&&c&&(s.child.flags|=8192,(s.mode&1)!==0&&(n===null||(Qe.current&1)!==0?_t===0&&(_t=3):fd())),s.updateQueue!==null&&(s.flags|=4),Ut(s),null);case 4:return Ri(),Zh(n,s),n===null&&Wo(s.stateNode.containerInfo),Ut(s),null;case 10:return Rh(s.type._context),Ut(s),null;case 17:return tr(s.type)&&vl(),Ut(s),null;case 19:if(ze(Qe),m=s.memoizedState,m===null)return Ut(s),null;if(c=(s.flags&128)!==0,w=m.rendering,w===null)if(c)ra(m,!1);else{if(_t!==0||n!==null&&(n.flags&128)!==0)for(n=s.child;n!==null;){if(w=Cl(n),w!==null){for(s.flags|=128,ra(m,!1),c=w.updateQueue,c!==null&&(s.updateQueue=c,s.flags|=4),s.subtreeFlags=0,c=l,l=s.child;l!==null;)m=l,n=c,m.flags&=14680066,w=m.alternate,w===null?(m.childLanes=0,m.lanes=n,m.child=null,m.subtreeFlags=0,m.memoizedProps=null,m.memoizedState=null,m.updateQueue=null,m.dependencies=null,m.stateNode=null):(m.childLanes=w.childLanes,m.lanes=w.lanes,m.child=w.child,m.subtreeFlags=0,m.deletions=null,m.memoizedProps=w.memoizedProps,m.memoizedState=w.memoizedState,m.updateQueue=w.updateQueue,m.type=w.type,n=w.dependencies,m.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),l=l.sibling;return Ue(Qe,Qe.current&1|2),s.child}n=n.sibling}m.tail!==null&&ot()>ji&&(s.flags|=128,c=!0,ra(m,!1),s.lanes=4194304)}else{if(!c)if(n=Cl(w),n!==null){if(s.flags|=128,c=!0,l=n.updateQueue,l!==null&&(s.updateQueue=l,s.flags|=4),ra(m,!0),m.tail===null&&m.tailMode==="hidden"&&!w.alternate&&!He)return Ut(s),null}else 2*ot()-m.renderingStartTime>ji&&l!==1073741824&&(s.flags|=128,c=!0,ra(m,!1),s.lanes=4194304);m.isBackwards?(w.sibling=s.child,s.child=w):(l=m.last,l!==null?l.sibling=w:s.child=w,m.last=w)}return m.tail!==null?(s=m.tail,m.rendering=s,m.tail=s.sibling,m.renderingStartTime=ot(),s.sibling=null,l=Qe.current,Ue(Qe,c?l&1|2:l&1),s):(Ut(s),null);case 22:case 23:return dd(),c=s.memoizedState!==null,n!==null&&n.memoizedState!==null!==c&&(s.flags|=8192),c&&(s.mode&1)!==0?(mr&1073741824)!==0&&(Ut(s),s.subtreeFlags&6&&(s.flags|=8192)):Ut(s),null;case 24:return null;case 25:return null}throw Error(r(156,s.tag))}function p4(n,s){switch(Eh(s),s.tag){case 1:return tr(s.type)&&vl(),n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 3:return Ri(),ze(er),ze(Lt),Ih(),n=s.flags,(n&65536)!==0&&(n&128)===0?(s.flags=n&-65537|128,s):null;case 5:return Oh(s),null;case 13:if(ze(Qe),n=s.memoizedState,n!==null&&n.dehydrated!==null){if(s.alternate===null)throw Error(r(340));ki()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 19:return ze(Qe),null;case 4:return Ri(),null;case 10:return Rh(s.type._context),null;case 22:case 23:return dd(),null;case 24:return null;default:return null}}var Fl=!1,Ft=!1,m4=typeof WeakSet=="function"?WeakSet:Set,Q=null;function Ci(n,s){var l=n.ref;if(l!==null)if(typeof l=="function")try{l(null)}catch(c){tt(n,s,c)}else l.current=null}function ed(n,s,l){try{l()}catch(c){tt(n,s,c)}}var y0=!1;function g4(n,s){if(dh=sl,n=Jm(),sh(n)){if("selectionStart"in n)var l={start:n.selectionStart,end:n.selectionEnd};else e:{l=(l=n.ownerDocument)&&l.defaultView||window;var c=l.getSelection&&l.getSelection();if(c&&c.rangeCount!==0){l=c.anchorNode;var f=c.anchorOffset,m=c.focusNode;c=c.focusOffset;try{l.nodeType,m.nodeType}catch{l=null;break e}var w=0,b=-1,A=-1,I=0,z=0,V=n,$=null;t:for(;;){for(var X;V!==l||f!==0&&V.nodeType!==3||(b=w+f),V!==m||c!==0&&V.nodeType!==3||(A=w+c),V.nodeType===3&&(w+=V.nodeValue.length),(X=V.firstChild)!==null;)$=V,V=X;for(;;){if(V===n)break t;if($===l&&++I===f&&(b=w),$===m&&++z===c&&(A=w),(X=V.nextSibling)!==null)break;V=$,$=V.parentNode}V=X}l=b===-1||A===-1?null:{start:b,end:A}}else l=null}l=l||{start:0,end:0}}else l=null;for(fh={focusedElem:n,selectionRange:l},sl=!1,Q=s;Q!==null;)if(s=Q,n=s.child,(s.subtreeFlags&1028)!==0&&n!==null)n.return=s,Q=n;else for(;Q!==null;){s=Q;try{var te=s.alternate;if((s.flags&1024)!==0)switch(s.tag){case 0:case 11:case 15:break;case 1:if(te!==null){var re=te.memoizedProps,at=te.memoizedState,O=s.stateNode,C=O.getSnapshotBeforeUpdate(s.elementType===s.type?re:Gr(s.type,re),at);O.__reactInternalSnapshotBeforeUpdate=C}break;case 3:var N=s.stateNode.containerInfo;N.nodeType===1?N.textContent="":N.nodeType===9&&N.documentElement&&N.removeChild(N.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(r(163))}}catch(K){tt(s,s.return,K)}if(n=s.sibling,n!==null){n.return=s.return,Q=n;break}Q=s.return}return te=y0,y0=!1,te}function na(n,s,l){var c=s.updateQueue;if(c=c!==null?c.lastEffect:null,c!==null){var f=c=c.next;do{if((f.tag&n)===n){var m=f.destroy;f.destroy=void 0,m!==void 0&&ed(s,l,m)}f=f.next}while(f!==c)}}function Ml(n,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var l=s=s.next;do{if((l.tag&n)===n){var c=l.create;l.destroy=c()}l=l.next}while(l!==s)}}function td(n){var s=n.ref;if(s!==null){var l=n.stateNode;switch(n.tag){case 5:n=l;break;default:n=l}typeof s=="function"?s(n):s.current=n}}function v0(n){var s=n.alternate;s!==null&&(n.alternate=null,v0(s)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(s=n.stateNode,s!==null&&(delete s[cn],delete s[Ho],delete s[yh],delete s[Q_],delete s[Z_])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function w0(n){return n.tag===5||n.tag===3||n.tag===4}function _0(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||w0(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function rd(n,s,l){var c=n.tag;if(c===5||c===6)n=n.stateNode,s?l.nodeType===8?l.parentNode.insertBefore(n,s):l.insertBefore(n,s):(l.nodeType===8?(s=l.parentNode,s.insertBefore(n,l)):(s=l,s.appendChild(n)),l=l._reactRootContainer,l!=null||s.onclick!==null||(s.onclick=gl));else if(c!==4&&(n=n.child,n!==null))for(rd(n,s,l),n=n.sibling;n!==null;)rd(n,s,l),n=n.sibling}function nd(n,s,l){var c=n.tag;if(c===5||c===6)n=n.stateNode,s?l.insertBefore(n,s):l.appendChild(n);else if(c!==4&&(n=n.child,n!==null))for(nd(n,s,l),n=n.sibling;n!==null;)nd(n,s,l),n=n.sibling}var Pt=null,qr=!1;function ls(n,s,l){for(l=l.child;l!==null;)E0(n,s,l),l=l.sibling}function E0(n,s,l){if(un&&typeof un.onCommitFiberUnmount=="function")try{un.onCommitFiberUnmount(Qa,l)}catch{}switch(l.tag){case 5:Ft||Ci(l,s);case 6:var c=Pt,f=qr;Pt=null,ls(n,s,l),Pt=c,qr=f,Pt!==null&&(qr?(n=Pt,l=l.stateNode,n.nodeType===8?n.parentNode.removeChild(l):n.removeChild(l)):Pt.removeChild(l.stateNode));break;case 18:Pt!==null&&(qr?(n=Pt,l=l.stateNode,n.nodeType===8?gh(n.parentNode,l):n.nodeType===1&&gh(n,l),Lo(n)):gh(Pt,l.stateNode));break;case 4:c=Pt,f=qr,Pt=l.stateNode.containerInfo,qr=!0,ls(n,s,l),Pt=c,qr=f;break;case 0:case 11:case 14:case 15:if(!Ft&&(c=l.updateQueue,c!==null&&(c=c.lastEffect,c!==null))){f=c=c.next;do{var m=f,w=m.destroy;m=m.tag,w!==void 0&&((m&2)!==0||(m&4)!==0)&&ed(l,s,w),f=f.next}while(f!==c)}ls(n,s,l);break;case 1:if(!Ft&&(Ci(l,s),c=l.stateNode,typeof c.componentWillUnmount=="function"))try{c.props=l.memoizedProps,c.state=l.memoizedState,c.componentWillUnmount()}catch(b){tt(l,s,b)}ls(n,s,l);break;case 21:ls(n,s,l);break;case 22:l.mode&1?(Ft=(c=Ft)||l.memoizedState!==null,ls(n,s,l),Ft=c):ls(n,s,l);break;default:ls(n,s,l)}}function S0(n){var s=n.updateQueue;if(s!==null){n.updateQueue=null;var l=n.stateNode;l===null&&(l=n.stateNode=new m4),s.forEach(function(c){var f=x4.bind(null,n,c);l.has(c)||(l.add(c),c.then(f,f))})}}function Jr(n,s){var l=s.deletions;if(l!==null)for(var c=0;c<l.length;c++){var f=l[c];try{var m=n,w=s,b=w;e:for(;b!==null;){switch(b.tag){case 5:Pt=b.stateNode,qr=!1;break e;case 3:Pt=b.stateNode.containerInfo,qr=!0;break e;case 4:Pt=b.stateNode.containerInfo,qr=!0;break e}b=b.return}if(Pt===null)throw Error(r(160));E0(m,w,f),Pt=null,qr=!1;var A=f.alternate;A!==null&&(A.return=null),f.return=null}catch(I){tt(f,s,I)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)k0(s,n),s=s.sibling}function k0(n,s){var l=n.alternate,c=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(Jr(s,n),fn(n),c&4){try{na(3,n,n.return),Ml(3,n)}catch(re){tt(n,n.return,re)}try{na(5,n,n.return)}catch(re){tt(n,n.return,re)}}break;case 1:Jr(s,n),fn(n),c&512&&l!==null&&Ci(l,l.return);break;case 5:if(Jr(s,n),fn(n),c&512&&l!==null&&Ci(l,l.return),n.flags&32){var f=n.stateNode;try{bo(f,"")}catch(re){tt(n,n.return,re)}}if(c&4&&(f=n.stateNode,f!=null)){var m=n.memoizedProps,w=l!==null?l.memoizedProps:m,b=n.type,A=n.updateQueue;if(n.updateQueue=null,A!==null)try{b==="input"&&m.type==="radio"&&m.name!=null&&Le(f,m),Ic(b,w);var I=Ic(b,m);for(w=0;w<A.length;w+=2){var z=A[w],V=A[w+1];z==="style"?im(f,V):z==="dangerouslySetInnerHTML"?nm(f,V):z==="children"?bo(f,V):R(f,z,V,I)}switch(b){case"input":ke(f,m);break;case"textarea":ko(f,m);break;case"select":var $=f._wrapperState.wasMultiple;f._wrapperState.wasMultiple=!!m.multiple;var X=m.value;X!=null?Qt(f,!!m.multiple,X,!1):$!==!!m.multiple&&(m.defaultValue!=null?Qt(f,!!m.multiple,m.defaultValue,!0):Qt(f,!!m.multiple,m.multiple?[]:"",!1))}f[Ho]=m}catch(re){tt(n,n.return,re)}}break;case 6:if(Jr(s,n),fn(n),c&4){if(n.stateNode===null)throw Error(r(162));f=n.stateNode,m=n.memoizedProps;try{f.nodeValue=m}catch(re){tt(n,n.return,re)}}break;case 3:if(Jr(s,n),fn(n),c&4&&l!==null&&l.memoizedState.isDehydrated)try{Lo(s.containerInfo)}catch(re){tt(n,n.return,re)}break;case 4:Jr(s,n),fn(n);break;case 13:Jr(s,n),fn(n),f=n.child,f.flags&8192&&(m=f.memoizedState!==null,f.stateNode.isHidden=m,!m||f.alternate!==null&&f.alternate.memoizedState!==null||(od=ot())),c&4&&S0(n);break;case 22:if(z=l!==null&&l.memoizedState!==null,n.mode&1?(Ft=(I=Ft)||z,Jr(s,n),Ft=I):Jr(s,n),fn(n),c&8192){if(I=n.memoizedState!==null,(n.stateNode.isHidden=I)&&!z&&(n.mode&1)!==0)for(Q=n,z=n.child;z!==null;){for(V=Q=z;Q!==null;){switch($=Q,X=$.child,$.tag){case 0:case 11:case 14:case 15:na(4,$,$.return);break;case 1:Ci($,$.return);var te=$.stateNode;if(typeof te.componentWillUnmount=="function"){c=$,l=$.return;try{s=c,te.props=s.memoizedProps,te.state=s.memoizedState,te.componentWillUnmount()}catch(re){tt(c,l,re)}}break;case 5:Ci($,$.return);break;case 22:if($.memoizedState!==null){T0(V);continue}}X!==null?(X.return=$,Q=X):T0(V)}z=z.sibling}e:for(z=null,V=n;;){if(V.tag===5){if(z===null){z=V;try{f=V.stateNode,I?(m=f.style,typeof m.setProperty=="function"?m.setProperty("display","none","important"):m.display="none"):(b=V.stateNode,A=V.memoizedProps.style,w=A!=null&&A.hasOwnProperty("display")?A.display:null,b.style.display=sm("display",w))}catch(re){tt(n,n.return,re)}}}else if(V.tag===6){if(z===null)try{V.stateNode.nodeValue=I?"":V.memoizedProps}catch(re){tt(n,n.return,re)}}else if((V.tag!==22&&V.tag!==23||V.memoizedState===null||V===n)&&V.child!==null){V.child.return=V,V=V.child;continue}if(V===n)break e;for(;V.sibling===null;){if(V.return===null||V.return===n)break e;z===V&&(z=null),V=V.return}z===V&&(z=null),V.sibling.return=V.return,V=V.sibling}}break;case 19:Jr(s,n),fn(n),c&4&&S0(n);break;case 21:break;default:Jr(s,n),fn(n)}}function fn(n){var s=n.flags;if(s&2){try{e:{for(var l=n.return;l!==null;){if(w0(l)){var c=l;break e}l=l.return}throw Error(r(160))}switch(c.tag){case 5:var f=c.stateNode;c.flags&32&&(bo(f,""),c.flags&=-33);var m=_0(n);nd(n,m,f);break;case 3:case 4:var w=c.stateNode.containerInfo,b=_0(n);rd(n,b,w);break;default:throw Error(r(161))}}catch(A){tt(n,n.return,A)}n.flags&=-3}s&4096&&(n.flags&=-4097)}function y4(n,s,l){Q=n,b0(n)}function b0(n,s,l){for(var c=(n.mode&1)!==0;Q!==null;){var f=Q,m=f.child;if(f.tag===22&&c){var w=f.memoizedState!==null||Fl;if(!w){var b=f.alternate,A=b!==null&&b.memoizedState!==null||Ft;b=Fl;var I=Ft;if(Fl=w,(Ft=A)&&!I)for(Q=f;Q!==null;)w=Q,A=w.child,w.tag===22&&w.memoizedState!==null?R0(f):A!==null?(A.return=w,Q=A):R0(f);for(;m!==null;)Q=m,b0(m),m=m.sibling;Q=f,Fl=b,Ft=I}x0(n)}else(f.subtreeFlags&8772)!==0&&m!==null?(m.return=f,Q=m):x0(n)}}function x0(n){for(;Q!==null;){var s=Q;if((s.flags&8772)!==0){var l=s.alternate;try{if((s.flags&8772)!==0)switch(s.tag){case 0:case 11:case 15:Ft||Ml(5,s);break;case 1:var c=s.stateNode;if(s.flags&4&&!Ft)if(l===null)c.componentDidMount();else{var f=s.elementType===s.type?l.memoizedProps:Gr(s.type,l.memoizedProps);c.componentDidUpdate(f,l.memoizedState,c.__reactInternalSnapshotBeforeUpdate)}var m=s.updateQueue;m!==null&&Tg(s,m,c);break;case 3:var w=s.updateQueue;if(w!==null){if(l=null,s.child!==null)switch(s.child.tag){case 5:l=s.child.stateNode;break;case 1:l=s.child.stateNode}Tg(s,w,l)}break;case 5:var b=s.stateNode;if(l===null&&s.flags&4){l=b;var A=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":A.autoFocus&&l.focus();break;case"img":A.src&&(l.src=A.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var I=s.alternate;if(I!==null){var z=I.memoizedState;if(z!==null){var V=z.dehydrated;V!==null&&Lo(V)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(r(163))}Ft||s.flags&512&&td(s)}catch($){tt(s,s.return,$)}}if(s===n){Q=null;break}if(l=s.sibling,l!==null){l.return=s.return,Q=l;break}Q=s.return}}function T0(n){for(;Q!==null;){var s=Q;if(s===n){Q=null;break}var l=s.sibling;if(l!==null){l.return=s.return,Q=l;break}Q=s.return}}function R0(n){for(;Q!==null;){var s=Q;try{switch(s.tag){case 0:case 11:case 15:var l=s.return;try{Ml(4,s)}catch(A){tt(s,l,A)}break;case 1:var c=s.stateNode;if(typeof c.componentDidMount=="function"){var f=s.return;try{c.componentDidMount()}catch(A){tt(s,f,A)}}var m=s.return;try{td(s)}catch(A){tt(s,m,A)}break;case 5:var w=s.return;try{td(s)}catch(A){tt(s,w,A)}}}catch(A){tt(s,s.return,A)}if(s===n){Q=null;break}var b=s.sibling;if(b!==null){b.return=s.return,Q=b;break}Q=s.return}}var v4=Math.ceil,$l=U.ReactCurrentDispatcher,sd=U.ReactCurrentOwner,Pr=U.ReactCurrentBatchConfig,xe=0,Tt=null,dt=null,jt=0,mr=0,Pi=ns(0),_t=0,sa=null,Ms=0,Bl=0,id=0,ia=null,nr=null,od=0,ji=1/0,jn=null,zl=!1,ad=null,us=null,Vl=!1,cs=null,Wl=0,oa=0,ld=null,Kl=-1,Hl=0;function Kt(){return(xe&6)!==0?ot():Kl!==-1?Kl:Kl=ot()}function hs(n){return(n.mode&1)===0?1:(xe&2)!==0&&jt!==0?jt&-jt:t4.transition!==null?(Hl===0&&(Hl=_m()),Hl):(n=Oe,n!==0||(n=window.event,n=n===void 0?16:Cm(n.type)),n)}function Xr(n,s,l,c){if(50<oa)throw oa=0,ld=null,Error(r(185));Po(n,l,c),((xe&2)===0||n!==Tt)&&(n===Tt&&((xe&2)===0&&(Bl|=l),_t===4&&ds(n,jt)),sr(n,c),l===1&&xe===0&&(s.mode&1)===0&&(ji=ot()+500,_l&&is()))}function sr(n,s){var l=n.callbackNode;t_(n,s);var c=tl(n,n===Tt?jt:0);if(c===0)l!==null&&ym(l),n.callbackNode=null,n.callbackPriority=0;else if(s=c&-c,n.callbackPriority!==s){if(l!=null&&ym(l),s===1)n.tag===0?e4(C0.bind(null,n)):pg(C0.bind(null,n)),X_(function(){(xe&6)===0&&is()}),l=null;else{switch(Em(c)){case 1:l=Bc;break;case 4:l=vm;break;case 16:l=Ya;break;case 536870912:l=wm;break;default:l=Ya}l=U0(l,A0.bind(null,n))}n.callbackPriority=s,n.callbackNode=l}}function A0(n,s){if(Kl=-1,Hl=0,(xe&6)!==0)throw Error(r(327));var l=n.callbackNode;if(Oi()&&n.callbackNode!==l)return null;var c=tl(n,n===Tt?jt:0);if(c===0)return null;if((c&30)!==0||(c&n.expiredLanes)!==0||s)s=Gl(n,c);else{s=c;var f=xe;xe|=2;var m=j0();(Tt!==n||jt!==s)&&(jn=null,ji=ot()+500,Bs(n,s));do try{E4();break}catch(b){P0(n,b)}while(!0);Th(),$l.current=m,xe=f,dt!==null?s=0:(Tt=null,jt=0,s=_t)}if(s!==0){if(s===2&&(f=zc(n),f!==0&&(c=f,s=ud(n,f))),s===1)throw l=sa,Bs(n,0),ds(n,c),sr(n,ot()),l;if(s===6)ds(n,c);else{if(f=n.current.alternate,(c&30)===0&&!w4(f)&&(s=Gl(n,c),s===2&&(m=zc(n),m!==0&&(c=m,s=ud(n,m))),s===1))throw l=sa,Bs(n,0),ds(n,c),sr(n,ot()),l;switch(n.finishedWork=f,n.finishedLanes=c,s){case 0:case 1:throw Error(r(345));case 2:zs(n,nr,jn);break;case 3:if(ds(n,c),(c&130023424)===c&&(s=od+500-ot(),10<s)){if(tl(n,0)!==0)break;if(f=n.suspendedLanes,(f&c)!==c){Kt(),n.pingedLanes|=n.suspendedLanes&f;break}n.timeoutHandle=mh(zs.bind(null,n,nr,jn),s);break}zs(n,nr,jn);break;case 4:if(ds(n,c),(c&4194240)===c)break;for(s=n.eventTimes,f=-1;0<c;){var w=31-Wr(c);m=1<<w,w=s[w],w>f&&(f=w),c&=~m}if(c=f,c=ot()-c,c=(120>c?120:480>c?480:1080>c?1080:1920>c?1920:3e3>c?3e3:4320>c?4320:1960*v4(c/1960))-c,10<c){n.timeoutHandle=mh(zs.bind(null,n,nr,jn),c);break}zs(n,nr,jn);break;case 5:zs(n,nr,jn);break;default:throw Error(r(329))}}}return sr(n,ot()),n.callbackNode===l?A0.bind(null,n):null}function ud(n,s){var l=ia;return n.current.memoizedState.isDehydrated&&(Bs(n,s).flags|=256),n=Gl(n,s),n!==2&&(s=nr,nr=l,s!==null&&cd(s)),n}function cd(n){nr===null?nr=n:nr.push.apply(nr,n)}function w4(n){for(var s=n;;){if(s.flags&16384){var l=s.updateQueue;if(l!==null&&(l=l.stores,l!==null))for(var c=0;c<l.length;c++){var f=l[c],m=f.getSnapshot;f=f.value;try{if(!Kr(m(),f))return!1}catch{return!1}}}if(l=s.child,s.subtreeFlags&16384&&l!==null)l.return=s,s=l;else{if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function ds(n,s){for(s&=~id,s&=~Bl,n.suspendedLanes|=s,n.pingedLanes&=~s,n=n.expirationTimes;0<s;){var l=31-Wr(s),c=1<<l;n[l]=-1,s&=~c}}function C0(n){if((xe&6)!==0)throw Error(r(327));Oi();var s=tl(n,0);if((s&1)===0)return sr(n,ot()),null;var l=Gl(n,s);if(n.tag!==0&&l===2){var c=zc(n);c!==0&&(s=c,l=ud(n,c))}if(l===1)throw l=sa,Bs(n,0),ds(n,s),sr(n,ot()),l;if(l===6)throw Error(r(345));return n.finishedWork=n.current.alternate,n.finishedLanes=s,zs(n,nr,jn),sr(n,ot()),null}function hd(n,s){var l=xe;xe|=1;try{return n(s)}finally{xe=l,xe===0&&(ji=ot()+500,_l&&is())}}function $s(n){cs!==null&&cs.tag===0&&(xe&6)===0&&Oi();var s=xe;xe|=1;var l=Pr.transition,c=Oe;try{if(Pr.transition=null,Oe=1,n)return n()}finally{Oe=c,Pr.transition=l,xe=s,(xe&6)===0&&is()}}function dd(){mr=Pi.current,ze(Pi)}function Bs(n,s){n.finishedWork=null,n.finishedLanes=0;var l=n.timeoutHandle;if(l!==-1&&(n.timeoutHandle=-1,J_(l)),dt!==null)for(l=dt.return;l!==null;){var c=l;switch(Eh(c),c.tag){case 1:c=c.type.childContextTypes,c!=null&&vl();break;case 3:Ri(),ze(er),ze(Lt),Ih();break;case 5:Oh(c);break;case 4:Ri();break;case 13:ze(Qe);break;case 19:ze(Qe);break;case 10:Rh(c.type._context);break;case 22:case 23:dd()}l=l.return}if(Tt=n,dt=n=fs(n.current,null),jt=mr=s,_t=0,sa=null,id=Bl=Ms=0,nr=ia=null,Ds!==null){for(s=0;s<Ds.length;s++)if(l=Ds[s],c=l.interleaved,c!==null){l.interleaved=null;var f=c.next,m=l.pending;if(m!==null){var w=m.next;m.next=f,c.next=w}l.pending=c}Ds=null}return n}function P0(n,s){do{var l=dt;try{if(Th(),Pl.current=Il,jl){for(var c=Ze.memoizedState;c!==null;){var f=c.queue;f!==null&&(f.pending=null),c=c.next}jl=!1}if(Fs=0,xt=wt=Ze=null,Qo=!1,Zo=0,sd.current=null,l===null||l.return===null){_t=1,sa=s,dt=null;break}e:{var m=n,w=l.return,b=l,A=s;if(s=jt,b.flags|=32768,A!==null&&typeof A=="object"&&typeof A.then=="function"){var I=A,z=b,V=z.tag;if((z.mode&1)===0&&(V===0||V===11||V===15)){var $=z.alternate;$?(z.updateQueue=$.updateQueue,z.memoizedState=$.memoizedState,z.lanes=$.lanes):(z.updateQueue=null,z.memoizedState=null)}var X=t0(w);if(X!==null){X.flags&=-257,r0(X,w,b,m,s),X.mode&1&&e0(m,I,s),s=X,A=I;var te=s.updateQueue;if(te===null){var re=new Set;re.add(A),s.updateQueue=re}else te.add(A);break e}else{if((s&1)===0){e0(m,I,s),fd();break e}A=Error(r(426))}}else if(He&&b.mode&1){var at=t0(w);if(at!==null){(at.flags&65536)===0&&(at.flags|=256),r0(at,w,b,m,s),bh(Ai(A,b));break e}}m=A=Ai(A,b),_t!==4&&(_t=2),ia===null?ia=[m]:ia.push(m),m=w;do{switch(m.tag){case 3:m.flags|=65536,s&=-s,m.lanes|=s;var O=Qg(m,A,s);xg(m,O);break e;case 1:b=A;var C=m.type,N=m.stateNode;if((m.flags&128)===0&&(typeof C.getDerivedStateFromError=="function"||N!==null&&typeof N.componentDidCatch=="function"&&(us===null||!us.has(N)))){m.flags|=65536,s&=-s,m.lanes|=s;var K=Zg(m,b,s);xg(m,K);break e}}m=m.return}while(m!==null)}N0(l)}catch(se){s=se,dt===l&&l!==null&&(dt=l=l.return);continue}break}while(!0)}function j0(){var n=$l.current;return $l.current=Il,n===null?Il:n}function fd(){(_t===0||_t===3||_t===2)&&(_t=4),Tt===null||(Ms&268435455)===0&&(Bl&268435455)===0||ds(Tt,jt)}function Gl(n,s){var l=xe;xe|=2;var c=j0();(Tt!==n||jt!==s)&&(jn=null,Bs(n,s));do try{_4();break}catch(f){P0(n,f)}while(!0);if(Th(),xe=l,$l.current=c,dt!==null)throw Error(r(261));return Tt=null,jt=0,_t}function _4(){for(;dt!==null;)O0(dt)}function E4(){for(;dt!==null&&!H3();)O0(dt)}function O0(n){var s=D0(n.alternate,n,mr);n.memoizedProps=n.pendingProps,s===null?N0(n):dt=s,sd.current=null}function N0(n){var s=n;do{var l=s.alternate;if(n=s.return,(s.flags&32768)===0){if(l=f4(l,s,mr),l!==null){dt=l;return}}else{if(l=p4(l,s),l!==null){l.flags&=32767,dt=l;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{_t=6,dt=null;return}}if(s=s.sibling,s!==null){dt=s;return}dt=s=n}while(s!==null);_t===0&&(_t=5)}function zs(n,s,l){var c=Oe,f=Pr.transition;try{Pr.transition=null,Oe=1,S4(n,s,l,c)}finally{Pr.transition=f,Oe=c}return null}function S4(n,s,l,c){do Oi();while(cs!==null);if((xe&6)!==0)throw Error(r(327));l=n.finishedWork;var f=n.finishedLanes;if(l===null)return null;if(n.finishedWork=null,n.finishedLanes=0,l===n.current)throw Error(r(177));n.callbackNode=null,n.callbackPriority=0;var m=l.lanes|l.childLanes;if(r_(n,m),n===Tt&&(dt=Tt=null,jt=0),(l.subtreeFlags&2064)===0&&(l.flags&2064)===0||Vl||(Vl=!0,U0(Ya,function(){return Oi(),null})),m=(l.flags&15990)!==0,(l.subtreeFlags&15990)!==0||m){m=Pr.transition,Pr.transition=null;var w=Oe;Oe=1;var b=xe;xe|=4,sd.current=null,g4(n,l),k0(l,n),z_(fh),sl=!!dh,fh=dh=null,n.current=l,y4(l),G3(),xe=b,Oe=w,Pr.transition=m}else n.current=l;if(Vl&&(Vl=!1,cs=n,Wl=f),m=n.pendingLanes,m===0&&(us=null),X3(l.stateNode),sr(n,ot()),s!==null)for(c=n.onRecoverableError,l=0;l<s.length;l++)f=s[l],c(f.value,{componentStack:f.stack,digest:f.digest});if(zl)throw zl=!1,n=ad,ad=null,n;return(Wl&1)!==0&&n.tag!==0&&Oi(),m=n.pendingLanes,(m&1)!==0?n===ld?oa++:(oa=0,ld=n):oa=0,is(),null}function Oi(){if(cs!==null){var n=Em(Wl),s=Pr.transition,l=Oe;try{if(Pr.transition=null,Oe=16>n?16:n,cs===null)var c=!1;else{if(n=cs,cs=null,Wl=0,(xe&6)!==0)throw Error(r(331));var f=xe;for(xe|=4,Q=n.current;Q!==null;){var m=Q,w=m.child;if((Q.flags&16)!==0){var b=m.deletions;if(b!==null){for(var A=0;A<b.length;A++){var I=b[A];for(Q=I;Q!==null;){var z=Q;switch(z.tag){case 0:case 11:case 15:na(8,z,m)}var V=z.child;if(V!==null)V.return=z,Q=V;else for(;Q!==null;){z=Q;var $=z.sibling,X=z.return;if(v0(z),z===I){Q=null;break}if($!==null){$.return=X,Q=$;break}Q=X}}}var te=m.alternate;if(te!==null){var re=te.child;if(re!==null){te.child=null;do{var at=re.sibling;re.sibling=null,re=at}while(re!==null)}}Q=m}}if((m.subtreeFlags&2064)!==0&&w!==null)w.return=m,Q=w;else e:for(;Q!==null;){if(m=Q,(m.flags&2048)!==0)switch(m.tag){case 0:case 11:case 15:na(9,m,m.return)}var O=m.sibling;if(O!==null){O.return=m.return,Q=O;break e}Q=m.return}}var C=n.current;for(Q=C;Q!==null;){w=Q;var N=w.child;if((w.subtreeFlags&2064)!==0&&N!==null)N.return=w,Q=N;else e:for(w=C;Q!==null;){if(b=Q,(b.flags&2048)!==0)try{switch(b.tag){case 0:case 11:case 15:Ml(9,b)}}catch(se){tt(b,b.return,se)}if(b===w){Q=null;break e}var K=b.sibling;if(K!==null){K.return=b.return,Q=K;break e}Q=b.return}}if(xe=f,is(),un&&typeof un.onPostCommitFiberRoot=="function")try{un.onPostCommitFiberRoot(Qa,n)}catch{}c=!0}return c}finally{Oe=l,Pr.transition=s}}return!1}function I0(n,s,l){s=Ai(l,s),s=Qg(n,s,1),n=as(n,s,1),s=Kt(),n!==null&&(Po(n,1,s),sr(n,s))}function tt(n,s,l){if(n.tag===3)I0(n,n,l);else for(;s!==null;){if(s.tag===3){I0(s,n,l);break}else if(s.tag===1){var c=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(us===null||!us.has(c))){n=Ai(l,n),n=Zg(s,n,1),s=as(s,n,1),n=Kt(),s!==null&&(Po(s,1,n),sr(s,n));break}}s=s.return}}function k4(n,s,l){var c=n.pingCache;c!==null&&c.delete(s),s=Kt(),n.pingedLanes|=n.suspendedLanes&l,Tt===n&&(jt&l)===l&&(_t===4||_t===3&&(jt&130023424)===jt&&500>ot()-od?Bs(n,0):id|=l),sr(n,s)}function L0(n,s){s===0&&((n.mode&1)===0?s=1:(s=el,el<<=1,(el&130023424)===0&&(el=4194304)));var l=Kt();n=An(n,s),n!==null&&(Po(n,s,l),sr(n,l))}function b4(n){var s=n.memoizedState,l=0;s!==null&&(l=s.retryLane),L0(n,l)}function x4(n,s){var l=0;switch(n.tag){case 13:var c=n.stateNode,f=n.memoizedState;f!==null&&(l=f.retryLane);break;case 19:c=n.stateNode;break;default:throw Error(r(314))}c!==null&&c.delete(s),L0(n,l)}var D0;D0=function(n,s,l){if(n!==null)if(n.memoizedProps!==s.pendingProps||er.current)rr=!0;else{if((n.lanes&l)===0&&(s.flags&128)===0)return rr=!1,d4(n,s,l);rr=(n.flags&131072)!==0}else rr=!1,He&&(s.flags&1048576)!==0&&mg(s,Sl,s.index);switch(s.lanes=0,s.tag){case 2:var c=s.type;Ul(n,s),n=s.pendingProps;var f=_i(s,Lt.current);Ti(s,l),f=Uh(null,s,c,n,f,l);var m=Fh();return s.flags|=1,typeof f=="object"&&f!==null&&typeof f.render=="function"&&f.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,tr(c)?(m=!0,wl(s)):m=!1,s.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,Ph(s),f.updater=Ll,s.stateNode=f,f._reactInternals=s,Wh(s,c,n,l),s=qh(null,s,c,!0,m,l)):(s.tag=0,He&&m&&_h(s),Wt(null,s,f,l),s=s.child),s;case 16:c=s.elementType;e:{switch(Ul(n,s),n=s.pendingProps,f=c._init,c=f(c._payload),s.type=c,f=s.tag=R4(c),n=Gr(c,n),f){case 0:s=Gh(null,s,c,n,l);break e;case 1:s=l0(null,s,c,n,l);break e;case 11:s=n0(null,s,c,n,l);break e;case 14:s=s0(null,s,c,Gr(c.type,n),l);break e}throw Error(r(306,c,""))}return s;case 0:return c=s.type,f=s.pendingProps,f=s.elementType===c?f:Gr(c,f),Gh(n,s,c,f,l);case 1:return c=s.type,f=s.pendingProps,f=s.elementType===c?f:Gr(c,f),l0(n,s,c,f,l);case 3:e:{if(u0(s),n===null)throw Error(r(387));c=s.pendingProps,m=s.memoizedState,f=m.element,bg(n,s),Al(s,c,null,l);var w=s.memoizedState;if(c=w.element,m.isDehydrated)if(m={element:c,isDehydrated:!1,cache:w.cache,pendingSuspenseBoundaries:w.pendingSuspenseBoundaries,transitions:w.transitions},s.updateQueue.baseState=m,s.memoizedState=m,s.flags&256){f=Ai(Error(r(423)),s),s=c0(n,s,c,l,f);break e}else if(c!==f){f=Ai(Error(r(424)),s),s=c0(n,s,c,l,f);break e}else for(pr=rs(s.stateNode.containerInfo.firstChild),fr=s,He=!0,Hr=null,l=Sg(s,null,c,l),s.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling;else{if(ki(),c===f){s=Pn(n,s,l);break e}Wt(n,s,c,l)}s=s.child}return s;case 5:return Rg(s),n===null&&kh(s),c=s.type,f=s.pendingProps,m=n!==null?n.memoizedProps:null,w=f.children,ph(c,f)?w=null:m!==null&&ph(c,m)&&(s.flags|=32),a0(n,s),Wt(n,s,w,l),s.child;case 6:return n===null&&kh(s),null;case 13:return h0(n,s,l);case 4:return jh(s,s.stateNode.containerInfo),c=s.pendingProps,n===null?s.child=bi(s,null,c,l):Wt(n,s,c,l),s.child;case 11:return c=s.type,f=s.pendingProps,f=s.elementType===c?f:Gr(c,f),n0(n,s,c,f,l);case 7:return Wt(n,s,s.pendingProps,l),s.child;case 8:return Wt(n,s,s.pendingProps.children,l),s.child;case 12:return Wt(n,s,s.pendingProps.children,l),s.child;case 10:e:{if(c=s.type._context,f=s.pendingProps,m=s.memoizedProps,w=f.value,Ue(xl,c._currentValue),c._currentValue=w,m!==null)if(Kr(m.value,w)){if(m.children===f.children&&!er.current){s=Pn(n,s,l);break e}}else for(m=s.child,m!==null&&(m.return=s);m!==null;){var b=m.dependencies;if(b!==null){w=m.child;for(var A=b.firstContext;A!==null;){if(A.context===c){if(m.tag===1){A=Cn(-1,l&-l),A.tag=2;var I=m.updateQueue;if(I!==null){I=I.shared;var z=I.pending;z===null?A.next=A:(A.next=z.next,z.next=A),I.pending=A}}m.lanes|=l,A=m.alternate,A!==null&&(A.lanes|=l),Ah(m.return,l,s),b.lanes|=l;break}A=A.next}}else if(m.tag===10)w=m.type===s.type?null:m.child;else if(m.tag===18){if(w=m.return,w===null)throw Error(r(341));w.lanes|=l,b=w.alternate,b!==null&&(b.lanes|=l),Ah(w,l,s),w=m.sibling}else w=m.child;if(w!==null)w.return=m;else for(w=m;w!==null;){if(w===s){w=null;break}if(m=w.sibling,m!==null){m.return=w.return,w=m;break}w=w.return}m=w}Wt(n,s,f.children,l),s=s.child}return s;case 9:return f=s.type,c=s.pendingProps.children,Ti(s,l),f=Ar(f),c=c(f),s.flags|=1,Wt(n,s,c,l),s.child;case 14:return c=s.type,f=Gr(c,s.pendingProps),f=Gr(c.type,f),s0(n,s,c,f,l);case 15:return i0(n,s,s.type,s.pendingProps,l);case 17:return c=s.type,f=s.pendingProps,f=s.elementType===c?f:Gr(c,f),Ul(n,s),s.tag=1,tr(c)?(n=!0,wl(s)):n=!1,Ti(s,l),Xg(s,c,f),Wh(s,c,f,l),qh(null,s,c,!0,n,l);case 19:return f0(n,s,l);case 22:return o0(n,s,l)}throw Error(r(156,s.tag))};function U0(n,s){return gm(n,s)}function T4(n,s,l,c){this.tag=n,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function jr(n,s,l,c){return new T4(n,s,l,c)}function pd(n){return n=n.prototype,!(!n||!n.isReactComponent)}function R4(n){if(typeof n=="function")return pd(n)?1:0;if(n!=null){if(n=n.$$typeof,n===We)return 11;if(n===Ke)return 14}return 2}function fs(n,s){var l=n.alternate;return l===null?(l=jr(n.tag,s,n.key,n.mode),l.elementType=n.elementType,l.type=n.type,l.stateNode=n.stateNode,l.alternate=n,n.alternate=l):(l.pendingProps=s,l.type=n.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=n.flags&14680064,l.childLanes=n.childLanes,l.lanes=n.lanes,l.child=n.child,l.memoizedProps=n.memoizedProps,l.memoizedState=n.memoizedState,l.updateQueue=n.updateQueue,s=n.dependencies,l.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},l.sibling=n.sibling,l.index=n.index,l.ref=n.ref,l}function ql(n,s,l,c,f,m){var w=2;if(c=n,typeof n=="function")pd(n)&&(w=1);else if(typeof n=="string")w=5;else e:switch(n){case W:return Vs(l.children,f,m,s);case F:w=8,f|=8;break;case ge:return n=jr(12,l,s,f|2),n.elementType=ge,n.lanes=m,n;case kt:return n=jr(13,l,s,f),n.elementType=kt,n.lanes=m,n;case bt:return n=jr(19,l,s,f),n.elementType=bt,n.lanes=m,n;case be:return Jl(l,f,m,s);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case Re:w=10;break e;case ct:w=9;break e;case We:w=11;break e;case Ke:w=14;break e;case ht:w=16,c=null;break e}throw Error(r(130,n==null?n:typeof n,""))}return s=jr(w,l,s,f),s.elementType=n,s.type=c,s.lanes=m,s}function Vs(n,s,l,c){return n=jr(7,n,c,s),n.lanes=l,n}function Jl(n,s,l,c){return n=jr(22,n,c,s),n.elementType=be,n.lanes=l,n.stateNode={isHidden:!1},n}function md(n,s,l){return n=jr(6,n,null,s),n.lanes=l,n}function gd(n,s,l){return s=jr(4,n.children!==null?n.children:[],n.key,s),s.lanes=l,s.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},s}function A4(n,s,l,c,f){this.tag=s,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Vc(0),this.expirationTimes=Vc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Vc(0),this.identifierPrefix=c,this.onRecoverableError=f,this.mutableSourceEagerHydrationData=null}function yd(n,s,l,c,f,m,w,b,A){return n=new A4(n,s,l,b,A),s===1?(s=1,m===!0&&(s|=8)):s=0,m=jr(3,null,null,s),n.current=m,m.stateNode=n,m.memoizedState={element:c,isDehydrated:l,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ph(m),n}function C4(n,s,l){var c=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:B,key:c==null?null:""+c,children:n,containerInfo:s,implementation:l}}function F0(n){if(!n)return ss;n=n._reactInternals;e:{if(js(n)!==n||n.tag!==1)throw Error(r(170));var s=n;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(tr(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(r(171))}if(n.tag===1){var l=n.type;if(tr(l))return dg(n,l,s)}return s}function M0(n,s,l,c,f,m,w,b,A){return n=yd(l,c,!0,n,f,m,w,b,A),n.context=F0(null),l=n.current,c=Kt(),f=hs(l),m=Cn(c,f),m.callback=s??null,as(l,m,f),n.current.lanes=f,Po(n,f,c),sr(n,c),n}function Xl(n,s,l,c){var f=s.current,m=Kt(),w=hs(f);return l=F0(l),s.context===null?s.context=l:s.pendingContext=l,s=Cn(m,w),s.payload={element:n},c=c===void 0?null:c,c!==null&&(s.callback=c),n=as(f,s,w),n!==null&&(Xr(n,f,w,m),Rl(n,f,w)),w}function Yl(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function $0(n,s){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var l=n.retryLane;n.retryLane=l!==0&&l<s?l:s}}function vd(n,s){$0(n,s),(n=n.alternate)&&$0(n,s)}function P4(){return null}var B0=typeof reportError=="function"?reportError:function(n){console.error(n)};function wd(n){this._internalRoot=n}Ql.prototype.render=wd.prototype.render=function(n){var s=this._internalRoot;if(s===null)throw Error(r(409));Xl(n,s,null,null)},Ql.prototype.unmount=wd.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var s=n.containerInfo;$s(function(){Xl(null,n,null,null)}),s[bn]=null}};function Ql(n){this._internalRoot=n}Ql.prototype.unstable_scheduleHydration=function(n){if(n){var s=bm();n={blockedOn:null,target:n,priority:s};for(var l=0;l<Zn.length&&s!==0&&s<Zn[l].priority;l++);Zn.splice(l,0,n),l===0&&Rm(n)}};function _d(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function Zl(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function z0(){}function j4(n,s,l,c,f){if(f){if(typeof c=="function"){var m=c;c=function(){var I=Yl(w);m.call(I)}}var w=M0(s,c,n,0,null,!1,!1,"",z0);return n._reactRootContainer=w,n[bn]=w.current,Wo(n.nodeType===8?n.parentNode:n),$s(),w}for(;f=n.lastChild;)n.removeChild(f);if(typeof c=="function"){var b=c;c=function(){var I=Yl(A);b.call(I)}}var A=yd(n,0,!1,null,null,!1,!1,"",z0);return n._reactRootContainer=A,n[bn]=A.current,Wo(n.nodeType===8?n.parentNode:n),$s(function(){Xl(s,A,l,c)}),A}function eu(n,s,l,c,f){var m=l._reactRootContainer;if(m){var w=m;if(typeof f=="function"){var b=f;f=function(){var A=Yl(w);b.call(A)}}Xl(s,w,n,f)}else w=j4(l,s,n,f,c);return Yl(w)}Sm=function(n){switch(n.tag){case 3:var s=n.stateNode;if(s.current.memoizedState.isDehydrated){var l=Co(s.pendingLanes);l!==0&&(Wc(s,l|1),sr(s,ot()),(xe&6)===0&&(ji=ot()+500,is()))}break;case 13:$s(function(){var c=An(n,1);if(c!==null){var f=Kt();Xr(c,n,1,f)}}),vd(n,1)}},Kc=function(n){if(n.tag===13){var s=An(n,134217728);if(s!==null){var l=Kt();Xr(s,n,134217728,l)}vd(n,134217728)}},km=function(n){if(n.tag===13){var s=hs(n),l=An(n,s);if(l!==null){var c=Kt();Xr(l,n,s,c)}vd(n,s)}},bm=function(){return Oe},xm=function(n,s){var l=Oe;try{return Oe=n,s()}finally{Oe=l}},Uc=function(n,s,l){switch(s){case"input":if(ke(n,l),s=l.name,l.type==="radio"&&s!=null){for(l=n;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<l.length;s++){var c=l[s];if(c!==n&&c.form===n.form){var f=yl(c);if(!f)throw Error(r(90));So(c),ke(c,f)}}}break;case"textarea":ko(n,l);break;case"select":s=l.value,s!=null&&Qt(n,!!l.multiple,s,!1)}},um=hd,cm=$s;var O4={usingClientEntryPoint:!1,Events:[Go,vi,yl,am,lm,hd]},aa={findFiberByHostInstance:Os,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},N4={bundleType:aa.bundleType,version:aa.version,rendererPackageName:aa.rendererPackageName,rendererConfig:aa.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:U.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=pm(n),n===null?null:n.stateNode},findFiberByHostInstance:aa.findFiberByHostInstance||P4,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var tu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!tu.isDisabled&&tu.supportsFiber)try{Qa=tu.inject(N4),un=tu}catch{}}return ir.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O4,ir.createPortal=function(n,s){var l=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!_d(s))throw Error(r(200));return C4(n,s,null,l)},ir.createRoot=function(n,s){if(!_d(n))throw Error(r(299));var l=!1,c="",f=B0;return s!=null&&(s.unstable_strictMode===!0&&(l=!0),s.identifierPrefix!==void 0&&(c=s.identifierPrefix),s.onRecoverableError!==void 0&&(f=s.onRecoverableError)),s=yd(n,1,!1,null,null,l,!1,c,f),n[bn]=s.current,Wo(n.nodeType===8?n.parentNode:n),new wd(s)},ir.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var s=n._reactInternals;if(s===void 0)throw typeof n.render=="function"?Error(r(188)):(n=Object.keys(n).join(","),Error(r(268,n)));return n=pm(s),n=n===null?null:n.stateNode,n},ir.flushSync=function(n){return $s(n)},ir.hydrate=function(n,s,l){if(!Zl(s))throw Error(r(200));return eu(null,n,s,!0,l)},ir.hydrateRoot=function(n,s,l){if(!_d(n))throw Error(r(405));var c=l!=null&&l.hydratedSources||null,f=!1,m="",w=B0;if(l!=null&&(l.unstable_strictMode===!0&&(f=!0),l.identifierPrefix!==void 0&&(m=l.identifierPrefix),l.onRecoverableError!==void 0&&(w=l.onRecoverableError)),s=M0(s,null,n,1,l??null,f,!1,m,w),n[bn]=s.current,Wo(n),c)for(n=0;n<c.length;n++)l=c[n],f=l._getVersion,f=f(l._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[l,f]:s.mutableSourceEagerHydrationData.push(l,f);return new Ql(s)},ir.render=function(n,s,l){if(!Zl(s))throw Error(r(200));return eu(null,n,s,!1,l)},ir.unmountComponentAtNode=function(n){if(!Zl(n))throw Error(r(40));return n._reactRootContainer?($s(function(){eu(null,null,n,!1,function(){n._reactRootContainer=null,n[bn]=null})}),!0):!1},ir.unstable_batchedUpdates=hd,ir.unstable_renderSubtreeIntoContainer=function(n,s,l,c){if(!Zl(l))throw Error(r(200));if(n==null||n._reactInternals===void 0)throw Error(r(38));return eu(n,s,l,!1,c)},ir.version="18.3.1-next-f1338f8080-20240426",ir}var Q0;function K4(){if(Q0)return kd.exports;Q0=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),kd.exports=W4(),kd.exports}var Z0;function H4(){if(Z0)return ru;Z0=1;var e=K4();return ru.createRoot=e.createRoot,ru.hydrateRoot=e.hydrateRoot,ru}var G4=H4();/**
 * react-router v7.10.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var e1="popstate";function q4(e={}){function t(i,o){let{pathname:a,search:u,hash:h}=i.location;return Yd("",{pathname:a,search:u,hash:h},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function r(i,o){return typeof o=="string"?o:Ta(o)}return X4(t,r,null,e)}function Xe(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Er(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function J4(){return Math.random().toString(36).substring(2,10)}function t1(e,t){return{usr:e.state,key:e.key,idx:t}}function Yd(e,t,r=null,i){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?ao(t):t,state:r,key:t&&t.key||i||J4()}}function Ta({pathname:e="/",search:t="",hash:r=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function ao(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substring(r),e=e.substring(0,r));let i=e.indexOf("?");i>=0&&(t.search=e.substring(i),e=e.substring(0,i)),e&&(t.pathname=e)}return t}function X4(e,t,r,i={}){let{window:o=document.defaultView,v5Compat:a=!1}=i,u=o.history,h="POP",d=null,p=g();p==null&&(p=0,u.replaceState({...u.state,idx:p},""));function g(){return(u.state||{idx:null}).idx}function v(){h="POP";let x=g(),P=x==null?null:x-p;p=x,d&&d({action:h,location:k.location,delta:P})}function _(x,P){h="PUSH";let L=Yd(k.location,x,P);p=g()+1;let R=t1(L,p),U=k.createHref(L);try{u.pushState(R,"",U)}catch(G){if(G instanceof DOMException&&G.name==="DataCloneError")throw G;o.location.assign(U)}a&&d&&d({action:h,location:k.location,delta:1})}function E(x,P){h="REPLACE";let L=Yd(k.location,x,P);p=g();let R=t1(L,p),U=k.createHref(L);u.replaceState(R,"",U),a&&d&&d({action:h,location:k.location,delta:0})}function S(x){return Y4(x)}let k={get action(){return h},get location(){return e(o,u)},listen(x){if(d)throw new Error("A history only accepts one active listener");return o.addEventListener(e1,v),d=x,()=>{o.removeEventListener(e1,v),d=null}},createHref(x){return t(o,x)},createURL:S,encodeLocation(x){let P=S(x);return{pathname:P.pathname,search:P.search,hash:P.hash}},push:_,replace:E,go(x){return u.go(x)}};return k}function Y4(e,t=!1){let r="http://localhost";typeof window<"u"&&(r=window.location.origin!=="null"?window.location.origin:window.location.href),Xe(r,"No window.location.(origin|href) available to create URL");let i=typeof e=="string"?e:Ta(e);return i=i.replace(/ $/,"%20"),!t&&i.startsWith("//")&&(i=r+i),new URL(i,r)}function iv(e,t,r="/"){return Q4(e,t,r,!1)}function Q4(e,t,r,i){let o=typeof t=="string"?ao(t):t,a=Vn(o.pathname||"/",r);if(a==null)return null;let u=ov(e);Z4(u);let h=null;for(let d=0;h==null&&d<u.length;++d){let p=cE(a);h=lE(u[d],p,i)}return h}function ov(e,t=[],r=[],i="",o=!1){let a=(u,h,d=o,p)=>{let g={relativePath:p===void 0?u.path||"":p,caseSensitive:u.caseSensitive===!0,childrenIndex:h,route:u};if(g.relativePath.startsWith("/")){if(!g.relativePath.startsWith(i)&&d)return;Xe(g.relativePath.startsWith(i),`Absolute route path "${g.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),g.relativePath=g.relativePath.slice(i.length)}let v=$n([i,g.relativePath]),_=r.concat(g);u.children&&u.children.length>0&&(Xe(u.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${v}".`),ov(u.children,t,_,v,d)),!(u.path==null&&!u.index)&&t.push({path:v,score:oE(v,u.index),routesMeta:_})};return e.forEach((u,h)=>{var d;if(u.path===""||!((d=u.path)!=null&&d.includes("?")))a(u,h);else for(let p of av(u.path))a(u,h,!0,p)}),t}function av(e){let t=e.split("/");if(t.length===0)return[];let[r,...i]=t,o=r.endsWith("?"),a=r.replace(/\?$/,"");if(i.length===0)return o?[a,""]:[a];let u=av(i.join("/")),h=[];return h.push(...u.map(d=>d===""?a:[a,d].join("/"))),o&&h.push(...u),h.map(d=>e.startsWith("/")&&d===""?"/":d)}function Z4(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:aE(t.routesMeta.map(i=>i.childrenIndex),r.routesMeta.map(i=>i.childrenIndex)))}var eE=/^:[\w-]+$/,tE=3,rE=2,nE=1,sE=10,iE=-2,r1=e=>e==="*";function oE(e,t){let r=e.split("/"),i=r.length;return r.some(r1)&&(i+=iE),t&&(i+=rE),r.filter(o=>!r1(o)).reduce((o,a)=>o+(eE.test(a)?tE:a===""?nE:sE),i)}function aE(e,t){return e.length===t.length&&e.slice(0,-1).every((i,o)=>i===t[o])?e[e.length-1]-t[t.length-1]:0}function lE(e,t,r=!1){let{routesMeta:i}=e,o={},a="/",u=[];for(let h=0;h<i.length;++h){let d=i[h],p=h===i.length-1,g=a==="/"?t:t.slice(a.length)||"/",v=Ou({path:d.relativePath,caseSensitive:d.caseSensitive,end:p},g),_=d.route;if(!v&&p&&r&&!i[i.length-1].route.index&&(v=Ou({path:d.relativePath,caseSensitive:d.caseSensitive,end:!1},g)),!v)return null;Object.assign(o,v.params),u.push({params:o,pathname:$n([a,v.pathname]),pathnameBase:mE($n([a,v.pathnameBase])),route:_}),v.pathnameBase!=="/"&&(a=$n([a,v.pathnameBase]))}return u}function Ou(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,i]=uE(e.path,e.caseSensitive,e.end),o=t.match(r);if(!o)return null;let a=o[0],u=a.replace(/(.)\/+$/,"$1"),h=o.slice(1);return{params:i.reduce((p,{paramName:g,isOptional:v},_)=>{if(g==="*"){let S=h[_]||"";u=a.slice(0,a.length-S.length).replace(/(.)\/+$/,"$1")}const E=h[_];return v&&!E?p[g]=void 0:p[g]=(E||"").replace(/%2F/g,"/"),p},{}),pathname:a,pathnameBase:u,pattern:e}}function uE(e,t=!1,r=!0){Er(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let i=[],o="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(u,h,d)=>(i.push({paramName:h,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(i.push({paramName:"*"}),o+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?o+="\\/*$":e!==""&&e!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,t?void 0:"i"),i]}function cE(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Er(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function Vn(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,i=e.charAt(r);return i&&i!=="/"?null:e.slice(r)||"/"}var hE=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,dE=e=>hE.test(e);function fE(e,t="/"){let{pathname:r,search:i="",hash:o=""}=typeof e=="string"?ao(e):e,a;if(r)if(dE(r))a=r;else{if(r.includes("//")){let u=r;r=r.replace(/\/\/+/g,"/"),Er(!1,`Pathnames cannot have embedded double slashes - normalizing ${u} -> ${r}`)}r.startsWith("/")?a=n1(r.substring(1),"/"):a=n1(r,t)}else a=t;return{pathname:a,search:gE(i),hash:yE(o)}}function n1(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(o=>{o===".."?r.length>1&&r.pop():o!=="."&&r.push(o)}),r.length>1?r.join("/"):"/"}function Td(e,t,r,i){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function pE(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function Uf(e){let t=pE(e);return t.map((r,i)=>i===t.length-1?r.pathname:r.pathnameBase)}function Ff(e,t,r,i=!1){let o;typeof e=="string"?o=ao(e):(o={...e},Xe(!o.pathname||!o.pathname.includes("?"),Td("?","pathname","search",o)),Xe(!o.pathname||!o.pathname.includes("#"),Td("#","pathname","hash",o)),Xe(!o.search||!o.search.includes("#"),Td("#","search","hash",o)));let a=e===""||o.pathname==="",u=a?"/":o.pathname,h;if(u==null)h=r;else{let v=t.length-1;if(!i&&u.startsWith("..")){let _=u.split("/");for(;_[0]==="..";)_.shift(),v-=1;o.pathname=_.join("/")}h=v>=0?t[v]:"/"}let d=fE(o,h),p=u&&u!=="/"&&u.endsWith("/"),g=(a||u===".")&&r.endsWith("/");return!d.pathname.endsWith("/")&&(p||g)&&(d.pathname+="/"),d}var $n=e=>e.join("/").replace(/\/\/+/g,"/"),mE=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),gE=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,yE=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function vE(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}function wE(e){return e.map(t=>t.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var lv=["POST","PUT","PATCH","DELETE"];new Set(lv);var _E=["GET",...lv];new Set(_E);var lo=T.createContext(null);lo.displayName="DataRouter";var Zu=T.createContext(null);Zu.displayName="DataRouterState";T.createContext(!1);var uv=T.createContext({isTransitioning:!1});uv.displayName="ViewTransition";var EE=T.createContext(new Map);EE.displayName="Fetchers";var SE=T.createContext(null);SE.displayName="Await";var $r=T.createContext(null);$r.displayName="Navigation";var Da=T.createContext(null);Da.displayName="Location";var Sn=T.createContext({outlet:null,matches:[],isDataRoute:!1});Sn.displayName="Route";var Mf=T.createContext(null);Mf.displayName="RouteError";function kE(e,{relative:t}={}){Xe(uo(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:i}=T.useContext($r),{hash:o,pathname:a,search:u}=Ua(e,{relative:t}),h=a;return r!=="/"&&(h=a==="/"?r:$n([r,a])),i.createHref({pathname:h,search:u,hash:o})}function uo(){return T.useContext(Da)!=null}function Hn(){return Xe(uo(),"useLocation() may be used only in the context of a <Router> component."),T.useContext(Da).location}var cv="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function hv(e){T.useContext($r).static||T.useLayoutEffect(e)}function tn(){let{isDataRoute:e}=T.useContext(Sn);return e?DE():bE()}function bE(){Xe(uo(),"useNavigate() may be used only in the context of a <Router> component.");let e=T.useContext(lo),{basename:t,navigator:r}=T.useContext($r),{matches:i}=T.useContext(Sn),{pathname:o}=Hn(),a=JSON.stringify(Uf(i)),u=T.useRef(!1);return hv(()=>{u.current=!0}),T.useCallback((d,p={})=>{if(Er(u.current,cv),!u.current)return;if(typeof d=="number"){r.go(d);return}let g=Ff(d,JSON.parse(a),o,p.relative==="path");e==null&&t!=="/"&&(g.pathname=g.pathname==="/"?t:$n([t,g.pathname])),(p.replace?r.replace:r.push)(g,p.state,p)},[t,r,a,o,e])}T.createContext(null);function Ua(e,{relative:t}={}){let{matches:r}=T.useContext(Sn),{pathname:i}=Hn(),o=JSON.stringify(Uf(r));return T.useMemo(()=>Ff(e,JSON.parse(o),i,t==="path"),[e,o,i,t])}function xE(e,t){return dv(e,t)}function dv(e,t,r,i,o){var L;Xe(uo(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=T.useContext($r),{matches:u}=T.useContext(Sn),h=u[u.length-1],d=h?h.params:{},p=h?h.pathname:"/",g=h?h.pathnameBase:"/",v=h&&h.route;{let R=v&&v.path||"";fv(p,!v||R.endsWith("*")||R.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${p}" (under <Route path="${R}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${R}"> to <Route path="${R==="/"?"*":`${R}/*`}">.`)}let _=Hn(),E;if(t){let R=typeof t=="string"?ao(t):t;Xe(g==="/"||((L=R.pathname)==null?void 0:L.startsWith(g)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${g}" but pathname "${R.pathname}" was given in the \`location\` prop.`),E=R}else E=_;let S=E.pathname||"/",k=S;if(g!=="/"){let R=g.replace(/^\//,"").split("/");k="/"+S.replace(/^\//,"").split("/").slice(R.length).join("/")}let x=iv(e,{pathname:k});Er(v||x!=null,`No routes matched location "${E.pathname}${E.search}${E.hash}" `),Er(x==null||x[x.length-1].route.element!==void 0||x[x.length-1].route.Component!==void 0||x[x.length-1].route.lazy!==void 0,`Matched leaf route at location "${E.pathname}${E.search}${E.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let P=PE(x&&x.map(R=>Object.assign({},R,{params:Object.assign({},d,R.params),pathname:$n([g,a.encodeLocation?a.encodeLocation(R.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:R.pathname]),pathnameBase:R.pathnameBase==="/"?g:$n([g,a.encodeLocation?a.encodeLocation(R.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:R.pathnameBase])})),u,r,i,o);return t&&P?T.createElement(Da.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...E},navigationType:"POP"}},P):P}function TE(){let e=LE(),t=vE(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,i="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:i},a={padding:"2px 4px",backgroundColor:i},u=null;return console.error("Error handled by React Router default ErrorBoundary:",e),u=T.createElement(T.Fragment,null,T.createElement("p",null," Hey developer "),T.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",T.createElement("code",{style:a},"ErrorBoundary")," or"," ",T.createElement("code",{style:a},"errorElement")," prop on your route.")),T.createElement(T.Fragment,null,T.createElement("h2",null,"Unexpected Application Error!"),T.createElement("h3",{style:{fontStyle:"italic"}},t),r?T.createElement("pre",{style:o},r):null,u)}var RE=T.createElement(TE,null),AE=class extends T.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.onError?this.props.onError(e,t):console.error("React Router caught the following error during render",e)}render(){return this.state.error!==void 0?T.createElement(Sn.Provider,{value:this.props.routeContext},T.createElement(Mf.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function CE({routeContext:e,match:t,children:r}){let i=T.useContext(lo);return i&&i.static&&i.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=t.route.id),T.createElement(Sn.Provider,{value:e},r)}function PE(e,t=[],r=null,i=null,o=null){if(e==null){if(!r)return null;if(r.errors)e=r.matches;else if(t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let a=e,u=r==null?void 0:r.errors;if(u!=null){let g=a.findIndex(v=>v.route.id&&(u==null?void 0:u[v.route.id])!==void 0);Xe(g>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(u).join(",")}`),a=a.slice(0,Math.min(a.length,g+1))}let h=!1,d=-1;if(r)for(let g=0;g<a.length;g++){let v=a[g];if((v.route.HydrateFallback||v.route.hydrateFallbackElement)&&(d=g),v.route.id){let{loaderData:_,errors:E}=r,S=v.route.loader&&!_.hasOwnProperty(v.route.id)&&(!E||E[v.route.id]===void 0);if(v.route.lazy||S){h=!0,d>=0?a=a.slice(0,d+1):a=[a[0]];break}}}let p=r&&i?(g,v)=>{var _,E;i(g,{location:r.location,params:((E=(_=r.matches)==null?void 0:_[0])==null?void 0:E.params)??{},unstable_pattern:wE(r.matches),errorInfo:v})}:void 0;return a.reduceRight((g,v,_)=>{let E,S=!1,k=null,x=null;r&&(E=u&&v.route.id?u[v.route.id]:void 0,k=v.route.errorElement||RE,h&&(d<0&&_===0?(fv("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),S=!0,x=null):d===_&&(S=!0,x=v.route.hydrateFallbackElement||null)));let P=t.concat(a.slice(0,_+1)),L=()=>{let R;return E?R=k:S?R=x:v.route.Component?R=T.createElement(v.route.Component,null):v.route.element?R=v.route.element:R=g,T.createElement(CE,{match:v,routeContext:{outlet:g,matches:P,isDataRoute:r!=null},children:R})};return r&&(v.route.ErrorBoundary||v.route.errorElement||_===0)?T.createElement(AE,{location:r.location,revalidation:r.revalidation,component:k,error:E,children:L(),routeContext:{outlet:null,matches:P,isDataRoute:!0},onError:p}):L()},null)}function $f(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function jE(e){let t=T.useContext(lo);return Xe(t,$f(e)),t}function OE(e){let t=T.useContext(Zu);return Xe(t,$f(e)),t}function NE(e){let t=T.useContext(Sn);return Xe(t,$f(e)),t}function Bf(e){let t=NE(e),r=t.matches[t.matches.length-1];return Xe(r.route.id,`${e} can only be used on routes that contain a unique "id"`),r.route.id}function IE(){return Bf("useRouteId")}function LE(){var i;let e=T.useContext(Mf),t=OE("useRouteError"),r=Bf("useRouteError");return e!==void 0?e:(i=t.errors)==null?void 0:i[r]}function DE(){let{router:e}=jE("useNavigate"),t=Bf("useNavigate"),r=T.useRef(!1);return hv(()=>{r.current=!0}),T.useCallback(async(o,a={})=>{Er(r.current,cv),r.current&&(typeof o=="number"?await e.navigate(o):await e.navigate(o,{fromRouteId:t,...a}))},[e,t])}var s1={};function fv(e,t,r){!t&&!s1[e]&&(s1[e]=!0,Er(!1,r))}T.memo(UE);function UE({routes:e,future:t,state:r,unstable_onError:i}){return dv(e,void 0,r,i,t)}function FE({to:e,replace:t,state:r,relative:i}){Xe(uo(),"<Navigate> may be used only in the context of a <Router> component.");let{static:o}=T.useContext($r);Er(!o,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:a}=T.useContext(Sn),{pathname:u}=Hn(),h=tn(),d=Ff(e,Uf(a),u,i==="path"),p=JSON.stringify(d);return T.useEffect(()=>{h(JSON.parse(p),{replace:t,state:r,relative:i})},[h,p,i,t,r]),null}function Ln(e){Xe(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function ME({basename:e="/",children:t=null,location:r,navigationType:i="POP",navigator:o,static:a=!1,unstable_useTransitions:u}){Xe(!uo(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let h=e.replace(/^\/*/,"/"),d=T.useMemo(()=>({basename:h,navigator:o,static:a,unstable_useTransitions:u,future:{}}),[h,o,a,u]);typeof r=="string"&&(r=ao(r));let{pathname:p="/",search:g="",hash:v="",state:_=null,key:E="default"}=r,S=T.useMemo(()=>{let k=Vn(p,h);return k==null?null:{location:{pathname:k,search:g,hash:v,state:_,key:E},navigationType:i}},[h,p,g,v,_,E,i]);return Er(S!=null,`<Router basename="${h}"> is not able to match the URL "${p}${g}${v}" because it does not start with the basename, so the <Router> won't render anything.`),S==null?null:T.createElement($r.Provider,{value:d},T.createElement(Da.Provider,{children:t,value:S}))}function $E({children:e,location:t}){return xE(Qd(e),t)}function Qd(e,t=[]){let r=[];return T.Children.forEach(e,(i,o)=>{if(!T.isValidElement(i))return;let a=[...t,o];if(i.type===T.Fragment){r.push.apply(r,Qd(i.props.children,a));return}Xe(i.type===Ln,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Xe(!i.props.index||!i.props.children,"An index route cannot have child routes.");let u={id:i.props.id||a.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,middleware:i.props.middleware,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(u.children=Qd(i.props.children,a)),r.push(u)}),r}var _u="get",Eu="application/x-www-form-urlencoded";function ec(e){return typeof HTMLElement<"u"&&e instanceof HTMLElement}function BE(e){return ec(e)&&e.tagName.toLowerCase()==="button"}function zE(e){return ec(e)&&e.tagName.toLowerCase()==="form"}function VE(e){return ec(e)&&e.tagName.toLowerCase()==="input"}function WE(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function KE(e,t){return e.button===0&&(!t||t==="_self")&&!WE(e)}function Zd(e=""){return new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,r)=>{let i=e[r];return t.concat(Array.isArray(i)?i.map(o=>[r,o]):[[r,i]])},[]))}function HE(e,t){let r=Zd(e);return t&&t.forEach((i,o)=>{r.has(o)||t.getAll(o).forEach(a=>{r.append(o,a)})}),r}var nu=null;function GE(){if(nu===null)try{new FormData(document.createElement("form"),0),nu=!1}catch{nu=!0}return nu}var qE=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Rd(e){return e!=null&&!qE.has(e)?(Er(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Eu}"`),null):e}function JE(e,t){let r,i,o,a,u;if(zE(e)){let h=e.getAttribute("action");i=h?Vn(h,t):null,r=e.getAttribute("method")||_u,o=Rd(e.getAttribute("enctype"))||Eu,a=new FormData(e)}else if(BE(e)||VE(e)&&(e.type==="submit"||e.type==="image")){let h=e.form;if(h==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let d=e.getAttribute("formaction")||h.getAttribute("action");if(i=d?Vn(d,t):null,r=e.getAttribute("formmethod")||h.getAttribute("method")||_u,o=Rd(e.getAttribute("formenctype"))||Rd(h.getAttribute("enctype"))||Eu,a=new FormData(h,e),!GE()){let{name:p,type:g,value:v}=e;if(g==="image"){let _=p?`${p}.`:"";a.append(`${_}x`,"0"),a.append(`${_}y`,"0")}else p&&a.append(p,v)}}else{if(ec(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=_u,i=null,o=Eu,u=e}return a&&o==="text/plain"&&(u=a,a=void 0),{action:i,method:r.toLowerCase(),encType:o,formData:a,body:u}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function zf(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function XE(e,t,r){let i=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return i.pathname==="/"?i.pathname=`_root.${r}`:t&&Vn(i.pathname,t)==="/"?i.pathname=`${t.replace(/\/$/,"")}/_root.${r}`:i.pathname=`${i.pathname.replace(/\/$/,"")}.${r}`,i}async function YE(e,t){if(e.id in t)return t[e.id];try{let r=await import(e.module);return t[e.id]=r,r}catch(r){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function QE(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function ZE(e,t,r){let i=await Promise.all(e.map(async o=>{let a=t.routes[o.route.id];if(a){let u=await YE(a,r);return u.links?u.links():[]}return[]}));return nS(i.flat(1).filter(QE).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function i1(e,t,r,i,o,a){let u=(d,p)=>r[p]?d.route.id!==r[p].route.id:!0,h=(d,p)=>{var g;return r[p].pathname!==d.pathname||((g=r[p].route.path)==null?void 0:g.endsWith("*"))&&r[p].params["*"]!==d.params["*"]};return a==="assets"?t.filter((d,p)=>u(d,p)||h(d,p)):a==="data"?t.filter((d,p)=>{var v;let g=i.routes[d.route.id];if(!g||!g.hasLoader)return!1;if(u(d,p)||h(d,p))return!0;if(d.route.shouldRevalidate){let _=d.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:((v=r[0])==null?void 0:v.params)||{},nextUrl:new URL(e,window.origin),nextParams:d.params,defaultShouldRevalidate:!0});if(typeof _=="boolean")return _}return!0}):[]}function eS(e,t,{includeHydrateFallback:r}={}){return tS(e.map(i=>{let o=t.routes[i.route.id];if(!o)return[];let a=[o.module];return o.clientActionModule&&(a=a.concat(o.clientActionModule)),o.clientLoaderModule&&(a=a.concat(o.clientLoaderModule)),r&&o.hydrateFallbackModule&&(a=a.concat(o.hydrateFallbackModule)),o.imports&&(a=a.concat(o.imports)),a}).flat(1))}function tS(e){return[...new Set(e)]}function rS(e){let t={},r=Object.keys(e).sort();for(let i of r)t[i]=e[i];return t}function nS(e,t){let r=new Set;return new Set(t),e.reduce((i,o)=>{let a=JSON.stringify(rS(o));return r.has(a)||(r.add(a),i.push({key:a,link:o})),i},[])}function pv(){let e=T.useContext(lo);return zf(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function sS(){let e=T.useContext(Zu);return zf(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var Vf=T.createContext(void 0);Vf.displayName="FrameworkContext";function mv(){let e=T.useContext(Vf);return zf(e,"You must render this element inside a <HydratedRouter> element"),e}function iS(e,t){let r=T.useContext(Vf),[i,o]=T.useState(!1),[a,u]=T.useState(!1),{onFocus:h,onBlur:d,onMouseEnter:p,onMouseLeave:g,onTouchStart:v}=t,_=T.useRef(null);T.useEffect(()=>{if(e==="render"&&u(!0),e==="viewport"){let k=P=>{P.forEach(L=>{u(L.isIntersecting)})},x=new IntersectionObserver(k,{threshold:.5});return _.current&&x.observe(_.current),()=>{x.disconnect()}}},[e]),T.useEffect(()=>{if(i){let k=setTimeout(()=>{u(!0)},100);return()=>{clearTimeout(k)}}},[i]);let E=()=>{o(!0)},S=()=>{o(!1),u(!1)};return r?e!=="intent"?[a,_,{}]:[a,_,{onFocus:ca(h,E),onBlur:ca(d,S),onMouseEnter:ca(p,E),onMouseLeave:ca(g,S),onTouchStart:ca(v,E)}]:[!1,_,{}]}function ca(e,t){return r=>{e&&e(r),r.defaultPrevented||t(r)}}function oS({page:e,...t}){let{router:r}=pv(),i=T.useMemo(()=>iv(r.routes,e,r.basename),[r.routes,e,r.basename]);return i?T.createElement(lS,{page:e,matches:i,...t}):null}function aS(e){let{manifest:t,routeModules:r}=mv(),[i,o]=T.useState([]);return T.useEffect(()=>{let a=!1;return ZE(e,t,r).then(u=>{a||o(u)}),()=>{a=!0}},[e,t,r]),i}function lS({page:e,matches:t,...r}){let i=Hn(),{manifest:o,routeModules:a}=mv(),{basename:u}=pv(),{loaderData:h,matches:d}=sS(),p=T.useMemo(()=>i1(e,t,d,o,i,"data"),[e,t,d,o,i]),g=T.useMemo(()=>i1(e,t,d,o,i,"assets"),[e,t,d,o,i]),v=T.useMemo(()=>{if(e===i.pathname+i.search+i.hash)return[];let S=new Set,k=!1;if(t.forEach(P=>{var R;let L=o.routes[P.route.id];!L||!L.hasLoader||(!p.some(U=>U.route.id===P.route.id)&&P.route.id in h&&((R=a[P.route.id])!=null&&R.shouldRevalidate)||L.hasClientLoader?k=!0:S.add(P.route.id))}),S.size===0)return[];let x=XE(e,u,"data");return k&&S.size>0&&x.searchParams.set("_routes",t.filter(P=>S.has(P.route.id)).map(P=>P.route.id).join(",")),[x.pathname+x.search]},[u,h,i,o,p,t,e,a]),_=T.useMemo(()=>eS(g,o),[g,o]),E=aS(g);return T.createElement(T.Fragment,null,v.map(S=>T.createElement("link",{key:S,rel:"prefetch",as:"fetch",href:S,...r})),_.map(S=>T.createElement("link",{key:S,rel:"modulepreload",href:S,...r})),E.map(({key:S,link:k})=>T.createElement("link",{key:S,nonce:r.nonce,...k})))}function uS(...e){return t=>{e.forEach(r=>{typeof r=="function"?r(t):r!=null&&(r.current=t)})}}var gv=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{gv&&(window.__reactRouterVersion="7.10.1")}catch{}function cS({basename:e,children:t,unstable_useTransitions:r,window:i}){let o=T.useRef();o.current==null&&(o.current=q4({window:i,v5Compat:!0}));let a=o.current,[u,h]=T.useState({action:a.action,location:a.location}),d=T.useCallback(p=>{r===!1?h(p):T.startTransition(()=>h(p))},[r]);return T.useLayoutEffect(()=>a.listen(d),[a,d]),T.createElement(ME,{basename:e,children:t,location:u.location,navigationType:u.action,navigator:a,unstable_useTransitions:r===!0})}var yv=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,vv=T.forwardRef(function({onClick:t,discover:r="render",prefetch:i="none",relative:o,reloadDocument:a,replace:u,state:h,target:d,to:p,preventScrollReset:g,viewTransition:v,..._},E){let{basename:S,unstable_useTransitions:k}=T.useContext($r),x=typeof p=="string"&&yv.test(p),P,L=!1;if(typeof p=="string"&&x&&(P=p,gv))try{let Re=new URL(window.location.href),ct=p.startsWith("//")?new URL(Re.protocol+p):new URL(p),We=Vn(ct.pathname,S);ct.origin===Re.origin&&We!=null?p=We+ct.search+ct.hash:L=!0}catch{Er(!1,`<Link to="${p}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let R=kE(p,{relative:o}),[U,G,B]=iS(i,_),W=pS(p,{replace:u,state:h,target:d,preventScrollReset:g,relative:o,viewTransition:v,unstable_useTransitions:k});function F(Re){t&&t(Re),Re.defaultPrevented||W(Re)}let ge=T.createElement("a",{..._,...B,href:P||R,onClick:L||a?t:F,ref:uS(E,G),target:d,"data-discover":!x&&r==="render"?"true":void 0});return U&&!x?T.createElement(T.Fragment,null,ge,T.createElement(oS,{page:R})):ge});vv.displayName="Link";var hS=T.forwardRef(function({"aria-current":t="page",caseSensitive:r=!1,className:i="",end:o=!1,style:a,to:u,viewTransition:h,children:d,...p},g){let v=Ua(u,{relative:p.relative}),_=Hn(),E=T.useContext(Zu),{navigator:S,basename:k}=T.useContext($r),x=E!=null&&wS(v)&&h===!0,P=S.encodeLocation?S.encodeLocation(v).pathname:v.pathname,L=_.pathname,R=E&&E.navigation&&E.navigation.location?E.navigation.location.pathname:null;r||(L=L.toLowerCase(),R=R?R.toLowerCase():null,P=P.toLowerCase()),R&&k&&(R=Vn(R,k)||R);const U=P!=="/"&&P.endsWith("/")?P.length-1:P.length;let G=L===P||!o&&L.startsWith(P)&&L.charAt(U)==="/",B=R!=null&&(R===P||!o&&R.startsWith(P)&&R.charAt(P.length)==="/"),W={isActive:G,isPending:B,isTransitioning:x},F=G?t:void 0,ge;typeof i=="function"?ge=i(W):ge=[i,G?"active":null,B?"pending":null,x?"transitioning":null].filter(Boolean).join(" ");let Re=typeof a=="function"?a(W):a;return T.createElement(vv,{...p,"aria-current":F,className:ge,ref:g,style:Re,to:u,viewTransition:h},typeof d=="function"?d(W):d)});hS.displayName="NavLink";var dS=T.forwardRef(({discover:e="render",fetcherKey:t,navigate:r,reloadDocument:i,replace:o,state:a,method:u=_u,action:h,onSubmit:d,relative:p,preventScrollReset:g,viewTransition:v,..._},E)=>{let{unstable_useTransitions:S}=T.useContext($r),k=yS(),x=vS(h,{relative:p}),P=u.toLowerCase()==="get"?"get":"post",L=typeof h=="string"&&yv.test(h),R=U=>{if(d&&d(U),U.defaultPrevented)return;U.preventDefault();let G=U.nativeEvent.submitter,B=(G==null?void 0:G.getAttribute("formmethod"))||u,W=()=>k(G||U.currentTarget,{fetcherKey:t,method:B,navigate:r,replace:o,state:a,relative:p,preventScrollReset:g,viewTransition:v});S&&r!==!1?T.startTransition(()=>W()):W()};return T.createElement("form",{ref:E,method:P,action:x,onSubmit:i?d:R,..._,"data-discover":!L&&e==="render"?"true":void 0})});dS.displayName="Form";function fS(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function wv(e){let t=T.useContext(lo);return Xe(t,fS(e)),t}function pS(e,{target:t,replace:r,state:i,preventScrollReset:o,relative:a,viewTransition:u,unstable_useTransitions:h}={}){let d=tn(),p=Hn(),g=Ua(e,{relative:a});return T.useCallback(v=>{if(KE(v,t)){v.preventDefault();let _=r!==void 0?r:Ta(p)===Ta(g),E=()=>d(e,{replace:_,state:i,preventScrollReset:o,relative:a,viewTransition:u});h?T.startTransition(()=>E()):E()}},[p,d,g,r,i,t,e,o,a,u,h])}function _v(e){Er(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let t=T.useRef(Zd(e)),r=T.useRef(!1),i=Hn(),o=T.useMemo(()=>HE(i.search,r.current?null:t.current),[i.search]),a=tn(),u=T.useCallback((h,d)=>{const p=Zd(typeof h=="function"?h(new URLSearchParams(o)):h);r.current=!0,a("?"+p,d)},[a,o]);return[o,u]}var mS=0,gS=()=>`__${String(++mS)}__`;function yS(){let{router:e}=wv("useSubmit"),{basename:t}=T.useContext($r),r=IE(),i=e.fetch,o=e.navigate;return T.useCallback(async(a,u={})=>{let{action:h,method:d,encType:p,formData:g,body:v}=JE(a,t);if(u.navigate===!1){let _=u.fetcherKey||gS();await i(_,r,u.action||h,{preventScrollReset:u.preventScrollReset,formData:g,body:v,formMethod:u.method||d,formEncType:u.encType||p,flushSync:u.flushSync})}else await o(u.action||h,{preventScrollReset:u.preventScrollReset,formData:g,body:v,formMethod:u.method||d,formEncType:u.encType||p,replace:u.replace,state:u.state,fromRouteId:r,flushSync:u.flushSync,viewTransition:u.viewTransition})},[i,o,t,r])}function vS(e,{relative:t}={}){let{basename:r}=T.useContext($r),i=T.useContext(Sn);Xe(i,"useFormAction must be used inside a RouteContext");let[o]=i.matches.slice(-1),a={...Ua(e||".",{relative:t})},u=Hn();if(e==null){a.search=u.search;let h=new URLSearchParams(a.search),d=h.getAll("index");if(d.some(g=>g==="")){h.delete("index"),d.filter(v=>v).forEach(v=>h.append("index",v));let g=h.toString();a.search=g?`?${g}`:""}}return(!e||e===".")&&o.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(a.pathname=a.pathname==="/"?r:$n([r,a.pathname])),Ta(a)}function wS(e,{relative:t}={}){let r=T.useContext(uv);Xe(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=wv("useViewTransitionState"),o=Ua(e,{relative:t});if(!r.isTransitioning)return!1;let a=Vn(r.currentLocation.pathname,i)||r.currentLocation.pathname,u=Vn(r.nextLocation.pathname,i)||r.nextLocation.pathname;return Ou(o.pathname,u)!=null||Ou(o.pathname,a)!=null}var On={},su={},ef=function(e,t){return ef=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},ef(e,t)};function Ev(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");ef(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var Nu=function(){return Nu=Object.assign||function(t){for(var r,i=1,o=arguments.length;i<o;i++){r=arguments[i];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},Nu.apply(this,arguments)};function co(e,t){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(r[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(e);o<i.length;o++)t.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(e,i[o])&&(r[i[o]]=e[i[o]]);return r}function Sv(e,t,r,i){var o=arguments.length,a=o<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,r):i,u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(e,t,r,i);else for(var h=e.length-1;h>=0;h--)(u=e[h])&&(a=(o<3?u(a):o>3?u(t,r,a):u(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a}function kv(e,t){return function(r,i){t(r,i,e)}}function bv(e,t,r,i,o,a){function u(P){if(P!==void 0&&typeof P!="function")throw new TypeError("Function expected");return P}for(var h=i.kind,d=h==="getter"?"get":h==="setter"?"set":"value",p=!t&&e?i.static?e:e.prototype:null,g=t||(p?Object.getOwnPropertyDescriptor(p,i.name):{}),v,_=!1,E=r.length-1;E>=0;E--){var S={};for(var k in i)S[k]=k==="access"?{}:i[k];for(var k in i.access)S.access[k]=i.access[k];S.addInitializer=function(P){if(_)throw new TypeError("Cannot add initializers after decoration has completed");a.push(u(P||null))};var x=(0,r[E])(h==="accessor"?{get:g.get,set:g.set}:g[d],S);if(h==="accessor"){if(x===void 0)continue;if(x===null||typeof x!="object")throw new TypeError("Object expected");(v=u(x.get))&&(g.get=v),(v=u(x.set))&&(g.set=v),(v=u(x.init))&&o.unshift(v)}else(v=u(x))&&(h==="field"?o.unshift(v):g[d]=v)}p&&Object.defineProperty(p,i.name,g),_=!0}function xv(e,t,r){for(var i=arguments.length>2,o=0;o<t.length;o++)r=i?t[o].call(e,r):t[o].call(e);return i?r:void 0}function Tv(e){return typeof e=="symbol"?e:"".concat(e)}function Rv(e,t,r){return typeof t=="symbol"&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:r?"".concat(r," ",t):t})}function Av(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)}function ee(e,t,r,i){function o(a){return a instanceof r?a:new r(function(u){u(a)})}return new(r||(r=Promise))(function(a,u){function h(g){try{p(i.next(g))}catch(v){u(v)}}function d(g){try{p(i.throw(g))}catch(v){u(v)}}function p(g){g.done?a(g.value):o(g.value).then(h,d)}p((i=i.apply(e,t||[])).next())})}function Cv(e,t){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},i,o,a,u=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return u.next=h(0),u.throw=h(1),u.return=h(2),typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function h(p){return function(g){return d([p,g])}}function d(p){if(i)throw new TypeError("Generator is already executing.");for(;u&&(u=0,p[0]&&(r=0)),r;)try{if(i=1,o&&(a=p[0]&2?o.return:p[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,p[1])).done)return a;switch(o=0,a&&(p=[p[0]&2,a.value]),p[0]){case 0:case 1:a=p;break;case 4:return r.label++,{value:p[1],done:!1};case 5:r.label++,o=p[1],p=[0];continue;case 7:p=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(p[0]===6||p[0]===2)){r=0;continue}if(p[0]===3&&(!a||p[1]>a[0]&&p[1]<a[3])){r.label=p[1];break}if(p[0]===6&&r.label<a[1]){r.label=a[1],a=p;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(p);break}a[2]&&r.ops.pop(),r.trys.pop();continue}p=t.call(e,r)}catch(g){p=[6,g],o=0}finally{i=a=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}}var tc=Object.create?(function(e,t,r,i){i===void 0&&(i=r);var o=Object.getOwnPropertyDescriptor(t,r);(!o||("get"in o?!t.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,o)}):(function(e,t,r,i){i===void 0&&(i=r),e[i]=t[r]});function Pv(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&tc(t,e,r)}function Iu(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],i=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Wf(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var i=r.call(e),o,a=[],u;try{for(;(t===void 0||t-- >0)&&!(o=i.next()).done;)a.push(o.value)}catch(h){u={error:h}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(u)throw u.error}}return a}function jv(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(Wf(arguments[t]));return e}function Ov(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var i=Array(e),o=0,t=0;t<r;t++)for(var a=arguments[t],u=0,h=a.length;u<h;u++,o++)i[o]=a[u];return i}function Nv(e,t,r){if(r||arguments.length===2)for(var i=0,o=t.length,a;i<o;i++)(a||!(i in t))&&(a||(a=Array.prototype.slice.call(t,0,i)),a[i]=t[i]);return e.concat(a||Array.prototype.slice.call(t))}function Ji(e){return this instanceof Ji?(this.v=e,this):new Ji(e)}function Iv(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=r.apply(e,t||[]),o,a=[];return o=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),h("next"),h("throw"),h("return",u),o[Symbol.asyncIterator]=function(){return this},o;function u(E){return function(S){return Promise.resolve(S).then(E,v)}}function h(E,S){i[E]&&(o[E]=function(k){return new Promise(function(x,P){a.push([E,k,x,P])>1||d(E,k)})},S&&(o[E]=S(o[E])))}function d(E,S){try{p(i[E](S))}catch(k){_(a[0][3],k)}}function p(E){E.value instanceof Ji?Promise.resolve(E.value.v).then(g,v):_(a[0][2],E)}function g(E){d("next",E)}function v(E){d("throw",E)}function _(E,S){E(S),a.shift(),a.length&&d(a[0][0],a[0][1])}}function Lv(e){var t,r;return t={},i("next"),i("throw",function(o){throw o}),i("return"),t[Symbol.iterator]=function(){return this},t;function i(o,a){t[o]=e[o]?function(u){return(r=!r)?{value:Ji(e[o](u)),done:!1}:a?a(u):u}:a}}function Dv(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],r;return t?t.call(e):(e=typeof Iu=="function"?Iu(e):e[Symbol.iterator](),r={},i("next"),i("throw"),i("return"),r[Symbol.asyncIterator]=function(){return this},r);function i(a){r[a]=e[a]&&function(u){return new Promise(function(h,d){u=e[a](u),o(h,d,u.done,u.value)})}}function o(a,u,h,d){Promise.resolve(d).then(function(p){a({value:p,done:h})},u)}}function Uv(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var _S=Object.create?(function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}):function(e,t){e.default=t},tf=function(e){return tf=Object.getOwnPropertyNames||function(t){var r=[];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[r.length]=i);return r},tf(e)};function Fv(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r=tf(e),i=0;i<r.length;i++)r[i]!=="default"&&tc(t,e,r[i]);return _S(t,e),t}function Mv(e){return e&&e.__esModule?e:{default:e}}function $v(e,t,r,i){if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?i:r==="a"?i.call(e):i?i.value:t.get(e)}function Bv(e,t,r,i,o){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?o.call(e,r):o?o.value=r:t.set(e,r),r}function zv(e,t){if(t===null||typeof t!="object"&&typeof t!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof e=="function"?t===e:e.has(t)}function Vv(e,t,r){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var i,o;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");i=t[Symbol.asyncDispose]}if(i===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");i=t[Symbol.dispose],r&&(o=i)}if(typeof i!="function")throw new TypeError("Object not disposable.");o&&(i=function(){try{o.call(this)}catch(a){return Promise.reject(a)}}),e.stack.push({value:t,dispose:i,async:r})}else r&&e.stack.push({async:!0});return t}var ES=typeof SuppressedError=="function"?SuppressedError:function(e,t,r){var i=new Error(r);return i.name="SuppressedError",i.error=e,i.suppressed=t,i};function Wv(e){function t(a){e.error=e.hasError?new ES(a,e.error,"An error was suppressed during disposal."):a,e.hasError=!0}var r,i=0;function o(){for(;r=e.stack.pop();)try{if(!r.async&&i===1)return i=0,e.stack.push(r),Promise.resolve().then(o);if(r.dispose){var a=r.dispose.call(r.value);if(r.async)return i|=2,Promise.resolve(a).then(o,function(u){return t(u),o()})}else i|=1}catch(u){t(u)}if(i===1)return e.hasError?Promise.reject(e.error):Promise.resolve();if(e.hasError)throw e.error}return o()}function Kv(e,t){return typeof e=="string"&&/^\.\.?\//.test(e)?e.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(r,i,o,a,u){return i?t?".jsx":".js":o&&(!a||!u)?r:o+a+"."+u.toLowerCase()+"js"}):e}const SS={__extends:Ev,__assign:Nu,__rest:co,__decorate:Sv,__param:kv,__esDecorate:bv,__runInitializers:xv,__propKey:Tv,__setFunctionName:Rv,__metadata:Av,__awaiter:ee,__generator:Cv,__createBinding:tc,__exportStar:Pv,__values:Iu,__read:Wf,__spread:jv,__spreadArrays:Ov,__spreadArray:Nv,__await:Ji,__asyncGenerator:Iv,__asyncDelegator:Lv,__asyncValues:Dv,__makeTemplateObject:Uv,__importStar:Fv,__importDefault:Mv,__classPrivateFieldGet:$v,__classPrivateFieldSet:Bv,__classPrivateFieldIn:zv,__addDisposableResource:Vv,__disposeResources:Wv,__rewriteRelativeImportExtension:Kv},kS=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:Vv,get __assign(){return Nu},__asyncDelegator:Lv,__asyncGenerator:Iv,__asyncValues:Dv,__await:Ji,__awaiter:ee,__classPrivateFieldGet:$v,__classPrivateFieldIn:zv,__classPrivateFieldSet:Bv,__createBinding:tc,__decorate:Sv,__disposeResources:Wv,__esDecorate:bv,__exportStar:Pv,__extends:Ev,__generator:Cv,__importDefault:Mv,__importStar:Fv,__makeTemplateObject:Uv,__metadata:Av,__param:kv,__propKey:Tv,__read:Wf,__rest:co,__rewriteRelativeImportExtension:Kv,__runInitializers:xv,__setFunctionName:Rv,__spread:jv,__spreadArray:Nv,__spreadArrays:Ov,__values:Iu,default:SS},Symbol.toStringTag,{value:"Module"})),bS=e=>e?(...t)=>e(...t):(...t)=>fetch(...t);let rc=class extends Error{constructor(t,r="FunctionsError",i){super(t),this.name=r,this.context=i}},Hv=class extends rc{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}},rf=class extends rc{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}},nf=class extends rc{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}};var Lu;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(Lu||(Lu={}));class xS{constructor(t,{headers:r={},customFetch:i,region:o=Lu.Any}={}){this.url=t,this.headers=r,this.region=o,this.fetch=bS(i)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return ee(this,arguments,void 0,function*(r,i={}){var o;let a,u;try{const{headers:h,method:d,body:p,signal:g,timeout:v}=i;let _={},{region:E}=i;E||(E=this.region);const S=new URL(`${this.url}/${r}`);E&&E!=="any"&&(_["x-region"]=E,S.searchParams.set("forceFunctionRegion",E));let k;p&&(h&&!Object.prototype.hasOwnProperty.call(h,"Content-Type")||!h)?typeof Blob<"u"&&p instanceof Blob||p instanceof ArrayBuffer?(_["Content-Type"]="application/octet-stream",k=p):typeof p=="string"?(_["Content-Type"]="text/plain",k=p):typeof FormData<"u"&&p instanceof FormData?k=p:(_["Content-Type"]="application/json",k=JSON.stringify(p)):k=p;let x=g;v&&(u=new AbortController,a=setTimeout(()=>u.abort(),v),g?(x=u.signal,g.addEventListener("abort",()=>u.abort())):x=u.signal);const P=yield this.fetch(S.toString(),{method:d||"POST",headers:Object.assign(Object.assign(Object.assign({},_),this.headers),h),body:k,signal:x}).catch(G=>{throw new Hv(G)}),L=P.headers.get("x-relay-error");if(L&&L==="true")throw new rf(P);if(!P.ok)throw new nf(P);let R=((o=P.headers.get("Content-Type"))!==null&&o!==void 0?o:"text/plain").split(";")[0].trim(),U;return R==="application/json"?U=yield P.json():R==="application/octet-stream"||R==="application/pdf"?U=yield P.blob():R==="text/event-stream"?U=P:R==="multipart/form-data"?U=yield P.formData():U=yield P.text(),{data:U,error:null,response:P}}catch(h){return{data:null,error:h,response:h instanceof nf||h instanceof rf?h.context:void 0}}finally{a&&clearTimeout(a)}})}}const TS=Object.freeze(Object.defineProperty({__proto__:null,get FunctionRegion(){return Lu},FunctionsClient:xS,FunctionsError:rc,FunctionsFetchError:Hv,FunctionsHttpError:nf,FunctionsRelayError:rf},Symbol.toStringTag,{value:"Module"})),Gv=La(TS);var Mt={};const ho=La(kS);var iu={},ou={},au={},lu={},uu={},cu={},o1;function qv(){if(o1)return cu;o1=1,Object.defineProperty(cu,"__esModule",{value:!0});class e extends Error{constructor(r){super(r.message),this.name="PostgrestError",this.details=r.details,this.hint=r.hint,this.code=r.code}}return cu.default=e,cu}var a1;function Jv(){if(a1)return uu;a1=1,Object.defineProperty(uu,"__esModule",{value:!0});const t=ho.__importDefault(qv());let r=class{constructor(o){var a,u;this.shouldThrowOnError=!1,this.method=o.method,this.url=o.url,this.headers=new Headers(o.headers),this.schema=o.schema,this.body=o.body,this.shouldThrowOnError=(a=o.shouldThrowOnError)!==null&&a!==void 0?a:!1,this.signal=o.signal,this.isMaybeSingle=(u=o.isMaybeSingle)!==null&&u!==void 0?u:!1,o.fetch?this.fetch=o.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(o,a){return this.headers=new Headers(this.headers),this.headers.set(o,a),this}then(o,a){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const u=this.fetch;let h=u(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async d=>{var p,g,v,_;let E=null,S=null,k=null,x=d.status,P=d.statusText;if(d.ok){if(this.method!=="HEAD"){const G=await d.text();G===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((p=this.headers.get("Accept"))===null||p===void 0)&&p.includes("application/vnd.pgrst.plan+text"))?S=G:S=JSON.parse(G))}const R=(g=this.headers.get("Prefer"))===null||g===void 0?void 0:g.match(/count=(exact|planned|estimated)/),U=(v=d.headers.get("content-range"))===null||v===void 0?void 0:v.split("/");R&&U&&U.length>1&&(k=parseInt(U[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(S)&&(S.length>1?(E={code:"PGRST116",details:`Results contain ${S.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},S=null,k=null,x=406,P="Not Acceptable"):S.length===1?S=S[0]:S=null)}else{const R=await d.text();try{E=JSON.parse(R),Array.isArray(E)&&d.status===404&&(S=[],E=null,x=200,P="OK")}catch{d.status===404&&R===""?(x=204,P="No Content"):E={message:R}}if(E&&this.isMaybeSingle&&(!((_=E==null?void 0:E.details)===null||_===void 0)&&_.includes("0 rows"))&&(E=null,x=200,P="OK"),E&&this.shouldThrowOnError)throw new t.default(E)}return{error:E,data:S,count:k,status:x,statusText:P}});return this.shouldThrowOnError||(h=h.catch(d=>{var p,g,v,_,E,S;let k="";const x=d==null?void 0:d.cause;if(x){const P=(p=x==null?void 0:x.message)!==null&&p!==void 0?p:"",L=(g=x==null?void 0:x.code)!==null&&g!==void 0?g:"";k=`${(v=d==null?void 0:d.name)!==null&&v!==void 0?v:"FetchError"}: ${d==null?void 0:d.message}`,k+=`

Caused by: ${(_=x==null?void 0:x.name)!==null&&_!==void 0?_:"Error"}: ${P}`,L&&(k+=` (${L})`),x!=null&&x.stack&&(k+=`
${x.stack}`)}else k=(E=d==null?void 0:d.stack)!==null&&E!==void 0?E:"";return{error:{message:`${(S=d==null?void 0:d.name)!==null&&S!==void 0?S:"FetchError"}: ${d==null?void 0:d.message}`,details:k,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),h.then(o,a)}returns(){return this}overrideTypes(){return this}};return uu.default=r,uu}var l1;function Xv(){if(l1)return lu;l1=1,Object.defineProperty(lu,"__esModule",{value:!0});const t=ho.__importDefault(Jv());let r=class extends t.default{select(o){let a=!1;const u=(o??"*").split("").map(h=>/\s/.test(h)&&!a?"":(h==='"'&&(a=!a),h)).join("");return this.url.searchParams.set("select",u),this.headers.append("Prefer","return=representation"),this}order(o,{ascending:a=!0,nullsFirst:u,foreignTable:h,referencedTable:d=h}={}){const p=d?`${d}.order`:"order",g=this.url.searchParams.get(p);return this.url.searchParams.set(p,`${g?`${g},`:""}${o}.${a?"asc":"desc"}${u===void 0?"":u?".nullsfirst":".nullslast"}`),this}limit(o,{foreignTable:a,referencedTable:u=a}={}){const h=typeof u>"u"?"limit":`${u}.limit`;return this.url.searchParams.set(h,`${o}`),this}range(o,a,{foreignTable:u,referencedTable:h=u}={}){const d=typeof h>"u"?"offset":`${h}.offset`,p=typeof h>"u"?"limit":`${h}.limit`;return this.url.searchParams.set(d,`${o}`),this.url.searchParams.set(p,`${a-o+1}`),this}abortSignal(o){return this.signal=o,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:o=!1,verbose:a=!1,settings:u=!1,buffers:h=!1,wal:d=!1,format:p="text"}={}){var g;const v=[o?"analyze":null,a?"verbose":null,u?"settings":null,h?"buffers":null,d?"wal":null].filter(Boolean).join("|"),_=(g=this.headers.get("Accept"))!==null&&g!==void 0?g:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${p}; for="${_}"; options=${v};`),p==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(o){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${o}`),this}};return lu.default=r,lu}var u1;function Kf(){if(u1)return au;u1=1,Object.defineProperty(au,"__esModule",{value:!0});const t=ho.__importDefault(Xv()),r=new RegExp("[,()]");let i=class extends t.default{eq(a,u){return this.url.searchParams.append(a,`eq.${u}`),this}neq(a,u){return this.url.searchParams.append(a,`neq.${u}`),this}gt(a,u){return this.url.searchParams.append(a,`gt.${u}`),this}gte(a,u){return this.url.searchParams.append(a,`gte.${u}`),this}lt(a,u){return this.url.searchParams.append(a,`lt.${u}`),this}lte(a,u){return this.url.searchParams.append(a,`lte.${u}`),this}like(a,u){return this.url.searchParams.append(a,`like.${u}`),this}likeAllOf(a,u){return this.url.searchParams.append(a,`like(all).{${u.join(",")}}`),this}likeAnyOf(a,u){return this.url.searchParams.append(a,`like(any).{${u.join(",")}}`),this}ilike(a,u){return this.url.searchParams.append(a,`ilike.${u}`),this}ilikeAllOf(a,u){return this.url.searchParams.append(a,`ilike(all).{${u.join(",")}}`),this}ilikeAnyOf(a,u){return this.url.searchParams.append(a,`ilike(any).{${u.join(",")}}`),this}regexMatch(a,u){return this.url.searchParams.append(a,`match.${u}`),this}regexIMatch(a,u){return this.url.searchParams.append(a,`imatch.${u}`),this}is(a,u){return this.url.searchParams.append(a,`is.${u}`),this}isDistinct(a,u){return this.url.searchParams.append(a,`isdistinct.${u}`),this}in(a,u){const h=Array.from(new Set(u)).map(d=>typeof d=="string"&&r.test(d)?`"${d}"`:`${d}`).join(",");return this.url.searchParams.append(a,`in.(${h})`),this}contains(a,u){return typeof u=="string"?this.url.searchParams.append(a,`cs.${u}`):Array.isArray(u)?this.url.searchParams.append(a,`cs.{${u.join(",")}}`):this.url.searchParams.append(a,`cs.${JSON.stringify(u)}`),this}containedBy(a,u){return typeof u=="string"?this.url.searchParams.append(a,`cd.${u}`):Array.isArray(u)?this.url.searchParams.append(a,`cd.{${u.join(",")}}`):this.url.searchParams.append(a,`cd.${JSON.stringify(u)}`),this}rangeGt(a,u){return this.url.searchParams.append(a,`sr.${u}`),this}rangeGte(a,u){return this.url.searchParams.append(a,`nxl.${u}`),this}rangeLt(a,u){return this.url.searchParams.append(a,`sl.${u}`),this}rangeLte(a,u){return this.url.searchParams.append(a,`nxr.${u}`),this}rangeAdjacent(a,u){return this.url.searchParams.append(a,`adj.${u}`),this}overlaps(a,u){return typeof u=="string"?this.url.searchParams.append(a,`ov.${u}`):this.url.searchParams.append(a,`ov.{${u.join(",")}}`),this}textSearch(a,u,{config:h,type:d}={}){let p="";d==="plain"?p="pl":d==="phrase"?p="ph":d==="websearch"&&(p="w");const g=h===void 0?"":`(${h})`;return this.url.searchParams.append(a,`${p}fts${g}.${u}`),this}match(a){return Object.entries(a).forEach(([u,h])=>{this.url.searchParams.append(u,`eq.${h}`)}),this}not(a,u,h){return this.url.searchParams.append(a,`not.${u}.${h}`),this}or(a,{foreignTable:u,referencedTable:h=u}={}){const d=h?`${h}.or`:"or";return this.url.searchParams.append(d,`(${a})`),this}filter(a,u,h){return this.url.searchParams.append(a,`${u}.${h}`),this}};return au.default=i,au}var c1;function Yv(){if(c1)return ou;c1=1,Object.defineProperty(ou,"__esModule",{value:!0});const t=ho.__importDefault(Kf());let r=class{constructor(o,{headers:a={},schema:u,fetch:h}){this.url=o,this.headers=new Headers(a),this.schema=u,this.fetch=h}select(o,a){const{head:u=!1,count:h}=a??{},d=u?"HEAD":"GET";let p=!1;const g=(o??"*").split("").map(v=>/\s/.test(v)&&!p?"":(v==='"'&&(p=!p),v)).join("");return this.url.searchParams.set("select",g),h&&this.headers.append("Prefer",`count=${h}`),new t.default({method:d,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(o,{count:a,defaultToNull:u=!0}={}){var h;const d="POST";if(a&&this.headers.append("Prefer",`count=${a}`),u||this.headers.append("Prefer","missing=default"),Array.isArray(o)){const p=o.reduce((g,v)=>g.concat(Object.keys(v)),[]);if(p.length>0){const g=[...new Set(p)].map(v=>`"${v}"`);this.url.searchParams.set("columns",g.join(","))}}return new t.default({method:d,url:this.url,headers:this.headers,schema:this.schema,body:o,fetch:(h=this.fetch)!==null&&h!==void 0?h:fetch})}upsert(o,{onConflict:a,ignoreDuplicates:u=!1,count:h,defaultToNull:d=!0}={}){var p;const g="POST";if(this.headers.append("Prefer",`resolution=${u?"ignore":"merge"}-duplicates`),a!==void 0&&this.url.searchParams.set("on_conflict",a),h&&this.headers.append("Prefer",`count=${h}`),d||this.headers.append("Prefer","missing=default"),Array.isArray(o)){const v=o.reduce((_,E)=>_.concat(Object.keys(E)),[]);if(v.length>0){const _=[...new Set(v)].map(E=>`"${E}"`);this.url.searchParams.set("columns",_.join(","))}}return new t.default({method:g,url:this.url,headers:this.headers,schema:this.schema,body:o,fetch:(p=this.fetch)!==null&&p!==void 0?p:fetch})}update(o,{count:a}={}){var u;const h="PATCH";return a&&this.headers.append("Prefer",`count=${a}`),new t.default({method:h,url:this.url,headers:this.headers,schema:this.schema,body:o,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}delete({count:o}={}){var a;const u="DELETE";return o&&this.headers.append("Prefer",`count=${o}`),new t.default({method:u,url:this.url,headers:this.headers,schema:this.schema,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}};return ou.default=r,ou}var h1;function RS(){if(h1)return iu;h1=1,Object.defineProperty(iu,"__esModule",{value:!0});const e=ho,t=e.__importDefault(Yv()),r=e.__importDefault(Kf());let i=class Qv{constructor(a,{headers:u={},schema:h,fetch:d}={}){this.url=a,this.headers=new Headers(u),this.schemaName=h,this.fetch=d}from(a){if(!a||typeof a!="string"||a.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");const u=new URL(`${this.url}/${a}`);return new t.default(u,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(a){return new Qv(this.url,{headers:this.headers,schema:a,fetch:this.fetch})}rpc(a,u={},{head:h=!1,get:d=!1,count:p}={}){var g;let v;const _=new URL(`${this.url}/rpc/${a}`);let E;h||d?(v=h?"HEAD":"GET",Object.entries(u).filter(([k,x])=>x!==void 0).map(([k,x])=>[k,Array.isArray(x)?`{${x.join(",")}}`:`${x}`]).forEach(([k,x])=>{_.searchParams.append(k,x)})):(v="POST",E=u);const S=new Headers(this.headers);return p&&S.set("Prefer",`count=${p}`),new r.default({method:v,url:_,headers:S,schema:this.schemaName,body:E,fetch:(g=this.fetch)!==null&&g!==void 0?g:fetch})}};return iu.default=i,iu}var d1;function Zv(){if(d1)return Mt;d1=1,Object.defineProperty(Mt,"__esModule",{value:!0}),Mt.PostgrestError=Mt.PostgrestBuilder=Mt.PostgrestTransformBuilder=Mt.PostgrestFilterBuilder=Mt.PostgrestQueryBuilder=Mt.PostgrestClient=void 0;const e=ho,t=e.__importDefault(RS());Mt.PostgrestClient=t.default;const r=e.__importDefault(Yv());Mt.PostgrestQueryBuilder=r.default;const i=e.__importDefault(Kf());Mt.PostgrestFilterBuilder=i.default;const o=e.__importDefault(Xv());Mt.PostgrestTransformBuilder=o.default;const a=e.__importDefault(Jv());Mt.PostgrestBuilder=a.default;const u=e.__importDefault(qv());return Mt.PostgrestError=u.default,Mt.default={PostgrestClient:t.default,PostgrestQueryBuilder:r.default,PostgrestFilterBuilder:i.default,PostgrestTransformBuilder:o.default,PostgrestBuilder:a.default,PostgrestError:u.default},Mt}class e2{constructor(){}static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const r=process.versions;if(r&&r.node){const i=r.node,o=parseInt(i.replace(/^v/,"").split(".")[0]);return o>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${o} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${o} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let r=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(r+=`

Suggested solution: ${t.workaround}`),new Error(r)}static createWebSocket(t,r){const i=this.getWebSocketConstructor();return new i(t,r)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const AS="2.87.1",CS=`realtime-js/${AS}`,t2="1.0.0",PS="2.0.0",f1=t2,sf=1e4,jS=1e3,OS=100;var Ys;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(Ys||(Ys={}));var ft;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(ft||(ft={}));var Zr;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(Zr||(Zr={}));var of;(function(e){e.websocket="websocket"})(of||(of={}));var Qs;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(Qs||(Qs={}));class NS{constructor(t){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=t??[]}encode(t,r){if(t.event===this.BROADCAST_EVENT&&!(t.payload instanceof ArrayBuffer)&&typeof t.payload.event=="string")return r(this._binaryEncodeUserBroadcastPush(t));let i=[t.join_ref,t.ref,t.topic,t.event,t.payload];return r(JSON.stringify(i))}_binaryEncodeUserBroadcastPush(t){var r;return this._isArrayBuffer((r=t.payload)===null||r===void 0?void 0:r.payload)?this._encodeBinaryUserBroadcastPush(t):this._encodeJsonUserBroadcastPush(t)}_encodeBinaryUserBroadcastPush(t){var r,i;const o=(i=(r=t.payload)===null||r===void 0?void 0:r.payload)!==null&&i!==void 0?i:new ArrayBuffer(0);return this._encodeUserBroadcastPush(t,this.BINARY_ENCODING,o)}_encodeJsonUserBroadcastPush(t){var r,i;const o=(i=(r=t.payload)===null||r===void 0?void 0:r.payload)!==null&&i!==void 0?i:{},u=new TextEncoder().encode(JSON.stringify(o)).buffer;return this._encodeUserBroadcastPush(t,this.JSON_ENCODING,u)}_encodeUserBroadcastPush(t,r,i){var o,a;const u=t.topic,h=(o=t.ref)!==null&&o!==void 0?o:"",d=(a=t.join_ref)!==null&&a!==void 0?a:"",p=t.payload.event,g=this.allowedMetadataKeys?this._pick(t.payload,this.allowedMetadataKeys):{},v=Object.keys(g).length===0?"":JSON.stringify(g);if(d.length>255)throw new Error(`joinRef length ${d.length} exceeds maximum of 255`);if(h.length>255)throw new Error(`ref length ${h.length} exceeds maximum of 255`);if(u.length>255)throw new Error(`topic length ${u.length} exceeds maximum of 255`);if(p.length>255)throw new Error(`userEvent length ${p.length} exceeds maximum of 255`);if(v.length>255)throw new Error(`metadata length ${v.length} exceeds maximum of 255`);const _=this.USER_BROADCAST_PUSH_META_LENGTH+d.length+h.length+u.length+p.length+v.length,E=new ArrayBuffer(this.HEADER_LENGTH+_);let S=new DataView(E),k=0;S.setUint8(k++,this.KINDS.userBroadcastPush),S.setUint8(k++,d.length),S.setUint8(k++,h.length),S.setUint8(k++,u.length),S.setUint8(k++,p.length),S.setUint8(k++,v.length),S.setUint8(k++,r),Array.from(d,P=>S.setUint8(k++,P.charCodeAt(0))),Array.from(h,P=>S.setUint8(k++,P.charCodeAt(0))),Array.from(u,P=>S.setUint8(k++,P.charCodeAt(0))),Array.from(p,P=>S.setUint8(k++,P.charCodeAt(0))),Array.from(v,P=>S.setUint8(k++,P.charCodeAt(0)));var x=new Uint8Array(E.byteLength+i.byteLength);return x.set(new Uint8Array(E),0),x.set(new Uint8Array(i),E.byteLength),x.buffer}decode(t,r){if(this._isArrayBuffer(t)){let i=this._binaryDecode(t);return r(i)}if(typeof t=="string"){const i=JSON.parse(t),[o,a,u,h,d]=i;return r({join_ref:o,ref:a,topic:u,event:h,payload:d})}return r({})}_binaryDecode(t){const r=new DataView(t),i=r.getUint8(0),o=new TextDecoder;switch(i){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(t,r,o)}}_decodeUserBroadcast(t,r,i){const o=r.getUint8(1),a=r.getUint8(2),u=r.getUint8(3),h=r.getUint8(4);let d=this.HEADER_LENGTH+4;const p=i.decode(t.slice(d,d+o));d=d+o;const g=i.decode(t.slice(d,d+a));d=d+a;const v=i.decode(t.slice(d,d+u));d=d+u;const _=t.slice(d,t.byteLength),E=h===this.JSON_ENCODING?JSON.parse(i.decode(_)):_,S={type:this.BROADCAST_EVENT,event:g,payload:E};return u>0&&(S.meta=JSON.parse(v)),{join_ref:null,ref:null,topic:p,event:this.BROADCAST_EVENT,payload:S}}_isArrayBuffer(t){var r;return t instanceof ArrayBuffer||((r=t==null?void 0:t.constructor)===null||r===void 0?void 0:r.name)==="ArrayBuffer"}_pick(t,r){return!t||typeof t!="object"?{}:Object.fromEntries(Object.entries(t).filter(([i])=>r.includes(i)))}}class r2{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Fe;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(Fe||(Fe={}));const p1=(e,t,r={})=>{var i;const o=(i=r.skipTypes)!==null&&i!==void 0?i:[];return t?Object.keys(t).reduce((a,u)=>(a[u]=IS(u,e,t,o),a),{}):{}},IS=(e,t,r,i)=>{const o=t.find(h=>h.name===e),a=o==null?void 0:o.type,u=r[e];return a&&!i.includes(a)?n2(a,u):af(u)},n2=(e,t)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return FS(t,r)}switch(e){case Fe.bool:return LS(t);case Fe.float4:case Fe.float8:case Fe.int2:case Fe.int4:case Fe.int8:case Fe.numeric:case Fe.oid:return DS(t);case Fe.json:case Fe.jsonb:return US(t);case Fe.timestamp:return MS(t);case Fe.abstime:case Fe.date:case Fe.daterange:case Fe.int4range:case Fe.int8range:case Fe.money:case Fe.reltime:case Fe.text:case Fe.time:case Fe.timestamptz:case Fe.timetz:case Fe.tsrange:case Fe.tstzrange:return af(t);default:return af(t)}},af=e=>e,LS=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},DS=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},US=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},FS=(e,t)=>{if(typeof e!="string")return e;const r=e.length-1,i=e[r];if(e[0]==="{"&&i==="}"){let a;const u=e.slice(1,r);try{a=JSON.parse("["+u+"]")}catch{a=u?u.split(","):[]}return a.map(h=>n2(t,h))}return e},MS=e=>typeof e=="string"?e.replace(" ","T"):e,s2=e=>{const t=new URL(e);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),t.pathname===""||t.pathname==="/"?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class Ad{constructor(t,r,i={},o=sf){this.channel=t,this.event=r,this.payload=i,this.timeout=o,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var i;return this._hasReceived(t)&&r((i=this.receivedResp)===null||i===void 0?void 0:i.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(i=>i.status===t).forEach(i=>i.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var lf;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(lf||(lf={}));let i2=class Su{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const i=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(i.state,{},o=>{const{onJoin:a,onLeave:u,onSync:h}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Su.syncState(this.state,o,a,u),this.pendingDiffs.forEach(d=>{this.state=Su.syncDiff(this.state,d,a,u)}),this.pendingDiffs=[],h()}),this.channel._on(i.diff,{},o=>{const{onJoin:a,onLeave:u,onSync:h}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(o):(this.state=Su.syncDiff(this.state,o,a,u),h())}),this.onJoin((o,a,u)=>{this.channel._trigger("presence",{event:"join",key:o,currentPresences:a,newPresences:u})}),this.onLeave((o,a,u)=>{this.channel._trigger("presence",{event:"leave",key:o,currentPresences:a,leftPresences:u})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,i,o){const a=this.cloneDeep(t),u=this.transformState(r),h={},d={};return this.map(a,(p,g)=>{u[p]||(d[p]=g)}),this.map(u,(p,g)=>{const v=a[p];if(v){const _=g.map(x=>x.presence_ref),E=v.map(x=>x.presence_ref),S=g.filter(x=>E.indexOf(x.presence_ref)<0),k=v.filter(x=>_.indexOf(x.presence_ref)<0);S.length>0&&(h[p]=S),k.length>0&&(d[p]=k)}else h[p]=g}),this.syncDiff(a,{joins:h,leaves:d},i,o)}static syncDiff(t,r,i,o){const{joins:a,leaves:u}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return i||(i=()=>{}),o||(o=()=>{}),this.map(a,(h,d)=>{var p;const g=(p=t[h])!==null&&p!==void 0?p:[];if(t[h]=this.cloneDeep(d),g.length>0){const v=t[h].map(E=>E.presence_ref),_=g.filter(E=>v.indexOf(E.presence_ref)<0);t[h].unshift(..._)}i(h,g,d)}),this.map(u,(h,d)=>{let p=t[h];if(!p)return;const g=d.map(v=>v.presence_ref);p=p.filter(v=>g.indexOf(v.presence_ref)<0),t[h]=p,o(h,p,d),p.length===0&&delete t[h]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(i=>r(i,t[i]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,i)=>{const o=t[i];return"metas"in o?r[i]=o.metas.map(a=>(a.presence_ref=a.phx_ref,delete a.phx_ref,delete a.phx_ref_prev,a)):r[i]=o,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}};var uf;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(uf||(uf={}));var zi;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(zi||(zi={}));var yn;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(yn||(yn={}));const $S=ft;let o2=class va{constructor(t,r={config:{}},i){var o,a;if(this.topic=t,this.params=r,this.socket=i,this.bindings={},this.state=ft.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new Ad(this,Zr.join,this.params,this.timeout),this.rejoinTimer=new r2(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=ft.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(u=>u.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=ft.closed,this.socket._remove(this)}),this._onError(u=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,u),this.state=ft.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=ft.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",u=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,u),this.state=ft.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Zr.reply,{},(u,h)=>{this._trigger(this._replyEventName(h),u)}),this.presence=new i2(this),this.broadcastEndpointURL=s2(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((a=(o=this.params.config)===null||o===void 0?void 0:o.broadcast)===null||a===void 0)&&a.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,r=this.timeout){var i,o,a;if(this.socket.isConnected()||this.socket.connect(),this.state==ft.closed){const{config:{broadcast:u,presence:h,private:d}}=this.params,p=(o=(i=this.bindings.postgres_changes)===null||i===void 0?void 0:i.map(E=>E.filter))!==null&&o!==void 0?o:[],g=!!this.bindings[zi.PRESENCE]&&this.bindings[zi.PRESENCE].length>0||((a=this.params.config.presence)===null||a===void 0?void 0:a.enabled)===!0,v={},_={broadcast:u,presence:Object.assign(Object.assign({},h),{enabled:g}),postgres_changes:p,private:d};this.socket.accessTokenValue&&(v.access_token=this.socket.accessTokenValue),this._onError(E=>t==null?void 0:t(yn.CHANNEL_ERROR,E)),this._onClose(()=>t==null?void 0:t(yn.CLOSED)),this.updateJoinPayload(Object.assign({config:_},v)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:E})=>{var S;if(this.socket._isManualToken()||this.socket.setAuth(),E===void 0){t==null||t(yn.SUBSCRIBED);return}else{const k=this.bindings.postgres_changes,x=(S=k==null?void 0:k.length)!==null&&S!==void 0?S:0,P=[];for(let L=0;L<x;L++){const R=k[L],{filter:{event:U,schema:G,table:B,filter:W}}=R,F=E&&E[L];if(F&&F.event===U&&va.isFilterValueEqual(F.schema,G)&&va.isFilterValueEqual(F.table,B)&&va.isFilterValueEqual(F.filter,W))P.push(Object.assign(Object.assign({},R),{id:F.id}));else{this.unsubscribe(),this.state=ft.errored,t==null||t(yn.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=P,t&&t(yn.SUBSCRIBED);return}}).receive("error",E=>{this.state=ft.errored,t==null||t(yn.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(E).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(yn.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,i){return this.state===ft.joined&&t===zi.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(t,r,i)}async httpSend(t,r,i={}){var o;const a=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(r==null)return Promise.reject("Payload is required for httpSend()");const u={method:"POST",headers:{Authorization:a,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:t,payload:r,private:this.private}]})},h=await this._fetchWithTimeout(this.broadcastEndpointURL,u,(o=i.timeout)!==null&&o!==void 0?o:this.timeout);if(h.status===202)return{success:!0};let d=h.statusText;try{const p=await h.json();d=p.error||p.message||d}catch{}return Promise.reject(new Error(d))}async send(t,r={}){var i,o;if(!this._canPush()&&t.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:a,payload:u}=t,d={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:u,private:this.private}]})};try{const p=await this._fetchWithTimeout(this.broadcastEndpointURL,d,(i=r.timeout)!==null&&i!==void 0?i:this.timeout);return await((o=p.body)===null||o===void 0?void 0:o.cancel()),p.ok?"ok":"error"}catch(p){return p.name==="AbortError"?"timed out":"error"}}else return new Promise(a=>{var u,h,d;const p=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((d=(h=(u=this.params)===null||u===void 0?void 0:u.config)===null||h===void 0?void 0:h.broadcast)===null||d===void 0)&&d.ack)&&a("ok"),p.receive("ok",()=>a("ok")),p.receive("error",()=>a("error")),p.receive("timeout",()=>a("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=ft.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Zr.close,"leave",this._joinRef())};this.joinPush.destroy();let i=null;return new Promise(o=>{i=new Ad(this,Zr.leave,{},t),i.receive("ok",()=>{r(),o("ok")}).receive("timeout",()=>{r(),o("timed out")}).receive("error",()=>{o("error")}),i.send(),this._canPush()||i.trigger("ok",{})}).finally(()=>{i==null||i.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=ft.closed,this.bindings={}}async _fetchWithTimeout(t,r,i){const o=new AbortController,a=setTimeout(()=>o.abort(),i),u=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:o.signal}));return clearTimeout(a),u}_push(t,r,i=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let o=new Ad(this,t,r,i);return this._canPush()?o.send():this._addToPushBuffer(o),o}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>OS){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(t,r,i){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,i){var o,a;const u=t.toLocaleLowerCase(),{close:h,error:d,leave:p,join:g}=Zr;if(i&&[h,d,p,g].indexOf(u)>=0&&i!==this._joinRef())return;let _=this._onMessage(u,r,i);if(r&&!_)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(u)?(o=this.bindings.postgres_changes)===null||o===void 0||o.filter(E=>{var S,k,x;return((S=E.filter)===null||S===void 0?void 0:S.event)==="*"||((x=(k=E.filter)===null||k===void 0?void 0:k.event)===null||x===void 0?void 0:x.toLocaleLowerCase())===u}).map(E=>E.callback(_,i)):(a=this.bindings[u])===null||a===void 0||a.filter(E=>{var S,k,x,P,L,R;if(["broadcast","presence","postgres_changes"].includes(u))if("id"in E){const U=E.id,G=(S=E.filter)===null||S===void 0?void 0:S.event;return U&&((k=r.ids)===null||k===void 0?void 0:k.includes(U))&&(G==="*"||(G==null?void 0:G.toLocaleLowerCase())===((x=r.data)===null||x===void 0?void 0:x.type.toLocaleLowerCase()))}else{const U=(L=(P=E==null?void 0:E.filter)===null||P===void 0?void 0:P.event)===null||L===void 0?void 0:L.toLocaleLowerCase();return U==="*"||U===((R=r==null?void 0:r.event)===null||R===void 0?void 0:R.toLocaleLowerCase())}else return E.type.toLocaleLowerCase()===u}).map(E=>{if(typeof _=="object"&&"ids"in _){const S=_.data,{schema:k,table:x,commit_timestamp:P,type:L,errors:R}=S;_=Object.assign(Object.assign({},{schema:k,table:x,commit_timestamp:P,eventType:L,new:{},old:{},errors:R}),this._getPayloadRecords(S))}E.callback(_,i)})}_isClosed(){return this.state===ft.closed}_isJoined(){return this.state===ft.joined}_isJoining(){return this.state===ft.joining}_isLeaving(){return this.state===ft.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,i){const o=t.toLocaleLowerCase(),a={type:o,filter:r,callback:i};return this.bindings[o]?this.bindings[o].push(a):this.bindings[o]=[a],this}_off(t,r){const i=t.toLocaleLowerCase();return this.bindings[i]&&(this.bindings[i]=this.bindings[i].filter(o=>{var a;return!(((a=o.type)===null||a===void 0?void 0:a.toLocaleLowerCase())===i&&va.isEqual(o.filter,r))})),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const i in t)if(t[i]!==r[i])return!1;return!0}static isFilterValueEqual(t,r){return(t??void 0)===(r??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(Zr.close,{},t)}_onError(t){this._on(Zr.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=ft.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=p1(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=p1(t.columns,t.old_record)),r}};const Cd=()=>{},hu={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},BS=[1e3,2e3,5e3,1e4],zS=1e4,VS=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;let WS=class{constructor(t,r){var i;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=sf,this.transport=null,this.heartbeatIntervalMs=hu.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Cd,this.ref=0,this.reconnectTimer=null,this.vsn=f1,this.logger=Cd,this.conn=null,this.sendBuffer=[],this.serializer=new NS,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=o=>o?(...a)=>o(...a):(...a)=>fetch(...a),!(!((i=r==null?void 0:r.params)===null||i===void 0)&&i.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${t}/${of.websocket}`,this.httpEndpoint=s2(t),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=e2.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const r=t.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(t,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const i=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(i),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(t?this.conn.close(t,r??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,r,i){this.logger(t,r,i)}connectionState(){switch(this.conn&&this.conn.readyState){case Ys.connecting:return Qs.Connecting;case Ys.open:return Qs.Open;case Ys.closing:return Qs.Closing;default:return Qs.Closed}}isConnected(){return this.connectionState()===Qs.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,r={config:{}}){const i=`realtime:${t}`,o=this.getChannels().find(a=>a.topic===i);if(o)return o;{const a=new o2(`realtime:${t}`,r,this);return this.channels.push(a),a}}push(t){const{topic:r,event:i,payload:o,ref:a}=t,u=()=>{this.encode(t,h=>{var d;(d=this.conn)===null||d===void 0||d.send(h)})};this.log("push",`${r} ${i} (${a})`,o),this.isConnected()?u():this.sendBuffer.push(u)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(jS,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},hu.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(i=>i.topic===t&&(i._isJoined()||i._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply")try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error")}catch(p){this.log("error","error in heartbeat callback",p)}r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:i,event:o,payload:a,ref:u}=r,h=u?`(${u})`:"",d=a.status||"";this.log("receive",`${d} ${i} ${o} ${h}`.trim(),a),this.channels.filter(p=>p._isMember(i)).forEach(p=>p._trigger(o,a,u)),this._triggerStateCallbacks("message",r)})}_clearTimer(t){var r;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){if(this.conn){if(this.conn.readyState===Ys.open||this.conn.readyState===Ys.connecting)try{this.conn.close()}catch(t){this.log("error","Error closing connection",t)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(r=>{this.log("error","error waiting for auth on connect",r),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var r;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(Zr.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const i=t.match(/\?/)?"&":"?",o=new URLSearchParams(r);return`${t}${i}${o}`}_workerObjectUrl(t){let r;if(t)r=t;else{const i=new Blob([VS],{type:"application/javascript"});r=URL.createObjectURL(i)}return r}_setConnectionState(t,r=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(t=null){let r,i=!1;if(t)r=t,i=!0;else if(this.accessToken)try{r=await this.accessToken()}catch(o){this.log("error","Error fetching access token from callback",o),r=this.accessTokenValue}else r=this.accessTokenValue;i?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(o=>{const a={access_token:r,version:CS};r&&o.updateJoinPayload(a),o.joinedOnce&&o._isJoined()&&o._push(Zr.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this._isManualToken()||this.setAuth().catch(r=>{this.log("error",`Error setting auth in ${t}`,r)})}_triggerStateCallbacks(t,r){try{this.stateChangeCallbacks[t].forEach(i=>{try{i(r)}catch(o){this.log("error",`error in ${t} callback`,o)}})}catch(i){this.log("error",`error triggering ${t} callbacks`,i)}}_setupReconnectionTimer(){this.reconnectTimer=new r2(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},hu.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var r,i,o,a,u,h,d,p,g,v,_,E;switch(this.transport=(r=t==null?void 0:t.transport)!==null&&r!==void 0?r:null,this.timeout=(i=t==null?void 0:t.timeout)!==null&&i!==void 0?i:sf,this.heartbeatIntervalMs=(o=t==null?void 0:t.heartbeatIntervalMs)!==null&&o!==void 0?o:hu.HEARTBEAT_INTERVAL,this.worker=(a=t==null?void 0:t.worker)!==null&&a!==void 0?a:!1,this.accessToken=(u=t==null?void 0:t.accessToken)!==null&&u!==void 0?u:null,this.heartbeatCallback=(h=t==null?void 0:t.heartbeatCallback)!==null&&h!==void 0?h:Cd,this.vsn=(d=t==null?void 0:t.vsn)!==null&&d!==void 0?d:f1,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(p=t==null?void 0:t.reconnectAfterMs)!==null&&p!==void 0?p:(S=>BS[S-1]||zS),this.vsn){case t2:this.encode=(g=t==null?void 0:t.encode)!==null&&g!==void 0?g:((S,k)=>k(JSON.stringify(S))),this.decode=(v=t==null?void 0:t.decode)!==null&&v!==void 0?v:((S,k)=>k(JSON.parse(S)));break;case PS:this.encode=(_=t==null?void 0:t.encode)!==null&&_!==void 0?_:this.serializer.encode.bind(this.serializer),this.decode=(E=t==null?void 0:t.decode)!==null&&E!==void 0?E:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}};const KS=Object.freeze(Object.defineProperty({__proto__:null,REALTIME_CHANNEL_STATES:$S,get REALTIME_LISTEN_TYPES(){return zi},get REALTIME_POSTGRES_CHANGES_LISTEN_EVENT(){return uf},get REALTIME_PRESENCE_LISTEN_EVENTS(){return lf},get REALTIME_SUBSCRIBE_STATES(){return yn},RealtimeChannel:o2,RealtimeClient:WS,RealtimePresence:i2,WebSocketFactory:e2},Symbol.toStringTag,{value:"Module"})),a2=La(KS);class Fa extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function qe(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class l2 extends Fa{constructor(t,r,i){super(t),this.name="StorageApiError",this.status=r,this.statusCode=i}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Du extends Fa{constructor(t,r){super(t),this.name="StorageUnknownError",this.originalError=r}}const Hf=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),HS=()=>Response,cf=e=>{if(Array.isArray(e))return e.map(r=>cf(r));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,i])=>{const o=r.replace(/([-_][a-z])/gi,a=>a.toUpperCase().replace(/[-_]/g,""));t[o]=cf(i)}),t},GS=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},qS=e=>!e||typeof e!="string"||e.length===0||e.length>100||e.trim()!==e||e.includes("/")||e.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(e),Pd=e=>{var t;return e.msg||e.message||e.error_description||(typeof e.error=="string"?e.error:(t=e.error)===null||t===void 0?void 0:t.message)||JSON.stringify(e)},JS=(e,t,r)=>ee(void 0,void 0,void 0,function*(){const i=yield HS();e instanceof i&&!(r!=null&&r.noResolveJson)?e.json().then(o=>{const a=e.status||500,u=(o==null?void 0:o.statusCode)||a+"";t(new l2(Pd(o),a,u))}).catch(o=>{t(new Du(Pd(o),o))}):t(new Du(Pd(e),e))}),XS=(e,t,r,i)=>{const o={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!i?o:(GS(i)?(o.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),o.body=JSON.stringify(i)):o.body=i,t!=null&&t.duplex&&(o.duplex=t.duplex),Object.assign(Object.assign({},o),r))};function Ma(e,t,r,i,o,a){return ee(this,void 0,void 0,function*(){return new Promise((u,h)=>{e(r,XS(t,i,o,a)).then(d=>{if(!d.ok)throw d;return i!=null&&i.noResolveJson?d:d.json()}).then(d=>u(d)).catch(d=>JS(d,h,i))})})}function Ra(e,t,r,i){return ee(this,void 0,void 0,function*(){return Ma(e,"GET",t,r,i)})}function Qr(e,t,r,i,o){return ee(this,void 0,void 0,function*(){return Ma(e,"POST",t,i,o,r)})}function hf(e,t,r,i,o){return ee(this,void 0,void 0,function*(){return Ma(e,"PUT",t,i,o,r)})}function YS(e,t,r,i){return ee(this,void 0,void 0,function*(){return Ma(e,"HEAD",t,Object.assign(Object.assign({},r),{noResolveJson:!0}),i)})}function Gf(e,t,r,i,o){return ee(this,void 0,void 0,function*(){return Ma(e,"DELETE",t,i,o,r)})}class QS{constructor(t,r){this.downloadFn=t,this.shouldThrowOnError=r}then(t,r){return this.execute().then(t,r)}execute(){return ee(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(qe(t))return{data:null,error:t};throw t}})}}var u2;class ZS{constructor(t,r){this.downloadFn=t,this.shouldThrowOnError=r,this[u2]="BlobDownloadBuilder",this.promise=null}asStream(){return new QS(this.downloadFn,this.shouldThrowOnError)}then(t,r){return this.getPromise().then(t,r)}catch(t){return this.getPromise().catch(t)}finally(t){return this.getPromise().finally(t)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return ee(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(qe(t))return{data:null,error:t};throw t}})}}u2=Symbol.toStringTag;const ek={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},m1={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class tk{constructor(t,r={},i,o){this.shouldThrowOnError=!1,this.url=t,this.headers=r,this.bucketId=i,this.fetch=Hf(o)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(t,r,i,o){return ee(this,void 0,void 0,function*(){try{let a;const u=Object.assign(Object.assign({},m1),o);let h=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(u.upsert)});const d=u.metadata;typeof Blob<"u"&&i instanceof Blob?(a=new FormData,a.append("cacheControl",u.cacheControl),d&&a.append("metadata",this.encodeMetadata(d)),a.append("",i)):typeof FormData<"u"&&i instanceof FormData?(a=i,a.has("cacheControl")||a.append("cacheControl",u.cacheControl),d&&!a.has("metadata")&&a.append("metadata",this.encodeMetadata(d))):(a=i,h["cache-control"]=`max-age=${u.cacheControl}`,h["content-type"]=u.contentType,d&&(h["x-metadata"]=this.toBase64(this.encodeMetadata(d))),(typeof ReadableStream<"u"&&a instanceof ReadableStream||a&&typeof a=="object"&&"pipe"in a&&typeof a.pipe=="function")&&!u.duplex&&(u.duplex="half")),o!=null&&o.headers&&(h=Object.assign(Object.assign({},h),o.headers));const p=this._removeEmptyFolders(r),g=this._getFinalPath(p),v=yield(t=="PUT"?hf:Qr)(this.fetch,`${this.url}/object/${g}`,a,Object.assign({headers:h},u!=null&&u.duplex?{duplex:u.duplex}:{}));return{data:{path:p,id:v.Id,fullPath:v.Key},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(qe(a))return{data:null,error:a};throw a}})}upload(t,r,i){return ee(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,r,i)})}uploadToSignedUrl(t,r,i,o){return ee(this,void 0,void 0,function*(){const a=this._removeEmptyFolders(t),u=this._getFinalPath(a),h=new URL(this.url+`/object/upload/sign/${u}`);h.searchParams.set("token",r);try{let d;const p=Object.assign({upsert:m1.upsert},o),g=Object.assign(Object.assign({},this.headers),{"x-upsert":String(p.upsert)});typeof Blob<"u"&&i instanceof Blob?(d=new FormData,d.append("cacheControl",p.cacheControl),d.append("",i)):typeof FormData<"u"&&i instanceof FormData?(d=i,d.append("cacheControl",p.cacheControl)):(d=i,g["cache-control"]=`max-age=${p.cacheControl}`,g["content-type"]=p.contentType);const v=yield hf(this.fetch,h.toString(),d,{headers:g});return{data:{path:a,fullPath:v.Key},error:null}}catch(d){if(this.shouldThrowOnError)throw d;if(qe(d))return{data:null,error:d};throw d}})}createSignedUploadUrl(t,r){return ee(this,void 0,void 0,function*(){try{let i=this._getFinalPath(t);const o=Object.assign({},this.headers);r!=null&&r.upsert&&(o["x-upsert"]="true");const a=yield Qr(this.fetch,`${this.url}/object/upload/sign/${i}`,{},{headers:o}),u=new URL(this.url+a.url),h=u.searchParams.get("token");if(!h)throw new Fa("No token returned by API");return{data:{signedUrl:u.toString(),path:t,token:h},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(qe(i))return{data:null,error:i};throw i}})}update(t,r,i){return ee(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,r,i)})}move(t,r,i){return ee(this,void 0,void 0,function*(){try{return{data:yield Qr(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:i==null?void 0:i.destinationBucket},{headers:this.headers}),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(qe(o))return{data:null,error:o};throw o}})}copy(t,r,i){return ee(this,void 0,void 0,function*(){try{return{data:{path:(yield Qr(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:i==null?void 0:i.destinationBucket},{headers:this.headers})).Key},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(qe(o))return{data:null,error:o};throw o}})}createSignedUrl(t,r,i){return ee(this,void 0,void 0,function*(){try{let o=this._getFinalPath(t),a=yield Qr(this.fetch,`${this.url}/object/sign/${o}`,Object.assign({expiresIn:r},i!=null&&i.transform?{transform:i.transform}:{}),{headers:this.headers});const u=i!=null&&i.download?`&download=${i.download===!0?"":i.download}`:"";return a={signedUrl:encodeURI(`${this.url}${a.signedURL}${u}`)},{data:a,error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(qe(o))return{data:null,error:o};throw o}})}createSignedUrls(t,r,i){return ee(this,void 0,void 0,function*(){try{const o=yield Qr(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:t},{headers:this.headers}),a=i!=null&&i.download?`&download=${i.download===!0?"":i.download}`:"";return{data:o.map(u=>Object.assign(Object.assign({},u),{signedUrl:u.signedURL?encodeURI(`${this.url}${u.signedURL}${a}`):null})),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(qe(o))return{data:null,error:o};throw o}})}download(t,r){const o=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",a=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),u=a?`?${a}`:"",h=this._getFinalPath(t),d=()=>Ra(this.fetch,`${this.url}/${o}/${h}${u}`,{headers:this.headers,noResolveJson:!0});return new ZS(d,this.shouldThrowOnError)}info(t){return ee(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{const i=yield Ra(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:cf(i),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(qe(i))return{data:null,error:i};throw i}})}exists(t){return ee(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{return yield YS(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(qe(i)&&i instanceof Du){const o=i.originalError;if([400,404].includes(o==null?void 0:o.status))return{data:!1,error:i}}throw i}})}getPublicUrl(t,r){const i=this._getFinalPath(t),o=[],a=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";a!==""&&o.push(a);const h=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",d=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});d!==""&&o.push(d);let p=o.join("&");return p!==""&&(p=`?${p}`),{data:{publicUrl:encodeURI(`${this.url}/${h}/public/${i}${p}`)}}}remove(t){return ee(this,void 0,void 0,function*(){try{return{data:yield Gf(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(qe(r))return{data:null,error:r};throw r}})}list(t,r,i){return ee(this,void 0,void 0,function*(){try{const o=Object.assign(Object.assign(Object.assign({},ek),r),{prefix:t||""});return{data:yield Qr(this.fetch,`${this.url}/object/list/${this.bucketId}`,o,{headers:this.headers},i),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(qe(o))return{data:null,error:o};throw o}})}listV2(t,r){return ee(this,void 0,void 0,function*(){try{const i=Object.assign({},t);return{data:yield Qr(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,i,{headers:this.headers},r),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(qe(i))return{data:null,error:i};throw i}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const r=[];return t.width&&r.push(`width=${t.width}`),t.height&&r.push(`height=${t.height}`),t.resize&&r.push(`resize=${t.resize}`),t.format&&r.push(`format=${t.format}`),t.quality&&r.push(`quality=${t.quality}`),r.join("&")}}const c2="2.87.1",h2={"X-Client-Info":`storage-js/${c2}`};class rk{constructor(t,r={},i,o){this.shouldThrowOnError=!1;const a=new URL(t);o!=null&&o.useNewHostname&&/supabase\.(co|in|red)$/.test(a.hostname)&&!a.hostname.includes("storage.supabase.")&&(a.hostname=a.hostname.replace("supabase.","storage.supabase.")),this.url=a.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},h2),r),this.fetch=Hf(i)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(t){return ee(this,void 0,void 0,function*(){try{const r=this.listBucketOptionsToQueryString(t);return{data:yield Ra(this.fetch,`${this.url}/bucket${r}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(qe(r))return{data:null,error:r};throw r}})}getBucket(t){return ee(this,void 0,void 0,function*(){try{return{data:yield Ra(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(qe(r))return{data:null,error:r};throw r}})}createBucket(t){return ee(this,arguments,void 0,function*(r,i={public:!1}){try{return{data:yield Qr(this.fetch,`${this.url}/bucket`,{id:r,name:r,type:i.type,public:i.public,file_size_limit:i.fileSizeLimit,allowed_mime_types:i.allowedMimeTypes},{headers:this.headers}),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(qe(o))return{data:null,error:o};throw o}})}updateBucket(t,r){return ee(this,void 0,void 0,function*(){try{return{data:yield hf(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(qe(i))return{data:null,error:i};throw i}})}emptyBucket(t){return ee(this,void 0,void 0,function*(){try{return{data:yield Qr(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(qe(r))return{data:null,error:r};throw r}})}deleteBucket(t){return ee(this,void 0,void 0,function*(){try{return{data:yield Gf(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(qe(r))return{data:null,error:r};throw r}})}listBucketOptionsToQueryString(t){const r={};return t&&("limit"in t&&(r.limit=String(t.limit)),"offset"in t&&(r.offset=String(t.offset)),t.search&&(r.search=t.search),t.sortColumn&&(r.sortColumn=t.sortColumn),t.sortOrder&&(r.sortOrder=t.sortOrder)),Object.keys(r).length>0?"?"+new URLSearchParams(r).toString():""}}var Aa=class extends Error{constructor(e,t){var r;super(e),this.name="IcebergError",this.status=t.status,this.icebergType=t.icebergType,this.icebergCode=t.icebergCode,this.details=t.details,this.isCommitStateUnknown=t.icebergType==="CommitStateUnknownException"||[500,502,504].includes(t.status)&&((r=t.icebergType)==null?void 0:r.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function nk(e,t,r){const i=new URL(t,e);if(r)for(const[o,a]of Object.entries(r))a!==void 0&&i.searchParams.set(o,a);return i.toString()}async function sk(e){return!e||e.type==="none"?{}:e.type==="bearer"?{Authorization:`Bearer ${e.token}`}:e.type==="header"?{[e.name]:e.value}:e.type==="custom"?await e.getHeaders():{}}function ik(e){const t=e.fetchImpl??globalThis.fetch;return{async request({method:r,path:i,query:o,body:a,headers:u}){const h=nk(e.baseUrl,i,o),d=await sk(e.auth),p=await t(h,{method:r,headers:{...a?{"Content-Type":"application/json"}:{},...d,...u},body:a?JSON.stringify(a):void 0}),g=await p.text(),v=(p.headers.get("content-type")||"").includes("application/json"),_=v&&g?JSON.parse(g):g;if(!p.ok){const E=v?_:void 0,S=E==null?void 0:E.error;throw new Aa((S==null?void 0:S.message)??`Request failed with status ${p.status}`,{status:p.status,icebergType:S==null?void 0:S.type,icebergCode:S==null?void 0:S.code,details:E})}return{status:p.status,headers:p.headers,data:_}}}}function du(e){return e.join("")}var ok=class{constructor(e,t=""){this.client=e,this.prefix=t}async listNamespaces(e){const t=e?{parent:du(e.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:t})).data.namespaces.map(i=>({namespace:i}))}async createNamespace(e,t){const r={namespace:e.namespace,properties:t==null?void 0:t.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:r})).data}async dropNamespace(e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${du(e.namespace)}`})}async loadNamespaceMetadata(e){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${du(e.namespace)}`})).data.properties}}async namespaceExists(e){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${du(e.namespace)}`}),!0}catch(t){if(t instanceof Aa&&t.status===404)return!1;throw t}}async createNamespaceIfNotExists(e,t){try{return await this.createNamespace(e,t)}catch(r){if(r instanceof Aa&&r.status===409)return;throw r}}};function Ni(e){return e.join("")}var ak=class{constructor(e,t="",r){this.client=e,this.prefix=t,this.accessDelegation=r}async listTables(e){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Ni(e.namespace)}/tables`})).data.identifiers}async createTable(e,t){const r={};return this.accessDelegation&&(r["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Ni(e.namespace)}/tables`,body:t,headers:r})).data.metadata}async updateTable(e,t){const r=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Ni(e.namespace)}/tables/${e.name}`,body:t});return{"metadata-location":r.data["metadata-location"],metadata:r.data.metadata}}async dropTable(e,t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Ni(e.namespace)}/tables/${e.name}`,query:{purgeRequested:String((t==null?void 0:t.purge)??!1)}})}async loadTable(e){const t={};return this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Ni(e.namespace)}/tables/${e.name}`,headers:t})).data.metadata}async tableExists(e){const t={};this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Ni(e.namespace)}/tables/${e.name}`,headers:t}),!0}catch(r){if(r instanceof Aa&&r.status===404)return!1;throw r}}async createTableIfNotExists(e,t){try{return await this.createTable(e,t)}catch(r){if(r instanceof Aa&&r.status===409)return await this.loadTable({namespace:e.namespace,name:t.name});throw r}}},lk=class{constructor(e){var i;let t="v1";e.catalogName&&(t+=`/${e.catalogName}`);const r=e.baseUrl.endsWith("/")?e.baseUrl:`${e.baseUrl}/`;this.client=ik({baseUrl:r,auth:e.auth,fetchImpl:e.fetch}),this.accessDelegation=(i=e.accessDelegation)==null?void 0:i.join(","),this.namespaceOps=new ok(this.client,t),this.tableOps=new ak(this.client,t,this.accessDelegation)}async listNamespaces(e){return this.namespaceOps.listNamespaces(e)}async createNamespace(e,t){return this.namespaceOps.createNamespace(e,t)}async dropNamespace(e){await this.namespaceOps.dropNamespace(e)}async loadNamespaceMetadata(e){return this.namespaceOps.loadNamespaceMetadata(e)}async listTables(e){return this.tableOps.listTables(e)}async createTable(e,t){return this.tableOps.createTable(e,t)}async updateTable(e,t){return this.tableOps.updateTable(e,t)}async dropTable(e,t){await this.tableOps.dropTable(e,t)}async loadTable(e){return this.tableOps.loadTable(e)}async namespaceExists(e){return this.namespaceOps.namespaceExists(e)}async tableExists(e){return this.tableOps.tableExists(e)}async createNamespaceIfNotExists(e,t){return this.namespaceOps.createNamespaceIfNotExists(e,t)}async createTableIfNotExists(e,t){return this.tableOps.createTableIfNotExists(e,t)}};class d2{constructor(t,r={},i){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},h2),r),this.fetch=Hf(i)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(t){return ee(this,void 0,void 0,function*(){try{return{data:yield Qr(this.fetch,`${this.url}/bucket`,{name:t},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(qe(r))return{data:null,error:r};throw r}})}listBuckets(t){return ee(this,void 0,void 0,function*(){try{const r=new URLSearchParams;(t==null?void 0:t.limit)!==void 0&&r.set("limit",t.limit.toString()),(t==null?void 0:t.offset)!==void 0&&r.set("offset",t.offset.toString()),t!=null&&t.sortColumn&&r.set("sortColumn",t.sortColumn),t!=null&&t.sortOrder&&r.set("sortOrder",t.sortOrder),t!=null&&t.search&&r.set("search",t.search);const i=r.toString(),o=i?`${this.url}/bucket?${i}`:`${this.url}/bucket`;return{data:yield Ra(this.fetch,o,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(qe(r))return{data:null,error:r};throw r}})}deleteBucket(t){return ee(this,void 0,void 0,function*(){try{return{data:yield Gf(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(qe(r))return{data:null,error:r};throw r}})}from(t){if(!qS(t))throw new Fa("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const r=new lk({baseUrl:this.url,catalogName:t,auth:{type:"custom",getHeaders:()=>ee(this,void 0,void 0,function*(){return this.headers})},fetch:this.fetch}),i=this.shouldThrowOnError;return new Proxy(r,{get(a,u){const h=a[u];return typeof h!="function"?h:(...d)=>ee(this,void 0,void 0,function*(){try{return{data:yield h.apply(a,d),error:null}}catch(p){if(i)throw p;return{data:null,error:p}}})}})}}const qf={"X-Client-Info":`storage-js/${c2}`,"Content-Type":"application/json"};class Jf extends Error{constructor(t){super(t),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function lr(e){return typeof e=="object"&&e!==null&&"__isStorageVectorsError"in e}class ku extends Jf{constructor(t,r,i){super(t),this.name="StorageVectorsApiError",this.status=r,this.statusCode=i}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class f2 extends Jf{constructor(t,r){super(t),this.name="StorageVectorsUnknownError",this.originalError=r}}var df;(function(e){e.InternalError="InternalError",e.S3VectorConflictException="S3VectorConflictException",e.S3VectorNotFoundException="S3VectorNotFoundException",e.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",e.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",e.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(df||(df={}));const nc=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),uk=()=>Response,p2=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},ck=e=>Array.from(new Float32Array(e)),hk=(e,t)=>{if(t!==void 0&&e.float32.length!==t)throw new Error(`Vector dimension mismatch: expected ${t}, got ${e.float32.length}`)},g1=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),dk=(e,t,r)=>ee(void 0,void 0,void 0,function*(){if(e&&typeof e=="object"&&"status"in e&&"ok"in e&&typeof e.status=="number"&&!(r!=null&&r.noResolveJson)){const o=e.status||500,a=e;if(typeof a.json=="function")a.json().then(u=>{const h=(u==null?void 0:u.statusCode)||(u==null?void 0:u.code)||o+"";t(new ku(g1(u),o,h))}).catch(()=>{const u=o+"",h=a.statusText||`HTTP ${o} error`;t(new ku(h,o,u))});else{const u=o+"",h=a.statusText||`HTTP ${o} error`;t(new ku(h,o,u))}}else t(new f2(g1(e),e))}),fk=(e,t,r,i)=>{const o={method:e,headers:(t==null?void 0:t.headers)||{}};return i?(p2(i)?(o.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),o.body=JSON.stringify(i)):o.body=i,Object.assign(Object.assign({},o),r)):o};function pk(e,t,r,i,o,a){return ee(this,void 0,void 0,function*(){return new Promise((u,h)=>{e(r,fk(t,i,o,a)).then(d=>{if(!d.ok)throw d;if(i!=null&&i.noResolveJson)return d;const p=d.headers.get("content-type");return!p||!p.includes("application/json")?{}:d.json()}).then(d=>u(d)).catch(d=>dk(d,h,i))})})}function _r(e,t,r,i,o){return ee(this,void 0,void 0,function*(){return pk(e,"POST",t,i,o,r)})}class m2{constructor(t,r={},i){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},qf),r),this.fetch=nc(i)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(t){return ee(this,void 0,void 0,function*(){try{return{data:(yield _r(this.fetch,`${this.url}/CreateIndex`,t,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(lr(r))return{data:null,error:r};throw r}})}getIndex(t,r){return ee(this,void 0,void 0,function*(){try{return{data:yield _r(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:t,indexName:r},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(lr(i))return{data:null,error:i};throw i}})}listIndexes(t){return ee(this,void 0,void 0,function*(){try{return{data:yield _r(this.fetch,`${this.url}/ListIndexes`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(lr(r))return{data:null,error:r};throw r}})}deleteIndex(t,r){return ee(this,void 0,void 0,function*(){try{return{data:(yield _r(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:t,indexName:r},{headers:this.headers}))||{},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(lr(i))return{data:null,error:i};throw i}})}}class g2{constructor(t,r={},i){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},qf),r),this.fetch=nc(i)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(t){return ee(this,void 0,void 0,function*(){try{if(t.vectors.length<1||t.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield _r(this.fetch,`${this.url}/PutVectors`,t,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(lr(r))return{data:null,error:r};throw r}})}getVectors(t){return ee(this,void 0,void 0,function*(){try{return{data:yield _r(this.fetch,`${this.url}/GetVectors`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(lr(r))return{data:null,error:r};throw r}})}listVectors(t){return ee(this,void 0,void 0,function*(){try{if(t.segmentCount!==void 0){if(t.segmentCount<1||t.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(t.segmentIndex!==void 0&&(t.segmentIndex<0||t.segmentIndex>=t.segmentCount))throw new Error(`segmentIndex must be between 0 and ${t.segmentCount-1}`)}return{data:yield _r(this.fetch,`${this.url}/ListVectors`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(lr(r))return{data:null,error:r};throw r}})}queryVectors(t){return ee(this,void 0,void 0,function*(){try{return{data:yield _r(this.fetch,`${this.url}/QueryVectors`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(lr(r))return{data:null,error:r};throw r}})}deleteVectors(t){return ee(this,void 0,void 0,function*(){try{if(t.keys.length<1||t.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield _r(this.fetch,`${this.url}/DeleteVectors`,t,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(lr(r))return{data:null,error:r};throw r}})}}class y2{constructor(t,r={},i){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},qf),r),this.fetch=nc(i)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(t){return ee(this,void 0,void 0,function*(){try{return{data:(yield _r(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:t},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(lr(r))return{data:null,error:r};throw r}})}getBucket(t){return ee(this,void 0,void 0,function*(){try{return{data:yield _r(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:t},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(lr(r))return{data:null,error:r};throw r}})}listBuckets(){return ee(this,arguments,void 0,function*(t={}){try{return{data:yield _r(this.fetch,`${this.url}/ListVectorBuckets`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(lr(r))return{data:null,error:r};throw r}})}deleteBucket(t){return ee(this,void 0,void 0,function*(){try{return{data:(yield _r(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:t},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(lr(r))return{data:null,error:r};throw r}})}}class v2 extends y2{constructor(t,r={}){super(t,r.headers||{},r.fetch)}from(t){return new w2(this.url,this.headers,t,this.fetch)}createBucket(t){const r=Object.create(null,{createBucket:{get:()=>super.createBucket}});return ee(this,void 0,void 0,function*(){return r.createBucket.call(this,t)})}getBucket(t){const r=Object.create(null,{getBucket:{get:()=>super.getBucket}});return ee(this,void 0,void 0,function*(){return r.getBucket.call(this,t)})}listBuckets(){const t=Object.create(null,{listBuckets:{get:()=>super.listBuckets}});return ee(this,arguments,void 0,function*(r={}){return t.listBuckets.call(this,r)})}deleteBucket(t){const r=Object.create(null,{deleteBucket:{get:()=>super.deleteBucket}});return ee(this,void 0,void 0,function*(){return r.deleteBucket.call(this,t)})}}class w2 extends m2{constructor(t,r,i,o){super(t,r,o),this.vectorBucketName=i}createIndex(t){const r=Object.create(null,{createIndex:{get:()=>super.createIndex}});return ee(this,void 0,void 0,function*(){return r.createIndex.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const t=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return ee(this,arguments,void 0,function*(r={}){return t.listIndexes.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName}))})}getIndex(t){const r=Object.create(null,{getIndex:{get:()=>super.getIndex}});return ee(this,void 0,void 0,function*(){return r.getIndex.call(this,this.vectorBucketName,t)})}deleteIndex(t){const r=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return ee(this,void 0,void 0,function*(){return r.deleteIndex.call(this,this.vectorBucketName,t)})}index(t){return new _2(this.url,this.headers,this.vectorBucketName,t,this.fetch)}}class _2 extends g2{constructor(t,r,i,o,a){super(t,r,a),this.vectorBucketName=i,this.indexName=o}putVectors(t){const r=Object.create(null,{putVectors:{get:()=>super.putVectors}});return ee(this,void 0,void 0,function*(){return r.putVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(t){const r=Object.create(null,{getVectors:{get:()=>super.getVectors}});return ee(this,void 0,void 0,function*(){return r.getVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const t=Object.create(null,{listVectors:{get:()=>super.listVectors}});return ee(this,arguments,void 0,function*(r={}){return t.listVectors.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(t){const r=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return ee(this,void 0,void 0,function*(){return r.queryVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(t){const r=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return ee(this,void 0,void 0,function*(){return r.deleteVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class mk extends rk{constructor(t,r={},i,o){super(t,r,i,o)}from(t){return new tk(this.url,this.headers,t,this.fetch)}get vectors(){return new v2(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new d2(this.url+"/iceberg",this.headers,this.fetch)}}const gk=Object.freeze(Object.defineProperty({__proto__:null,StorageAnalyticsClient:d2,StorageApiError:l2,StorageClient:mk,StorageError:Fa,StorageUnknownError:Du,StorageVectorsApiError:ku,StorageVectorsClient:v2,StorageVectorsError:Jf,get StorageVectorsErrorCode(){return df},StorageVectorsUnknownError:f2,VectorBucketApi:y2,VectorBucketScope:w2,VectorDataApi:g2,VectorIndexApi:m2,VectorIndexScope:_2,isPlainObject:p2,isStorageError:qe,isStorageVectorsError:lr,normalizeToFloat32:ck,resolveFetch:nc,resolveResponse:uk,validateVectorDimension:hk},Symbol.toStringTag,{value:"Module"})),yk=La(gk);var jd={},ha={},y1;function vk(){return y1||(y1=1,Object.defineProperty(ha,"__esModule",{value:!0}),ha.version=void 0,ha.version="2.87.1"),ha}var v1;function wk(){return v1||(v1=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.DEFAULT_REALTIME_OPTIONS=e.DEFAULT_AUTH_OPTIONS=e.DEFAULT_DB_OPTIONS=e.DEFAULT_GLOBAL_OPTIONS=e.DEFAULT_HEADERS=void 0;const t=vk();let r="";typeof Deno<"u"?r="deno":typeof document<"u"?r="web":typeof navigator<"u"&&navigator.product==="ReactNative"?r="react-native":r="node",e.DEFAULT_HEADERS={"X-Client-Info":`supabase-js-${r}/${t.version}`},e.DEFAULT_GLOBAL_OPTIONS={headers:e.DEFAULT_HEADERS},e.DEFAULT_DB_OPTIONS={schema:"public"},e.DEFAULT_AUTH_OPTIONS={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},e.DEFAULT_REALTIME_OPTIONS={}})(jd)),jd}var Od={},w1;function _k(){return w1||(w1=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.fetchWithAuth=e.resolveHeadersConstructor=e.resolveFetch=void 0;const t=o=>o?(...a)=>o(...a):(...a)=>fetch(...a);e.resolveFetch=t;const r=()=>Headers;e.resolveHeadersConstructor=r;const i=(o,a,u)=>{const h=(0,e.resolveFetch)(u),d=(0,e.resolveHeadersConstructor)();return async(p,g)=>{var v;const _=(v=await a())!==null&&v!==void 0?v:o;let E=new d(g==null?void 0:g.headers);return E.has("apikey")||E.set("apikey",o),E.has("Authorization")||E.set("Authorization",`Bearer ${_}`),h(p,Object.assign(Object.assign({},g),{headers:E}))}};e.fetchWithAuth=i})(Od)),Od}var Nn={},_1;function Ek(){if(_1)return Nn;_1=1,Object.defineProperty(Nn,"__esModule",{value:!0}),Nn.isBrowser=void 0,Nn.uuid=e,Nn.ensureTrailingSlash=t,Nn.applySettingDefaults=i,Nn.validateSupabaseUrl=o;function e(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var u=Math.random()*16|0,h=a=="x"?u:u&3|8;return h.toString(16)})}function t(a){return a.endsWith("/")?a:a+"/"}const r=()=>typeof window<"u";Nn.isBrowser=r;function i(a,u){var h,d;const{db:p,auth:g,realtime:v,global:_}=a,{db:E,auth:S,realtime:k,global:x}=u,P={db:Object.assign(Object.assign({},E),p),auth:Object.assign(Object.assign({},S),g),realtime:Object.assign(Object.assign({},k),v),storage:{},global:Object.assign(Object.assign(Object.assign({},x),_),{headers:Object.assign(Object.assign({},(h=x==null?void 0:x.headers)!==null&&h!==void 0?h:{}),(d=_==null?void 0:_.headers)!==null&&d!==void 0?d:{})}),accessToken:async()=>""};return a.accessToken?P.accessToken=a.accessToken:delete P.accessToken,P}function o(a){const u=a==null?void 0:a.trim();if(!u)throw new Error("supabaseUrl is required.");if(!u.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(t(u))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}return Nn}var da={};const E2="2.87.1",Mi=30*1e3,ff=3,Nd=ff*Mi,Sk="http://localhost:9999",kk="supabase.auth.token",bk={"X-Client-Info":`gotrue-js/${E2}`},pf="X-Supabase-Api-Version",S2={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},xk=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Tk=600*1e3;let Xi=class extends Error{constructor(t,r,i){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=i}};function ie(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}let k2=class extends Xi{constructor(t,r,i){super(t,r,i),this.name="AuthApiError",this.status=r,this.code=i}};function b2(e){return ie(e)&&e.name==="AuthApiError"}let vs=class extends Xi{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}},Gn=class extends Xi{constructor(t,r,i,o){super(t,i,o),this.name=r,this.status=i}},ar=class extends Gn{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}};function x2(e){return ie(e)&&e.name==="AuthSessionMissingError"}let qs=class extends Gn{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}},wa=class extends Gn{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}},_a=class extends Gn{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}};function T2(e){return ie(e)&&e.name==="AuthImplicitGrantRedirectError"}let mf=class extends Gn{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}},Uu=class extends Gn{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}};function bu(e){return ie(e)&&e.name==="AuthRetryableFetchError"}let gf=class extends Gn{constructor(t,r,i){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=i}};function Rk(e){return ie(e)&&e.name==="AuthWeakPasswordError"}let Fu=class extends Gn{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}};const Mu="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),E1=` 	
\r=`.split(""),Ak=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<E1.length;t+=1)e[E1[t].charCodeAt(0)]=-2;for(let t=0;t<Mu.length;t+=1)e[Mu[t].charCodeAt(0)]=t;return e})();function S1(e,t,r){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const i=t.queue>>t.queuedBits-6&63;r(Mu[i]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const i=t.queue>>t.queuedBits-6&63;r(Mu[i]),t.queuedBits-=6}}function R2(e,t,r){const i=Ak[e];if(i>-1)for(t.queue=t.queue<<6|i,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(i===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function k1(e){const t=[],r=u=>{t.push(String.fromCodePoint(u))},i={utf8seq:0,codepoint:0},o={queue:0,queuedBits:0},a=u=>{jk(u,i,r)};for(let u=0;u<e.length;u+=1)R2(e.charCodeAt(u),o,a);return t.join("")}function Ck(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function Pk(e,t){for(let r=0;r<e.length;r+=1){let i=e.charCodeAt(r);if(i>55295&&i<=56319){const o=(i-55296)*1024&65535;i=(e.charCodeAt(r+1)-56320&65535|o)+65536,r+=1}Ck(i,t)}}function jk(e,t,r){if(t.utf8seq===0){if(e<=127){r(e);return}for(let i=1;i<6;i+=1)if((e>>7-i&1)===0){t.utf8seq=i;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function Vi(e){const t=[],r={queue:0,queuedBits:0},i=o=>{t.push(o)};for(let o=0;o<e.length;o+=1)R2(e.charCodeAt(o),r,i);return new Uint8Array(t)}function Ok(e){const t=[];return Pk(e,r=>t.push(r)),new Uint8Array(t)}function Zs(e){const t=[],r={queue:0,queuedBits:0},i=o=>{t.push(o)};return e.forEach(o=>S1(o,r,i)),S1(null,r,i),t.join("")}function Nk(e){return Math.round(Date.now()/1e3)+e}function Ik(){return Symbol("auth-callback")}const Nt=()=>typeof window<"u"&&typeof document<"u",Ws={tested:!1,writable:!1},A2=()=>{if(!Nt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Ws.tested)return Ws.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Ws.tested=!0,Ws.writable=!0}catch{Ws.tested=!0,Ws.writable=!1}return Ws.writable};function Lk(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((o,a)=>{t[a]=o})}catch{}return r.searchParams.forEach((i,o)=>{t[o]=i}),t}const C2=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),Dk=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",$i=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},Ks=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},Ot=async(e,t)=>{await e.removeItem(t)};class sc{constructor(){this.promise=new sc.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}sc.promiseConstructor=Promise;function Id(e){const t=e.split(".");if(t.length!==3)throw new Fu("Invalid JWT structure");for(let i=0;i<t.length;i++)if(!xk.test(t[i]))throw new Fu("JWT not in base64url format");return{header:JSON.parse(k1(t[0])),payload:JSON.parse(k1(t[1])),signature:Vi(t[2]),raw:{header:t[0],payload:t[1]}}}async function Uk(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function Fk(e,t){return new Promise((i,o)=>{(async()=>{for(let a=0;a<1/0;a++)try{const u=await e(a);if(!t(a,null,u)){i(u);return}}catch(u){if(!t(a,u)){o(u);return}}})()})}function Mk(e){return("0"+e.toString(16)).substr(-2)}function $k(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",i=r.length;let o="";for(let a=0;a<56;a++)o+=r.charAt(Math.floor(Math.random()*i));return o}return crypto.getRandomValues(t),Array.from(t,Mk).join("")}async function Bk(e){const r=new TextEncoder().encode(e),i=await crypto.subtle.digest("SHA-256",r),o=new Uint8Array(i);return Array.from(o).map(a=>String.fromCharCode(a)).join("")}async function zk(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await Bk(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Ii(e,t,r=!1){const i=$k();let o=i;r&&(o+="/PASSWORD_RECOVERY"),await $i(e,`${t}-code-verifier`,o);const a=await zk(i);return[a,i===a?"plain":"s256"]}const Vk=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Wk(e){const t=e.headers.get(pf);if(!t||!t.match(Vk))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function Kk(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function Hk(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Gk=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Li(e){if(!Gk.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Ld(){const e={};return new Proxy(e,{get:(t,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const i=r.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function qk(e,t){return new Proxy(e,{get:(r,i,o)=>{if(i==="__isInsecureUserWarningProxy")return!0;if(typeof i=="symbol"){const a=i.toString();if(a==="Symbol(Symbol.toPrimitive)"||a==="Symbol(Symbol.toStringTag)"||a==="Symbol(util.inspect.custom)"||a==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(r,i,o)}return!t.value&&typeof i=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t.value=!0),Reflect.get(r,i,o)}})}function b1(e){return JSON.parse(JSON.stringify(e))}const Js=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),Jk=[502,503,504];async function x1(e){var t;if(!Dk(e))throw new Uu(Js(e),0);if(Jk.includes(e.status))throw new Uu(Js(e),e.status);let r;try{r=await e.json()}catch(a){throw new vs(Js(a),a)}let i;const o=Wk(e);if(o&&o.getTime()>=S2["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?i=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(i=r.error_code),i){if(i==="weak_password")throw new gf(Js(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(i==="session_not_found")throw new ar}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((a,u)=>a&&typeof u=="string",!0))throw new gf(Js(r),e.status,r.weak_password.reasons);throw new k2(Js(r),e.status||500,i)}const Xk=(e,t,r,i)=>{const o={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?o:(o.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),o.body=JSON.stringify(i),Object.assign(Object.assign({},o),r))};async function me(e,t,r,i){var o;const a=Object.assign({},i==null?void 0:i.headers);a[pf]||(a[pf]=S2["2024-01-01"].name),i!=null&&i.jwt&&(a.Authorization=`Bearer ${i.jwt}`);const u=(o=i==null?void 0:i.query)!==null&&o!==void 0?o:{};i!=null&&i.redirectTo&&(u.redirect_to=i.redirectTo);const h=Object.keys(u).length?"?"+new URLSearchParams(u).toString():"",d=await Yk(e,t,r+h,{headers:a,noResolveJson:i==null?void 0:i.noResolveJson},{},i==null?void 0:i.body);return i!=null&&i.xform?i==null?void 0:i.xform(d):{data:Object.assign({},d),error:null}}async function Yk(e,t,r,i,o,a){const u=Xk(t,i,o,a);let h;try{h=await e(r,Object.assign({},u))}catch(d){throw console.error(d),new Uu(Js(d),0)}if(h.ok||await x1(h),i!=null&&i.noResolveJson)return h;try{return await h.json()}catch(d){await x1(d)}}function Yr(e){var t;let r=null;eb(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=Nk(e.expires_in)));const i=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:i},error:null}}function T1(e){const t=Yr(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,i)=>r&&typeof i=="string",!0)&&(t.data.weak_password=e.weak_password),t}function ws(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function Qk(e){return{data:e,error:null}}function Zk(e){const{action_link:t,email_otp:r,hashed_token:i,redirect_to:o,verification_type:a}=e,u=co(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),h={action_link:t,email_otp:r,hashed_token:i,redirect_to:o,verification_type:a},d=Object.assign({},u);return{data:{properties:h,user:d},error:null}}function R1(e){return e}function eb(e){return e.access_token&&e.refresh_token&&e.expires_in}const xu=["global","local","others"];let Xf=class{constructor({url:t="",headers:r={},fetch:i}){this.url=t,this.headers=r,this.fetch=C2(i),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,r=xu[0]){if(xu.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${xu.join(", ")}`);try{return await me(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(i){if(ie(i))return{data:null,error:i};throw i}}async inviteUserByEmail(t,r={}){try{return await me(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:ws})}catch(i){if(ie(i))return{data:{user:null},error:i};throw i}}async generateLink(t){try{const{options:r}=t,i=co(t,["options"]),o=Object.assign(Object.assign({},i),r);return"newEmail"in i&&(o.new_email=i==null?void 0:i.newEmail,delete o.newEmail),await me(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:o,headers:this.headers,xform:Zk,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(ie(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await me(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:ws})}catch(r){if(ie(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,i,o,a,u,h,d;try{const p={nextPage:null,lastPage:0,total:0},g=await me(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(i=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&i!==void 0?i:"",per_page:(a=(o=t==null?void 0:t.perPage)===null||o===void 0?void 0:o.toString())!==null&&a!==void 0?a:""},xform:R1});if(g.error)throw g.error;const v=await g.json(),_=(u=g.headers.get("x-total-count"))!==null&&u!==void 0?u:0,E=(d=(h=g.headers.get("link"))===null||h===void 0?void 0:h.split(","))!==null&&d!==void 0?d:[];return E.length>0&&(E.forEach(S=>{const k=parseInt(S.split(";")[0].split("=")[1].substring(0,1)),x=JSON.parse(S.split(";")[1].split("=")[1]);p[`${x}Page`]=k}),p.total=parseInt(_)),{data:Object.assign(Object.assign({},v),p),error:null}}catch(p){if(ie(p))return{data:{users:[]},error:p};throw p}}async getUserById(t){Li(t);try{return await me(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:ws})}catch(r){if(ie(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){Li(t);try{return await me(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:ws})}catch(i){if(ie(i))return{data:{user:null},error:i};throw i}}async deleteUser(t,r=!1){Li(t);try{return await me(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:ws})}catch(i){if(ie(i))return{data:{user:null},error:i};throw i}}async _listFactors(t){Li(t.userId);try{const{data:r,error:i}=await me(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:o=>({data:{factors:o},error:null})});return{data:r,error:i}}catch(r){if(ie(r))return{data:null,error:r};throw r}}async _deleteFactor(t){Li(t.userId),Li(t.id);try{return{data:await me(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(ie(r))return{data:null,error:r};throw r}}async _listOAuthClients(t){var r,i,o,a,u,h,d;try{const p={nextPage:null,lastPage:0,total:0},g=await me(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(i=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&i!==void 0?i:"",per_page:(a=(o=t==null?void 0:t.perPage)===null||o===void 0?void 0:o.toString())!==null&&a!==void 0?a:""},xform:R1});if(g.error)throw g.error;const v=await g.json(),_=(u=g.headers.get("x-total-count"))!==null&&u!==void 0?u:0,E=(d=(h=g.headers.get("link"))===null||h===void 0?void 0:h.split(","))!==null&&d!==void 0?d:[];return E.length>0&&(E.forEach(S=>{const k=parseInt(S.split(";")[0].split("=")[1].substring(0,1)),x=JSON.parse(S.split(";")[1].split("=")[1]);p[`${x}Page`]=k}),p.total=parseInt(_)),{data:Object.assign(Object.assign({},v),p),error:null}}catch(p){if(ie(p))return{data:{clients:[]},error:p};throw p}}async _createOAuthClient(t){try{return await me(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(ie(r))return{data:null,error:r};throw r}}async _getOAuthClient(t){try{return await me(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(ie(r))return{data:null,error:r};throw r}}async _updateOAuthClient(t,r){try{return await me(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${t}`,{body:r,headers:this.headers,xform:i=>({data:i,error:null})})}catch(i){if(ie(i))return{data:null,error:i};throw i}}async _deleteOAuthClient(t){try{return await me(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(r){if(ie(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(t){try{return await me(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(ie(r))return{data:null,error:r};throw r}}};function A1(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}const Xs={debug:!!(globalThis&&A2()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Yf extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}let P2=class extends Yf{};class tb extends Yf{}async function j2(e,t,r){Xs.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const i=new globalThis.AbortController;return t>0&&setTimeout(()=>{i.abort(),Xs.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:i.signal},async o=>{if(o){Xs.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,o.name);try{return await r()}finally{Xs.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,o.name)}}else{if(t===0)throw Xs.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new P2(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Xs.debug)try{const a=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(a,null,"  "))}catch(a){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",a)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}const C1={};async function rb(e,t,r){var i;const o=(i=C1[e])!==null&&i!==void 0?i:Promise.resolve(),a=Promise.race([o.catch(()=>null),t>=0?new Promise((u,h)=>{setTimeout(()=>{h(new tb(`Acquring process lock with name "${e}" timed out`))},t)}):null].filter(u=>u)).catch(u=>{if(u&&u.isAcquireTimeout)throw u;return null}).then(async()=>await r());return C1[e]=a.catch(async u=>{if(u&&u.isAcquireTimeout)return await o,null;throw u}),await a}function nb(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function O2(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function sb(e){return parseInt(e,16)}function ib(e){const t=new TextEncoder().encode(e);return"0x"+Array.from(t,i=>i.toString(16).padStart(2,"0")).join("")}function ob(e){var t;const{chainId:r,domain:i,expirationTime:o,issuedAt:a=new Date,nonce:u,notBefore:h,requestId:d,resources:p,scheme:g,uri:v,version:_}=e;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!i)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(u&&u.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${u}`);if(!v)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(_!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${_}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const E=O2(e.address),S=g?`${g}://${i}`:i,k=e.statement?`${e.statement}
`:"",x=`${S} wants you to sign in with your Ethereum account:
${E}

${k}`;let P=`URI: ${v}
Version: ${_}
Chain ID: ${r}${u?`
Nonce: ${u}`:""}
Issued At: ${a.toISOString()}`;if(o&&(P+=`
Expiration Time: ${o.toISOString()}`),h&&(P+=`
Not Before: ${h.toISOString()}`),d&&(P+=`
Request ID: ${d}`),p){let L=`
Resources:`;for(const R of p){if(!R||typeof R!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${R}`);L+=`
- ${R}`}P+=L}return`${x}
${P}`}class pt extends Error{constructor({message:t,code:r,cause:i,name:o}){var a;super(t,{cause:i}),this.__isWebAuthnError=!0,this.name=(a=o??(i instanceof Error?i.name:void 0))!==null&&a!==void 0?a:"Unknown Error",this.code=r}}class $u extends pt{constructor(t,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:t}),this.name="WebAuthnUnknownError",this.originalError=r}}function ab({error:e,options:t}){var r,i,o;const{publicKey:a}=t;if(!a)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new pt({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((r=a.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new pt({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(t.mediation==="conditional"&&((i=a.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new pt({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((o=a.authenticatorSelection)===null||o===void 0?void 0:o.userVerification)==="required")return new pt({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new pt({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new pt({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return a.pubKeyCredParams.filter(h=>h.type==="public-key").length===0?new pt({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new pt({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const u=window.location.hostname;if(N2(u)){if(a.rp.id!==u)return new pt({message:`The RP ID "${a.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new pt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(a.user.id.byteLength<1||a.user.id.byteLength>64)return new pt({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new pt({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new pt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function lb({error:e,options:t}){const{publicKey:r}=t;if(!r)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new pt({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new pt({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const i=window.location.hostname;if(N2(i)){if(r.rpId!==i)return new pt({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new pt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new pt({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new pt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}class ub{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const cb=new ub;function hb(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:r,excludeCredentials:i}=e,o=co(e,["challenge","user","excludeCredentials"]),a=Vi(t).buffer,u=Object.assign(Object.assign({},r),{id:Vi(r.id).buffer}),h=Object.assign(Object.assign({},o),{challenge:a,user:u});if(i&&i.length>0){h.excludeCredentials=new Array(i.length);for(let d=0;d<i.length;d++){const p=i[d];h.excludeCredentials[d]=Object.assign(Object.assign({},p),{id:Vi(p.id).buffer,type:p.type||"public-key",transports:p.transports})}}return h}function db(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:r}=e,i=co(e,["challenge","allowCredentials"]),o=Vi(t).buffer,a=Object.assign(Object.assign({},i),{challenge:o});if(r&&r.length>0){a.allowCredentials=new Array(r.length);for(let u=0;u<r.length;u++){const h=r[u];a.allowCredentials[u]=Object.assign(Object.assign({},h),{id:Vi(h.id).buffer,type:h.type||"public-key",transports:h.transports})}}return a}function fb(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e;return{id:e.id,rawId:e.id,response:{attestationObject:Zs(new Uint8Array(e.response.attestationObject)),clientDataJSON:Zs(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function pb(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e,i=e.getClientExtensionResults(),o=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:Zs(new Uint8Array(o.authenticatorData)),clientDataJSON:Zs(new Uint8Array(o.clientDataJSON)),signature:Zs(new Uint8Array(o.signature)),userHandle:o.userHandle?Zs(new Uint8Array(o.userHandle)):void 0},type:"public-key",clientExtensionResults:i,authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function N2(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function P1(){var e,t;return!!(Nt()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.get)=="function")}async function mb(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new $u("Browser returned unexpected credential type",t)}:{data:null,error:new $u("Empty credential response",t)}}catch(t){return{data:null,error:ab({error:t,options:e})}}}async function gb(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new $u("Browser returned unexpected credential type",t)}:{data:null,error:new $u("Empty credential response",t)}}catch(t){return{data:null,error:lb({error:t,options:e})}}}const yb={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},vb={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function Bu(...e){const t=o=>o!==null&&typeof o=="object"&&!Array.isArray(o),r=o=>o instanceof ArrayBuffer||ArrayBuffer.isView(o),i={};for(const o of e)if(o)for(const a in o){const u=o[a];if(u!==void 0)if(Array.isArray(u))i[a]=u;else if(r(u))i[a]=u;else if(t(u)){const h=i[a];t(h)?i[a]=Bu(h,u):i[a]=Bu(u)}else i[a]=u}return i}function wb(e,t){return Bu(yb,e,t||{})}function _b(e,t){return Bu(vb,e,t||{})}class Eb{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:r,friendlyName:i,signal:o},a){try{const{data:u,error:h}=await this.client.mfa.challenge({factorId:t,webauthn:r});if(!u)return{data:null,error:h};const d=o??cb.createNewAbortSignal();if(u.webauthn.type==="create"){const{user:p}=u.webauthn.credential_options.publicKey;p.name||(p.name=`${p.id}:${i}`),p.displayName||(p.displayName=p.name)}switch(u.webauthn.type){case"create":{const p=wb(u.webauthn.credential_options.publicKey,a==null?void 0:a.create),{data:g,error:v}=await mb({publicKey:p,signal:d});return g?{data:{factorId:t,challengeId:u.id,webauthn:{type:u.webauthn.type,credential_response:g}},error:null}:{data:null,error:v}}case"request":{const p=_b(u.webauthn.credential_options.publicKey,a==null?void 0:a.request),{data:g,error:v}=await gb(Object.assign(Object.assign({},u.webauthn.credential_options),{publicKey:p,signal:d}));return g?{data:{factorId:t,challengeId:u.id,webauthn:{type:u.webauthn.type,credential_response:g}},error:null}:{data:null,error:v}}}}catch(u){return ie(u)?{data:null,error:u}:{data:null,error:new vs("Unexpected error in challenge",u)}}}async _verify({challengeId:t,factorId:r,webauthn:i}){return this.client.mfa.verify({factorId:r,challengeId:t,webauthn:i})}async _authenticate({factorId:t,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:i=typeof window<"u"?[window.location.origin]:void 0,signal:o}={}},a){if(!r)return{data:null,error:new Xi("rpId is required for WebAuthn authentication")};try{if(!P1())return{data:null,error:new vs("Browser does not support WebAuthn",null)};const{data:u,error:h}=await this.challenge({factorId:t,webauthn:{rpId:r,rpOrigins:i},signal:o},{request:a});if(!u)return{data:null,error:h};const{webauthn:d}=u;return this._verify({factorId:t,challengeId:u.challengeId,webauthn:{type:d.type,rpId:r,rpOrigins:i,credential_response:d.credential_response}})}catch(u){return ie(u)?{data:null,error:u}:{data:null,error:new vs("Unexpected error in authenticate",u)}}}async _register({friendlyName:t,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:i=typeof window<"u"?[window.location.origin]:void 0,signal:o}={}},a){if(!r)return{data:null,error:new Xi("rpId is required for WebAuthn registration")};try{if(!P1())return{data:null,error:new vs("Browser does not support WebAuthn",null)};const{data:u,error:h}=await this._enroll({friendlyName:t});if(!u)return await this.client.mfa.listFactors().then(g=>{var v;return(v=g.data)===null||v===void 0?void 0:v.all.find(_=>_.factor_type==="webauthn"&&_.friendly_name===t&&_.status!=="unverified")}).then(g=>g?this.client.mfa.unenroll({factorId:g==null?void 0:g.id}):void 0),{data:null,error:h};const{data:d,error:p}=await this._challenge({factorId:u.id,friendlyName:u.friendly_name,webauthn:{rpId:r,rpOrigins:i},signal:o},{create:a});return d?this._verify({factorId:u.id,challengeId:d.challengeId,webauthn:{rpId:r,rpOrigins:i,type:d.webauthn.type,credential_response:d.webauthn.credential_response}}):{data:null,error:p}}catch(u){return ie(u)?{data:null,error:u}:{data:null,error:new vs("Unexpected error in register",u)}}}}nb();const Sb={url:Sk,storageKey:kk,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:bk,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function j1(e,t,r){return await r()}const Di={};let Qf=class yf{get jwks(){var t,r;return(r=(t=Di[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(t){Di[this.storageKey]=Object.assign(Object.assign({},Di[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,r;return(r=(t=Di[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){Di[this.storageKey]=Object.assign(Object.assign({},Di[this.storageKey]),{cachedAt:t})}constructor(t){var r,i,o;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const a=Object.assign(Object.assign({},Sb),t);if(this.storageKey=a.storageKey,this.instanceID=(r=yf.nextInstanceID[this.storageKey])!==null&&r!==void 0?r:0,yf.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!a.debug,typeof a.debug=="function"&&(this.logger=a.debug),this.instanceID>0&&Nt()){const u=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(u),this.logDebugMessages&&console.trace(u)}if(this.persistSession=a.persistSession,this.autoRefreshToken=a.autoRefreshToken,this.admin=new Xf({url:a.url,headers:a.headers,fetch:a.fetch}),this.url=a.url,this.headers=a.headers,this.fetch=C2(a.fetch),this.lock=a.lock||j1,this.detectSessionInUrl=a.detectSessionInUrl,this.flowType=a.flowType,this.hasCustomAuthorizationHeader=a.hasCustomAuthorizationHeader,this.throwOnError=a.throwOnError,a.lock?this.lock=a.lock:this.persistSession&&Nt()&&(!((i=globalThis==null?void 0:globalThis.navigator)===null||i===void 0)&&i.locks)?this.lock=j2:this.lock=j1,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new Eb(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(a.storage?this.storage=a.storage:A2()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=A1(this.memoryStorage)),a.userStorage&&(this.userStorage=a.userStorage)):(this.memoryStorage={},this.storage=A1(this.memoryStorage)),Nt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(u){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",u)}(o=this.broadcastChannel)===null||o===void 0||o.addEventListener("message",async u=>{this._debug("received broadcast notification from other tab or client",u),await this._notifyAllSubscribers(u.data.event,u.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(t){if(this.throwOnError&&t&&t.error)throw t.error;return t}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${E2}) ${new Date().toISOString()}`}_debug(...t){return this.logDebugMessages&&this.logger(this._logPrefix(),...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{let r={},i="none";if(Nt()&&(r=Lk(window.location.href),this._isImplicitGrantCallback(r)?i="implicit":await this._isPKCECallback(r)&&(i="pkce")),Nt()&&this.detectSessionInUrl&&i!=="none"){const{data:o,error:a}=await this._getSessionFromURL(r,i);if(a){if(this._debug("#_initialize()","error detecting session from URL",a),T2(a)){const d=(t=a.details)===null||t===void 0?void 0:t.code;if(d==="identity_already_exists"||d==="identity_not_found"||d==="single_identity_not_deletable")return{error:a}}return await this._removeSession(),{error:a}}const{session:u,redirectType:h}=o;return this._debug("#_initialize()","detected session in URL",u,"redirect type",h),await this._saveSession(u),setTimeout(async()=>{h==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",u):await this._notifyAllSubscribers("SIGNED_IN",u)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return ie(r)?this._returnResult({error:r}):this._returnResult({error:new vs("Unexpected error during initialization",r)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,i,o;try{const a=await me(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(i=(r=t==null?void 0:t.options)===null||r===void 0?void 0:r.data)!==null&&i!==void 0?i:{},gotrue_meta_security:{captcha_token:(o=t==null?void 0:t.options)===null||o===void 0?void 0:o.captchaToken}},xform:Yr}),{data:u,error:h}=a;if(h||!u)return this._returnResult({data:{user:null,session:null},error:h});const d=u.session,p=u.user;return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",d)),this._returnResult({data:{user:p,session:d},error:null})}catch(a){if(ie(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signUp(t){var r,i,o;try{let a;if("email"in t){const{email:g,password:v,options:_}=t;let E=null,S=null;this.flowType==="pkce"&&([E,S]=await Ii(this.storage,this.storageKey)),a=await me(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:_==null?void 0:_.emailRedirectTo,body:{email:g,password:v,data:(r=_==null?void 0:_.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:_==null?void 0:_.captchaToken},code_challenge:E,code_challenge_method:S},xform:Yr})}else if("phone"in t){const{phone:g,password:v,options:_}=t;a=await me(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:g,password:v,data:(i=_==null?void 0:_.data)!==null&&i!==void 0?i:{},channel:(o=_==null?void 0:_.channel)!==null&&o!==void 0?o:"sms",gotrue_meta_security:{captcha_token:_==null?void 0:_.captchaToken}},xform:Yr})}else throw new wa("You must provide either an email or phone number and a password");const{data:u,error:h}=a;if(h||!u)return await Ot(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:h});const d=u.session,p=u.user;return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",d)),this._returnResult({data:{user:p,session:d},error:null})}catch(a){if(await Ot(this.storage,`${this.storageKey}-code-verifier`),ie(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithPassword(t){try{let r;if("email"in t){const{email:a,password:u,options:h}=t;r=await me(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:a,password:u,gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:T1})}else if("phone"in t){const{phone:a,password:u,options:h}=t;r=await me(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:a,password:u,gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:T1})}else throw new wa("You must provide either an email or phone number and a password");const{data:i,error:o}=r;if(o)return this._returnResult({data:{user:null,session:null},error:o});if(!i||!i.session||!i.user){const a=new qs;return this._returnResult({data:{user:null,session:null},error:a})}return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),this._returnResult({data:Object.assign({user:i.user,session:i.session},i.weak_password?{weakPassword:i.weak_password}:null),error:o})}catch(r){if(ie(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOAuth(t){var r,i,o,a;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(i=t.options)===null||i===void 0?void 0:i.scopes,queryParams:(o=t.options)===null||o===void 0?void 0:o.queryParams,skipBrowserRedirect:(a=t.options)===null||a===void 0?void 0:a.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:r}=t;switch(r){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(t){var r,i,o,a,u,h,d,p,g,v,_;let E,S;if("message"in t)E=t.message,S=t.signature;else{const{chain:k,wallet:x,statement:P,options:L}=t;let R;if(Nt())if(typeof x=="object")R=x;else{const ge=window;if("ethereum"in ge&&typeof ge.ethereum=="object"&&"request"in ge.ethereum&&typeof ge.ethereum.request=="function")R=ge.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof x!="object"||!(L!=null&&L.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");R=x}const U=new URL((r=L==null?void 0:L.url)!==null&&r!==void 0?r:window.location.href),G=await R.request({method:"eth_requestAccounts"}).then(ge=>ge).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!G||G.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const B=O2(G[0]);let W=(i=L==null?void 0:L.signInWithEthereum)===null||i===void 0?void 0:i.chainId;if(!W){const ge=await R.request({method:"eth_chainId"});W=sb(ge)}const F={domain:U.host,address:B,statement:P,uri:U.href,version:"1",chainId:W,nonce:(o=L==null?void 0:L.signInWithEthereum)===null||o===void 0?void 0:o.nonce,issuedAt:(u=(a=L==null?void 0:L.signInWithEthereum)===null||a===void 0?void 0:a.issuedAt)!==null&&u!==void 0?u:new Date,expirationTime:(h=L==null?void 0:L.signInWithEthereum)===null||h===void 0?void 0:h.expirationTime,notBefore:(d=L==null?void 0:L.signInWithEthereum)===null||d===void 0?void 0:d.notBefore,requestId:(p=L==null?void 0:L.signInWithEthereum)===null||p===void 0?void 0:p.requestId,resources:(g=L==null?void 0:L.signInWithEthereum)===null||g===void 0?void 0:g.resources};E=ob(F),S=await R.request({method:"personal_sign",params:[ib(E),B]})}try{const{data:k,error:x}=await me(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:E,signature:S},!((v=t.options)===null||v===void 0)&&v.captchaToken?{gotrue_meta_security:{captcha_token:(_=t.options)===null||_===void 0?void 0:_.captchaToken}}:null),xform:Yr});if(x)throw x;if(!k||!k.session||!k.user){const P=new qs;return this._returnResult({data:{user:null,session:null},error:P})}return k.session&&(await this._saveSession(k.session),await this._notifyAllSubscribers("SIGNED_IN",k.session)),this._returnResult({data:Object.assign({},k),error:x})}catch(k){if(ie(k))return this._returnResult({data:{user:null,session:null},error:k});throw k}}async signInWithSolana(t){var r,i,o,a,u,h,d,p,g,v,_,E;let S,k;if("message"in t)S=t.message,k=t.signature;else{const{chain:x,wallet:P,statement:L,options:R}=t;let U;if(Nt())if(typeof P=="object")U=P;else{const B=window;if("solana"in B&&typeof B.solana=="object"&&("signIn"in B.solana&&typeof B.solana.signIn=="function"||"signMessage"in B.solana&&typeof B.solana.signMessage=="function"))U=B.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof P!="object"||!(R!=null&&R.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");U=P}const G=new URL((r=R==null?void 0:R.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in U&&U.signIn){const B=await U.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},R==null?void 0:R.signInWithSolana),{version:"1",domain:G.host,uri:G.href}),L?{statement:L}:null));let W;if(Array.isArray(B)&&B[0]&&typeof B[0]=="object")W=B[0];else if(B&&typeof B=="object"&&"signedMessage"in B&&"signature"in B)W=B;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in W&&"signature"in W&&(typeof W.signedMessage=="string"||W.signedMessage instanceof Uint8Array)&&W.signature instanceof Uint8Array)S=typeof W.signedMessage=="string"?W.signedMessage:new TextDecoder().decode(W.signedMessage),k=W.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in U)||typeof U.signMessage!="function"||!("publicKey"in U)||typeof U!="object"||!U.publicKey||!("toBase58"in U.publicKey)||typeof U.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");S=[`${G.host} wants you to sign in with your Solana account:`,U.publicKey.toBase58(),...L?["",L,""]:[""],"Version: 1",`URI: ${G.href}`,`Issued At: ${(o=(i=R==null?void 0:R.signInWithSolana)===null||i===void 0?void 0:i.issuedAt)!==null&&o!==void 0?o:new Date().toISOString()}`,...!((a=R==null?void 0:R.signInWithSolana)===null||a===void 0)&&a.notBefore?[`Not Before: ${R.signInWithSolana.notBefore}`]:[],...!((u=R==null?void 0:R.signInWithSolana)===null||u===void 0)&&u.expirationTime?[`Expiration Time: ${R.signInWithSolana.expirationTime}`]:[],...!((h=R==null?void 0:R.signInWithSolana)===null||h===void 0)&&h.chainId?[`Chain ID: ${R.signInWithSolana.chainId}`]:[],...!((d=R==null?void 0:R.signInWithSolana)===null||d===void 0)&&d.nonce?[`Nonce: ${R.signInWithSolana.nonce}`]:[],...!((p=R==null?void 0:R.signInWithSolana)===null||p===void 0)&&p.requestId?[`Request ID: ${R.signInWithSolana.requestId}`]:[],...!((v=(g=R==null?void 0:R.signInWithSolana)===null||g===void 0?void 0:g.resources)===null||v===void 0)&&v.length?["Resources",...R.signInWithSolana.resources.map(W=>`- ${W}`)]:[]].join(`
`);const B=await U.signMessage(new TextEncoder().encode(S),"utf8");if(!B||!(B instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");k=B}}try{const{data:x,error:P}=await me(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:S,signature:Zs(k)},!((_=t.options)===null||_===void 0)&&_.captchaToken?{gotrue_meta_security:{captcha_token:(E=t.options)===null||E===void 0?void 0:E.captchaToken}}:null),xform:Yr});if(P)throw P;if(!x||!x.session||!x.user){const L=new qs;return this._returnResult({data:{user:null,session:null},error:L})}return x.session&&(await this._saveSession(x.session),await this._notifyAllSubscribers("SIGNED_IN",x.session)),this._returnResult({data:Object.assign({},x),error:P})}catch(x){if(ie(x))return this._returnResult({data:{user:null,session:null},error:x});throw x}}async _exchangeCodeForSession(t){const r=await Ks(this.storage,`${this.storageKey}-code-verifier`),[i,o]=(r??"").split("/");try{const{data:a,error:u}=await me(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:i},xform:Yr});if(await Ot(this.storage,`${this.storageKey}-code-verifier`),u)throw u;if(!a||!a.session||!a.user){const h=new qs;return this._returnResult({data:{user:null,session:null,redirectType:null},error:h})}return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),this._returnResult({data:Object.assign(Object.assign({},a),{redirectType:o??null}),error:u})}catch(a){if(await Ot(this.storage,`${this.storageKey}-code-verifier`),ie(a))return this._returnResult({data:{user:null,session:null,redirectType:null},error:a});throw a}}async signInWithIdToken(t){try{const{options:r,provider:i,token:o,access_token:a,nonce:u}=t,h=await me(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:i,id_token:o,access_token:a,nonce:u,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:Yr}),{data:d,error:p}=h;if(p)return this._returnResult({data:{user:null,session:null},error:p});if(!d||!d.session||!d.user){const g=new qs;return this._returnResult({data:{user:null,session:null},error:g})}return d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",d.session)),this._returnResult({data:d,error:p})}catch(r){if(ie(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOtp(t){var r,i,o,a,u;try{if("email"in t){const{email:h,options:d}=t;let p=null,g=null;this.flowType==="pkce"&&([p,g]=await Ii(this.storage,this.storageKey));const{error:v}=await me(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:h,data:(r=d==null?void 0:d.data)!==null&&r!==void 0?r:{},create_user:(i=d==null?void 0:d.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken},code_challenge:p,code_challenge_method:g},redirectTo:d==null?void 0:d.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:v})}if("phone"in t){const{phone:h,options:d}=t,{data:p,error:g}=await me(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:h,data:(o=d==null?void 0:d.data)!==null&&o!==void 0?o:{},create_user:(a=d==null?void 0:d.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken},channel:(u=d==null?void 0:d.channel)!==null&&u!==void 0?u:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:p==null?void 0:p.message_id},error:g})}throw new wa("You must provide either an email or phone number.")}catch(h){if(await Ot(this.storage,`${this.storageKey}-code-verifier`),ie(h))return this._returnResult({data:{user:null,session:null},error:h});throw h}}async verifyOtp(t){var r,i;try{let o,a;"options"in t&&(o=(r=t.options)===null||r===void 0?void 0:r.redirectTo,a=(i=t.options)===null||i===void 0?void 0:i.captchaToken);const{data:u,error:h}=await me(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:a}}),redirectTo:o,xform:Yr});if(h)throw h;if(!u)throw new Error("An error occurred on token verification.");const d=u.session,p=u.user;return d!=null&&d.access_token&&(await this._saveSession(d),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",d)),this._returnResult({data:{user:p,session:d},error:null})}catch(o){if(ie(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async signInWithSSO(t){var r,i,o,a,u;try{let h=null,d=null;this.flowType==="pkce"&&([h,d]=await Ii(this.storage,this.storageKey));const p=await me(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(i=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&i!==void 0?i:void 0}),!((o=t==null?void 0:t.options)===null||o===void 0)&&o.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:h,code_challenge_method:d}),headers:this.headers,xform:Qk});return!((a=p.data)===null||a===void 0)&&a.url&&Nt()&&!(!((u=t.options)===null||u===void 0)&&u.skipBrowserRedirect)&&window.location.assign(p.data.url),this._returnResult(p)}catch(h){if(await Ot(this.storage,`${this.storageKey}-code-verifier`),ie(h))return this._returnResult({data:null,error:h});throw h}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:i}=t;if(i)throw i;if(!r)throw new ar;const{error:o}=await me(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return this._returnResult({data:{user:null,session:null},error:o})})}catch(t){if(ie(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:i,type:o,options:a}=t,{error:u}=await me(this.fetch,"POST",r,{headers:this.headers,body:{email:i,type:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},redirectTo:a==null?void 0:a.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:u})}else if("phone"in t){const{phone:i,type:o,options:a}=t,{data:u,error:h}=await me(this.fetch,"POST",r,{headers:this.headers,body:{phone:i,type:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:h})}throw new wa("You must provide either an email or phone number and a type")}catch(r){if(ie(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const i=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),o=(async()=>(await i,await r()))();return this.pendingInLock.push((async()=>{try{await o}catch{}})()),o}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const i=r();for(this.pendingInLock.push((async()=>{try{await i}catch{}})()),await i;this.pendingInLock.length;){const o=[...this.pendingInLock];await Promise.all(o),this.pendingInLock.splice(0,o.length)}return await i}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await Ks(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const i=t.expires_at?t.expires_at*1e3-Date.now()<Nd:!1;if(this._debug("#__loadSession()",`session has${i?"":" not"} expired`,"expires_at",t.expires_at),!i){if(this.userStorage){const u=await Ks(this.userStorage,this.storageKey+"-user");u!=null&&u.user?t.user=u.user:t.user=Ld()}if(this.storage.isServer&&t.user&&!t.user.__isUserNotAvailableProxy){const u={value:this.suppressGetSessionWarning};t.user=qk(t.user,u),u.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:t},error:null}}const{data:o,error:a}=await this._callRefreshToken(t.refresh_token);return a?this._returnResult({data:{session:null},error:a}):this._returnResult({data:{session:o},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(t){if(t)return await this._getUser(t);await this.initializePromise;const r=await this._acquireLock(-1,async()=>await this._getUser());return r.data.user&&(this.suppressGetSessionWarning=!0),r}async _getUser(t){try{return t?await me(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:ws}):await this._useSession(async r=>{var i,o,a;const{data:u,error:h}=r;if(h)throw h;return!(!((i=u.session)===null||i===void 0)&&i.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new ar}:await me(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(a=(o=u.session)===null||o===void 0?void 0:o.access_token)!==null&&a!==void 0?a:void 0,xform:ws})})}catch(r){if(ie(r))return x2(r)&&(await this._removeSession(),await Ot(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:r});throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async i=>{const{data:o,error:a}=i;if(a)throw a;if(!o.session)throw new ar;const u=o.session;let h=null,d=null;this.flowType==="pkce"&&t.email!=null&&([h,d]=await Ii(this.storage,this.storageKey));const{data:p,error:g}=await me(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:h,code_challenge_method:d}),jwt:u.access_token,xform:ws});if(g)throw g;return u.user=p.user,await this._saveSession(u),await this._notifyAllSubscribers("USER_UPDATED",u),this._returnResult({data:{user:u.user},error:null})})}catch(i){if(await Ot(this.storage,`${this.storageKey}-code-verifier`),ie(i))return this._returnResult({data:{user:null},error:i});throw i}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new ar;const r=Date.now()/1e3;let i=r,o=!0,a=null;const{payload:u}=Id(t.access_token);if(u.exp&&(i=u.exp,o=i<=r),o){const{data:h,error:d}=await this._callRefreshToken(t.refresh_token);if(d)return this._returnResult({data:{user:null,session:null},error:d});if(!h)return{data:{user:null,session:null},error:null};a=h}else{const{data:h,error:d}=await this._getUser(t.access_token);if(d)throw d;a={access_token:t.access_token,refresh_token:t.refresh_token,user:h.user,token_type:"bearer",expires_in:i-r,expires_at:i},await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)}return this._returnResult({data:{user:a.user,session:a},error:null})}catch(r){if(ie(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var i;if(!t){const{data:u,error:h}=r;if(h)throw h;t=(i=u.session)!==null&&i!==void 0?i:void 0}if(!(t!=null&&t.refresh_token))throw new ar;const{data:o,error:a}=await this._callRefreshToken(t.refresh_token);return a?this._returnResult({data:{user:null,session:null},error:a}):o?this._returnResult({data:{user:o.user,session:o},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(r){if(ie(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async _getSessionFromURL(t,r){try{if(!Nt())throw new _a("No browser detected.");if(t.error||t.error_description||t.error_code)throw new _a(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new mf("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new _a("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new mf("No code detected.");const{data:L,error:R}=await this._exchangeCodeForSession(t.code);if(R)throw R;const U=new URL(window.location.href);return U.searchParams.delete("code"),window.history.replaceState(window.history.state,"",U.toString()),{data:{session:L.session,redirectType:null},error:null}}const{provider_token:i,provider_refresh_token:o,access_token:a,refresh_token:u,expires_in:h,expires_at:d,token_type:p}=t;if(!a||!h||!u||!p)throw new _a("No session defined in URL");const g=Math.round(Date.now()/1e3),v=parseInt(h);let _=g+v;d&&(_=parseInt(d));const E=_-g;E*1e3<=Mi&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${E}s, should have been closer to ${v}s`);const S=_-v;g-S>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",S,_,g):g-S<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",S,_,g);const{data:k,error:x}=await this._getUser(a);if(x)throw x;const P={provider_token:i,provider_refresh_token:o,access_token:a,expires_in:v,expires_at:_,refresh_token:u,token_type:p,user:k.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:P,redirectType:t.type},error:null})}catch(i){if(ie(i))return this._returnResult({data:{session:null,redirectType:null},error:i});throw i}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await Ks(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var i;const{data:o,error:a}=r;if(a)return this._returnResult({error:a});const u=(i=o.session)===null||i===void 0?void 0:i.access_token;if(u){const{error:h}=await this.admin.signOut(u,t);if(h&&!(b2(h)&&(h.status===404||h.status===401||h.status===403)))return this._returnResult({error:h})}return t!=="others"&&(await this._removeSession(),await Ot(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(t){const r=Ik(),i={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,i),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:i}}}async _emitInitialSession(t){return await this._useSession(async r=>{var i,o;try{const{data:{session:a},error:u}=r;if(u)throw u;await((i=this.stateChangeEmitters.get(t))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",a)),this._debug("INITIAL_SESSION","callback id",t,"session",a)}catch(a){await((o=this.stateChangeEmitters.get(t))===null||o===void 0?void 0:o.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",a),console.error(a)}})}async resetPasswordForEmail(t,r={}){let i=null,o=null;this.flowType==="pkce"&&([i,o]=await Ii(this.storage,this.storageKey,!0));try{return await me(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:i,code_challenge_method:o,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(a){if(await Ot(this.storage,`${this.storageKey}-code-verifier`),ie(a))return this._returnResult({data:null,error:a});throw a}}async getUserIdentities(){var t;try{const{data:r,error:i}=await this.getUser();if(i)throw i;return this._returnResult({data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null})}catch(r){if(ie(r))return this._returnResult({data:null,error:r});throw r}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var r;try{const{data:i,error:o}=await this._useSession(async a=>{var u,h,d,p,g;const{data:v,error:_}=a;if(_)throw _;const E=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(u=t.options)===null||u===void 0?void 0:u.redirectTo,scopes:(h=t.options)===null||h===void 0?void 0:h.scopes,queryParams:(d=t.options)===null||d===void 0?void 0:d.queryParams,skipBrowserRedirect:!0});return await me(this.fetch,"GET",E,{headers:this.headers,jwt:(g=(p=v.session)===null||p===void 0?void 0:p.access_token)!==null&&g!==void 0?g:void 0})});if(o)throw o;return Nt()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(i==null?void 0:i.url),this._returnResult({data:{provider:t.provider,url:i==null?void 0:i.url},error:null})}catch(i){if(ie(i))return this._returnResult({data:{provider:t.provider,url:null},error:i});throw i}}async linkIdentityIdToken(t){return await this._useSession(async r=>{var i;try{const{error:o,data:{session:a}}=r;if(o)throw o;const{options:u,provider:h,token:d,access_token:p,nonce:g}=t,v=await me(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(i=a==null?void 0:a.access_token)!==null&&i!==void 0?i:void 0,body:{provider:h,id_token:d,access_token:p,nonce:g,link_identity:!0,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}},xform:Yr}),{data:_,error:E}=v;return E?this._returnResult({data:{user:null,session:null},error:E}):!_||!_.session||!_.user?this._returnResult({data:{user:null,session:null},error:new qs}):(_.session&&(await this._saveSession(_.session),await this._notifyAllSubscribers("USER_UPDATED",_.session)),this._returnResult({data:_,error:E}))}catch(o){if(await Ot(this.storage,`${this.storageKey}-code-verifier`),ie(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}})}async unlinkIdentity(t){try{return await this._useSession(async r=>{var i,o;const{data:a,error:u}=r;if(u)throw u;return await me(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(o=(i=a.session)===null||i===void 0?void 0:i.access_token)!==null&&o!==void 0?o:void 0})})}catch(r){if(ie(r))return this._returnResult({data:null,error:r});throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const i=Date.now();return await Fk(async o=>(o>0&&await Uk(200*Math.pow(2,o-1)),this._debug(r,"refreshing attempt",o),await me(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:Yr})),(o,a)=>{const u=200*Math.pow(2,o);return a&&bu(a)&&Date.now()+u-i<Mi})}catch(i){if(this._debug(r,"error",i),ie(i))return this._returnResult({data:{session:null,user:null},error:i});throw i}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const i=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",i),Nt()&&!r.skipBrowserRedirect&&window.location.assign(i),{data:{provider:t,url:i},error:null}}async _recoverAndRefresh(){var t,r;const i="#_recoverAndRefresh()";this._debug(i,"begin");try{const o=await Ks(this.storage,this.storageKey);if(o&&this.userStorage){let u=await Ks(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!u&&(u={user:o.user},await $i(this.userStorage,this.storageKey+"-user",u)),o.user=(t=u==null?void 0:u.user)!==null&&t!==void 0?t:Ld()}else if(o&&!o.user&&!o.user){const u=await Ks(this.storage,this.storageKey+"-user");u&&(u!=null&&u.user)?(o.user=u.user,await Ot(this.storage,this.storageKey+"-user"),await $i(this.storage,this.storageKey,o)):o.user=Ld()}if(this._debug(i,"session from storage",o),!this._isValidSession(o)){this._debug(i,"session is not valid"),o!==null&&await this._removeSession();return}const a=((r=o.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<Nd;if(this._debug(i,`session has${a?"":" not"} expired with margin of ${Nd}s`),a){if(this.autoRefreshToken&&o.refresh_token){const{error:u}=await this._callRefreshToken(o.refresh_token);u&&(console.error(u),bu(u)||(this._debug(i,"refresh failed with a non-retryable error, removing the session",u),await this._removeSession()))}}else if(o.user&&o.user.__isUserNotAvailableProxy===!0)try{const{data:u,error:h}=await this._getUser(o.access_token);!h&&(u!=null&&u.user)?(o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)):this._debug(i,"could not get user data, skipping SIGNED_IN notification")}catch(u){console.error("Error getting user data:",u),this._debug(i,"error getting user data, skipping SIGNED_IN notification",u)}else await this._notifyAllSubscribers("SIGNED_IN",o)}catch(o){this._debug(i,"error",o),console.error(o);return}finally{this._debug(i,"end")}}async _callRefreshToken(t){var r,i;if(!t)throw new ar;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const o=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(o,"begin");try{this.refreshingDeferred=new sc;const{data:a,error:u}=await this._refreshAccessToken(t);if(u)throw u;if(!a.session)throw new ar;await this._saveSession(a.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",a.session);const h={data:a.session,error:null};return this.refreshingDeferred.resolve(h),h}catch(a){if(this._debug(o,"error",a),ie(a)){const u={data:null,error:a};return bu(a)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(u),u}throw(i=this.refreshingDeferred)===null||i===void 0||i.reject(a),a}finally{this.refreshingDeferred=null,this._debug(o,"end")}}async _notifyAllSubscribers(t,r,i=!0){const o=`#_notifyAllSubscribers(${t})`;this._debug(o,"begin",r,`broadcast = ${i}`);try{this.broadcastChannel&&i&&this.broadcastChannel.postMessage({event:t,session:r});const a=[],u=Array.from(this.stateChangeEmitters.values()).map(async h=>{try{await h.callback(t,r)}catch(d){a.push(d)}});if(await Promise.all(u),a.length>0){for(let h=0;h<a.length;h+=1)console.error(a[h]);throw a[0]}}finally{this._debug(o,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,await Ot(this.storage,`${this.storageKey}-code-verifier`);const r=Object.assign({},t),i=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!i&&r.user&&await $i(this.userStorage,this.storageKey+"-user",{user:r.user});const o=Object.assign({},r);delete o.user;const a=b1(o);await $i(this.storage,this.storageKey,a)}else{const o=b1(r);await $i(this.storage,this.storageKey,o)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await Ot(this.storage,this.storageKey),await Ot(this.storage,this.storageKey+"-code-verifier"),await Ot(this.storage,this.storageKey+"-user"),this.userStorage&&await Ot(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&Nt()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),Mi);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:i}}=r;if(!i||!i.refresh_token||!i.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const o=Math.floor((i.expires_at*1e3-t)/Mi);this._debug("#_autoRefreshTokenTick()",`access token expires in ${o} ticks, a tick lasts ${Mi}ms, refresh threshold is ${ff} ticks`),o<=ff&&await this._callRefreshToken(i.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof Yf)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Nt()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,i){const o=[`provider=${encodeURIComponent(r)}`];if(i!=null&&i.redirectTo&&o.push(`redirect_to=${encodeURIComponent(i.redirectTo)}`),i!=null&&i.scopes&&o.push(`scopes=${encodeURIComponent(i.scopes)}`),this.flowType==="pkce"){const[a,u]=await Ii(this.storage,this.storageKey),h=new URLSearchParams({code_challenge:`${encodeURIComponent(a)}`,code_challenge_method:`${encodeURIComponent(u)}`});o.push(h.toString())}if(i!=null&&i.queryParams){const a=new URLSearchParams(i.queryParams);o.push(a.toString())}return i!=null&&i.skipBrowserRedirect&&o.push(`skip_http_redirect=${i.skipBrowserRedirect}`),`${t}?${o.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var i;const{data:o,error:a}=r;return a?this._returnResult({data:null,error:a}):await me(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(i=o==null?void 0:o.session)===null||i===void 0?void 0:i.access_token})})}catch(r){if(ie(r))return this._returnResult({data:null,error:r});throw r}}async _enroll(t){try{return await this._useSession(async r=>{var i,o;const{data:a,error:u}=r;if(u)return this._returnResult({data:null,error:u});const h=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:d,error:p}=await me(this.fetch,"POST",`${this.url}/factors`,{body:h,headers:this.headers,jwt:(i=a==null?void 0:a.session)===null||i===void 0?void 0:i.access_token});return p?this._returnResult({data:null,error:p}):(t.factorType==="totp"&&d.type==="totp"&&(!((o=d==null?void 0:d.totp)===null||o===void 0)&&o.qr_code)&&(d.totp.qr_code=`data:image/svg+xml;utf-8,${d.totp.qr_code}`),this._returnResult({data:d,error:null}))})}catch(r){if(ie(r))return this._returnResult({data:null,error:r});throw r}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var i;const{data:o,error:a}=r;if(a)return this._returnResult({data:null,error:a});const u=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?fb(t.webauthn.credential_response):pb(t.webauthn.credential_response)})}:{code:t.code}),{data:h,error:d}=await me(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:u,headers:this.headers,jwt:(i=o==null?void 0:o.session)===null||i===void 0?void 0:i.access_token});return d?this._returnResult({data:null,error:d}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+h.expires_in},h)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",h),this._returnResult({data:h,error:d}))})}catch(r){if(ie(r))return this._returnResult({data:null,error:r});throw r}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var i;const{data:o,error:a}=r;if(a)return this._returnResult({data:null,error:a});const u=await me(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(i=o==null?void 0:o.session)===null||i===void 0?void 0:i.access_token});if(u.error)return u;const{data:h}=u;if(h.type!=="webauthn")return{data:h,error:null};switch(h.webauthn.type){case"create":return{data:Object.assign(Object.assign({},h),{webauthn:Object.assign(Object.assign({},h.webauthn),{credential_options:Object.assign(Object.assign({},h.webauthn.credential_options),{publicKey:hb(h.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},h),{webauthn:Object.assign(Object.assign({},h.webauthn),{credential_options:Object.assign(Object.assign({},h.webauthn.credential_options),{publicKey:db(h.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(ie(r))return this._returnResult({data:null,error:r});throw r}})}async _challengeAndVerify(t){const{data:r,error:i}=await this._challenge({factorId:t.factorId});return i?this._returnResult({data:null,error:i}):await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){var t;const{data:{user:r},error:i}=await this.getUser();if(i)return{data:null,error:i};const o={all:[],phone:[],totp:[],webauthn:[]};for(const a of(t=r==null?void 0:r.factors)!==null&&t!==void 0?t:[])o.all.push(a),a.status==="verified"&&o[a.factor_type].push(a);return{data:o,error:null}}async _getAuthenticatorAssuranceLevel(){var t,r;const{data:{session:i},error:o}=await this.getSession();if(o)return this._returnResult({data:null,error:o});if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:a}=Id(i.access_token);let u=null;a.aal&&(u=a.aal);let h=u;((r=(t=i.user.factors)===null||t===void 0?void 0:t.filter(g=>g.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(h="aal2");const p=a.amr||[];return{data:{currentLevel:u,nextLevel:h,currentAuthenticationMethods:p},error:null}}async _getAuthorizationDetails(t){try{return await this._useSession(async r=>{const{data:{session:i},error:o}=r;return o?this._returnResult({data:null,error:o}):i?await me(this.fetch,"GET",`${this.url}/oauth/authorizations/${t}`,{headers:this.headers,jwt:i.access_token,xform:a=>({data:a,error:null})}):this._returnResult({data:null,error:new ar})})}catch(r){if(ie(r))return this._returnResult({data:null,error:r});throw r}}async _approveAuthorization(t,r){try{return await this._useSession(async i=>{const{data:{session:o},error:a}=i;if(a)return this._returnResult({data:null,error:a});if(!o)return this._returnResult({data:null,error:new ar});const u=await me(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:o.access_token,body:{action:"approve"},xform:h=>({data:h,error:null})});return u.data&&u.data.redirect_url&&Nt()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(u.data.redirect_url),u})}catch(i){if(ie(i))return this._returnResult({data:null,error:i});throw i}}async _denyAuthorization(t,r){try{return await this._useSession(async i=>{const{data:{session:o},error:a}=i;if(a)return this._returnResult({data:null,error:a});if(!o)return this._returnResult({data:null,error:new ar});const u=await me(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:o.access_token,body:{action:"deny"},xform:h=>({data:h,error:null})});return u.data&&u.data.redirect_url&&Nt()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(u.data.redirect_url),u})}catch(i){if(ie(i))return this._returnResult({data:null,error:i});throw i}}async _listOAuthGrants(){try{return await this._useSession(async t=>{const{data:{session:r},error:i}=t;return i?this._returnResult({data:null,error:i}):r?await me(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,xform:o=>({data:o,error:null})}):this._returnResult({data:null,error:new ar})})}catch(t){if(ie(t))return this._returnResult({data:null,error:t});throw t}}async _revokeOAuthGrant(t){try{return await this._useSession(async r=>{const{data:{session:i},error:o}=r;return o?this._returnResult({data:null,error:o}):i?(await me(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:i.access_token,query:{client_id:t.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new ar})})}catch(r){if(ie(r))return this._returnResult({data:null,error:r});throw r}}async fetchJwk(t,r={keys:[]}){let i=r.keys.find(h=>h.kid===t);if(i)return i;const o=Date.now();if(i=this.jwks.keys.find(h=>h.kid===t),i&&this.jwks_cached_at+Tk>o)return i;const{data:a,error:u}=await me(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(u)throw u;return!a.keys||a.keys.length===0||(this.jwks=a,this.jwks_cached_at=o,i=a.keys.find(h=>h.kid===t),!i)?null:i}async getClaims(t,r={}){try{let i=t;if(!i){const{data:E,error:S}=await this.getSession();if(S||!E.session)return this._returnResult({data:null,error:S});i=E.session.access_token}const{header:o,payload:a,signature:u,raw:{header:h,payload:d}}=Id(i);r!=null&&r.allowExpired||Kk(a.exp);const p=!o.alg||o.alg.startsWith("HS")||!o.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(o.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!p){const{error:E}=await this.getUser(i);if(E)throw E;return{data:{claims:a,header:o,signature:u},error:null}}const g=Hk(o.alg),v=await crypto.subtle.importKey("jwk",p,g,!0,["verify"]);if(!await crypto.subtle.verify(g,v,u,Ok(`${h}.${d}`)))throw new Fu("Invalid JWT signature");return{data:{claims:a,header:o,signature:u},error:null}}catch(i){if(ie(i))return this._returnResult({data:null,error:i});throw i}}};Qf.nextInstanceID={};const kb=Xf,bb=Qf,xb=Object.freeze(Object.defineProperty({__proto__:null,AuthAdminApi:kb,AuthApiError:k2,AuthClient:bb,AuthError:Xi,AuthImplicitGrantRedirectError:_a,AuthInvalidCredentialsError:wa,AuthInvalidJwtError:Fu,AuthInvalidTokenResponseError:qs,AuthPKCEGrantCodeExchangeError:mf,AuthRetryableFetchError:Uu,AuthSessionMissingError:ar,AuthUnknownError:vs,AuthWeakPasswordError:gf,CustomAuthError:Gn,GoTrueAdminApi:Xf,GoTrueClient:Qf,NavigatorLockAcquireTimeoutError:P2,SIGN_OUT_SCOPES:xu,isAuthApiError:b2,isAuthError:ie,isAuthImplicitGrantRedirectError:T2,isAuthRetryableFetchError:bu,isAuthSessionMissingError:x2,isAuthWeakPasswordError:Rk,lockInternals:Xs,navigatorLock:j2,processLock:rb},Symbol.toStringTag,{value:"Module"})),I2=La(xb);var O1;function Tb(){if(O1)return da;O1=1,Object.defineProperty(da,"__esModule",{value:!0}),da.SupabaseAuthClient=void 0;const e=I2;let t=class extends e.AuthClient{constructor(i){super(i)}};return da.SupabaseAuthClient=t,da}var N1;function I1(){if(N1)return su;N1=1,Object.defineProperty(su,"__esModule",{value:!0});const e=Gv,t=Zv(),r=a2,i=yk,o=wk(),a=_k(),u=Ek(),h=Tb();class d{constructor(g,v,_){var E,S,k;this.supabaseUrl=g,this.supabaseKey=v;const x=(0,u.validateSupabaseUrl)(g);if(!v)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",x),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",x),this.storageUrl=new URL("storage/v1",x),this.functionsUrl=new URL("functions/v1",x);const P=`sb-${x.hostname.split(".")[0]}-auth-token`,L={db:o.DEFAULT_DB_OPTIONS,realtime:o.DEFAULT_REALTIME_OPTIONS,auth:Object.assign(Object.assign({},o.DEFAULT_AUTH_OPTIONS),{storageKey:P}),global:o.DEFAULT_GLOBAL_OPTIONS},R=(0,u.applySettingDefaults)(_??{},L);this.storageKey=(E=R.auth.storageKey)!==null&&E!==void 0?E:"",this.headers=(S=R.global.headers)!==null&&S!==void 0?S:{},R.accessToken?(this.accessToken=R.accessToken,this.auth=new Proxy({},{get:(U,G)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(G)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((k=R.auth)!==null&&k!==void 0?k:{},this.headers,R.global.fetch),this.fetch=(0,a.fetchWithAuth)(v,this._getAccessToken.bind(this),R.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},R.realtime)),this.accessToken&&this.accessToken().then(U=>this.realtime.setAuth(U)).catch(U=>console.warn("Failed to set initial Realtime auth token:",U)),this.rest=new t.PostgrestClient(new URL("rest/v1",x).href,{headers:this.headers,schema:R.db.schema,fetch:this.fetch}),this.storage=new i.StorageClient(this.storageUrl.href,this.headers,this.fetch,_==null?void 0:_.storage),R.accessToken||this._listenForAuthEvents()}get functions(){return new e.FunctionsClient(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(g){return this.rest.from(g)}schema(g){return this.rest.schema(g)}rpc(g,v={},_={head:!1,get:!1,count:void 0}){return this.rest.rpc(g,v,_)}channel(g,v={config:{}}){return this.realtime.channel(g,v)}getChannels(){return this.realtime.getChannels()}removeChannel(g){return this.realtime.removeChannel(g)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var g,v;if(this.accessToken)return await this.accessToken();const{data:_}=await this.auth.getSession();return(v=(g=_.session)===null||g===void 0?void 0:g.access_token)!==null&&v!==void 0?v:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:g,persistSession:v,detectSessionInUrl:_,storage:E,userStorage:S,storageKey:k,flowType:x,lock:P,debug:L,throwOnError:R},U,G){const B={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new h.SupabaseAuthClient({url:this.authUrl.href,headers:Object.assign(Object.assign({},B),U),storageKey:k,autoRefreshToken:g,persistSession:v,detectSessionInUrl:_,storage:E,userStorage:S,flowType:x,lock:P,debug:L,throwOnError:R,fetch:G,hasCustomAuthorizationHeader:Object.keys(this.headers).some(W=>W.toLowerCase()==="authorization")})}_initRealtimeClient(g){return new r.RealtimeClient(this.realtimeUrl.href,Object.assign(Object.assign({},g),{params:Object.assign({apikey:this.supabaseKey},g==null?void 0:g.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((v,_)=>{this._handleTokenChanged(v,"CLIENT",_==null?void 0:_.access_token)})}_handleTokenChanged(g,v,_){(g==="TOKEN_REFRESHED"||g==="SIGNED_IN")&&this.changedAccessToken!==_?(this.changedAccessToken=_,this.realtime.setAuth(_)):g==="SIGNED_OUT"&&(this.realtime.setAuth(),v=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}return su.default=d,su}var L1;function Rb(){return L1||(L1=1,(function(e){var t=On&&On.__createBinding||(Object.create?(function(g,v,_,E){E===void 0&&(E=_);var S=Object.getOwnPropertyDescriptor(v,_);(!S||("get"in S?!v.__esModule:S.writable||S.configurable))&&(S={enumerable:!0,get:function(){return v[_]}}),Object.defineProperty(g,E,S)}):(function(g,v,_,E){E===void 0&&(E=_),g[E]=v[_]})),r=On&&On.__exportStar||function(g,v){for(var _ in g)_!=="default"&&!Object.prototype.hasOwnProperty.call(v,_)&&t(v,g,_)},i=On&&On.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(e,"__esModule",{value:!0}),e.createClient=e.SupabaseClient=e.FunctionRegion=e.FunctionsError=e.FunctionsRelayError=e.FunctionsFetchError=e.FunctionsHttpError=e.PostgrestError=void 0;const o=i(I1());r(I2,e);var a=Zv();Object.defineProperty(e,"PostgrestError",{enumerable:!0,get:function(){return a.PostgrestError}});var u=Gv;Object.defineProperty(e,"FunctionsHttpError",{enumerable:!0,get:function(){return u.FunctionsHttpError}}),Object.defineProperty(e,"FunctionsFetchError",{enumerable:!0,get:function(){return u.FunctionsFetchError}}),Object.defineProperty(e,"FunctionsRelayError",{enumerable:!0,get:function(){return u.FunctionsRelayError}}),Object.defineProperty(e,"FunctionsError",{enumerable:!0,get:function(){return u.FunctionsError}}),Object.defineProperty(e,"FunctionRegion",{enumerable:!0,get:function(){return u.FunctionRegion}}),r(a2,e);var h=I1();Object.defineProperty(e,"SupabaseClient",{enumerable:!0,get:function(){return i(h).default}});const d=(g,v,_)=>new o.default(g,v,_);e.createClient=d;function p(){if(typeof window<"u"||typeof process>"u")return!1;const g=process.version;if(g==null)return!1;const v=g.match(/^v(\d+)\./);return v?parseInt(v[1],10)<=18:!1}p()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217")})(On)),On}var L2=Rb();const D2=F4(L2),Ab=U4({__proto__:null,default:D2},[L2]),{PostgrestError:jT,FunctionsHttpError:OT,FunctionsFetchError:NT,FunctionsRelayError:IT,FunctionsError:LT,FunctionRegion:DT,SupabaseClient:UT,createClient:Cb,GoTrueAdminApi:FT,GoTrueClient:MT,AuthAdminApi:$T,AuthClient:BT,navigatorLock:zT,NavigatorLockAcquireTimeoutError:VT,lockInternals:WT,processLock:KT,SIGN_OUT_SCOPES:HT,AuthError:GT,AuthApiError:qT,AuthUnknownError:JT,CustomAuthError:XT,AuthSessionMissingError:YT,AuthInvalidTokenResponseError:QT,AuthInvalidCredentialsError:ZT,AuthImplicitGrantRedirectError:e6,AuthPKCEGrantCodeExchangeError:t6,AuthRetryableFetchError:r6,AuthWeakPasswordError:n6,AuthInvalidJwtError:s6,isAuthError:i6,isAuthApiError:o6,isAuthSessionMissingError:a6,isAuthImplicitGrantRedirectError:l6,isAuthRetryableFetchError:u6,isAuthWeakPasswordError:c6,RealtimePresence:h6,RealtimeChannel:d6,RealtimeClient:f6,REALTIME_LISTEN_TYPES:p6,REALTIME_POSTGRES_CHANGES_LISTEN_EVENT:m6,REALTIME_PRESENCE_LISTEN_EVENTS:g6,REALTIME_SUBSCRIBE_STATES:y6,REALTIME_CHANNEL_STATES:v6}=D2||Ab,Pb="https://fttzzjkdqquoolosfrxw.supabase.co",jb="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImZ0dHp6amtkcXF1b29sb3Nmcnh3Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjU4MDYzOTksImV4cCI6MjA4MTM4MjM5OX0.6VKeI3-aWIkOZ_YwI5A8ZMdJ4AkY8x0B85g1Ra-iSgI",en=Cb(Pb,jb),Ca=5;function U2(){const e=new Date;return`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}`}async function Ob(e){const t=U2(),{data:r,error:i}=await en.from("usage").select("count, bonus_credits").eq("user_id",e).eq("month",t).single();return i&&i.code!=="PGRST116"?(console.error("Error fetching usage:",i),{count:0,bonusCredits:0}):{count:(r==null?void 0:r.count)||0,bonusCredits:(r==null?void 0:r.bonus_credits)||0}}async function Nb(e){const t=U2(),{data:r}=await en.from("usage").select("id, count").eq("user_id",e).eq("month",t).single();if(r){const i=r.count+1,{error:o}=await en.from("usage").update({count:i}).eq("id",r.id);return o?(console.error("Error updating usage:",o),{success:!1,count:r.count}):{success:!0,count:i}}else{const{error:i}=await en.from("usage").insert({user_id:e,month:t,count:1});return i?(console.error("Error inserting usage:",i),{success:!1,count:0}):{success:!0,count:1}}}async function F2(e){const{data:t}=await en.from("subscriptions").select("status").eq("user_id",e).eq("status","active").single();if(t)return{allowed:!0,remaining:-1,isPremium:!0,bonusCredits:0};const r=await Ob(e),o=Math.max(0,Ca-r.count)+r.bonusCredits;return{allowed:o>0,remaining:o,isPremium:!1,bonusCredits:r.bonusCredits}}const M2=T.createContext(void 0);function Ib({children:e}){const[t,r]=T.useState(null),[i,o]=T.useState(null),[a,u]=T.useState(!0),[h,d]=T.useState(null),p=async()=>{if(!t){d(null);return}const E=await F2(t.id);d({count:Ca-Math.max(0,E.remaining-E.bonusCredits),remaining:E.remaining,isPremium:E.isPremium,canAnalyze:E.allowed,bonusCredits:E.bonusCredits})};T.useEffect(()=>{en.auth.getSession().then(({data:{session:S}})=>{o(S),r((S==null?void 0:S.user)??null),u(!1)});const{data:{subscription:E}}=en.auth.onAuthStateChange((S,k)=>{o(k),r((k==null?void 0:k.user)??null),u(!1)});return()=>E.unsubscribe()},[]),T.useEffect(()=>{p()},[t]);const g=async(E,S)=>{const{error:k}=await en.auth.signInWithPassword({email:E,password:S});return{error:k}},v=async(E,S)=>{const{error:k}=await en.auth.signUp({email:E,password:S});return{error:k}},_=async()=>{await en.auth.signOut(),r(null),o(null),d(null)};return y.jsx(M2.Provider,{value:{user:t,session:i,loading:a,usage:h,refreshUsage:p,signIn:g,signUp:v,signOut:_},children:e})}function $a(){const e=T.useContext(M2);if(e===void 0)throw new Error("useAuth must be used within an AuthProvider");return e}function Lb(){const e=tn(),{user:t,usage:r,signOut:i}=$a(),o=async()=>{await i(),e("/login")};return y.jsxs("div",{className:"home-page",children:[y.jsxs("header",{className:"home-header",children:[y.jsx("h1",{className:"home-logo",children:"GaitKnee-View"}),y.jsxs("div",{className:"home-tagline",children:[y.jsx("span",{className:"tagline-main",children:"Lateral Thrust Analyzer"}),y.jsx("span",{className:"tagline-sub",children:""})]})]}),y.jsxs("main",{className:"home-main",children:[y.jsxs("div",{className:"usage-card",children:[y.jsxs("div",{className:"usage-header",children:[y.jsx("span",{className:"usage-label",children:" "}),(r==null?void 0:r.isPremium)&&y.jsx("span",{className:"premium-badge",children:" "})]}),y.jsx("div",{className:"usage-display",children:r!=null&&r.isPremium?y.jsx("span",{className:"usage-unlimited",children:""}):y.jsxs(y.Fragment,{children:[y.jsx("span",{className:"usage-remaining-count",children:(r==null?void 0:r.remaining)||Ca}),y.jsx("span",{className:"usage-unit",children:""})]})}),!(r!=null&&r.isPremium)&&y.jsxs(y.Fragment,{children:[y.jsxs("div",{className:"usage-info-text",children:["",Ca,"  : ",(r==null?void 0:r.count)||0,""]}),y.jsx("button",{className:"purchase-credits-btn",onClick:()=>e("/purchase"),children:"+ "})]})]}),y.jsxs("div",{className:"action-cards",children:[y.jsxs("button",{className:"action-card action-card-primary",onClick:()=>e("/record"),children:[y.jsx("div",{className:"action-icon",children:y.jsxs("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"currentColor",children:[y.jsx("path",{d:"M12 15.2C13.767 15.2 15.2 13.767 15.2 12C15.2 10.233 13.767 8.8 12 8.8C10.233 8.8 8.8 10.233 8.8 12C8.8 13.767 10.233 15.2 12 15.2Z"}),y.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4 4.5C4 3.67157 4.67157 3 5.5 3H8.5C9.32843 3 10 3.67157 10 4.5V5H14V4.5C14 3.67157 14.6716 3 15.5 3H18.5C19.3284 3 20 3.67157 20 4.5V7H20.5C21.3284 7 22 7.67157 22 8.5V19.5C22 20.3284 21.3284 21 20.5 21H3.5C2.67157 21 2 20.3284 2 19.5V8.5C2 7.67157 2.67157 7 3.5 7H4V4.5ZM12 17C14.7614 17 17 14.7614 17 12C17 9.23858 14.7614 7 12 7C9.23858 7 7 9.23858 7 12C7 14.7614 9.23858 17 12 17Z"})]})}),y.jsxs("div",{className:"action-text",children:[y.jsx("span",{className:"action-title",children:""}),y.jsx("span",{className:"action-desc",children:""})]}),y.jsx("div",{className:"action-arrow",children:""})]}),y.jsxs("button",{className:"action-card",onClick:()=>e("/upload"),children:[y.jsx("div",{className:"action-icon",children:y.jsxs("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"currentColor",children:[y.jsx("path",{d:"M14 2H6C4.9 2 4 2.9 4 4V20C4 21.1 4.9 22 6 22H18C19.1 22 20 21.1 20 20V8L14 2ZM18 20H6V4H13V9H18V20Z"}),y.jsx("path",{d:"M12 11L8 15H10.5V19H13.5V15H16L12 11Z"})]})}),y.jsxs("div",{className:"action-text",children:[y.jsx("span",{className:"action-title",children:""}),y.jsx("span",{className:"action-desc",children:""})]}),y.jsx("div",{className:"action-arrow",children:""})]}),y.jsxs("button",{className:"action-card",onClick:()=>e("/history"),children:[y.jsx("div",{className:"action-icon",children:y.jsxs("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"currentColor",children:[y.jsx("path",{d:"M19 4H5C3.89543 4 3 4.89543 3 6V20C3 21.1046 3.89543 22 5 22H19C20.1046 22 21 21.1046 21 20V6C21 4.89543 20.1046 4 19 4ZM5 6H19V8H5V6ZM5 10H19V20H5V10Z"}),y.jsx("path",{d:"M7 12H11V14H7V12ZM7 16H17V18H7V16Z"})]})}),y.jsxs("div",{className:"action-text",children:[y.jsx("span",{className:"action-title",children:""}),y.jsx("span",{className:"action-desc",children:""})]}),y.jsx("div",{className:"action-arrow",children:""})]})]}),y.jsxs("div",{className:"user-info",children:[y.jsx("span",{className:"user-email",children:t==null?void 0:t.email}),y.jsx("button",{className:"signout-btn",onClick:o,children:""})]})]}),y.jsx("footer",{className:"home-footer",children:y.jsx("p",{className:"disclaimer",children:" "})})]})}function Db(e={}){const[t,r]=T.useState(null),[i,o]=T.useState(!1),[a,u]=T.useState(null),[h,d]=T.useState(e.facingMode||"environment"),p=T.useRef(null),g=T.useRef(!0),v=T.useRef(null),_=T.useCallback(()=>{v.current&&(v.current.getTracks().forEach(k=>k.stop()),v.current=null,r(null),o(!1))},[]),E=T.useCallback(async()=>{try{u(null),o(!1),v.current&&v.current.getTracks().forEach(P=>P.stop());const k={video:{facingMode:h,width:{ideal:1280},height:{ideal:720},frameRate:{ideal:30}},audio:!1},x=await navigator.mediaDevices.getUserMedia(k);if(!g.current){x.getTracks().forEach(P=>P.stop());return}v.current=x,r(x),p.current&&(p.current.srcObject=x,p.current.onloadedmetadata=async()=>{if(!(!g.current||!p.current))try{await p.current.play(),g.current&&o(!0)}catch(P){if(P instanceof Error&&P.name==="AbortError"){console.log("Play was aborted - this is expected during navigation");return}throw P}})}catch(k){if(!g.current)return;const x=k instanceof Error?k:new Error("");u(x),console.error("Camera error:",k)}},[h]),S=T.useCallback(async()=>{d(h==="user"?"environment":"user")},[h]);return T.useEffect(()=>{v.current&&E()},[h]),T.useEffect(()=>(g.current=!0,()=>{g.current=!1,v.current&&(v.current.getTracks().forEach(k=>k.stop()),v.current=null)}),[]),{videoRef:p,stream:t,isReady:i,error:a,facingMode:h,switchCamera:S,startCamera:E,stopCamera:_}}function Ub(){const[e,t]=T.useState(!1),[r,i]=T.useState(0),[o,a]=T.useState([]),u=T.useRef(null),h=T.useRef(0),d=T.useRef([]),p=T.useCallback(()=>{a([]),d.current=[],i(0),h.current=performance.now(),t(!0),u.current=window.setInterval(()=>{const _=(performance.now()-h.current)/1e3;i(_)},100)},[]),g=T.useCallback(()=>{t(!1),u.current&&(clearInterval(u.current),u.current=null);const _=[...d.current];return a(_),_},[]),v=T.useCallback((_,E)=>{if(!e)return;const S={timestamp:performance.now()-h.current,landmarks:_,worldLandmarks:E};d.current.push(S)},[e]);return{isRecording:e,duration:r,frames:o,startRecording:p,stopRecording:g,addFrame:v}}var ii=typeof self<"u"?self:{};function Hs(){throw Error("Invalid UTF8")}function D1(e,t){return t=String.fromCharCode.apply(null,t),e==null?t:e+t}let fu,Dd;const Fb=typeof TextDecoder<"u";let Mb;const $b=typeof TextEncoder<"u";function $2(e){if($b)e=(Mb||(Mb=new TextEncoder)).encode(e);else{let r=0;const i=new Uint8Array(3*e.length);for(let o=0;o<e.length;o++){var t=e.charCodeAt(o);if(t<128)i[r++]=t;else{if(t<2048)i[r++]=t>>6|192;else{if(t>=55296&&t<=57343){if(t<=56319&&o<e.length){const a=e.charCodeAt(++o);if(a>=56320&&a<=57343){t=1024*(t-55296)+a-56320+65536,i[r++]=t>>18|240,i[r++]=t>>12&63|128,i[r++]=t>>6&63|128,i[r++]=63&t|128;continue}o--}t=65533}i[r++]=t>>12|224,i[r++]=t>>6&63|128}i[r++]=63&t|128}}e=r===i.length?i:i.subarray(0,r)}return e}var Zf,zu;e:{for(var U1=["CLOSURE_FLAGS"],Ud=ii,Fd=0;Fd<U1.length;Fd++)if((Ud=Ud[U1[Fd]])==null){zu=null;break e}zu=Ud}var Pa,F1=zu&&zu[610401301];Zf=F1!=null&&F1;const M1=ii.navigator;function vf(e){return!!Zf&&!!Pa&&Pa.brands.some((({brand:t})=>t&&t.indexOf(e)!=-1))}function Lr(e){var t;return(t=ii.navigator)&&(t=t.userAgent)||(t=""),t.indexOf(e)!=-1}function _s(){return!!Zf&&!!Pa&&Pa.brands.length>0}function Md(){return _s()?vf("Chromium"):(Lr("Chrome")||Lr("CriOS"))&&!(!_s()&&Lr("Edge"))||Lr("Silk")}function ep(e){return ep[" "](e),e}Pa=M1&&M1.userAgentData||null,ep[" "]=function(){};var Bb=!_s()&&(Lr("Trident")||Lr("MSIE"));!Lr("Android")||Md(),Md(),Lr("Safari")&&(Md()||!_s()&&Lr("Coast")||!_s()&&Lr("Opera")||!_s()&&Lr("Edge")||(_s()?vf("Microsoft Edge"):Lr("Edg/"))||_s()&&vf("Opera"));var B2={},Ea=null;function zb(e){const t=e.length;let r=3*t/4;r%3?r=Math.floor(r):"=.".indexOf(e[t-1])!=-1&&(r="=.".indexOf(e[t-2])!=-1?r-2:r-1);const i=new Uint8Array(r);let o=0;return(function(a,u){function h(p){for(;d<a.length;){const g=a.charAt(d++),v=Ea[g];if(v!=null)return v;if(!/^[\s\xa0]*$/.test(g))throw Error("Unknown base64 encoding at char: "+g)}return p}z2();let d=0;for(;;){const p=h(-1),g=h(0),v=h(64),_=h(64);if(_===64&&p===-1)break;u(p<<2|g>>4),v!=64&&(u(g<<4&240|v>>2),_!=64&&u(v<<6&192|_))}})(e,(function(a){i[o++]=a})),o!==r?i.subarray(0,o):i}function z2(){if(!Ea){Ea={};var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),t=["+/=","+/","-_=","-_.","-_"];for(let r=0;r<5;r++){const i=e.concat(t[r].split(""));B2[r]=i;for(let o=0;o<i.length;o++){const a=i[o];Ea[a]===void 0&&(Ea[a]=o)}}}}var V2=typeof Uint8Array<"u",W2=!Bb&&typeof btoa=="function";function $1(e){if(!W2){var t;t===void 0&&(t=0),z2(),t=B2[t];var r=Array(Math.floor(e.length/3)),i=t[64]||"";let d=0,p=0;for(;d<e.length-2;d+=3){var o=e[d],a=e[d+1],u=e[d+2],h=t[o>>2];o=t[(3&o)<<4|a>>4],a=t[(15&a)<<2|u>>6],u=t[63&u],r[p++]=h+o+a+u}switch(h=0,u=i,e.length-d){case 2:u=t[(15&(h=e[d+1]))<<2]||i;case 1:e=e[d],r[p]=t[e>>2]+t[(3&e)<<4|h>>4]+u+i}return r.join("")}for(t="",r=0,i=e.length-10240;r<i;)t+=String.fromCharCode.apply(null,e.subarray(r,r+=10240));return t+=String.fromCharCode.apply(null,r?e.subarray(r):e),btoa(t)}const B1=/[-_.]/g,Vb={"-":"+",_:"/",".":"="};function Wb(e){return Vb[e]||""}function K2(e){if(!W2)return zb(e);B1.test(e)&&(e=e.replace(B1,Wb)),e=atob(e);const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}function Ba(e){return V2&&e!=null&&e instanceof Uint8Array}var Yi={};function oi(){return Kb||(Kb=new Bn(null,Yi))}function tp(e){H2(Yi);var t=e.g;return(t=t==null||Ba(t)?t:typeof t=="string"?K2(t):null)==null?t:e.g=t}var Bn=class{h(){return new Uint8Array(tp(this)||0)}constructor(e,t){if(H2(t),this.g=e,e!=null&&e.length===0)throw Error("ByteString should be constructed with non-empty values")}};let Kb,Hb;function H2(e){if(e!==Yi)throw Error("illegal external caller")}function G2(e,t){e.__closure__error__context__984382||(e.__closure__error__context__984382={}),e.__closure__error__context__984382.severity=t}function wf(e){return G2(e=Error(e),"warning"),e}var ic=typeof Symbol=="function"&&typeof Symbol()=="symbol",Gb=new Set;function za(e,t,r=!1,i=!1){return e=typeof Symbol=="function"&&typeof Symbol()=="symbol"?i&&Symbol.for&&e?Symbol.for(e):e!=null?Symbol(e):Symbol():t,r&&Gb.add(e),e}var qb=za("jas",void 0,!0,!0),z1=za(void 0,"0di"),$d=za(void 0,"2ex"),fa=za(void 0,"1oa",!0),Qi=za(void 0,Symbol(),!0);const le=ic?qb:"Ga",q2={Ga:{value:0,configurable:!0,writable:!0,enumerable:!1}},J2=Object.defineProperties;function oc(e,t){ic||le in e||J2(e,q2),e[le]|=t}function mt(e,t){ic||le in e||J2(e,q2),e[le]=t}function fo(e){return oc(e,34),e}function Jb(e,t){mt(t,-30975&(0|e))}function _f(e,t){mt(t,-30941&(34|e))}function rp(){return typeof BigInt=="function"}function ur(e){return Array.prototype.slice.call(e)}var np,Va={},X2={};function V1(e){return!(!e||typeof e!="object"||e.Ia!==X2)}function sp(e){return e!==null&&typeof e=="object"&&!Array.isArray(e)&&e.constructor===Object}function ip(e,t){if(e!=null){if(typeof e=="string")e=e?new Bn(e,Yi):oi();else if(e.constructor!==Bn)if(Ba(e))e=e.length?new Bn(new Uint8Array(e),Yi):oi();else{if(!t)throw Error();e=void 0}}return e}function Vu(e){return!(!Array.isArray(e)||e.length)&&!!(1&(0|e[le]))}const W1=[];function As(e){if(2&e)throw Error()}mt(W1,55),np=Object.freeze(W1);class Wu{constructor(t,r,i){this.l=0,this.g=t,this.h=r,this.m=i}next(){if(this.l<this.g.length){const t=this.g[this.l++];return{done:!1,value:this.h?this.h.call(this.m,t):t}}return{done:!0,value:void 0}}[Symbol.iterator](){return new Wu(this.g,this.h,this.m)}}function op(e){return Qi?e[Qi]:void 0}var Xb=Object.freeze({});function ac(e){return e.Qa=!0,e}var Yb=ac((e=>typeof e=="number")),K1=ac((e=>typeof e=="string")),Qb=ac((e=>typeof e=="boolean")),lc=typeof ii.BigInt=="function"&&typeof ii.BigInt(0)=="bigint",Ef=ac((e=>lc?e>=ex&&e<=rx:e[0]==="-"?H1(e,Zb):H1(e,tx)));const Zb=Number.MIN_SAFE_INTEGER.toString(),ex=lc?BigInt(Number.MIN_SAFE_INTEGER):void 0,tx=Number.MAX_SAFE_INTEGER.toString(),rx=lc?BigInt(Number.MAX_SAFE_INTEGER):void 0;function H1(e,t){if(e.length>t.length)return!1;if(e.length<t.length||e===t)return!0;for(let r=0;r<e.length;r++){const i=e[r],o=t[r];if(i>o)return!1;if(i<o)return!0}}const nx=typeof Uint8Array.prototype.slice=="function";let Y2,De=0,nt=0;function G1(e){const t=e>>>0;De=t,nt=(e-t)/4294967296>>>0}function Zi(e){if(e<0){G1(-e);const[t,r]=cp(De,nt);De=t>>>0,nt=r>>>0}else G1(e)}function ap(e){const t=Y2||(Y2=new DataView(new ArrayBuffer(8)));t.setFloat32(0,+e,!0),nt=0,De=t.getUint32(0,!0)}function lp(e,t){const r=4294967296*t+(e>>>0);return Number.isSafeInteger(r)?r:ja(e,t)}function up(e,t){const r=2147483648&t;return r&&(t=~t>>>0,(e=1+~e>>>0)==0&&(t=t+1>>>0)),typeof(e=lp(e,t))=="number"?r?-e:e:r?"-"+e:e}function ja(e,t){if(e>>>=0,(t>>>=0)<=2097151)var r=""+(4294967296*t+e);else rp()?r=""+(BigInt(t)<<BigInt(32)|BigInt(e)):(e=(16777215&e)+6777216*(r=16777215&(e>>>24|t<<8))+6710656*(t=t>>16&65535),r+=8147497*t,t*=2,e>=1e7&&(r+=e/1e7>>>0,e%=1e7),r>=1e7&&(t+=r/1e7>>>0,r%=1e7),r=t+q1(r)+q1(e));return r}function q1(e){return e=String(e),"0000000".slice(e.length)+e}function uc(e){if(e.length<16)Zi(Number(e));else if(rp())e=BigInt(e),De=Number(e&BigInt(4294967295))>>>0,nt=Number(e>>BigInt(32)&BigInt(4294967295));else{const t=+(e[0]==="-");nt=De=0;const r=e.length;for(let i=t,o=(r-t)%6+t;o<=r;i=o,o+=6){const a=Number(e.slice(i,o));nt*=1e6,De=1e6*De+a,De>=4294967296&&(nt+=Math.trunc(De/4294967296),nt>>>=0,De>>>=0)}if(t){const[i,o]=cp(De,nt);De=i,nt=o}}}function cp(e,t){return t=~t,e?e=1+~e:t+=1,[e,t]}const hp=typeof BigInt=="function"?BigInt.asIntN:void 0,sx=typeof BigInt=="function"?BigInt.asUintN:void 0,Wi=Number.isSafeInteger,cc=Number.isFinite,Ku=Math.trunc;function Cs(e){return e==null||typeof e=="number"?e:e==="NaN"||e==="Infinity"||e==="-Infinity"?Number(e):void 0}function Q2(e){return e==null||typeof e=="boolean"?e:typeof e=="number"?!!e:void 0}const ix=/^-?([1-9][0-9]*|0)(\.[0-9]+)?$/;function hc(e){switch(typeof e){case"bigint":return!0;case"number":return cc(e);case"string":return ix.test(e);default:return!1}}function po(e){if(e==null)return e;if(typeof e=="string"&&e)e=+e;else if(typeof e!="number")return;return cc(e)?0|e:void 0}function Z2(e){if(e==null)return e;if(typeof e=="string"&&e)e=+e;else if(typeof e!="number")return;return cc(e)?e>>>0:void 0}function J1(e){if(e[0]==="-")return!1;const t=e.length;return t<20||t===20&&Number(e.substring(0,6))<184467}function dp(e){return e=Ku(e),Wi(e)||(Zi(e),e=up(De,nt)),e}function fp(e){var t=Ku(Number(e));if(Wi(t))return String(t);if((t=e.indexOf("."))!==-1&&(e=e.substring(0,t)),t=e.length,!(e[0]==="-"?t<20||t===20&&Number(e.substring(0,7))>-922337:t<19||t===19&&Number(e.substring(0,6))<922337))if(uc(e),e=De,2147483648&(t=nt))if(rp())e=""+(BigInt(0|t)<<BigInt(32)|BigInt(e>>>0));else{const[r,i]=cp(e,t);e="-"+ja(r,i)}else e=ja(e,t);return e}function Hu(e){return e==null?e:typeof e=="bigint"?(Ef(e)?e=Number(e):(e=hp(64,e),e=Ef(e)?Number(e):String(e)),e):hc(e)?typeof e=="number"?dp(e):fp(e):void 0}function ox(e){if(e==null)return e;var t=typeof e;if(t==="bigint")return String(sx(64,e));if(hc(e)){if(t==="string")return t=Ku(Number(e)),Wi(t)&&t>=0?e=String(t):((t=e.indexOf("."))!==-1&&(e=e.substring(0,t)),J1(e)||(uc(e),e=ja(De,nt))),e;if(t==="number")return(e=Ku(e))>=0&&Wi(e)?e:(function(r){if(r<0){Zi(r);var i=ja(De,nt);return r=Number(i),Wi(r)?r:i}return J1(i=String(r))?i:(Zi(r),lp(De,nt))})(e)}}function ew(e){if(typeof e!="string")throw Error();return e}function mo(e){if(e!=null&&typeof e!="string")throw Error();return e}function eo(e){return e==null||typeof e=="string"?e:void 0}function pp(e,t,r,i){if(e!=null&&typeof e=="object"&&e.W===Va)return e;if(!Array.isArray(e))return r?2&i?((e=t[z1])||(fo((e=new t).u),e=t[z1]=e),t=e):t=new t:t=void 0,t;let o=r=0|e[le];return o===0&&(o|=32&i),o|=2&i,o!==r&&mt(e,o),new t(e)}function ax(e,t,r){if(t)e:{if(!hc(t=e))throw wf("int64");switch(typeof t){case"string":t=fp(t);break e;case"bigint":if(e=t=hp(64,t),K1(e)){if(!/^\s*(?:-?[1-9]\d*|0)?\s*$/.test(e))throw Error(String(e))}else if(Yb(e)&&!Number.isSafeInteger(e))throw Error(String(e));t=lc?BigInt(t):Qb(t)?t?"1":"0":K1(t)?t.trim()||"0":String(t);break e;default:t=dp(t)}}else t=Hu(e);return typeof(r=(e=t)==null?r?0:void 0:e)=="string"&&Wi(t=+r)?t:r}const lx={};let ux=(function(){try{return ep(new class extends Map{constructor(){super()}}),!1}catch{return!0}})();class Bd{constructor(){this.g=new Map}get(t){return this.g.get(t)}set(t,r){return this.g.set(t,r),this.size=this.g.size,this}delete(t){return t=this.g.delete(t),this.size=this.g.size,t}clear(){this.g.clear(),this.size=this.g.size}has(t){return this.g.has(t)}entries(){return this.g.entries()}keys(){return this.g.keys()}values(){return this.g.values()}forEach(t,r){return this.g.forEach(t,r)}[Symbol.iterator](){return this.entries()}}const cx=ux?(Object.setPrototypeOf(Bd.prototype,Map.prototype),Object.defineProperties(Bd.prototype,{size:{value:0,configurable:!0,enumerable:!0,writable:!0}}),Bd):class extends Map{constructor(){super()}};function X1(e){return e}function zd(e){if(2&e.L)throw Error("Cannot mutate an immutable Map")}var Ur=class extends cx{constructor(e,t,r=X1,i=X1){super();let o=0|e[le];o|=64,mt(e,o),this.L=o,this.S=t,this.R=r,this.Y=this.S?hx:i;for(let a=0;a<e.length;a++){const u=e[a],h=r(u[0],!1,!0);let d=u[1];t?d===void 0&&(d=null):d=i(u[1],!1,!0,void 0,void 0,o),super.set(h,d)}}na(e=Y1){if(this.size!==0)return this.X(e)}X(e=Y1){const t=[],r=super.entries();for(var i;!(i=r.next()).done;)(i=i.value)[0]=e(i[0]),i[1]=e(i[1]),t.push(i);return t}clear(){zd(this),super.clear()}delete(e){return zd(this),super.delete(this.R(e,!0,!1))}entries(){var e=this.ma();return new Wu(e,dx,this)}keys(){return this.Ha()}values(){var e=this.ma();return new Wu(e,Ur.prototype.get,this)}forEach(e,t){super.forEach(((r,i)=>{e.call(t,this.get(i),i,this)}))}set(e,t){return zd(this),(e=this.R(e,!0,!1))==null?this:t==null?(super.delete(e),this):super.set(e,this.Y(t,!0,!0,this.S,!1,this.L))}Na(e){const t=this.R(e[0],!1,!0);e=e[1],e=this.S?e===void 0?null:e:this.Y(e,!1,!0,void 0,!1,this.L),super.set(t,e)}has(e){return super.has(this.R(e,!1,!1))}get(e){e=this.R(e,!1,!1);const t=super.get(e);if(t!==void 0){var r=this.S;return r?((r=this.Y(t,!1,!0,r,this.ra,this.L))!==t&&super.set(e,r),r):t}}ma(){return Array.from(super.keys())}Ha(){return super.keys()}[Symbol.iterator](){return this.entries()}};function hx(e,t,r,i,o,a){return e=pp(e,i,r,a),o&&(e=fc(e)),e}function Y1(e){return e}function dx(e){return[e,this.get(e)]}let fx,tw,px;function Q1(){return fx||(fx=new Ur(fo([]),void 0,void 0,void 0,lx))}function mp(e,t,r,i,o){if(e!=null){if(Array.isArray(e))e=Vu(e)?void 0:o&&2&(0|e[le])?e:gp(e,t,r,i!==void 0,o);else if(sp(e)){const a={};for(let u in e)a[u]=mp(e[u],t,r,i,o);e=a}else e=t(e,i);return e}}function gp(e,t,r,i,o){const a=i||r?0|e[le]:0,u=i?!!(32&a):void 0;i=ur(e);for(let h=0;h<i.length;h++)i[h]=mp(i[h],t,r,u,o);return r&&((e=op(e))&&(i[Qi]=ur(e)),r(a,i)),i}function mx(e){return mp(e,rw,void 0,void 0,!1)}function rw(e){return e.W===Va?e.toJSON():e instanceof Ur?e.na(mx):(function(t){switch(typeof t){case"number":return isFinite(t)?t:String(t);case"bigint":return Ef(t)?Number(t):String(t);case"boolean":return t?1:0;case"object":if(t)if(Array.isArray(t)){if(Vu(t))return}else{if(Ba(t))return $1(t);if(t instanceof Bn){const r=t.g;return r==null?"":typeof r=="string"?r:t.g=$1(r)}if(t instanceof Ur)return t.na()}}return t})(e)}function nw(e){return gp(e,rw,void 0,void 0,!1)}function ks(e,t,r){return e=sw(e,t[0],t[1],r?1:2),t!==tw&&r&&oc(e,16384),e}function sw(e,t,r,i){if(e==null){var o=96;r?(e=[r],o|=512):e=[],t&&(o=-33521665&o|(1023&t)<<15)}else{if(!Array.isArray(e))throw Error("narr");if(2048&(o=0|e[le]))throw Error("farr");if(64&o)return e;if(i===1||i===2||(o|=64),r&&(o|=512,r!==e[0]))throw Error("mid");e:{if(i=(r=e).length){const a=i-1;if(sp(r[a])){if((t=a-(512&(o|=256)?0:-1))>=1024)throw Error("pvtlmt");o=-33521665&o|(1023&t)<<15;break e}}if(t){if((t=Math.max(t,i-(512&o?0:-1)))>1024)throw Error("spvt");o=-33521665&o|(1023&t)<<15}}}return mt(e,o),e}function Sf(e,t,r=_f){if(e!=null){if(V2&&e instanceof Uint8Array)return t?e:new Uint8Array(e);if(Array.isArray(e)){var i=0|e[le];return 2&i?e:(t&&(t=i===0||!!(32&i)&&!(64&i||!(16&i))),t?(mt(e,-12293&(34|i)),e):gp(e,Sf,4&i?_f:r,!0,!0))}return e.W===Va?e=2&(i=0|(r=e.u)[le])?e:new e.constructor(dc(r,i,!0)):e instanceof Ur&&!(2&e.L)&&(r=fo(e.X(Sf)),e=new Ur(r,e.S,e.R,e.Y)),e}}function dc(e,t,r){const i=r||2&t?_f:Jb,o=!!(32&t);return e=(function(a,u,h){const d=ur(a);var p=d.length;const g=256&u?d[p-1]:void 0;for(p+=g?-1:0,u=512&u?1:0;u<p;u++)d[u]=h(d[u]);if(g){u=d[u]={};for(const v in g)u[v]=h(g[v])}return(a=op(a))&&(d[Qi]=ur(a)),d})(e,t,(a=>Sf(a,o,i))),oc(e,32|(r?2:0)),e}function fc(e){const t=e.u,r=0|t[le];return 2&r?new e.constructor(dc(t,r,!1)):e}function to(e,t){return qn(e=e.u,0|e[le],t)}function qn(e,t,r,i){if(r===-1)return null;var o=r+(512&t?0:-1);const a=e.length-1;return o>=a&&256&t?e[a][r]:i&&256&t&&(t=e[a][r])!=null?(e[o]!=null&&$d!=null&&((o=(e=Hb??(Hb={}))[$d]||0)>=4||(e[$d]=o+1,G2(e=Error(),"incident"),(function(u){ii.setTimeout((()=>{throw u}),0)})(e))),t):o<=a?e[o]:void 0}function Me(e,t,r){const i=e.u;let o=0|i[le];return As(o),et(i,o,t,r),e}function et(e,t,r,i){const o=512&t?0:-1,a=r+o;var u=e.length-1;return a>=u&&256&t?(e[u][r]=i,t):a<=u?(e[a]=i,256&t&&r in(e=e[u])&&delete e[r],t):(i!==void 0&&(r>=(u=t>>15&1023||536870912)?i!=null&&(e[u+o]={[r]:i},mt(e,t|=256)):e[a]=i),t)}function Tu(e,t){let r=0|(e=e.u)[le];const i=qn(e,r,t),o=Cs(i);return o!=null&&o!==i&&et(e,r,t,o),o}function iw(e){let t=0|(e=e.u)[le];const r=qn(e,t,1),i=ip(r,!0);return i!=null&&i!==r&&et(e,t,1,i),i}function ei(){return Xb===void 0?2:4}function ti(e,t,r,i,o){const a=e.u,u=2&(e=0|a[le])?1:i;o=!!o;let h=0|(i=yp(a,e,t))[le];if(!(4&h)){4&h&&(i=ur(i),h=zn(h,e),e=et(a,e,t,i));let d=0,p=0;for(;d<i.length;d++){const g=r(i[d]);g!=null&&(i[p++]=g)}p<d&&(i.length=p),h=vp(h,e),r=-4097&(20|h),h=r&=-8193,mt(i,h),2&h&&Object.freeze(i)}return u===1||u===4&&32&h?Mn(h)||(o=h,h|=2,h!==o&&mt(i,h),Object.freeze(i)):(u===2&&Mn(h)&&(i=ur(i),h=zn(h,e),h=bs(h,e,o),mt(i,h),e=et(a,e,t,i)),Mn(h)||(t=h,h=bs(h,e,o),h!==t&&mt(i,h))),i}function yp(e,t,r,i){return e=qn(e,t,r,i),Array.isArray(e)?e:np}function vp(e,t){return e===0&&(e=zn(e,t)),1|e}function Mn(e){return!!(2&e)&&!!(4&e)||!!(2048&e)}function ow(e){e=ur(e);for(let t=0;t<e.length;t++){const r=e[t]=ur(e[t]);Array.isArray(r[1])&&(r[1]=fo(r[1]))}return e}function kf(e,t,r,i){let o=0|(e=e.u)[le];As(o),et(e,o,t,(i==="0"?Number(r)===0:r===i)?void 0:r)}function go(e,t,r,i,o){As(t);var a=!(!(64&t)&&16384&t);const u=(o=yp(e,t,r,o))!==np;if(a||!u){let h=a=u?0|o[le]:0;(!u||2&h||Mn(h)||4&h&&!(32&h))&&(o=ur(o),h=zn(h,t),t=et(e,t,r,o)),h=-13&vp(h,t),h=bs(i?-17&h:16|h,t,!0),h!==a&&mt(o,h)}return o}function Vd(e,t){var r=Jw;return _p(wp(e=e.u),e,0|e[le],r)===t?t:-1}function wp(e){if(ic)return e[fa]??(e[fa]=new Map);if(fa in e)return e[fa];const t=new Map;return Object.defineProperty(e,fa,{value:t}),t}function aw(e,t,r,i){const o=wp(e),a=_p(o,e,t,r);return a!==i&&(a&&(t=et(e,t,a)),o.set(r,i)),t}function _p(e,t,r,i){let o=e.get(i);if(o!=null)return o;o=0;for(let a=0;a<i.length;a++){const u=i[a];qn(t,r,u)!=null&&(o!==0&&(r=et(t,r,o)),o=u)}return e.set(i,o),o}function Ep(e,t,r,i){let o,a=0|e[le];if((i=qn(e,a,r,i))!=null&&i.W===Va)return(t=fc(i))!==i&&et(e,a,r,t),t.u;if(Array.isArray(i)){const u=0|i[le];o=2&u?ks(dc(i,u,!1),t,!0):64&u?i:ks(o,t,!0)}else o=ks(void 0,t,!0);return o!==i&&et(e,a,r,o),o}function lw(e,t,r,i){let o=0|(e=e.u)[le];return(t=pp(i=qn(e,o,r,i),t,!1,o))!==i&&t!=null&&et(e,o,r,t),t}function Te(e,t,r,i=!1){if((t=lw(e,t,r,i))==null)return t;if(!(2&(i=0|(e=e.u)[le]))){const o=fc(t);o!==t&&et(e,i,r,t=o)}return t}function uw(e,t,r,i,o,a,u){e=e.u;var h=!!(2&t);const d=h?1:o;a=!!a,u&&(u=!h);var p=0|(o=yp(e,t,i))[le];if(!(h=!!(4&p))){var g=o,v=t;const _=!!(2&(p=vp(p,t)));_&&(v|=2);let E=!_,S=!0,k=0,x=0;for(;k<g.length;k++){const P=pp(g[k],r,!1,v);if(P instanceof r){if(!_){const L=!!(2&(0|P.u[le]));E&&(E=!L),S&&(S=L)}g[x++]=P}}x<k&&(g.length=x),p|=4,p=S?16|p:-17&p,mt(g,p=E?8|p:-9&p),_&&Object.freeze(g)}if(u&&!(8&p||!o.length&&(d===1||d===4&&32&p))){for(Mn(p)&&(o=ur(o),p=zn(p,t),t=et(e,t,i,o)),r=o,u=p,g=0;g<r.length;g++)(p=r[g])!==(v=fc(p))&&(r[g]=v);u|=8,mt(r,u=r.length?-17&u:16|u),p=u}return d===1||d===4&&32&p?Mn(p)||(t=p,(p|=!o.length||16&p&&(!h||32&p)?2:2048)!==t&&mt(o,p),Object.freeze(o)):(d===2&&Mn(p)&&(mt(o=ur(o),p=bs(p=zn(p,t),t,a)),t=et(e,t,i,o)),Mn(p)||(i=p,(p=bs(p,t,a))!==i&&mt(o,p))),o}function Wn(e,t,r){const i=0|e.u[le];return uw(e,i,t,r,ei(),!1,!(2&i))}function he(e,t,r,i){return i==null&&(i=void 0),Me(e,r,i)}function ka(e,t,r,i){i==null&&(i=void 0);e:{let o=0|(e=e.u)[le];if(As(o),i==null){const a=wp(e);if(_p(a,e,o,r)!==t)break e;a.set(r,0)}else o=aw(e,o,r,t);et(e,o,t,i)}}function zn(e,t){return-2049&(e=32|(2&t?2|e:-3&e))}function bs(e,t,r){return 32&t&&r||(e&=-33),e}function Gu(e,t,r,i){const o=0|e.u[le];As(o),e=uw(e,o,r,t,2,!0),i=i??new r,e.push(i),e[le]=2&(0|i.u[le])?-9&e[le]:-17&e[le]}function Dr(e,t){return po(to(e,t))}function Fr(e,t){return eo(to(e,t))}function lt(e,t){return Tu(e,t)??0}function Oa(e,t,r){if(r!=null&&typeof r!="boolean")throw e=typeof r,Error(`Expected boolean but got ${e!="object"?e:r?Array.isArray(r)?"array":e:"null"}: ${r}`);Me(e,t,r)}function _n(e,t,r){if(r!=null){if(typeof r!="number"||!cc(r))throw wf("int32");r|=0}Me(e,t,r)}function oe(e,t,r){if(r!=null&&typeof r!="number")throw Error(`Value of float/double field must be a number, found ${typeof r}: ${r}`);Me(e,t,r)}function qu(e,t,r){{const u=e.u;let h=0|u[le];if(As(h),r==null)et(u,h,t);else{var i=e=0|r[le],o=Mn(e),a=o||Object.isFrozen(r);for(o||(e=0),a||(r=ur(r),i=0,e=bs(e=zn(e,h),h,!0),a=!1),e|=21,o=0;o<r.length;o++){const d=r[o],p=ew(d);Object.is(d,p)||(a&&(r=ur(r),i=0,e=bs(e=zn(e,h),h,!0),a=!1),r[o]=p)}e!==i&&(a&&(r=ur(r),e=bs(e=zn(e,h),h,!0)),mt(r,e)),et(u,h,t,r)}}}function pc(e,t,r){As(0|e.u[le]),ti(e,t,eo,2,!0).push(ew(r))}function cw(e,t){return Error(`Invalid wire type: ${e} (at position ${t})`)}function Sp(){return Error("Failed to read varint, encoding is invalid.")}function hw(e,t){return Error(`Tried to read past the end of the data ${t} > ${e}`)}function kp(e){if(typeof e=="string")return{buffer:K2(e),N:!1};if(Array.isArray(e))return{buffer:new Uint8Array(e),N:!1};if(e.constructor===Uint8Array)return{buffer:e,N:!1};if(e.constructor===ArrayBuffer)return{buffer:new Uint8Array(e),N:!1};if(e.constructor===Bn)return{buffer:tp(e)||new Uint8Array(0),N:!0};if(e instanceof Uint8Array)return{buffer:new Uint8Array(e.buffer,e.byteOffset,e.byteLength),N:!1};throw Error("Type not convertible to a Uint8Array, expected a Uint8Array, an ArrayBuffer, a base64 encoded string, a ByteString or an Array of numbers")}function bp(e,t){let r,i=0,o=0,a=0;const u=e.h;let h=e.g;do r=u[h++],i|=(127&r)<<a,a+=7;while(a<32&&128&r);for(a>32&&(o|=(127&r)>>4),a=3;a<32&&128&r;a+=7)r=u[h++],o|=(127&r)<<a;if(si(e,h),r<128)return t(i>>>0,o>>>0);throw Sp()}function xp(e){let t=0,r=e.g;const i=r+10,o=e.h;for(;r<i;){const a=o[r++];if(t|=a,(128&a)==0)return si(e,r),!!(127&t)}throw Sp()}function xs(e){const t=e.h;let r=e.g,i=t[r++],o=127&i;if(128&i&&(i=t[r++],o|=(127&i)<<7,128&i&&(i=t[r++],o|=(127&i)<<14,128&i&&(i=t[r++],o|=(127&i)<<21,128&i&&(i=t[r++],o|=i<<28,128&i&&128&t[r++]&&128&t[r++]&&128&t[r++]&&128&t[r++]&&128&t[r++])))))throw Sp();return si(e,r),o}function Kn(e){return xs(e)>>>0}function bf(e){var t=e.h;const r=e.g,i=t[r],o=t[r+1],a=t[r+2];return t=t[r+3],si(e,e.g+4),(i<<0|o<<8|a<<16|t<<24)>>>0}function xf(e){var t=bf(e);e=2*(t>>31)+1;const r=t>>>23&255;return t&=8388607,r==255?t?NaN:e*(1/0):r==0?1401298464324817e-60*e*t:e*Math.pow(2,r-150)*(t+8388608)}function gx(e){return xs(e)}function Wd(e,t,{ba:r=!1}={}){e.ba=r,t&&(t=kp(t),e.h=t.buffer,e.m=t.N,e.j=0,e.l=e.h.length,e.g=e.j)}function si(e,t){if(e.g=t,t>e.l)throw hw(e.l,t)}function dw(e,t){if(t<0)throw Error(`Tried to read a negative byte length: ${t}`);const r=e.g,i=r+t;if(i>e.l)throw hw(t,e.l-r);return e.g=i,r}function fw(e,t){if(t==0)return oi();var r=dw(e,t);return e.ba&&e.m?r=e.h.subarray(r,r+t):(e=e.h,r=r===(t=r+t)?new Uint8Array(0):nx?e.slice(r,t):new Uint8Array(e.subarray(r,t))),r.length==0?oi():new Bn(r,Yi)}Ur.prototype.toJSON=void 0,Ur.prototype.Ia=X2;var Z1=[];function pw(e){var t=e.g;if(t.g==t.l)return!1;e.l=e.g.g;var r=Kn(e.g);if(t=r>>>3,!((r&=7)>=0&&r<=5))throw cw(r,e.l);if(t<1)throw Error(`Invalid field number: ${t} (at position ${e.l})`);return e.m=t,e.h=r,!0}function Ru(e){switch(e.h){case 0:e.h!=0?Ru(e):xp(e.g);break;case 1:si(e=e.g,e.g+8);break;case 2:if(e.h!=2)Ru(e);else{var t=Kn(e.g);si(e=e.g,e.g+t)}break;case 5:si(e=e.g,e.g+4);break;case 3:for(t=e.m;;){if(!pw(e))throw Error("Unmatched start-group tag: stream EOF");if(e.h==4){if(e.m!=t)throw Error("Unmatched end-group tag");break}Ru(e)}break;default:throw cw(e.h,e.l)}}function Wa(e,t,r){const i=e.g.l,o=Kn(e.g),a=e.g.g+o;let u=a-i;if(u<=0&&(e.g.l=a,r(t,e,void 0,void 0,void 0),u=a-e.g.g),u)throw Error(`Message parsing ended unexpectedly. Expected to read ${o} bytes, instead read ${o-u} bytes, either the data ended unexpectedly or the message misreported its own length`);return e.g.g=a,e.g.l=i,t}function Tp(e){var t=Kn(e.g),r=dw(e=e.g,t);if(e=e.h,Fb){var i,o=e;(i=Dd)||(i=Dd=new TextDecoder("utf-8",{fatal:!0})),t=r+t,o=r===0&&t===o.length?o:o.subarray(r,t);try{var a=i.decode(o)}catch(h){if(fu===void 0){try{i.decode(new Uint8Array([128]))}catch{}try{i.decode(new Uint8Array([97])),fu=!0}catch{fu=!1}}throw!fu&&(Dd=void 0),h}}else{t=(a=r)+t,r=[];let h,d=null;for(;a<t;){var u=e[a++];u<128?r.push(u):u<224?a>=t?Hs():(h=e[a++],u<194||(192&h)!=128?(a--,Hs()):r.push((31&u)<<6|63&h)):u<240?a>=t-1?Hs():(h=e[a++],(192&h)!=128||u===224&&h<160||u===237&&h>=160||(192&(i=e[a++]))!=128?(a--,Hs()):r.push((15&u)<<12|(63&h)<<6|63&i)):u<=244?a>=t-2?Hs():(h=e[a++],(192&h)!=128||h-144+(u<<28)>>30!=0||(192&(i=e[a++]))!=128||(192&(o=e[a++]))!=128?(a--,Hs()):(u=(7&u)<<18|(63&h)<<12|(63&i)<<6|63&o,u-=65536,r.push(55296+(u>>10&1023),56320+(1023&u)))):Hs(),r.length>=8192&&(d=D1(d,r),r.length=0)}a=D1(d,r)}return a}function mw(e){const t=Kn(e.g);return fw(e.g,t)}function mc(e,t,r){var i=Kn(e.g);for(i=e.g.g+i;e.g.g<i;)r.push(t(e.g))}var pu=[];function yx(e){return e}let Ki;function rn(e,t,r){t.g?t.m(e,t.g,t.h,r):t.m(e,t.h,r)}var ne=class{constructor(e,t){this.u=sw(e,t)}toJSON(){const e=!Ki;try{return e&&(Ki=nw),gw(this)}finally{e&&(Ki=void 0)}}l(){var e=Zx;return e.g?e.l(this,e.g,e.h,!0):e.l(this,e.h,e.defaultValue,!0)}clone(){const e=this.u;return new this.constructor(dc(e,0|e[le],!1))}N(){return!!(2&(0|this.u[le]))}};function gw(e){var t=e.u;{t=(e=Ki(t))!==t;let p=e.length;if(p){var r=e[p-1],i=sp(r);i?p--:r=void 0;var o=e;if(i){e:{var a,u=r,h=!1;if(u)for(let g in u)isNaN(+g)?(a??(a={}))[g]=u[g]:(i=u[g],Array.isArray(i)&&(Vu(i)||V1(i)&&i.size===0)&&(i=null),i==null&&(h=!0),i!=null&&((a??(a={}))[g]=i));if(h||(a=u),a)for(let g in a){h=a;break e}h=null}u=h==null?r!=null:h!==r}for(;p>0&&((a=o[p-1])==null||Vu(a)||V1(a)&&a.size===0);p--)var d=!0;(o!==e||u||d)&&(t?(d||u||h)&&(o.length=p):o=Array.prototype.slice.call(o,0,p),h&&o.push(h)),d=o}else d=e}return d}function ey(e){return e?/^\d+$/.test(e)?(uc(e),new Tf(De,nt)):null:vx||(vx=new Tf(0,0))}ne.prototype.W=Va,ne.prototype.toString=function(){try{return Ki=yx,gw(this).toString()}finally{Ki=void 0}};var Tf=class{constructor(e,t){this.h=e>>>0,this.g=t>>>0}};let vx;function ty(e){return e?/^-?\d+$/.test(e)?(uc(e),new Rf(De,nt)):null:wx||(wx=new Rf(0,0))}var Rf=class{constructor(e,t){this.h=e>>>0,this.g=t>>>0}};let wx;function Hi(e,t,r){for(;r>0||t>127;)e.g.push(127&t|128),t=(t>>>7|r<<25)>>>0,r>>>=7;e.g.push(t)}function yo(e,t){for(;t>127;)e.g.push(127&t|128),t>>>=7;e.g.push(t)}function gc(e,t){if(t>=0)yo(e,t);else{for(let r=0;r<9;r++)e.g.push(127&t|128),t>>=7;e.g.push(1)}}function Na(e,t){e.g.push(t>>>0&255),e.g.push(t>>>8&255),e.g.push(t>>>16&255),e.g.push(t>>>24&255)}function ro(e,t){t.length!==0&&(e.l.push(t),e.h+=t.length)}function kr(e,t,r){yo(e.g,8*t+r)}function Rp(e,t){return kr(e,t,2),t=e.g.end(),ro(e,t),t.push(e.h),t}function Ap(e,t){var r=t.pop();for(r=e.h+e.g.length()-r;r>127;)t.push(127&r|128),r>>>=7,e.h++;t.push(r),e.h++}function yc(e,t,r){kr(e,t,2),yo(e.g,r.length),ro(e,e.g.end()),ro(e,r)}function Ju(e,t,r,i){r!=null&&(t=Rp(e,t),i(r,e),Ap(e,t))}function nn(){const e=class{constructor(){throw Error()}};return Object.setPrototypeOf(e,e.prototype),e}var Cp=nn(),yw=nn(),Pp=nn(),jp=nn(),vw=nn(),ww=nn(),Op=nn(),_w=nn(),Ew=nn(),vo=class{constructor(e,t,r){this.g=e,this.h=t,e=Cp,this.l=!!e&&r===e||!1}};function vc(e,t){return new vo(e,t,Cp)}function Sw(e,t,r,i,o){Ju(e,r,Tw(t,i),o)}const _x=vc((function(e,t,r,i,o){return e.h===2&&(Wa(e,Ep(t,i,r),o),!0)}),Sw),Ex=vc((function(e,t,r,i,o){return e.h===2&&(Wa(e,Ep(t,i,r,!0),o),!0)}),Sw);var wc=Symbol(),Np=Symbol(),ry=Symbol(),ny=Symbol();let kw,bw;function ai(e,t,r,i){var o=i[e];if(o)return o;(o={}).Pa=i,o.V=(function(v){switch(typeof v){case"boolean":return tw||(tw=[0,void 0,!0]);case"number":return v>0?void 0:v===0?px||(px=[0,void 0]):[-v,void 0];case"string":return[0,v];case"object":return v}})(i[0]);var a=i[1];let u=1;a&&a.constructor===Object&&(o.ga=a,typeof(a=i[++u])=="function"&&(o.la=!0,kw??(kw=a),bw??(bw=i[u+1]),a=i[u+=2]));const h={};for(;a&&Array.isArray(a)&&a.length&&typeof a[0]=="number"&&a[0]>0;){for(var d=0;d<a.length;d++)h[a[d]]=a;a=i[++u]}for(d=1;a!==void 0;){let v;typeof a=="number"&&(d+=a,a=i[++u]);var p=void 0;if(a instanceof vo?v=a:(v=_x,u--),v==null?void 0:v.l){a=i[++u],p=i;var g=u;typeof a=="function"&&(a=a(),p[g]=a),p=a}for(g=d+1,typeof(a=i[++u])=="number"&&a<0&&(g-=a,a=i[++u]);d<g;d++){const _=h[d];p?r(o,d,v,p,_):t(o,d,v,_)}}return i[e]=o}function xw(e){return Array.isArray(e)?e[0]instanceof vo?e:[Ex,e]:[e,void 0]}function Tw(e,t){return e instanceof ne?e.u:Array.isArray(e)?ks(e,t,!1):void 0}function Ip(e,t,r,i){const o=r.g;e[t]=i?(a,u,h)=>o(a,u,h,i):o}function Lp(e,t,r,i,o){const a=r.g;let u,h;e[t]=(d,p,g)=>a(d,p,g,h||(h=ai(Np,Ip,Lp,i).V),u||(u=Dp(i)),o)}function Dp(e){let t=e[ry];if(t!=null)return t;const r=ai(Np,Ip,Lp,e);return t=r.la?(i,o)=>kw(i,o,r):(i,o)=>{const a=0|i[le];for(;pw(o)&&o.h!=4;){var u=o.m,h=r[u];if(h==null){var d=r.ga;d&&(d=d[u])&&(d=Sx(d))!=null&&(h=r[u]=d)}h!=null&&h(o,i,u)||(u=(h=o).l,Ru(h),h.fa?h=void 0:(d=h.g.g-u,h.g.g=u,h=fw(h.g,d)),u=i,h&&((d=u[Qi])?d.push(h):u[Qi]=[h]))}return 16384&a&&fo(i),!0},e[ry]=t}function Sx(e){const t=(e=xw(e))[0].g;if(e=e[1]){const r=Dp(e),i=ai(Np,Ip,Lp,e).V;return(o,a,u)=>t(o,a,u,i,r)}return t}function _c(e,t,r){e[t]=r.h}function Ec(e,t,r,i){let o,a;const u=r.h;e[t]=(h,d,p)=>u(h,d,p,a||(a=ai(wc,_c,Ec,i).V),o||(o=Rw(i)))}function Rw(e){let t=e[ny];if(!t){const r=ai(wc,_c,Ec,e);t=(i,o)=>Aw(i,o,r),e[ny]=t}return t}function Aw(e,t,r){for(var i=0|e[le],o=512&i?0:-1,a=e.length,u=512&i?1:0,h=a+(256&i?-1:0);u<h;u++){const d=e[u];if(d==null)continue;const p=u-o,g=sy(r,p);g&&g(t,d,p)}if(256&i){i=e[a-1];for(const d in i)o=+d,Number.isNaN(o)||(a=i[o])!=null&&(h=sy(r,o))&&h(t,a,o)}if(e=op(e))for(ro(t,t.g.end()),r=0;r<e.length;r++)ro(t,tp(e[r])||new Uint8Array(0))}function sy(e,t){var r=e[t];if(r)return r;if((r=e.ga)&&(r=r[t])){var i=(r=xw(r))[0].h;if(r=r[1]){const o=Rw(r),a=ai(wc,_c,Ec,r).V;r=e.la?bw(a,o):(u,h,d)=>i(u,h,d,a,o)}else r=i;return e[t]=r}}function wo(e,t){if(Array.isArray(t)){var r=0|t[le];if(4&r)return t;for(var i=0,o=0;i<t.length;i++){const a=e(t[i]);a!=null&&(t[o++]=a)}return o<i&&(t.length=o),mt(t,-12289&(5|r)),2&r&&Object.freeze(t),t}}function Xt(e,t,r){return new vo(e,t,r)}function _o(e,t,r){return new vo(e,t,r)}function Yt(e,t,r){et(e,0|e[le],t,r)}var kx=vc((function(e,t,r,i,o){return e.h===2&&(e=Wa(e,ks([void 0,void 0],i,!0),o),As(i=0|t[le]),(o=qn(t,i,r))instanceof Ur?(2&o.L)!=0?((o=o.X()).push(e),et(t,i,r,o)):o.Na(e):Array.isArray(o)?(2&(0|o[le])&&et(t,i,r,o=ow(o)),o.push(e)):et(t,i,r,[e]),!0)}),(function(e,t,r,i,o){if(t instanceof Ur)t.forEach(((a,u)=>{Ju(e,r,ks([u,a],i,!1),o)}));else if(Array.isArray(t))for(let a=0;a<t.length;a++){const u=t[a];Array.isArray(u)&&Ju(e,r,ks(u,i,!1),o)}}));function Cw(e,t,r){if(t=(function(i){if(i==null)return i;const o=typeof i;if(o==="bigint")return String(hp(64,i));if(hc(i)){if(o==="string")return fp(i);if(o==="number")return dp(i)}})(t),t!=null&&(typeof t=="string"&&ty(t),t!=null))switch(kr(e,r,0),typeof t){case"number":e=e.g,Zi(t),Hi(e,De,nt);break;case"bigint":r=BigInt.asUintN(64,t),r=new Rf(Number(r&BigInt(4294967295)),Number(r>>BigInt(32))),Hi(e.g,r.h,r.g);break;default:r=ty(t),Hi(e.g,r.h,r.g)}}function Pw(e,t,r){(t=po(t))!=null&&t!=null&&(kr(e,r,0),gc(e.g,t))}function jw(e,t,r){(t=Q2(t))!=null&&(kr(e,r,0),e.g.g.push(t?1:0))}function Ow(e,t,r){(t=eo(t))!=null&&yc(e,r,$2(t))}function Nw(e,t,r,i,o){Ju(e,r,Tw(t,i),o)}function Iw(e,t,r){(t=t==null||typeof t=="string"||Ba(t)||t instanceof Bn?t:void 0)!=null&&yc(e,r,kp(t).buffer)}function Lw(e,t,r){return(e.h===5||e.h===2)&&(t=go(t,0|t[le],r,!1,!1),e.h==2?mc(e,xf,t):t.push(xf(e.g)),!0)}var Dn=Xt((function(e,t,r){if(e.h!==1)return!1;var i=e.g;e=bf(i);const o=bf(i);i=2*(o>>31)+1;const a=o>>>20&2047;return e=4294967296*(1048575&o)+e,Yt(t,r,a==2047?e?NaN:i*(1/0):a==0?5e-324*i*e:i*Math.pow(2,a-1075)*(e+4503599627370496)),!0}),(function(e,t,r){(t=Cs(t))!=null&&(kr(e,r,1),e=e.g,(r=Y2||(Y2=new DataView(new ArrayBuffer(8)))).setFloat64(0,+t,!0),De=r.getUint32(0,!0),nt=r.getUint32(4,!0),Na(e,De),Na(e,nt))}),nn()),gt=Xt((function(e,t,r){return e.h===5&&(Yt(t,r,xf(e.g)),!0)}),(function(e,t,r){(t=Cs(t))!=null&&(kr(e,r,5),e=e.g,ap(t),Na(e,De))}),Op),bx=_o(Lw,(function(e,t,r){if((t=wo(Cs,t))!=null)for(let u=0;u<t.length;u++){var i=e,o=r,a=t[u];a!=null&&(kr(i,o,5),i=i.g,ap(a),Na(i,De))}}),Op),Up=_o(Lw,(function(e,t,r){if((t=wo(Cs,t))!=null&&t.length){kr(e,r,2),yo(e.g,4*t.length);for(let i=0;i<t.length;i++)r=e.g,ap(t[i]),Na(r,De)}}),Op),Ts=Xt((function(e,t,r){return e.h===0&&(Yt(t,r,bp(e.g,up)),!0)}),Cw,ww),Kd=Xt((function(e,t,r){return e.h===0&&(Yt(t,r,(e=bp(e.g,up))===0?void 0:e),!0)}),Cw,ww),xx=Xt((function(e,t,r){return e.h===0&&(Yt(t,r,bp(e.g,lp)),!0)}),(function(e,t,r){if((t=ox(t))!=null&&(typeof t=="string"&&ey(t),t!=null))switch(kr(e,r,0),typeof t){case"number":e=e.g,Zi(t),Hi(e,De,nt);break;case"bigint":r=BigInt.asUintN(64,t),r=new Tf(Number(r&BigInt(4294967295)),Number(r>>BigInt(32))),Hi(e.g,r.h,r.g);break;default:r=ey(t),Hi(e.g,r.h,r.g)}}),nn()),st=Xt((function(e,t,r){return e.h===0&&(Yt(t,r,xs(e.g)),!0)}),Pw,jp),Sc=_o((function(e,t,r){return(e.h===0||e.h===2)&&(t=go(t,0|t[le],r,!1,!1),e.h==2?mc(e,xs,t):t.push(xs(e.g)),!0)}),(function(e,t,r){if((t=wo(po,t))!=null&&t.length){r=Rp(e,r);for(let i=0;i<t.length;i++)gc(e.g,t[i]);Ap(e,r)}}),jp),Bi=Xt((function(e,t,r){return e.h===0&&(Yt(t,r,(e=xs(e.g))===0?void 0:e),!0)}),Pw,jp),Je=Xt((function(e,t,r){return e.h===0&&(Yt(t,r,xp(e.g)),!0)}),jw,yw),Gi=Xt((function(e,t,r){return e.h===0&&(Yt(t,r,(e=xp(e.g))===!1?void 0:e),!0)}),jw,yw),Bt=_o((function(e,t,r){return e.h===2&&(e=Tp(e),go(t,0|t[le],r,!1).push(e),!0)}),(function(e,t,r){if((t=wo(eo,t))!=null)for(let u=0;u<t.length;u++){var i=e,o=r,a=t[u];a!=null&&yc(i,o,$2(a))}}),Pp),Es=Xt((function(e,t,r){return e.h===2&&(Yt(t,r,(e=Tp(e))===""?void 0:e),!0)}),Ow,Pp),je=Xt((function(e,t,r){return e.h===2&&(Yt(t,r,Tp(e)),!0)}),Ow,Pp),St=(function(e,t,r=Cp){return new vo(e,t,r)})((function(e,t,r,i,o){return e.h===2&&(i=ks(void 0,i,!0),go(t,0|t[le],r,!0).push(i),Wa(e,i,o),!0)}),(function(e,t,r,i,o){if(Array.isArray(t))for(let a=0;a<t.length;a++)Nw(e,t[a],r,i,o)})),Ie=vc((function(e,t,r,i,o,a){return e.h===2&&(aw(t,0|t[le],a,r),Wa(e,t=Ep(t,i,r),o),!0)}),Nw),Dw=Xt((function(e,t,r){return e.h===2&&(Yt(t,r,mw(e)),!0)}),Iw,_w),Tx=_o((function(e,t,r){return(e.h===0||e.h===2)&&(t=go(t,0|t[le],r,!1,!1),e.h==2?mc(e,Kn,t):t.push(Kn(e.g)),!0)}),(function(e,t,r){if((t=wo(Z2,t))!=null)for(let u=0;u<t.length;u++){var i=e,o=r,a=t[u];a!=null&&(kr(i,o,0),yo(i.g,a))}}),vw),Rx=Xt((function(e,t,r){return e.h===0&&(Yt(t,r,(e=Kn(e.g))===0?void 0:e),!0)}),(function(e,t,r){(t=Z2(t))!=null&&t!=null&&(kr(e,r,0),yo(e.g,t))}),vw),Mr=Xt((function(e,t,r){return e.h===0&&(Yt(t,r,xs(e.g)),!0)}),(function(e,t,r){(t=po(t))!=null&&(t=parseInt(t,10),kr(e,r,0),gc(e.g,t))}),Ew);class Ax{constructor(t,r){this.h=t,this.g=r,this.l=Te,this.m=he,this.defaultValue=void 0}}function sn(e,t){return new Ax(e,t)}function Ps(e,t){return(r,i)=>{if(pu.length){const a=pu.pop();a.o(i),Wd(a.g,r,i),r=a}else r=new class{constructor(a,u){if(Z1.length){const h=Z1.pop();Wd(h,a,u),a=h}else a=new class{constructor(h,d){this.h=null,this.m=!1,this.g=this.l=this.j=0,Wd(this,h,d)}clear(){this.h=null,this.m=!1,this.g=this.l=this.j=0,this.ba=!1}}(a,u);this.g=a,this.l=this.g.g,this.h=this.m=-1,this.o(u)}o({fa:a=!1}={}){this.fa=a}}(r,i);try{const a=new e,u=a.u;Dp(t)(u,r);var o=a}finally{r.g.clear(),r.m=-1,r.h=-1,pu.length<100&&pu.push(r)}return o}}function kc(e){return function(){const t=new class{constructor(){this.l=[],this.h=0,this.g=new class{constructor(){this.g=[]}length(){return this.g.length}end(){const u=this.g;return this.g=[],u}}}};Aw(this.u,t,ai(wc,_c,Ec,e)),ro(t,t.g.end());const r=new Uint8Array(t.h),i=t.l,o=i.length;let a=0;for(let u=0;u<o;u++){const h=i[u];r.set(h,a),a+=h.length}return t.l=[r],r}}var iy=class extends ne{constructor(e){super(e)}},oy=[0,Es,Xt((function(e,t,r){return e.h===2&&(Yt(t,r,(e=mw(e))===oi()?void 0:e),!0)}),(function(e,t,r){if(t!=null){if(t instanceof ne){const i=t.Ra;return void(i&&(t=i(t),t!=null&&yc(e,r,kp(t).buffer)))}if(Array.isArray(t))return}Iw(e,t,r)}),_w)];let Hd,ay=globalThis.trustedTypes;function ly(e){Hd===void 0&&(Hd=(function(){let r=null;if(!ay)return r;try{const i=o=>o;r=ay.createPolicy("goog#html",{createHTML:i,createScript:i,createScriptURL:i})}catch{}return r})());var t=Hd;return new class{constructor(r){this.g=r}toString(){return this.g+""}}(t?t.createScriptURL(e):e)}function Cx(e,...t){if(t.length===0)return ly(e[0]);let r=e[0];for(let i=0;i<t.length;i++)r+=encodeURIComponent(t[i])+e[i+1];return ly(r)}var Uw=[0,st,Mr,Je,-1,Sc,Mr,-1],Px=class extends ne{constructor(e){super(e)}},Fw=[0,Je,je,Je,Mr,-1,_o((function(e,t,r){return(e.h===0||e.h===2)&&(t=go(t,0|t[le],r,!1,!1),e.h==2?mc(e,gx,t):t.push(xs(e.g)),!0)}),(function(e,t,r){if((t=wo(po,t))!=null&&t.length){r=Rp(e,r);for(let i=0;i<t.length;i++)gc(e.g,t[i]);Ap(e,r)}}),Ew),je,-1,[0,Je,-1],Mr,Je,-1],Mw=[0,je,-2],uy=class extends ne{constructor(e){super(e)}},$w=[0],Bw=[0,st,Je,1,Je,-3],Sr=class extends ne{constructor(e){super(e,2)}},yt={};yt[336783863]=[0,je,Je,-1,st,[0,[1,2,3,4,5,6,7,8],Ie,$w,Ie,Fw,Ie,Mw,Ie,Bw,Ie,Uw,Ie,[0,je,-2],Ie,[0,je,Mr],Ie,[0,Mr,je]],[0,je],Je,[0,[1,3],[2,4],Ie,[0,Sc],-1,Ie,[0,Bt],-1,St,[0,je,-1]],je];var cy=[0,Kd,-1,Gi,-3,Kd,Sc,Es,Bi,Kd,-1,Gi,Bi,Gi,-2,Es];function br(e,t){kf(e,2,mo(t),"")}function $e(e,t){pc(e,3,t)}function Se(e,t){pc(e,4,t)}var Jt=class extends ne{constructor(e){super(e,500)}o(e){return he(this,0,7,e)}},ba=[-1,{}],hy=[0,je,1,ba],dy=[0,je,Bt,ba];function xr(e,t){Gu(e,1,Jt,t)}function Ve(e,t){pc(e,10,t)}function Pe(e,t){pc(e,15,t)}var hr=class extends ne{constructor(e){super(e,500)}o(e){return he(this,0,1001,e)}},zw=[-500,St,[-500,Es,-1,Bt,-3,[-2,yt,Je],St,oy,Bi,-1,hy,dy,St,[0,Es,Gi],Es,cy,Bi,Bt,987,Bt],4,St,[-500,je,-1,[-1,{}],998,je],St,[-500,je,Bt,-1,[-2,{},Je],997,Bt,-1],Bi,St,[-500,je,Bt,ba,998,Bt],Bt,Bi,hy,dy,St,[0,Es,-1,ba],Bt,-2,cy,Es,-1,Gi,[0,Gi,Rx],978,ba,St,oy];hr.prototype.g=kc(zw);var jx=Ps(hr,zw),Ox=class extends ne{constructor(e){super(e)}},Vw=class extends ne{constructor(e){super(e)}g(){return Wn(this,Ox,1)}},Ww=[0,St,[0,st,gt,je,-1]],bc=Ps(Vw,Ww),Nx=class extends ne{constructor(e){super(e)}},Ix=class extends ne{constructor(e){super(e)}},Gd=class extends ne{constructor(e){super(e)}h(){return Te(this,Nx,2)}g(){return Wn(this,Ix,5)}},Kw=Ps(class extends ne{constructor(e){super(e)}},[0,Bt,Sc,Up,[0,Mr,[0,st,-3],[0,gt,-3],[0,st,-1,[0,St,[0,st,-2]]],St,[0,gt,-1,je,gt]],je,-1,Ts,St,[0,st,gt],Bt,Ts]),Hw=class extends ne{constructor(e){super(e)}},qi=Ps(class extends ne{constructor(e){super(e)}},[0,St,[0,gt,-4]]),Gw=class extends ne{constructor(e){super(e)}},Ka=Ps(class extends ne{constructor(e){super(e)}},[0,St,[0,gt,-4]]),Lx=class extends ne{constructor(e){super(e)}},Dx=[0,st,-1,Up,Mr],qw=class extends ne{constructor(e){super(e)}};qw.prototype.g=kc([0,gt,-4,Ts]);var Ux=class extends ne{constructor(e){super(e)}},Fx=Ps(class extends ne{constructor(e){super(e)}},[0,St,[0,1,st,je,Ww],Ts]),fy=class extends ne{constructor(e){super(e)}},Mx=class extends ne{constructor(e){super(e)}oa(){const e=iw(this);return e??oi()}},$x=class extends ne{constructor(e){super(e)}},Jw=[1,2],Bx=Ps(class extends ne{constructor(e){super(e)}},[0,St,[0,Jw,Ie,[0,Up],Ie,[0,Dw],st,je],Ts]),Fp=class extends ne{constructor(e){super(e)}},Xw=[0,je,st,gt,Bt,-1],py=class extends ne{constructor(e){super(e)}},zx=[0,Je,-1],my=class extends ne{constructor(e){super(e)}},Au=[1,2,3,4,5],Xu=class extends ne{constructor(e){super(e)}g(){return iw(this)!=null}h(){return Fr(this,2)!=null}},Ye=class extends ne{constructor(e){super(e)}g(){return Q2(to(this,2))??!1}},Yw=[0,Dw,je,[0,st,Ts,-1],[0,xx,Ts]],ut=[0,Yw,Je,[0,Au,Ie,Bw,Ie,Fw,Ie,Uw,Ie,$w,Ie,Mw],Mr],xc=class extends ne{constructor(e){super(e)}},Mp=[0,ut,gt,-1,st],Vx=sn(502141897,xc);yt[502141897]=Mp;var Wx=Ps(class extends ne{constructor(e){super(e)}},[0,[0,Mr,-1,bx,Tx],Dx]),Qw=class extends ne{constructor(e){super(e)}},Zw=class extends ne{constructor(e){super(e)}},$p=[0,ut,gt,[0,ut],Je],e3=[0,ut,Mp,$p,gt,[0,[0,Yw]]],Kx=sn(508968150,Zw);yt[508968150]=e3,yt[508968149]=$p;var t3=class extends ne{constructor(e){super(e)}},Hx=sn(513916220,t3);yt[513916220]=[0,ut,e3,st];var Ui=class extends ne{constructor(e){super(e)}h(){return Te(this,Fp,2)}g(){Me(this,2)}},r3=[0,ut,Xw];yt[478825465]=r3;var Gx=class extends ne{constructor(e){super(e)}},n3=class extends ne{constructor(e){super(e)}},Bp=class extends ne{constructor(e){super(e)}},zp=class extends ne{constructor(e){super(e)}},s3=class extends ne{constructor(e){super(e)}},gy=[0,ut,[0,ut],r3,-1],i3=[0,ut,gt,st],Vp=[0,ut,gt],o3=[0,ut,i3,Vp,gt],qx=sn(479097054,s3);yt[479097054]=[0,ut,o3,gy],yt[463370452]=gy,yt[464864288]=i3;var Jx=sn(462713202,zp);yt[462713202]=o3,yt[474472470]=Vp;var Xx=class extends ne{constructor(e){super(e)}},a3=class extends ne{constructor(e){super(e)}},l3=class extends ne{constructor(e){super(e)}},u3=class extends ne{constructor(e){super(e)}},Wp=[0,ut,gt,-1,st],Af=[0,ut,gt,Je];u3.prototype.g=kc([0,ut,Vp,[0,ut],Mp,$p,Wp,Af]);var c3=class extends ne{constructor(e){super(e)}},Yx=sn(456383383,c3);yt[456383383]=[0,ut,Xw];var h3=class extends ne{constructor(e){super(e)}},Qx=sn(476348187,h3);yt[476348187]=[0,ut,zx];var d3=class extends ne{constructor(e){super(e)}},yy=class extends ne{constructor(e){super(e)}},f3=[0,Mr,-1],Zx=sn(458105876,class extends ne{constructor(e){super(e)}g(){var e=this.u;const t=0|e[le],r=2&t;return e=(function(i,o,a){var u=yy;const h=2&o;let d=!1;if(a==null){if(h)return Q1();a=[]}else if(a.constructor===Ur){if((2&a.L)==0||h)return a;a=a.X()}else Array.isArray(a)?d=!!(2&(0|a[le])):a=[];if(h){if(!a.length)return Q1();d||(d=!0,fo(a))}else d&&(d=!1,a=ow(a));return d||(64&(0|a[le])?a[le]&=-33:32&o&&oc(a,32)),et(i,o,2,u=new Ur(a,u,ax,void 0)),u})(e,t,qn(e,t,2)),!r&&yy&&(e.ra=!0),e}});yt[458105876]=[0,f3,kx,[!0,Ts,[0,je,-1,Bt]]];var Kp=class extends ne{constructor(e){super(e)}},p3=sn(458105758,Kp);yt[458105758]=[0,ut,je,f3];var m3=class extends ne{constructor(e){super(e)}},e5=sn(443442058,m3);yt[443442058]=[0,ut,je,st,gt,Bt,-1,Je,gt],yt[514774813]=Wp;var g3=class extends ne{constructor(e){super(e)}},t5=sn(516587230,g3);function Cf(e,t){return t=t?t.clone():new Fp,e.displayNamesLocale!==void 0?Me(t,1,mo(e.displayNamesLocale)):e.displayNamesLocale===void 0&&Me(t,1),e.maxResults!==void 0?_n(t,2,e.maxResults):"maxResults"in e&&Me(t,2),e.scoreThreshold!==void 0?oe(t,3,e.scoreThreshold):"scoreThreshold"in e&&Me(t,3),e.categoryAllowlist!==void 0?qu(t,4,e.categoryAllowlist):"categoryAllowlist"in e&&Me(t,4),e.categoryDenylist!==void 0?qu(t,5,e.categoryDenylist):"categoryDenylist"in e&&Me(t,5),t}function Hp(e,t=-1,r=""){return{categories:e.map((i=>({index:Dr(i,1)??0??-1,score:lt(i,2)??0,categoryName:Fr(i,3)??""??"",displayName:Fr(i,4)??""??""}))),headIndex:t,headName:r}}function y3(e){var u,h;var t=ti(e,3,Cs,ei()),r=ti(e,2,po,ei()),i=ti(e,1,eo,ei()),o=ti(e,9,eo,ei());const a={categories:[],keypoints:[]};for(let d=0;d<t.length;d++)a.categories.push({score:t[d],index:r[d]??-1,categoryName:i[d]??"",displayName:o[d]??""});if((t=(u=Te(e,Gd,4))==null?void 0:u.h())&&(a.boundingBox={originX:Dr(t,1)??0,originY:Dr(t,2)??0,width:Dr(t,3)??0,height:Dr(t,4)??0,angle:0}),(h=Te(e,Gd,4))==null?void 0:h.g().length)for(const d of Te(e,Gd,4).g())a.keypoints.push({x:Tu(d,1)??0,y:Tu(d,2)??0,score:Tu(d,4)??0,label:Fr(d,3)??""});return a}function Tc(e){const t=[];for(const r of Wn(e,Gw,1))t.push({x:lt(r,1)??0,y:lt(r,2)??0,z:lt(r,3)??0,visibility:lt(r,4)??0});return t}function xa(e){const t=[];for(const r of Wn(e,Hw,1))t.push({x:lt(r,1)??0,y:lt(r,2)??0,z:lt(r,3)??0,visibility:lt(r,4)??0});return t}function vy(e){return Array.from(e,(t=>t>127?t-256:t))}function wy(e,t){if(e.length!==t.length)throw Error(`Cannot compute cosine similarity between embeddings of different sizes (${e.length} vs. ${t.length}).`);let r=0,i=0,o=0;for(let a=0;a<e.length;a++)r+=e[a]*t[a],i+=e[a]*e[a],o+=t[a]*t[a];if(i<=0||o<=0)throw Error("Cannot compute cosine similarity on embedding with 0 norm.");return r/Math.sqrt(i*o)}let mu;yt[516587230]=[0,ut,Wp,Af,gt],yt[518928384]=Af;const r5=new Uint8Array([0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11]);async function v3(){if(mu===void 0)try{await WebAssembly.instantiate(r5),mu=!0}catch{mu=!1}return mu}async function pa(e,t=Cx``){const r=await v3()?"wasm_internal":"wasm_nosimd_internal";return{wasmLoaderPath:`${t}/${e}_${r}.js`,wasmBinaryPath:`${t}/${e}_${r}.wasm`}}var ys=class{};function w3(){var e=navigator;return typeof OffscreenCanvas<"u"&&(!(function(t=navigator){return(t=t.userAgent).includes("Safari")&&!t.includes("Chrome")})(e)||!!((e=e.userAgent.match(/Version\/([\d]+).*Safari/))&&e.length>=1&&Number(e[1])>=17))}async function _y(e){if(typeof importScripts!="function"){const t=document.createElement("script");return t.src=e.toString(),t.crossOrigin="anonymous",new Promise(((r,i)=>{t.addEventListener("load",(()=>{r()}),!1),t.addEventListener("error",(o=>{i(o)}),!1),document.body.appendChild(t)}))}importScripts(e.toString())}function _3(e){return e.videoWidth!==void 0?[e.videoWidth,e.videoHeight]:e.naturalWidth!==void 0?[e.naturalWidth,e.naturalHeight]:e.displayWidth!==void 0?[e.displayWidth,e.displayHeight]:[e.width,e.height]}function ae(e,t,r){e.m||console.error("No wasm multistream support detected: ensure dependency inclusion of :gl_graph_runner_internal_multi_input target"),r(t=e.i.stringToNewUTF8(t)),e.i._free(t)}function Ey(e,t,r){if(!e.i.canvas)throw Error("No OpenGL canvas configured.");if(r?e.i._bindTextureToStream(r):e.i._bindTextureToCanvas(),!(r=e.i.canvas.getContext("webgl2")||e.i.canvas.getContext("webgl")))throw Error("Failed to obtain WebGL context from the provided canvas. `getContext()` should only be invoked with `webgl` or `webgl2`.");e.i.gpuOriginForWebTexturesIsBottomLeft&&r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,!0),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,t),e.i.gpuOriginForWebTexturesIsBottomLeft&&r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,!1);const[i,o]=_3(t);return!e.l||i===e.i.canvas.width&&o===e.i.canvas.height||(e.i.canvas.width=i,e.i.canvas.height=o),[i,o]}function Sy(e,t,r){e.m||console.error("No wasm multistream support detected: ensure dependency inclusion of :gl_graph_runner_internal_multi_input target");const i=new Uint32Array(t.length);for(let o=0;o<t.length;o++)i[o]=e.i.stringToNewUTF8(t[o]);t=e.i._malloc(4*i.length),e.i.HEAPU32.set(i,t>>2),r(t);for(const o of i)e.i._free(o);e.i._free(t)}function pn(e,t,r){e.i.simpleListeners=e.i.simpleListeners||{},e.i.simpleListeners[t]=r}function gs(e,t,r){let i=[];e.i.simpleListeners=e.i.simpleListeners||{},e.i.simpleListeners[t]=(o,a,u)=>{a?(r(i,u),i=[]):i.push(o)}}ys.forVisionTasks=function(e){return pa("vision",e)},ys.forTextTasks=function(e){return pa("text",e)},ys.forGenAiExperimentalTasks=function(e){return pa("genai_experimental",e)},ys.forGenAiTasks=function(e){return pa("genai",e)},ys.forAudioTasks=function(e){return pa("audio",e)},ys.isSimdSupported=function(){return v3()};async function n5(e,t,r,i){return e=await(async(o,a,u,h,d)=>{if(a&&await _y(a),!self.ModuleFactory||u&&(await _y(u),!self.ModuleFactory))throw Error("ModuleFactory not set.");return self.Module&&d&&((a=self.Module).locateFile=d.locateFile,d.mainScriptUrlOrBlob&&(a.mainScriptUrlOrBlob=d.mainScriptUrlOrBlob)),d=await self.ModuleFactory(self.Module||d),self.ModuleFactory=self.Module=void 0,new o(d,h)})(e,r.wasmLoaderPath,r.assetLoaderPath,t,{locateFile:o=>o.endsWith(".wasm")?r.wasmBinaryPath.toString():r.assetBinaryPath&&o.endsWith(".data")?r.assetBinaryPath.toString():o}),await e.o(i),e}function qd(e,t){const r=Te(e.baseOptions,Xu,1)||new Xu;typeof t=="string"?(Me(r,2,mo(t)),Me(r,1)):t instanceof Uint8Array&&(Me(r,1,ip(t,!1)),Me(r,2)),he(e.baseOptions,0,1,r)}function ky(e){try{const t=e.G.length;if(t===1)throw Error(e.G[0].message);if(t>1)throw Error("Encountered multiple errors: "+e.G.map((r=>r.message)).join(", "))}finally{e.G=[]}}function Z(e,t){e.B=Math.max(e.B,t)}function Rc(e,t){e.A=new Jt,br(e.A,"PassThroughCalculator"),$e(e.A,"free_memory"),Se(e.A,"free_memory_unused_out"),Ve(t,"free_memory"),xr(t,e.A)}function no(e,t){$e(e.A,t),Se(e.A,t+"_unused_out")}function Ac(e){e.g.addBoolToStream(!0,"free_memory",e.B)}var Cu=class{constructor(e){this.g=e,this.G=[],this.B=0,this.g.setAutoRenderToScreen(!1)}l(e,t=!0){var r,i,o,a,u,h;if(t){const d=e.baseOptions||{};if((r=e.baseOptions)!=null&&r.modelAssetBuffer&&((i=e.baseOptions)!=null&&i.modelAssetPath))throw Error("Cannot set both baseOptions.modelAssetPath and baseOptions.modelAssetBuffer");if(!((o=Te(this.baseOptions,Xu,1))!=null&&o.g()||(a=Te(this.baseOptions,Xu,1))!=null&&a.h()||(u=e.baseOptions)!=null&&u.modelAssetBuffer||(h=e.baseOptions)!=null&&h.modelAssetPath))throw Error("Either baseOptions.modelAssetPath or baseOptions.modelAssetBuffer must be set");if((function(p,g){let v=Te(p.baseOptions,my,3);if(!v){var _=v=new my,E=new uy;ka(_,4,Au,E)}"delegate"in g&&(g.delegate==="GPU"?(g=v,_=new Px,ka(g,2,Au,_)):(g=v,_=new uy,ka(g,4,Au,_))),he(p.baseOptions,0,3,v)})(this,d),d.modelAssetPath)return fetch(d.modelAssetPath.toString()).then((p=>{if(p.ok)return p.arrayBuffer();throw Error(`Failed to fetch model: ${d.modelAssetPath} (${p.status})`)})).then((p=>{try{this.g.i.FS_unlink("/model.dat")}catch{}this.g.i.FS_createDataFile("/","model.dat",new Uint8Array(p),!0,!1,!1),qd(this,"/model.dat"),this.m(),this.I()}));if(d.modelAssetBuffer instanceof Uint8Array)qd(this,d.modelAssetBuffer);else if(d.modelAssetBuffer)return(async function(p){const g=[];for(var v=0;;){const{done:_,value:E}=await p.read();if(_)break;g.push(E),v+=E.length}if(g.length===0)return new Uint8Array(0);if(g.length===1)return g[0];p=new Uint8Array(v),v=0;for(const _ of g)p.set(_,v),v+=_.length;return p})(d.modelAssetBuffer).then((p=>{qd(this,p),this.m(),this.I()}))}return this.m(),this.I(),Promise.resolve()}I(){}da(){let e;if(this.g.da((t=>{e=jx(t)})),!e)throw Error("Failed to retrieve CalculatorGraphConfig");return e}setGraph(e,t){this.g.attachErrorListener(((r,i)=>{this.G.push(Error(i))})),this.g.La(),this.g.setGraph(e,t),this.A=void 0,ky(this)}finishProcessing(){this.g.finishProcessing(),ky(this)}close(){this.A=void 0,this.g.closeGraph()}};function qt(e,t){if(!e)throw Error(`Unable to obtain required WebGL resource: ${t}`);return e}Cu.prototype.close=Cu.prototype.close,(function(e,t){e=e.split(".");var r,i=ii;for((e[0]in i)||i.execScript===void 0||i.execScript("var "+e[0]);e.length&&(r=e.shift());)e.length||t===void 0?i=i[r]&&i[r]!==Object.prototype[r]?i[r]:i[r]={}:i[r]=t})("TaskRunner",Cu);class s5{constructor(t,r,i,o){this.g=t,this.h=r,this.m=i,this.l=o}bind(){this.g.bindVertexArray(this.h)}close(){this.g.deleteVertexArray(this.h),this.g.deleteBuffer(this.m),this.g.deleteBuffer(this.l)}}function by(e,t,r){const i=e.g;if(r=qt(i.createShader(r),"Failed to create WebGL shader"),i.shaderSource(r,t),i.compileShader(r),!i.getShaderParameter(r,i.COMPILE_STATUS))throw Error(`Could not compile WebGL shader: ${i.getShaderInfoLog(r)}`);return i.attachShader(e.h,r),r}function xy(e,t){const r=e.g,i=qt(r.createVertexArray(),"Failed to create vertex array");r.bindVertexArray(i);const o=qt(r.createBuffer(),"Failed to create buffer");r.bindBuffer(r.ARRAY_BUFFER,o),r.enableVertexAttribArray(e.O),r.vertexAttribPointer(e.O,2,r.FLOAT,!1,0,0),r.bufferData(r.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,1,1,-1]),r.STATIC_DRAW);const a=qt(r.createBuffer(),"Failed to create buffer");return r.bindBuffer(r.ARRAY_BUFFER,a),r.enableVertexAttribArray(e.I),r.vertexAttribPointer(e.I,2,r.FLOAT,!1,0,0),r.bufferData(r.ARRAY_BUFFER,new Float32Array(t?[0,1,0,0,1,0,1,1]:[0,0,0,1,1,1,1,0]),r.STATIC_DRAW),r.bindBuffer(r.ARRAY_BUFFER,null),r.bindVertexArray(null),new s5(r,i,o,a)}function Gp(e,t){if(e.g){if(t!==e.g)throw Error("Cannot change GL context once initialized")}else e.g=t}function Ha(e,t,r,i){return Gp(e,t),e.h||(e.m(),e.C()),r?(e.s||(e.s=xy(e,!0)),r=e.s):(e.v||(e.v=xy(e,!1)),r=e.v),t.useProgram(e.h),r.bind(),e.l(),e=i(),r.g.bindVertexArray(null),e}function Rs(e,t,r){return Gp(e,t),e=qt(t.createTexture(),"Failed to create texture"),t.bindTexture(t.TEXTURE_2D,e),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,r??t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,r??t.LINEAR),t.bindTexture(t.TEXTURE_2D,null),e}function Cc(e,t,r){Gp(e,t),e.A||(e.A=qt(t.createFramebuffer(),"Failed to create framebuffe.")),t.bindFramebuffer(t.FRAMEBUFFER,e.A),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,r,0)}function qp(e){var t;(t=e.g)==null||t.bindFramebuffer(e.g.FRAMEBUFFER,null)}var Eo=class{G(){return`
  precision mediump float;
  varying vec2 vTex;
  uniform sampler2D inputTexture;
  void main() {
    gl_FragColor = texture2D(inputTexture, vTex);
  }
 `}m(){const e=this.g;if(this.h=qt(e.createProgram(),"Failed to create WebGL program"),this.aa=by(this,`
  attribute vec2 aVertex;
  attribute vec2 aTex;
  varying vec2 vTex;
  void main(void) {
    gl_Position = vec4(aVertex, 0.0, 1.0);
    vTex = aTex;
  }`,e.VERTEX_SHADER),this.Z=by(this,this.G(),e.FRAGMENT_SHADER),e.linkProgram(this.h),!e.getProgramParameter(this.h,e.LINK_STATUS))throw Error(`Error during program linking: ${e.getProgramInfoLog(this.h)}`);this.O=e.getAttribLocation(this.h,"aVertex"),this.I=e.getAttribLocation(this.h,"aTex")}C(){}l(){}close(){if(this.h){const e=this.g;e.deleteProgram(this.h),e.deleteShader(this.aa),e.deleteShader(this.Z)}this.A&&this.g.deleteFramebuffer(this.A),this.v&&this.v.close(),this.s&&this.s.close()}},i5=class extends Eo{G(){return`
  precision mediump float;
  uniform sampler2D backgroundTexture;
  uniform sampler2D maskTexture;
  uniform sampler2D colorMappingTexture;
  varying vec2 vTex;
  void main() {
    vec4 backgroundColor = texture2D(backgroundTexture, vTex);
    float category = texture2D(maskTexture, vTex).r;
    vec4 categoryColor = texture2D(colorMappingTexture, vec2(category, 0.0));
    gl_FragColor = mix(backgroundColor, categoryColor, categoryColor.a);
  }
 `}C(){const e=this.g;e.activeTexture(e.TEXTURE1),this.B=Rs(this,e,e.LINEAR),e.activeTexture(e.TEXTURE2),this.j=Rs(this,e,e.NEAREST)}m(){super.m();const e=this.g;this.K=qt(e.getUniformLocation(this.h,"backgroundTexture"),"Uniform location"),this.T=qt(e.getUniformLocation(this.h,"colorMappingTexture"),"Uniform location"),this.J=qt(e.getUniformLocation(this.h,"maskTexture"),"Uniform location")}l(){super.l();const e=this.g;e.uniform1i(this.J,0),e.uniform1i(this.K,1),e.uniform1i(this.T,2)}close(){this.B&&this.g.deleteTexture(this.B),this.j&&this.g.deleteTexture(this.j),super.close()}},o5=class extends Eo{G(){return`
  precision mediump float;
  uniform sampler2D maskTexture;
  uniform sampler2D defaultTexture;
  uniform sampler2D overlayTexture;
  varying vec2 vTex;
  void main() {
    float confidence = texture2D(maskTexture, vTex).r;
    vec4 defaultColor = texture2D(defaultTexture, vTex);
    vec4 overlayColor = texture2D(overlayTexture, vTex);
    // Apply the alpha from the overlay and merge in the default color
    overlayColor = mix(defaultColor, overlayColor, overlayColor.a);
    gl_FragColor = mix(defaultColor, overlayColor, confidence);
  }
 `}C(){const e=this.g;e.activeTexture(e.TEXTURE1),this.j=Rs(this,e),e.activeTexture(e.TEXTURE2),this.B=Rs(this,e)}m(){super.m();const e=this.g;this.J=qt(e.getUniformLocation(this.h,"defaultTexture"),"Uniform location"),this.K=qt(e.getUniformLocation(this.h,"overlayTexture"),"Uniform location"),this.H=qt(e.getUniformLocation(this.h,"maskTexture"),"Uniform location")}l(){super.l();const e=this.g;e.uniform1i(this.H,0),e.uniform1i(this.J,1),e.uniform1i(this.K,2)}close(){this.j&&this.g.deleteTexture(this.j),this.B&&this.g.deleteTexture(this.B),super.close()}};function Fn(e,t){switch(t){case 0:return e.g.find((r=>r instanceof Uint8Array));case 1:return e.g.find((r=>r instanceof Float32Array));case 2:return e.g.find((r=>typeof WebGLTexture<"u"&&r instanceof WebGLTexture));default:throw Error(`Type is not supported: ${t}`)}}function Pf(e){var t=Fn(e,1);if(!t){if(t=Fn(e,0))t=new Float32Array(t).map((i=>i/255));else{t=new Float32Array(e.width*e.height);const i=so(e);var r=Jp(e);if(Cc(r,i,E3(e)),"iPad Simulator;iPhone Simulator;iPod Simulator;iPad;iPhone;iPod".split(";").includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"document"in self&&"ontouchend"in self.document){r=new Float32Array(e.width*e.height*4),i.readPixels(0,0,e.width,e.height,i.RGBA,i.FLOAT,r);for(let o=0,a=0;o<t.length;++o,a+=4)t[o]=r[a]}else i.readPixels(0,0,e.width,e.height,i.RED,i.FLOAT,t)}e.g.push(t)}return t}function E3(e){let t=Fn(e,2);if(!t){const r=so(e);t=k3(e);const i=Pf(e),o=S3(e);r.texImage2D(r.TEXTURE_2D,0,o,e.width,e.height,0,r.RED,r.FLOAT,i),jf(e)}return t}function so(e){if(!e.canvas)throw Error("Conversion to different image formats require that a canvas is passed when initializing the image.");return e.h||(e.h=qt(e.canvas.getContext("webgl2"),"You cannot use a canvas that is already bound to a different type of rendering context.")),e.h}function S3(e){if(e=so(e),!gu)if(e.getExtension("EXT_color_buffer_float")&&e.getExtension("OES_texture_float_linear")&&e.getExtension("EXT_float_blend"))gu=e.R32F;else{if(!e.getExtension("EXT_color_buffer_half_float"))throw Error("GPU does not fully support 4-channel float32 or float16 formats");gu=e.R16F}return gu}function Jp(e){return e.l||(e.l=new Eo),e.l}function k3(e){const t=so(e);t.viewport(0,0,e.width,e.height),t.activeTexture(t.TEXTURE0);let r=Fn(e,2);return r||(r=Rs(Jp(e),t,e.m?t.LINEAR:t.NEAREST),e.g.push(r),e.j=!0),t.bindTexture(t.TEXTURE_2D,r),r}function jf(e){e.h.bindTexture(e.h.TEXTURE_2D,null)}var gu,Et=class{constructor(e,t,r,i,o,a,u){this.g=e,this.m=t,this.j=r,this.canvas=i,this.l=o,this.width=a,this.height=u,this.j&&--Ty===0&&console.error("You seem to be creating MPMask instances without invoking .close(). This leaks resources.")}Fa(){return!!Fn(this,0)}ja(){return!!Fn(this,1)}P(){return!!Fn(this,2)}ia(){return(t=Fn(e=this,0))||(t=Pf(e),t=new Uint8Array(t.map((r=>255*r))),e.g.push(t)),t;var e,t}ha(){return Pf(this)}M(){return E3(this)}clone(){const e=[];for(const t of this.g){let r;if(t instanceof Uint8Array)r=new Uint8Array(t);else if(t instanceof Float32Array)r=new Float32Array(t);else{if(!(t instanceof WebGLTexture))throw Error(`Type is not supported: ${t}`);{const i=so(this),o=Jp(this);i.activeTexture(i.TEXTURE1),r=Rs(o,i,this.m?i.LINEAR:i.NEAREST),i.bindTexture(i.TEXTURE_2D,r);const a=S3(this);i.texImage2D(i.TEXTURE_2D,0,a,this.width,this.height,0,i.RED,i.FLOAT,null),i.bindTexture(i.TEXTURE_2D,null),Cc(o,i,r),Ha(o,i,!1,(()=>{k3(this),i.clearColor(0,0,0,0),i.clear(i.COLOR_BUFFER_BIT),i.drawArrays(i.TRIANGLE_FAN,0,4),jf(this)})),qp(o),jf(this)}}e.push(r)}return new Et(e,this.m,this.P(),this.canvas,this.l,this.width,this.height)}close(){this.j&&so(this).deleteTexture(Fn(this,2)),Ty=-1}};Et.prototype.close=Et.prototype.close,Et.prototype.clone=Et.prototype.clone,Et.prototype.getAsWebGLTexture=Et.prototype.M,Et.prototype.getAsFloat32Array=Et.prototype.ha,Et.prototype.getAsUint8Array=Et.prototype.ia,Et.prototype.hasWebGLTexture=Et.prototype.P,Et.prototype.hasFloat32Array=Et.prototype.ja,Et.prototype.hasUint8Array=Et.prototype.Fa;var Ty=250;const a5={color:"white",lineWidth:4,radius:6};function Jd(e){return{...a5,fillColor:(e=e||{}).color,...e}}function In(e,t){return e instanceof Function?e(t):e}function Ry(e,t,r){return Math.max(Math.min(t,r),Math.min(Math.max(t,r),e))}function ma(e){if(!e.l)throw Error("CPU rendering requested but CanvasRenderingContext2D not provided.");return e.l}function Ia(e){if(!e.j)throw Error("GPU rendering requested but WebGL2RenderingContext not provided.");return e.j}function Ay(e,t,r){if(t.P())r(t.M());else{const i=t.ja()?t.ha():t.ia();e.m=e.m??new Eo;const o=Ia(e);r((e=new Et([i],t.m,!1,o.canvas,e.m,t.width,t.height)).M()),e.close()}}function Cy(e,t,r,i){const o=(function(h){return h.g||(h.g=new i5),h.g})(e),a=Ia(e),u=Array.isArray(r)?new ImageData(new Uint8ClampedArray(r),1,1):r;Ha(o,a,!0,(()=>{(function(d,p,g,v){const _=d.g;if(_.activeTexture(_.TEXTURE0),_.bindTexture(_.TEXTURE_2D,p),_.activeTexture(_.TEXTURE1),_.bindTexture(_.TEXTURE_2D,d.B),_.texImage2D(_.TEXTURE_2D,0,_.RGBA,_.RGBA,_.UNSIGNED_BYTE,g),d.H&&(function(E,S){if(E!==S)return!1;E=E.entries(),S=S.entries();for(const[x,P]of E){E=x;const L=P;var k=S.next();if(k.done)return!1;const[R,U]=k.value;if(k=U,E!==R||L[0]!==k[0]||L[1]!==k[1]||L[2]!==k[2]||L[3]!==k[3])return!1}return!!S.next().done})(d.H,v))_.activeTexture(_.TEXTURE2),_.bindTexture(_.TEXTURE_2D,d.j);else{d.H=v;const E=Array(1024).fill(0);v.forEach(((S,k)=>{if(S.length!==4)throw Error(`Color at index ${k} is not a four-channel value.`);E[4*k]=S[0],E[4*k+1]=S[1],E[4*k+2]=S[2],E[4*k+3]=S[3]})),_.activeTexture(_.TEXTURE2),_.bindTexture(_.TEXTURE_2D,d.j),_.texImage2D(_.TEXTURE_2D,0,_.RGBA,256,1,0,_.RGBA,_.UNSIGNED_BYTE,new Uint8Array(E))}})(o,t,u,i),a.clearColor(0,0,0,0),a.clear(a.COLOR_BUFFER_BIT),a.drawArrays(a.TRIANGLE_FAN,0,4);const h=o.g;h.activeTexture(h.TEXTURE0),h.bindTexture(h.TEXTURE_2D,null),h.activeTexture(h.TEXTURE1),h.bindTexture(h.TEXTURE_2D,null),h.activeTexture(h.TEXTURE2),h.bindTexture(h.TEXTURE_2D,null)}))}function Py(e,t,r,i){const o=Ia(e),a=(function(d){return d.h||(d.h=new o5),d.h})(e),u=Array.isArray(r)?new ImageData(new Uint8ClampedArray(r),1,1):r,h=Array.isArray(i)?new ImageData(new Uint8ClampedArray(i),1,1):i;Ha(a,o,!0,(()=>{var d=a.g;d.activeTexture(d.TEXTURE0),d.bindTexture(d.TEXTURE_2D,t),d.activeTexture(d.TEXTURE1),d.bindTexture(d.TEXTURE_2D,a.j),d.texImage2D(d.TEXTURE_2D,0,d.RGBA,d.RGBA,d.UNSIGNED_BYTE,u),d.activeTexture(d.TEXTURE2),d.bindTexture(d.TEXTURE_2D,a.B),d.texImage2D(d.TEXTURE_2D,0,d.RGBA,d.RGBA,d.UNSIGNED_BYTE,h),o.clearColor(0,0,0,0),o.clear(o.COLOR_BUFFER_BIT),o.drawArrays(o.TRIANGLE_FAN,0,4),o.bindTexture(o.TEXTURE_2D,null),(d=a.g).activeTexture(d.TEXTURE0),d.bindTexture(d.TEXTURE_2D,null),d.activeTexture(d.TEXTURE1),d.bindTexture(d.TEXTURE_2D,null),d.activeTexture(d.TEXTURE2),d.bindTexture(d.TEXTURE_2D,null)}))}var $t=class{constructor(e,t){e instanceof CanvasRenderingContext2D||e instanceof OffscreenCanvasRenderingContext2D?(this.l=e,this.j=t):this.j=e}ya(e,t){if(e){var r=ma(this);t=Jd(t),r.save();var i=r.canvas,o=0;for(const a of e)r.fillStyle=In(t.fillColor,{index:o,from:a}),r.strokeStyle=In(t.color,{index:o,from:a}),r.lineWidth=In(t.lineWidth,{index:o,from:a}),(e=new Path2D).arc(a.x*i.width,a.y*i.height,In(t.radius,{index:o,from:a}),0,2*Math.PI),r.fill(e),r.stroke(e),++o;r.restore()}}xa(e,t,r){if(e&&t){var i=ma(this);r=Jd(r),i.save();var o=i.canvas,a=0;for(const u of t){i.beginPath(),t=e[u.start];const h=e[u.end];t&&h&&(i.strokeStyle=In(r.color,{index:a,from:t,to:h}),i.lineWidth=In(r.lineWidth,{index:a,from:t,to:h}),i.moveTo(t.x*o.width,t.y*o.height),i.lineTo(h.x*o.width,h.y*o.height)),++a,i.stroke()}i.restore()}}ua(e,t){const r=ma(this);t=Jd(t),r.save(),r.beginPath(),r.lineWidth=In(t.lineWidth,{}),r.strokeStyle=In(t.color,{}),r.fillStyle=In(t.fillColor,{}),r.moveTo(e.originX,e.originY),r.lineTo(e.originX+e.width,e.originY),r.lineTo(e.originX+e.width,e.originY+e.height),r.lineTo(e.originX,e.originY+e.height),r.lineTo(e.originX,e.originY),r.stroke(),r.fill(),r.restore()}va(e,t,r=[0,0,0,255]){this.l?(function(i,o,a,u){const h=Ia(i);Ay(i,o,(d=>{Cy(i,d,a,u),(d=ma(i)).drawImage(h.canvas,0,0,d.canvas.width,d.canvas.height)}))})(this,e,r,t):Cy(this,e.M(),r,t)}wa(e,t,r){this.l?(function(i,o,a,u){const h=Ia(i);Ay(i,o,(d=>{Py(i,d,a,u),(d=ma(i)).drawImage(h.canvas,0,0,d.canvas.width,d.canvas.height)}))})(this,e,t,r):Py(this,e.M(),t,r)}close(){var e,t,r;(e=this.g)==null||e.close(),this.g=void 0,(t=this.h)==null||t.close(),this.h=void 0,(r=this.m)==null||r.close(),this.m=void 0}};function vn(e,t){switch(t){case 0:return e.g.find((r=>r instanceof ImageData));case 1:return e.g.find((r=>typeof ImageBitmap<"u"&&r instanceof ImageBitmap));case 2:return e.g.find((r=>typeof WebGLTexture<"u"&&r instanceof WebGLTexture));default:throw Error(`Type is not supported: ${t}`)}}function b3(e){var t=vn(e,0);if(!t){t=io(e);const r=Pc(e),i=new Uint8Array(e.width*e.height*4);Cc(r,t,Pu(e)),t.readPixels(0,0,e.width,e.height,t.RGBA,t.UNSIGNED_BYTE,i),qp(r),t=new ImageData(new Uint8ClampedArray(i.buffer),e.width,e.height),e.g.push(t)}return t}function Pu(e){let t=vn(e,2);if(!t){const r=io(e);t=ju(e);const i=vn(e,1)||b3(e);r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,i),Sa(e)}return t}function io(e){if(!e.canvas)throw Error("Conversion to different image formats require that a canvas is passed when initializing the image.");return e.h||(e.h=qt(e.canvas.getContext("webgl2"),"You cannot use a canvas that is already bound to a different type of rendering context.")),e.h}function Pc(e){return e.l||(e.l=new Eo),e.l}function ju(e){const t=io(e);t.viewport(0,0,e.width,e.height),t.activeTexture(t.TEXTURE0);let r=vn(e,2);return r||(r=Rs(Pc(e),t),e.g.push(r),e.m=!0),t.bindTexture(t.TEXTURE_2D,r),r}function Sa(e){e.h.bindTexture(e.h.TEXTURE_2D,null)}function jy(e){const t=io(e);return Ha(Pc(e),t,!0,(()=>(function(r,i){const o=r.canvas;if(o.width===r.width&&o.height===r.height)return i();const a=o.width,u=o.height;return o.width=r.width,o.height=r.height,r=i(),o.width=a,o.height=u,r})(e,(()=>{if(t.bindFramebuffer(t.FRAMEBUFFER,null),t.clearColor(0,0,0,0),t.clear(t.COLOR_BUFFER_BIT),t.drawArrays(t.TRIANGLE_FAN,0,4),!(e.canvas instanceof OffscreenCanvas))throw Error("Conversion to ImageBitmap requires that the MediaPipe Tasks is initialized with an OffscreenCanvas");return e.canvas.transferToImageBitmap()}))))}$t.prototype.close=$t.prototype.close,$t.prototype.drawConfidenceMask=$t.prototype.wa,$t.prototype.drawCategoryMask=$t.prototype.va,$t.prototype.drawBoundingBox=$t.prototype.ua,$t.prototype.drawConnectors=$t.prototype.xa,$t.prototype.drawLandmarks=$t.prototype.ya,$t.lerp=function(e,t,r,i,o){return Ry(i*(1-(e-t)/(r-t))+o*(1-(r-e)/(r-t)),i,o)},$t.clamp=Ry;var At=class{constructor(e,t,r,i,o,a,u){this.g=e,this.j=t,this.m=r,this.canvas=i,this.l=o,this.width=a,this.height=u,(this.j||this.m)&&--Oy===0&&console.error("You seem to be creating MPImage instances without invoking .close(). This leaks resources.")}Ea(){return!!vn(this,0)}ka(){return!!vn(this,1)}P(){return!!vn(this,2)}Ca(){return b3(this)}Ba(){var e=vn(this,1);return e||(Pu(this),ju(this),e=jy(this),Sa(this),this.g.push(e),this.j=!0),e}M(){return Pu(this)}clone(){const e=[];for(const t of this.g){let r;if(t instanceof ImageData)r=new ImageData(t.data,this.width,this.height);else if(t instanceof WebGLTexture){const i=io(this),o=Pc(this);i.activeTexture(i.TEXTURE1),r=Rs(o,i),i.bindTexture(i.TEXTURE_2D,r),i.texImage2D(i.TEXTURE_2D,0,i.RGBA,this.width,this.height,0,i.RGBA,i.UNSIGNED_BYTE,null),i.bindTexture(i.TEXTURE_2D,null),Cc(o,i,r),Ha(o,i,!1,(()=>{ju(this),i.clearColor(0,0,0,0),i.clear(i.COLOR_BUFFER_BIT),i.drawArrays(i.TRIANGLE_FAN,0,4),Sa(this)})),qp(o),Sa(this)}else{if(!(t instanceof ImageBitmap))throw Error(`Type is not supported: ${t}`);Pu(this),ju(this),r=jy(this),Sa(this)}e.push(r)}return new At(e,this.ka(),this.P(),this.canvas,this.l,this.width,this.height)}close(){this.j&&vn(this,1).close(),this.m&&io(this).deleteTexture(vn(this,2)),Oy=-1}};At.prototype.close=At.prototype.close,At.prototype.clone=At.prototype.clone,At.prototype.getAsWebGLTexture=At.prototype.M,At.prototype.getAsImageBitmap=At.prototype.Ba,At.prototype.getAsImageData=At.prototype.Ca,At.prototype.hasWebGLTexture=At.prototype.P,At.prototype.hasImageBitmap=At.prototype.ka,At.prototype.hasImageData=At.prototype.Ea;var Oy=250;function on(...e){return e.map((([t,r])=>({start:t,end:r})))}const l5=(function(e){return class extends e{La(){this.i._registerModelResourcesGraphService()}}})((Ny=class{constructor(e,t){this.l=!0,this.i=e,this.g=null,this.h=0,this.m=typeof this.i._addIntToInputStream=="function",t!==void 0?this.i.canvas=t:w3()?this.i.canvas=new OffscreenCanvas(1,1):(console.warn("OffscreenCanvas not supported and GraphRunner constructor glCanvas parameter is undefined. Creating backup canvas."),this.i.canvas=document.createElement("canvas"))}async initializeGraph(e){const t=await(await fetch(e)).arrayBuffer();e=!(e.endsWith(".pbtxt")||e.endsWith(".textproto")),this.setGraph(new Uint8Array(t),e)}setGraphFromString(e){this.setGraph(new TextEncoder().encode(e),!1)}setGraph(e,t){const r=e.length,i=this.i._malloc(r);this.i.HEAPU8.set(e,i),t?this.i._changeBinaryGraph(r,i):this.i._changeTextGraph(r,i),this.i._free(i)}configureAudio(e,t,r,i,o){this.i._configureAudio||console.warn('Attempting to use configureAudio without support for input audio. Is build dep ":gl_graph_runner_audio" missing?'),ae(this,i||"input_audio",(a=>{ae(this,o=o||"audio_header",(u=>{this.i._configureAudio(a,u,e,t??0,r)}))}))}setAutoResizeCanvas(e){this.l=e}setAutoRenderToScreen(e){this.i._setAutoRenderToScreen(e)}setGpuBufferVerticalFlip(e){this.i.gpuOriginForWebTexturesIsBottomLeft=e}da(e){pn(this,"__graph_config__",(t=>{e(t)})),ae(this,"__graph_config__",(t=>{this.i._getGraphConfig(t,void 0)})),delete this.i.simpleListeners.__graph_config__}attachErrorListener(e){this.i.errorListener=e}attachEmptyPacketListener(e,t){this.i.emptyPacketListeners=this.i.emptyPacketListeners||{},this.i.emptyPacketListeners[e]=t}addAudioToStream(e,t,r){this.addAudioToStreamWithShape(e,0,0,t,r)}addAudioToStreamWithShape(e,t,r,i,o){const a=4*e.length;this.h!==a&&(this.g&&this.i._free(this.g),this.g=this.i._malloc(a),this.h=a),this.i.HEAPF32.set(e,this.g/4),ae(this,i,(u=>{this.i._addAudioToInputStream(this.g,t,r,u,o)}))}addGpuBufferToStream(e,t,r){ae(this,t,(i=>{const[o,a]=Ey(this,e,i);this.i._addBoundTextureToStream(i,o,a,r)}))}addBoolToStream(e,t,r){ae(this,t,(i=>{this.i._addBoolToInputStream(e,i,r)}))}addDoubleToStream(e,t,r){ae(this,t,(i=>{this.i._addDoubleToInputStream(e,i,r)}))}addFloatToStream(e,t,r){ae(this,t,(i=>{this.i._addFloatToInputStream(e,i,r)}))}addIntToStream(e,t,r){ae(this,t,(i=>{this.i._addIntToInputStream(e,i,r)}))}addUintToStream(e,t,r){ae(this,t,(i=>{this.i._addUintToInputStream(e,i,r)}))}addStringToStream(e,t,r){ae(this,t,(i=>{ae(this,e,(o=>{this.i._addStringToInputStream(o,i,r)}))}))}addStringRecordToStream(e,t,r){ae(this,t,(i=>{Sy(this,Object.keys(e),(o=>{Sy(this,Object.values(e),(a=>{this.i._addFlatHashMapToInputStream(o,a,Object.keys(e).length,i,r)}))}))}))}addProtoToStream(e,t,r,i){ae(this,r,(o=>{ae(this,t,(a=>{const u=this.i._malloc(e.length);this.i.HEAPU8.set(e,u),this.i._addProtoToInputStream(u,e.length,a,o,i),this.i._free(u)}))}))}addEmptyPacketToStream(e,t){ae(this,e,(r=>{this.i._addEmptyPacketToInputStream(r,t)}))}addBoolVectorToStream(e,t,r){ae(this,t,(i=>{const o=this.i._allocateBoolVector(e.length);if(!o)throw Error("Unable to allocate new bool vector on heap.");for(const a of e)this.i._addBoolVectorEntry(o,a);this.i._addBoolVectorToInputStream(o,i,r)}))}addDoubleVectorToStream(e,t,r){ae(this,t,(i=>{const o=this.i._allocateDoubleVector(e.length);if(!o)throw Error("Unable to allocate new double vector on heap.");for(const a of e)this.i._addDoubleVectorEntry(o,a);this.i._addDoubleVectorToInputStream(o,i,r)}))}addFloatVectorToStream(e,t,r){ae(this,t,(i=>{const o=this.i._allocateFloatVector(e.length);if(!o)throw Error("Unable to allocate new float vector on heap.");for(const a of e)this.i._addFloatVectorEntry(o,a);this.i._addFloatVectorToInputStream(o,i,r)}))}addIntVectorToStream(e,t,r){ae(this,t,(i=>{const o=this.i._allocateIntVector(e.length);if(!o)throw Error("Unable to allocate new int vector on heap.");for(const a of e)this.i._addIntVectorEntry(o,a);this.i._addIntVectorToInputStream(o,i,r)}))}addUintVectorToStream(e,t,r){ae(this,t,(i=>{const o=this.i._allocateUintVector(e.length);if(!o)throw Error("Unable to allocate new unsigned int vector on heap.");for(const a of e)this.i._addUintVectorEntry(o,a);this.i._addUintVectorToInputStream(o,i,r)}))}addStringVectorToStream(e,t,r){ae(this,t,(i=>{const o=this.i._allocateStringVector(e.length);if(!o)throw Error("Unable to allocate new string vector on heap.");for(const a of e)ae(this,a,(u=>{this.i._addStringVectorEntry(o,u)}));this.i._addStringVectorToInputStream(o,i,r)}))}addBoolToInputSidePacket(e,t){ae(this,t,(r=>{this.i._addBoolToInputSidePacket(e,r)}))}addDoubleToInputSidePacket(e,t){ae(this,t,(r=>{this.i._addDoubleToInputSidePacket(e,r)}))}addFloatToInputSidePacket(e,t){ae(this,t,(r=>{this.i._addFloatToInputSidePacket(e,r)}))}addIntToInputSidePacket(e,t){ae(this,t,(r=>{this.i._addIntToInputSidePacket(e,r)}))}addUintToInputSidePacket(e,t){ae(this,t,(r=>{this.i._addUintToInputSidePacket(e,r)}))}addStringToInputSidePacket(e,t){ae(this,t,(r=>{ae(this,e,(i=>{this.i._addStringToInputSidePacket(i,r)}))}))}addProtoToInputSidePacket(e,t,r){ae(this,r,(i=>{ae(this,t,(o=>{const a=this.i._malloc(e.length);this.i.HEAPU8.set(e,a),this.i._addProtoToInputSidePacket(a,e.length,o,i),this.i._free(a)}))}))}addBoolVectorToInputSidePacket(e,t){ae(this,t,(r=>{const i=this.i._allocateBoolVector(e.length);if(!i)throw Error("Unable to allocate new bool vector on heap.");for(const o of e)this.i._addBoolVectorEntry(i,o);this.i._addBoolVectorToInputSidePacket(i,r)}))}addDoubleVectorToInputSidePacket(e,t){ae(this,t,(r=>{const i=this.i._allocateDoubleVector(e.length);if(!i)throw Error("Unable to allocate new double vector on heap.");for(const o of e)this.i._addDoubleVectorEntry(i,o);this.i._addDoubleVectorToInputSidePacket(i,r)}))}addFloatVectorToInputSidePacket(e,t){ae(this,t,(r=>{const i=this.i._allocateFloatVector(e.length);if(!i)throw Error("Unable to allocate new float vector on heap.");for(const o of e)this.i._addFloatVectorEntry(i,o);this.i._addFloatVectorToInputSidePacket(i,r)}))}addIntVectorToInputSidePacket(e,t){ae(this,t,(r=>{const i=this.i._allocateIntVector(e.length);if(!i)throw Error("Unable to allocate new int vector on heap.");for(const o of e)this.i._addIntVectorEntry(i,o);this.i._addIntVectorToInputSidePacket(i,r)}))}addUintVectorToInputSidePacket(e,t){ae(this,t,(r=>{const i=this.i._allocateUintVector(e.length);if(!i)throw Error("Unable to allocate new unsigned int vector on heap.");for(const o of e)this.i._addUintVectorEntry(i,o);this.i._addUintVectorToInputSidePacket(i,r)}))}addStringVectorToInputSidePacket(e,t){ae(this,t,(r=>{const i=this.i._allocateStringVector(e.length);if(!i)throw Error("Unable to allocate new string vector on heap.");for(const o of e)ae(this,o,(a=>{this.i._addStringVectorEntry(i,a)}));this.i._addStringVectorToInputSidePacket(i,r)}))}attachBoolListener(e,t){pn(this,e,t),ae(this,e,(r=>{this.i._attachBoolListener(r)}))}attachBoolVectorListener(e,t){gs(this,e,t),ae(this,e,(r=>{this.i._attachBoolVectorListener(r)}))}attachIntListener(e,t){pn(this,e,t),ae(this,e,(r=>{this.i._attachIntListener(r)}))}attachIntVectorListener(e,t){gs(this,e,t),ae(this,e,(r=>{this.i._attachIntVectorListener(r)}))}attachUintListener(e,t){pn(this,e,t),ae(this,e,(r=>{this.i._attachUintListener(r)}))}attachUintVectorListener(e,t){gs(this,e,t),ae(this,e,(r=>{this.i._attachUintVectorListener(r)}))}attachDoubleListener(e,t){pn(this,e,t),ae(this,e,(r=>{this.i._attachDoubleListener(r)}))}attachDoubleVectorListener(e,t){gs(this,e,t),ae(this,e,(r=>{this.i._attachDoubleVectorListener(r)}))}attachFloatListener(e,t){pn(this,e,t),ae(this,e,(r=>{this.i._attachFloatListener(r)}))}attachFloatVectorListener(e,t){gs(this,e,t),ae(this,e,(r=>{this.i._attachFloatVectorListener(r)}))}attachStringListener(e,t){pn(this,e,t),ae(this,e,(r=>{this.i._attachStringListener(r)}))}attachStringVectorListener(e,t){gs(this,e,t),ae(this,e,(r=>{this.i._attachStringVectorListener(r)}))}attachProtoListener(e,t,r){pn(this,e,t),ae(this,e,(i=>{this.i._attachProtoListener(i,r||!1)}))}attachProtoVectorListener(e,t,r){gs(this,e,t),ae(this,e,(i=>{this.i._attachProtoVectorListener(i,r||!1)}))}attachAudioListener(e,t,r){this.i._attachAudioListener||console.warn('Attempting to use attachAudioListener without support for output audio. Is build dep ":gl_graph_runner_audio_out" missing?'),pn(this,e,((i,o)=>{i=new Float32Array(i.buffer,i.byteOffset,i.length/4),t(i,o)})),ae(this,e,(i=>{this.i._attachAudioListener(i,r||!1)}))}finishProcessing(){this.i._waitUntilIdle()}closeGraph(){this.i._closeGraph(),this.i.simpleListeners=void 0,this.i.emptyPacketListeners=void 0}},class extends Ny{get ea(){return this.i}qa(e,t,r){ae(this,t,(i=>{const[o,a]=Ey(this,e,i);this.ea._addBoundTextureAsImageToStream(i,o,a,r)}))}U(e,t){pn(this,e,t),ae(this,e,(r=>{this.ea._attachImageListener(r)}))}ca(e,t){gs(this,e,t),ae(this,e,(r=>{this.ea._attachImageVectorListener(r)}))}}));var Ny,Br=class extends l5{};async function Ee(e,t,r){return(async function(i,o,a,u){return n5(i,o,a,u)})(e,r.canvas??(w3()?void 0:document.createElement("canvas")),t,r)}function x3(e,t,r,i){if(e.T){const a=new qw;if(r!=null&&r.regionOfInterest){if(!e.pa)throw Error("This task doesn't support region-of-interest.");var o=r.regionOfInterest;if(o.left>=o.right||o.top>=o.bottom)throw Error("Expected RectF with left < right and top < bottom.");if(o.left<0||o.top<0||o.right>1||o.bottom>1)throw Error("Expected RectF values to be in [0,1].");oe(a,1,(o.left+o.right)/2),oe(a,2,(o.top+o.bottom)/2),oe(a,4,o.right-o.left),oe(a,3,o.bottom-o.top)}else oe(a,1,.5),oe(a,2,.5),oe(a,4,1),oe(a,3,1);if(r!=null&&r.rotationDegrees){if((r==null?void 0:r.rotationDegrees)%90!=0)throw Error("Expected rotation to be a multiple of 90.");if(oe(a,5,-Math.PI*r.rotationDegrees/180),(r==null?void 0:r.rotationDegrees)%180!=0){const[u,h]=_3(t);r=lt(a,3)*h/u,o=lt(a,4)*u/h,oe(a,4,r),oe(a,3,o)}}e.g.addProtoToStream(a.g(),"mediapipe.NormalizedRect",e.T,i)}e.g.qa(t,e.aa,i??performance.now()),e.finishProcessing()}function zr(e,t,r){var i;if((i=e.baseOptions)!=null&&i.g())throw Error("Task is not initialized with image mode. 'runningMode' must be set to 'IMAGE'.");x3(e,t,r,e.B+1)}function kn(e,t,r,i){var o;if(!((o=e.baseOptions)!=null&&o.g()))throw Error("Task is not initialized with video mode. 'runningMode' must be set to 'VIDEO'.");x3(e,t,r,i)}function oo(e,t,r,i){var o=t.data;const a=t.width,u=a*(t=t.height);if((o instanceof Uint8Array||o instanceof Float32Array)&&o.length!==u)throw Error("Unsupported channel count: "+o.length/u);return e=new Et([o],r,!1,e.g.i.canvas,e.O,a,t),i?e.clone():e}var cr=class extends Cu{constructor(e,t,r,i){super(e),this.g=e,this.aa=t,this.T=r,this.pa=i,this.O=new Eo}l(e,t=!0){if("runningMode"in e&&Oa(this.baseOptions,2,!!e.runningMode&&e.runningMode!=="IMAGE"),e.canvas!==void 0&&this.g.i.canvas!==e.canvas)throw Error("You must create a new task to reset the canvas.");return super.l(e,t)}close(){this.O.close(),super.close()}};cr.prototype.close=cr.prototype.close;var Or=class extends cr{constructor(e,t){super(new Br(e,t),"image_in","norm_rect_in",!1),this.j={detections:[]},he(e=this.h=new xc,0,1,t=new Ye),oe(this.h,2,.5),oe(this.h,3,.3)}get baseOptions(){return Te(this.h,Ye,1)}set baseOptions(e){he(this.h,0,1,e)}o(e){return"minDetectionConfidence"in e&&oe(this.h,2,e.minDetectionConfidence??.5),"minSuppressionThreshold"in e&&oe(this.h,3,e.minSuppressionThreshold??.3),this.l(e)}D(e,t){return this.j={detections:[]},zr(this,e,t),this.j}F(e,t,r){return this.j={detections:[]},kn(this,e,r,t),this.j}m(){var e=new hr;Ve(e,"image_in"),Ve(e,"norm_rect_in"),Pe(e,"detections");const t=new Sr;rn(t,Vx,this.h);const r=new Jt;br(r,"mediapipe.tasks.vision.face_detector.FaceDetectorGraph"),$e(r,"IMAGE:image_in"),$e(r,"NORM_RECT:norm_rect_in"),Se(r,"DETECTIONS:detections"),r.o(t),xr(e,r),this.g.attachProtoVectorListener("detections",((i,o)=>{for(const a of i)i=Kw(a),this.j.detections.push(y3(i));Z(this,o)})),this.g.attachEmptyPacketListener("detections",(i=>{Z(this,i)})),e=e.g(),this.setGraph(new Uint8Array(e),!0)}};Or.prototype.detectForVideo=Or.prototype.F,Or.prototype.detect=Or.prototype.D,Or.prototype.setOptions=Or.prototype.o,Or.createFromModelPath=async function(e,t){return Ee(Or,e,{baseOptions:{modelAssetPath:t}})},Or.createFromModelBuffer=function(e,t){return Ee(Or,e,{baseOptions:{modelAssetBuffer:t}})},Or.createFromOptions=function(e,t){return Ee(Or,e,t)};var Xp=on([61,146],[146,91],[91,181],[181,84],[84,17],[17,314],[314,405],[405,321],[321,375],[375,291],[61,185],[185,40],[40,39],[39,37],[37,0],[0,267],[267,269],[269,270],[270,409],[409,291],[78,95],[95,88],[88,178],[178,87],[87,14],[14,317],[317,402],[402,318],[318,324],[324,308],[78,191],[191,80],[80,81],[81,82],[82,13],[13,312],[312,311],[311,310],[310,415],[415,308]),Yp=on([263,249],[249,390],[390,373],[373,374],[374,380],[380,381],[381,382],[382,362],[263,466],[466,388],[388,387],[387,386],[386,385],[385,384],[384,398],[398,362]),Qp=on([276,283],[283,282],[282,295],[295,285],[300,293],[293,334],[334,296],[296,336]),T3=on([474,475],[475,476],[476,477],[477,474]),Zp=on([33,7],[7,163],[163,144],[144,145],[145,153],[153,154],[154,155],[155,133],[33,246],[246,161],[161,160],[160,159],[159,158],[158,157],[157,173],[173,133]),em=on([46,53],[53,52],[52,65],[65,55],[70,63],[63,105],[105,66],[66,107]),R3=on([469,470],[470,471],[471,472],[472,469]),tm=on([10,338],[338,297],[297,332],[332,284],[284,251],[251,389],[389,356],[356,454],[454,323],[323,361],[361,288],[288,397],[397,365],[365,379],[379,378],[378,400],[400,377],[377,152],[152,148],[148,176],[176,149],[149,150],[150,136],[136,172],[172,58],[58,132],[132,93],[93,234],[234,127],[127,162],[162,21],[21,54],[54,103],[103,67],[67,109],[109,10]),A3=[...Xp,...Yp,...Qp,...Zp,...em,...tm],C3=on([127,34],[34,139],[139,127],[11,0],[0,37],[37,11],[232,231],[231,120],[120,232],[72,37],[37,39],[39,72],[128,121],[121,47],[47,128],[232,121],[121,128],[128,232],[104,69],[69,67],[67,104],[175,171],[171,148],[148,175],[118,50],[50,101],[101,118],[73,39],[39,40],[40,73],[9,151],[151,108],[108,9],[48,115],[115,131],[131,48],[194,204],[204,211],[211,194],[74,40],[40,185],[185,74],[80,42],[42,183],[183,80],[40,92],[92,186],[186,40],[230,229],[229,118],[118,230],[202,212],[212,214],[214,202],[83,18],[18,17],[17,83],[76,61],[61,146],[146,76],[160,29],[29,30],[30,160],[56,157],[157,173],[173,56],[106,204],[204,194],[194,106],[135,214],[214,192],[192,135],[203,165],[165,98],[98,203],[21,71],[71,68],[68,21],[51,45],[45,4],[4,51],[144,24],[24,23],[23,144],[77,146],[146,91],[91,77],[205,50],[50,187],[187,205],[201,200],[200,18],[18,201],[91,106],[106,182],[182,91],[90,91],[91,181],[181,90],[85,84],[84,17],[17,85],[206,203],[203,36],[36,206],[148,171],[171,140],[140,148],[92,40],[40,39],[39,92],[193,189],[189,244],[244,193],[159,158],[158,28],[28,159],[247,246],[246,161],[161,247],[236,3],[3,196],[196,236],[54,68],[68,104],[104,54],[193,168],[168,8],[8,193],[117,228],[228,31],[31,117],[189,193],[193,55],[55,189],[98,97],[97,99],[99,98],[126,47],[47,100],[100,126],[166,79],[79,218],[218,166],[155,154],[154,26],[26,155],[209,49],[49,131],[131,209],[135,136],[136,150],[150,135],[47,126],[126,217],[217,47],[223,52],[52,53],[53,223],[45,51],[51,134],[134,45],[211,170],[170,140],[140,211],[67,69],[69,108],[108,67],[43,106],[106,91],[91,43],[230,119],[119,120],[120,230],[226,130],[130,247],[247,226],[63,53],[53,52],[52,63],[238,20],[20,242],[242,238],[46,70],[70,156],[156,46],[78,62],[62,96],[96,78],[46,53],[53,63],[63,46],[143,34],[34,227],[227,143],[123,117],[117,111],[111,123],[44,125],[125,19],[19,44],[236,134],[134,51],[51,236],[216,206],[206,205],[205,216],[154,153],[153,22],[22,154],[39,37],[37,167],[167,39],[200,201],[201,208],[208,200],[36,142],[142,100],[100,36],[57,212],[212,202],[202,57],[20,60],[60,99],[99,20],[28,158],[158,157],[157,28],[35,226],[226,113],[113,35],[160,159],[159,27],[27,160],[204,202],[202,210],[210,204],[113,225],[225,46],[46,113],[43,202],[202,204],[204,43],[62,76],[76,77],[77,62],[137,123],[123,116],[116,137],[41,38],[38,72],[72,41],[203,129],[129,142],[142,203],[64,98],[98,240],[240,64],[49,102],[102,64],[64,49],[41,73],[73,74],[74,41],[212,216],[216,207],[207,212],[42,74],[74,184],[184,42],[169,170],[170,211],[211,169],[170,149],[149,176],[176,170],[105,66],[66,69],[69,105],[122,6],[6,168],[168,122],[123,147],[147,187],[187,123],[96,77],[77,90],[90,96],[65,55],[55,107],[107,65],[89,90],[90,180],[180,89],[101,100],[100,120],[120,101],[63,105],[105,104],[104,63],[93,137],[137,227],[227,93],[15,86],[86,85],[85,15],[129,102],[102,49],[49,129],[14,87],[87,86],[86,14],[55,8],[8,9],[9,55],[100,47],[47,121],[121,100],[145,23],[23,22],[22,145],[88,89],[89,179],[179,88],[6,122],[122,196],[196,6],[88,95],[95,96],[96,88],[138,172],[172,136],[136,138],[215,58],[58,172],[172,215],[115,48],[48,219],[219,115],[42,80],[80,81],[81,42],[195,3],[3,51],[51,195],[43,146],[146,61],[61,43],[171,175],[175,199],[199,171],[81,82],[82,38],[38,81],[53,46],[46,225],[225,53],[144,163],[163,110],[110,144],[52,65],[65,66],[66,52],[229,228],[228,117],[117,229],[34,127],[127,234],[234,34],[107,108],[108,69],[69,107],[109,108],[108,151],[151,109],[48,64],[64,235],[235,48],[62,78],[78,191],[191,62],[129,209],[209,126],[126,129],[111,35],[35,143],[143,111],[117,123],[123,50],[50,117],[222,65],[65,52],[52,222],[19,125],[125,141],[141,19],[221,55],[55,65],[65,221],[3,195],[195,197],[197,3],[25,7],[7,33],[33,25],[220,237],[237,44],[44,220],[70,71],[71,139],[139,70],[122,193],[193,245],[245,122],[247,130],[130,33],[33,247],[71,21],[21,162],[162,71],[170,169],[169,150],[150,170],[188,174],[174,196],[196,188],[216,186],[186,92],[92,216],[2,97],[97,167],[167,2],[141,125],[125,241],[241,141],[164,167],[167,37],[37,164],[72,38],[38,12],[12,72],[38,82],[82,13],[13,38],[63,68],[68,71],[71,63],[226,35],[35,111],[111,226],[101,50],[50,205],[205,101],[206,92],[92,165],[165,206],[209,198],[198,217],[217,209],[165,167],[167,97],[97,165],[220,115],[115,218],[218,220],[133,112],[112,243],[243,133],[239,238],[238,241],[241,239],[214,135],[135,169],[169,214],[190,173],[173,133],[133,190],[171,208],[208,32],[32,171],[125,44],[44,237],[237,125],[86,87],[87,178],[178,86],[85,86],[86,179],[179,85],[84,85],[85,180],[180,84],[83,84],[84,181],[181,83],[201,83],[83,182],[182,201],[137,93],[93,132],[132,137],[76,62],[62,183],[183,76],[61,76],[76,184],[184,61],[57,61],[61,185],[185,57],[212,57],[57,186],[186,212],[214,207],[207,187],[187,214],[34,143],[143,156],[156,34],[79,239],[239,237],[237,79],[123,137],[137,177],[177,123],[44,1],[1,4],[4,44],[201,194],[194,32],[32,201],[64,102],[102,129],[129,64],[213,215],[215,138],[138,213],[59,166],[166,219],[219,59],[242,99],[99,97],[97,242],[2,94],[94,141],[141,2],[75,59],[59,235],[235,75],[24,110],[110,228],[228,24],[25,130],[130,226],[226,25],[23,24],[24,229],[229,23],[22,23],[23,230],[230,22],[26,22],[22,231],[231,26],[112,26],[26,232],[232,112],[189,190],[190,243],[243,189],[221,56],[56,190],[190,221],[28,56],[56,221],[221,28],[27,28],[28,222],[222,27],[29,27],[27,223],[223,29],[30,29],[29,224],[224,30],[247,30],[30,225],[225,247],[238,79],[79,20],[20,238],[166,59],[59,75],[75,166],[60,75],[75,240],[240,60],[147,177],[177,215],[215,147],[20,79],[79,166],[166,20],[187,147],[147,213],[213,187],[112,233],[233,244],[244,112],[233,128],[128,245],[245,233],[128,114],[114,188],[188,128],[114,217],[217,174],[174,114],[131,115],[115,220],[220,131],[217,198],[198,236],[236,217],[198,131],[131,134],[134,198],[177,132],[132,58],[58,177],[143,35],[35,124],[124,143],[110,163],[163,7],[7,110],[228,110],[110,25],[25,228],[356,389],[389,368],[368,356],[11,302],[302,267],[267,11],[452,350],[350,349],[349,452],[302,303],[303,269],[269,302],[357,343],[343,277],[277,357],[452,453],[453,357],[357,452],[333,332],[332,297],[297,333],[175,152],[152,377],[377,175],[347,348],[348,330],[330,347],[303,304],[304,270],[270,303],[9,336],[336,337],[337,9],[278,279],[279,360],[360,278],[418,262],[262,431],[431,418],[304,408],[408,409],[409,304],[310,415],[415,407],[407,310],[270,409],[409,410],[410,270],[450,348],[348,347],[347,450],[422,430],[430,434],[434,422],[313,314],[314,17],[17,313],[306,307],[307,375],[375,306],[387,388],[388,260],[260,387],[286,414],[414,398],[398,286],[335,406],[406,418],[418,335],[364,367],[367,416],[416,364],[423,358],[358,327],[327,423],[251,284],[284,298],[298,251],[281,5],[5,4],[4,281],[373,374],[374,253],[253,373],[307,320],[320,321],[321,307],[425,427],[427,411],[411,425],[421,313],[313,18],[18,421],[321,405],[405,406],[406,321],[320,404],[404,405],[405,320],[315,16],[16,17],[17,315],[426,425],[425,266],[266,426],[377,400],[400,369],[369,377],[322,391],[391,269],[269,322],[417,465],[465,464],[464,417],[386,257],[257,258],[258,386],[466,260],[260,388],[388,466],[456,399],[399,419],[419,456],[284,332],[332,333],[333,284],[417,285],[285,8],[8,417],[346,340],[340,261],[261,346],[413,441],[441,285],[285,413],[327,460],[460,328],[328,327],[355,371],[371,329],[329,355],[392,439],[439,438],[438,392],[382,341],[341,256],[256,382],[429,420],[420,360],[360,429],[364,394],[394,379],[379,364],[277,343],[343,437],[437,277],[443,444],[444,283],[283,443],[275,440],[440,363],[363,275],[431,262],[262,369],[369,431],[297,338],[338,337],[337,297],[273,375],[375,321],[321,273],[450,451],[451,349],[349,450],[446,342],[342,467],[467,446],[293,334],[334,282],[282,293],[458,461],[461,462],[462,458],[276,353],[353,383],[383,276],[308,324],[324,325],[325,308],[276,300],[300,293],[293,276],[372,345],[345,447],[447,372],[352,345],[345,340],[340,352],[274,1],[1,19],[19,274],[456,248],[248,281],[281,456],[436,427],[427,425],[425,436],[381,256],[256,252],[252,381],[269,391],[391,393],[393,269],[200,199],[199,428],[428,200],[266,330],[330,329],[329,266],[287,273],[273,422],[422,287],[250,462],[462,328],[328,250],[258,286],[286,384],[384,258],[265,353],[353,342],[342,265],[387,259],[259,257],[257,387],[424,431],[431,430],[430,424],[342,353],[353,276],[276,342],[273,335],[335,424],[424,273],[292,325],[325,307],[307,292],[366,447],[447,345],[345,366],[271,303],[303,302],[302,271],[423,266],[266,371],[371,423],[294,455],[455,460],[460,294],[279,278],[278,294],[294,279],[271,272],[272,304],[304,271],[432,434],[434,427],[427,432],[272,407],[407,408],[408,272],[394,430],[430,431],[431,394],[395,369],[369,400],[400,395],[334,333],[333,299],[299,334],[351,417],[417,168],[168,351],[352,280],[280,411],[411,352],[325,319],[319,320],[320,325],[295,296],[296,336],[336,295],[319,403],[403,404],[404,319],[330,348],[348,349],[349,330],[293,298],[298,333],[333,293],[323,454],[454,447],[447,323],[15,16],[16,315],[315,15],[358,429],[429,279],[279,358],[14,15],[15,316],[316,14],[285,336],[336,9],[9,285],[329,349],[349,350],[350,329],[374,380],[380,252],[252,374],[318,402],[402,403],[403,318],[6,197],[197,419],[419,6],[318,319],[319,325],[325,318],[367,364],[364,365],[365,367],[435,367],[367,397],[397,435],[344,438],[438,439],[439,344],[272,271],[271,311],[311,272],[195,5],[5,281],[281,195],[273,287],[287,291],[291,273],[396,428],[428,199],[199,396],[311,271],[271,268],[268,311],[283,444],[444,445],[445,283],[373,254],[254,339],[339,373],[282,334],[334,296],[296,282],[449,347],[347,346],[346,449],[264,447],[447,454],[454,264],[336,296],[296,299],[299,336],[338,10],[10,151],[151,338],[278,439],[439,455],[455,278],[292,407],[407,415],[415,292],[358,371],[371,355],[355,358],[340,345],[345,372],[372,340],[346,347],[347,280],[280,346],[442,443],[443,282],[282,442],[19,94],[94,370],[370,19],[441,442],[442,295],[295,441],[248,419],[419,197],[197,248],[263,255],[255,359],[359,263],[440,275],[275,274],[274,440],[300,383],[383,368],[368,300],[351,412],[412,465],[465,351],[263,467],[467,466],[466,263],[301,368],[368,389],[389,301],[395,378],[378,379],[379,395],[412,351],[351,419],[419,412],[436,426],[426,322],[322,436],[2,164],[164,393],[393,2],[370,462],[462,461],[461,370],[164,0],[0,267],[267,164],[302,11],[11,12],[12,302],[268,12],[12,13],[13,268],[293,300],[300,301],[301,293],[446,261],[261,340],[340,446],[330,266],[266,425],[425,330],[426,423],[423,391],[391,426],[429,355],[355,437],[437,429],[391,327],[327,326],[326,391],[440,457],[457,438],[438,440],[341,382],[382,362],[362,341],[459,457],[457,461],[461,459],[434,430],[430,394],[394,434],[414,463],[463,362],[362,414],[396,369],[369,262],[262,396],[354,461],[461,457],[457,354],[316,403],[403,402],[402,316],[315,404],[404,403],[403,315],[314,405],[405,404],[404,314],[313,406],[406,405],[405,313],[421,418],[418,406],[406,421],[366,401],[401,361],[361,366],[306,408],[408,407],[407,306],[291,409],[409,408],[408,291],[287,410],[410,409],[409,287],[432,436],[436,410],[410,432],[434,416],[416,411],[411,434],[264,368],[368,383],[383,264],[309,438],[438,457],[457,309],[352,376],[376,401],[401,352],[274,275],[275,4],[4,274],[421,428],[428,262],[262,421],[294,327],[327,358],[358,294],[433,416],[416,367],[367,433],[289,455],[455,439],[439,289],[462,370],[370,326],[326,462],[2,326],[326,370],[370,2],[305,460],[460,455],[455,305],[254,449],[449,448],[448,254],[255,261],[261,446],[446,255],[253,450],[450,449],[449,253],[252,451],[451,450],[450,252],[256,452],[452,451],[451,256],[341,453],[453,452],[452,341],[413,464],[464,463],[463,413],[441,413],[413,414],[414,441],[258,442],[442,441],[441,258],[257,443],[443,442],[442,257],[259,444],[444,443],[443,259],[260,445],[445,444],[444,260],[467,342],[342,445],[445,467],[459,458],[458,250],[250,459],[289,392],[392,290],[290,289],[290,328],[328,460],[460,290],[376,433],[433,435],[435,376],[250,290],[290,392],[392,250],[411,416],[416,433],[433,411],[341,463],[463,464],[464,341],[453,464],[464,465],[465,453],[357,465],[465,412],[412,357],[343,412],[412,399],[399,343],[360,363],[363,440],[440,360],[437,399],[399,456],[456,437],[420,456],[456,363],[363,420],[401,435],[435,288],[288,401],[372,383],[383,353],[353,372],[339,255],[255,249],[249,339],[448,261],[261,255],[255,448],[133,243],[243,190],[190,133],[133,155],[155,112],[112,133],[33,246],[246,247],[247,33],[33,130],[130,25],[25,33],[398,384],[384,286],[286,398],[362,398],[398,414],[414,362],[362,463],[463,341],[341,362],[263,359],[359,467],[467,263],[263,249],[249,255],[255,263],[466,467],[467,260],[260,466],[75,60],[60,166],[166,75],[238,239],[239,79],[79,238],[162,127],[127,139],[139,162],[72,11],[11,37],[37,72],[121,232],[232,120],[120,121],[73,72],[72,39],[39,73],[114,128],[128,47],[47,114],[233,232],[232,128],[128,233],[103,104],[104,67],[67,103],[152,175],[175,148],[148,152],[119,118],[118,101],[101,119],[74,73],[73,40],[40,74],[107,9],[9,108],[108,107],[49,48],[48,131],[131,49],[32,194],[194,211],[211,32],[184,74],[74,185],[185,184],[191,80],[80,183],[183,191],[185,40],[40,186],[186,185],[119,230],[230,118],[118,119],[210,202],[202,214],[214,210],[84,83],[83,17],[17,84],[77,76],[76,146],[146,77],[161,160],[160,30],[30,161],[190,56],[56,173],[173,190],[182,106],[106,194],[194,182],[138,135],[135,192],[192,138],[129,203],[203,98],[98,129],[54,21],[21,68],[68,54],[5,51],[51,4],[4,5],[145,144],[144,23],[23,145],[90,77],[77,91],[91,90],[207,205],[205,187],[187,207],[83,201],[201,18],[18,83],[181,91],[91,182],[182,181],[180,90],[90,181],[181,180],[16,85],[85,17],[17,16],[205,206],[206,36],[36,205],[176,148],[148,140],[140,176],[165,92],[92,39],[39,165],[245,193],[193,244],[244,245],[27,159],[159,28],[28,27],[30,247],[247,161],[161,30],[174,236],[236,196],[196,174],[103,54],[54,104],[104,103],[55,193],[193,8],[8,55],[111,117],[117,31],[31,111],[221,189],[189,55],[55,221],[240,98],[98,99],[99,240],[142,126],[126,100],[100,142],[219,166],[166,218],[218,219],[112,155],[155,26],[26,112],[198,209],[209,131],[131,198],[169,135],[135,150],[150,169],[114,47],[47,217],[217,114],[224,223],[223,53],[53,224],[220,45],[45,134],[134,220],[32,211],[211,140],[140,32],[109,67],[67,108],[108,109],[146,43],[43,91],[91,146],[231,230],[230,120],[120,231],[113,226],[226,247],[247,113],[105,63],[63,52],[52,105],[241,238],[238,242],[242,241],[124,46],[46,156],[156,124],[95,78],[78,96],[96,95],[70,46],[46,63],[63,70],[116,143],[143,227],[227,116],[116,123],[123,111],[111,116],[1,44],[44,19],[19,1],[3,236],[236,51],[51,3],[207,216],[216,205],[205,207],[26,154],[154,22],[22,26],[165,39],[39,167],[167,165],[199,200],[200,208],[208,199],[101,36],[36,100],[100,101],[43,57],[57,202],[202,43],[242,20],[20,99],[99,242],[56,28],[28,157],[157,56],[124,35],[35,113],[113,124],[29,160],[160,27],[27,29],[211,204],[204,210],[210,211],[124,113],[113,46],[46,124],[106,43],[43,204],[204,106],[96,62],[62,77],[77,96],[227,137],[137,116],[116,227],[73,41],[41,72],[72,73],[36,203],[203,142],[142,36],[235,64],[64,240],[240,235],[48,49],[49,64],[64,48],[42,41],[41,74],[74,42],[214,212],[212,207],[207,214],[183,42],[42,184],[184,183],[210,169],[169,211],[211,210],[140,170],[170,176],[176,140],[104,105],[105,69],[69,104],[193,122],[122,168],[168,193],[50,123],[123,187],[187,50],[89,96],[96,90],[90,89],[66,65],[65,107],[107,66],[179,89],[89,180],[180,179],[119,101],[101,120],[120,119],[68,63],[63,104],[104,68],[234,93],[93,227],[227,234],[16,15],[15,85],[85,16],[209,129],[129,49],[49,209],[15,14],[14,86],[86,15],[107,55],[55,9],[9,107],[120,100],[100,121],[121,120],[153,145],[145,22],[22,153],[178,88],[88,179],[179,178],[197,6],[6,196],[196,197],[89,88],[88,96],[96,89],[135,138],[138,136],[136,135],[138,215],[215,172],[172,138],[218,115],[115,219],[219,218],[41,42],[42,81],[81,41],[5,195],[195,51],[51,5],[57,43],[43,61],[61,57],[208,171],[171,199],[199,208],[41,81],[81,38],[38,41],[224,53],[53,225],[225,224],[24,144],[144,110],[110,24],[105,52],[52,66],[66,105],[118,229],[229,117],[117,118],[227,34],[34,234],[234,227],[66,107],[107,69],[69,66],[10,109],[109,151],[151,10],[219,48],[48,235],[235,219],[183,62],[62,191],[191,183],[142,129],[129,126],[126,142],[116,111],[111,143],[143,116],[118,117],[117,50],[50,118],[223,222],[222,52],[52,223],[94,19],[19,141],[141,94],[222,221],[221,65],[65,222],[196,3],[3,197],[197,196],[45,220],[220,44],[44,45],[156,70],[70,139],[139,156],[188,122],[122,245],[245,188],[139,71],[71,162],[162,139],[149,170],[170,150],[150,149],[122,188],[188,196],[196,122],[206,216],[216,92],[92,206],[164,2],[2,167],[167,164],[242,141],[141,241],[241,242],[0,164],[164,37],[37,0],[11,72],[72,12],[12,11],[12,38],[38,13],[13,12],[70,63],[63,71],[71,70],[31,226],[226,111],[111,31],[36,101],[101,205],[205,36],[203,206],[206,165],[165,203],[126,209],[209,217],[217,126],[98,165],[165,97],[97,98],[237,220],[220,218],[218,237],[237,239],[239,241],[241,237],[210,214],[214,169],[169,210],[140,171],[171,32],[32,140],[241,125],[125,237],[237,241],[179,86],[86,178],[178,179],[180,85],[85,179],[179,180],[181,84],[84,180],[180,181],[182,83],[83,181],[181,182],[194,201],[201,182],[182,194],[177,137],[137,132],[132,177],[184,76],[76,183],[183,184],[185,61],[61,184],[184,185],[186,57],[57,185],[185,186],[216,212],[212,186],[186,216],[192,214],[214,187],[187,192],[139,34],[34,156],[156,139],[218,79],[79,237],[237,218],[147,123],[123,177],[177,147],[45,44],[44,4],[4,45],[208,201],[201,32],[32,208],[98,64],[64,129],[129,98],[192,213],[213,138],[138,192],[235,59],[59,219],[219,235],[141,242],[242,97],[97,141],[97,2],[2,141],[141,97],[240,75],[75,235],[235,240],[229,24],[24,228],[228,229],[31,25],[25,226],[226,31],[230,23],[23,229],[229,230],[231,22],[22,230],[230,231],[232,26],[26,231],[231,232],[233,112],[112,232],[232,233],[244,189],[189,243],[243,244],[189,221],[221,190],[190,189],[222,28],[28,221],[221,222],[223,27],[27,222],[222,223],[224,29],[29,223],[223,224],[225,30],[30,224],[224,225],[113,247],[247,225],[225,113],[99,60],[60,240],[240,99],[213,147],[147,215],[215,213],[60,20],[20,166],[166,60],[192,187],[187,213],[213,192],[243,112],[112,244],[244,243],[244,233],[233,245],[245,244],[245,128],[128,188],[188,245],[188,114],[114,174],[174,188],[134,131],[131,220],[220,134],[174,217],[217,236],[236,174],[236,198],[198,134],[134,236],[215,177],[177,58],[58,215],[156,143],[143,124],[124,156],[25,110],[110,7],[7,25],[31,228],[228,25],[25,31],[264,356],[356,368],[368,264],[0,11],[11,267],[267,0],[451,452],[452,349],[349,451],[267,302],[302,269],[269,267],[350,357],[357,277],[277,350],[350,452],[452,357],[357,350],[299,333],[333,297],[297,299],[396,175],[175,377],[377,396],[280,347],[347,330],[330,280],[269,303],[303,270],[270,269],[151,9],[9,337],[337,151],[344,278],[278,360],[360,344],[424,418],[418,431],[431,424],[270,304],[304,409],[409,270],[272,310],[310,407],[407,272],[322,270],[270,410],[410,322],[449,450],[450,347],[347,449],[432,422],[422,434],[434,432],[18,313],[313,17],[17,18],[291,306],[306,375],[375,291],[259,387],[387,260],[260,259],[424,335],[335,418],[418,424],[434,364],[364,416],[416,434],[391,423],[423,327],[327,391],[301,251],[251,298],[298,301],[275,281],[281,4],[4,275],[254,373],[373,253],[253,254],[375,307],[307,321],[321,375],[280,425],[425,411],[411,280],[200,421],[421,18],[18,200],[335,321],[321,406],[406,335],[321,320],[320,405],[405,321],[314,315],[315,17],[17,314],[423,426],[426,266],[266,423],[396,377],[377,369],[369,396],[270,322],[322,269],[269,270],[413,417],[417,464],[464,413],[385,386],[386,258],[258,385],[248,456],[456,419],[419,248],[298,284],[284,333],[333,298],[168,417],[417,8],[8,168],[448,346],[346,261],[261,448],[417,413],[413,285],[285,417],[326,327],[327,328],[328,326],[277,355],[355,329],[329,277],[309,392],[392,438],[438,309],[381,382],[382,256],[256,381],[279,429],[429,360],[360,279],[365,364],[364,379],[379,365],[355,277],[277,437],[437,355],[282,443],[443,283],[283,282],[281,275],[275,363],[363,281],[395,431],[431,369],[369,395],[299,297],[297,337],[337,299],[335,273],[273,321],[321,335],[348,450],[450,349],[349,348],[359,446],[446,467],[467,359],[283,293],[293,282],[282,283],[250,458],[458,462],[462,250],[300,276],[276,383],[383,300],[292,308],[308,325],[325,292],[283,276],[276,293],[293,283],[264,372],[372,447],[447,264],[346,352],[352,340],[340,346],[354,274],[274,19],[19,354],[363,456],[456,281],[281,363],[426,436],[436,425],[425,426],[380,381],[381,252],[252,380],[267,269],[269,393],[393,267],[421,200],[200,428],[428,421],[371,266],[266,329],[329,371],[432,287],[287,422],[422,432],[290,250],[250,328],[328,290],[385,258],[258,384],[384,385],[446,265],[265,342],[342,446],[386,387],[387,257],[257,386],[422,424],[424,430],[430,422],[445,342],[342,276],[276,445],[422,273],[273,424],[424,422],[306,292],[292,307],[307,306],[352,366],[366,345],[345,352],[268,271],[271,302],[302,268],[358,423],[423,371],[371,358],[327,294],[294,460],[460,327],[331,279],[279,294],[294,331],[303,271],[271,304],[304,303],[436,432],[432,427],[427,436],[304,272],[272,408],[408,304],[395,394],[394,431],[431,395],[378,395],[395,400],[400,378],[296,334],[334,299],[299,296],[6,351],[351,168],[168,6],[376,352],[352,411],[411,376],[307,325],[325,320],[320,307],[285,295],[295,336],[336,285],[320,319],[319,404],[404,320],[329,330],[330,349],[349,329],[334,293],[293,333],[333,334],[366,323],[323,447],[447,366],[316,15],[15,315],[315,316],[331,358],[358,279],[279,331],[317,14],[14,316],[316,317],[8,285],[285,9],[9,8],[277,329],[329,350],[350,277],[253,374],[374,252],[252,253],[319,318],[318,403],[403,319],[351,6],[6,419],[419,351],[324,318],[318,325],[325,324],[397,367],[367,365],[365,397],[288,435],[435,397],[397,288],[278,344],[344,439],[439,278],[310,272],[272,311],[311,310],[248,195],[195,281],[281,248],[375,273],[273,291],[291,375],[175,396],[396,199],[199,175],[312,311],[311,268],[268,312],[276,283],[283,445],[445,276],[390,373],[373,339],[339,390],[295,282],[282,296],[296,295],[448,449],[449,346],[346,448],[356,264],[264,454],[454,356],[337,336],[336,299],[299,337],[337,338],[338,151],[151,337],[294,278],[278,455],[455,294],[308,292],[292,415],[415,308],[429,358],[358,355],[355,429],[265,340],[340,372],[372,265],[352,346],[346,280],[280,352],[295,442],[442,282],[282,295],[354,19],[19,370],[370,354],[285,441],[441,295],[295,285],[195,248],[248,197],[197,195],[457,440],[440,274],[274,457],[301,300],[300,368],[368,301],[417,351],[351,465],[465,417],[251,301],[301,389],[389,251],[394,395],[395,379],[379,394],[399,412],[412,419],[419,399],[410,436],[436,322],[322,410],[326,2],[2,393],[393,326],[354,370],[370,461],[461,354],[393,164],[164,267],[267,393],[268,302],[302,12],[12,268],[312,268],[268,13],[13,312],[298,293],[293,301],[301,298],[265,446],[446,340],[340,265],[280,330],[330,425],[425,280],[322,426],[426,391],[391,322],[420,429],[429,437],[437,420],[393,391],[391,326],[326,393],[344,440],[440,438],[438,344],[458,459],[459,461],[461,458],[364,434],[434,394],[394,364],[428,396],[396,262],[262,428],[274,354],[354,457],[457,274],[317,316],[316,402],[402,317],[316,315],[315,403],[403,316],[315,314],[314,404],[404,315],[314,313],[313,405],[405,314],[313,421],[421,406],[406,313],[323,366],[366,361],[361,323],[292,306],[306,407],[407,292],[306,291],[291,408],[408,306],[291,287],[287,409],[409,291],[287,432],[432,410],[410,287],[427,434],[434,411],[411,427],[372,264],[264,383],[383,372],[459,309],[309,457],[457,459],[366,352],[352,401],[401,366],[1,274],[274,4],[4,1],[418,421],[421,262],[262,418],[331,294],[294,358],[358,331],[435,433],[433,367],[367,435],[392,289],[289,439],[439,392],[328,462],[462,326],[326,328],[94,2],[2,370],[370,94],[289,305],[305,455],[455,289],[339,254],[254,448],[448,339],[359,255],[255,446],[446,359],[254,253],[253,449],[449,254],[253,252],[252,450],[450,253],[252,256],[256,451],[451,252],[256,341],[341,452],[452,256],[414,413],[413,463],[463,414],[286,441],[441,414],[414,286],[286,258],[258,441],[441,286],[258,257],[257,442],[442,258],[257,259],[259,443],[443,257],[259,260],[260,444],[444,259],[260,467],[467,445],[445,260],[309,459],[459,250],[250,309],[305,289],[289,290],[290,305],[305,290],[290,460],[460,305],[401,376],[376,435],[435,401],[309,250],[250,392],[392,309],[376,411],[411,433],[433,376],[453,341],[341,464],[464,453],[357,453],[453,465],[465,357],[343,357],[357,412],[412,343],[437,343],[343,399],[399,437],[344,360],[360,440],[440,344],[420,437],[437,456],[456,420],[360,420],[420,363],[363,360],[361,401],[401,288],[288,361],[265,372],[372,353],[353,265],[390,339],[339,249],[249,390],[339,448],[448,255],[255,339]);function Iy(e){e.j={faceLandmarks:[],faceBlendshapes:[],facialTransformationMatrixes:[]}}var rt=class extends cr{constructor(e,t){super(new Br(e,t),"image_in","norm_rect",!1),this.j={faceLandmarks:[],faceBlendshapes:[],facialTransformationMatrixes:[]},this.outputFacialTransformationMatrixes=this.outputFaceBlendshapes=!1,he(e=this.h=new Zw,0,1,t=new Ye),this.v=new Qw,he(this.h,0,3,this.v),this.s=new xc,he(this.h,0,2,this.s),_n(this.s,4,1),oe(this.s,2,.5),oe(this.v,2,.5),oe(this.h,4,.5)}get baseOptions(){return Te(this.h,Ye,1)}set baseOptions(e){he(this.h,0,1,e)}o(e){return"numFaces"in e&&_n(this.s,4,e.numFaces??1),"minFaceDetectionConfidence"in e&&oe(this.s,2,e.minFaceDetectionConfidence??.5),"minTrackingConfidence"in e&&oe(this.h,4,e.minTrackingConfidence??.5),"minFacePresenceConfidence"in e&&oe(this.v,2,e.minFacePresenceConfidence??.5),"outputFaceBlendshapes"in e&&(this.outputFaceBlendshapes=!!e.outputFaceBlendshapes),"outputFacialTransformationMatrixes"in e&&(this.outputFacialTransformationMatrixes=!!e.outputFacialTransformationMatrixes),this.l(e)}D(e,t){return Iy(this),zr(this,e,t),this.j}F(e,t,r){return Iy(this),kn(this,e,r,t),this.j}m(){var e=new hr;Ve(e,"image_in"),Ve(e,"norm_rect"),Pe(e,"face_landmarks");const t=new Sr;rn(t,Kx,this.h);const r=new Jt;br(r,"mediapipe.tasks.vision.face_landmarker.FaceLandmarkerGraph"),$e(r,"IMAGE:image_in"),$e(r,"NORM_RECT:norm_rect"),Se(r,"NORM_LANDMARKS:face_landmarks"),r.o(t),xr(e,r),this.g.attachProtoVectorListener("face_landmarks",((i,o)=>{for(const a of i)i=Ka(a),this.j.faceLandmarks.push(Tc(i));Z(this,o)})),this.g.attachEmptyPacketListener("face_landmarks",(i=>{Z(this,i)})),this.outputFaceBlendshapes&&(Pe(e,"blendshapes"),Se(r,"BLENDSHAPES:blendshapes"),this.g.attachProtoVectorListener("blendshapes",((i,o)=>{if(this.outputFaceBlendshapes)for(const a of i)i=bc(a),this.j.faceBlendshapes.push(Hp(i.g()??[]));Z(this,o)})),this.g.attachEmptyPacketListener("blendshapes",(i=>{Z(this,i)}))),this.outputFacialTransformationMatrixes&&(Pe(e,"face_geometry"),Se(r,"FACE_GEOMETRY:face_geometry"),this.g.attachProtoVectorListener("face_geometry",((i,o)=>{if(this.outputFacialTransformationMatrixes)for(const a of i)(i=Te(Wx(a),Lx,2))&&this.j.facialTransformationMatrixes.push({rows:Dr(i,1)??0??0,columns:Dr(i,2)??0??0,data:ti(i,3,Cs,ei()).slice()??[]});Z(this,o)})),this.g.attachEmptyPacketListener("face_geometry",(i=>{Z(this,i)}))),e=e.g(),this.setGraph(new Uint8Array(e),!0)}};rt.prototype.detectForVideo=rt.prototype.F,rt.prototype.detect=rt.prototype.D,rt.prototype.setOptions=rt.prototype.o,rt.createFromModelPath=function(e,t){return Ee(rt,e,{baseOptions:{modelAssetPath:t}})},rt.createFromModelBuffer=function(e,t){return Ee(rt,e,{baseOptions:{modelAssetBuffer:t}})},rt.createFromOptions=function(e,t){return Ee(rt,e,t)},rt.FACE_LANDMARKS_LIPS=Xp,rt.FACE_LANDMARKS_LEFT_EYE=Yp,rt.FACE_LANDMARKS_LEFT_EYEBROW=Qp,rt.FACE_LANDMARKS_LEFT_IRIS=T3,rt.FACE_LANDMARKS_RIGHT_EYE=Zp,rt.FACE_LANDMARKS_RIGHT_EYEBROW=em,rt.FACE_LANDMARKS_RIGHT_IRIS=R3,rt.FACE_LANDMARKS_FACE_OVAL=tm,rt.FACE_LANDMARKS_CONTOURS=A3,rt.FACE_LANDMARKS_TESSELATION=C3;var mn=class extends cr{constructor(e,t){super(new Br(e,t),"image_in","norm_rect",!0),he(e=this.j=new t3,0,1,t=new Ye)}get baseOptions(){return Te(this.j,Ye,1)}set baseOptions(e){he(this.j,0,1,e)}o(e){return super.l(e)}Oa(e,t,r){const i=typeof t!="function"?t:{};if(this.h=typeof t=="function"?t:r,zr(this,e,i??{}),!this.h)return this.s}m(){var e=new hr;Ve(e,"image_in"),Ve(e,"norm_rect"),Pe(e,"stylized_image");const t=new Sr;rn(t,Hx,this.j);const r=new Jt;br(r,"mediapipe.tasks.vision.face_stylizer.FaceStylizerGraph"),$e(r,"IMAGE:image_in"),$e(r,"NORM_RECT:norm_rect"),Se(r,"STYLIZED_IMAGE:stylized_image"),r.o(t),xr(e,r),this.g.U("stylized_image",((i,o)=>{var a=!this.h,u=i.data,h=i.width;const d=h*(i=i.height);if(u instanceof Uint8Array)if(u.length===3*d){const p=new Uint8ClampedArray(4*d);for(let g=0;g<d;++g)p[4*g]=u[3*g],p[4*g+1]=u[3*g+1],p[4*g+2]=u[3*g+2],p[4*g+3]=255;u=new ImageData(p,h,i)}else{if(u.length!==4*d)throw Error("Unsupported channel count: "+u.length/d);u=new ImageData(new Uint8ClampedArray(u.buffer,u.byteOffset,u.length),h,i)}else if(!(u instanceof WebGLTexture))throw Error(`Unsupported format: ${u.constructor.name}`);h=new At([u],!1,!1,this.g.i.canvas,this.O,h,i),this.s=a=a?h.clone():h,this.h&&this.h(a),Z(this,o)})),this.g.attachEmptyPacketListener("stylized_image",(i=>{this.s=null,this.h&&this.h(null),Z(this,i)})),e=e.g(),this.setGraph(new Uint8Array(e),!0)}};mn.prototype.stylize=mn.prototype.Oa,mn.prototype.setOptions=mn.prototype.o,mn.createFromModelPath=function(e,t){return Ee(mn,e,{baseOptions:{modelAssetPath:t}})},mn.createFromModelBuffer=function(e,t){return Ee(mn,e,{baseOptions:{modelAssetBuffer:t}})},mn.createFromOptions=function(e,t){return Ee(mn,e,t)};var rm=on([0,1],[1,2],[2,3],[3,4],[0,5],[5,6],[6,7],[7,8],[5,9],[9,10],[10,11],[11,12],[9,13],[13,14],[14,15],[15,16],[13,17],[0,17],[17,18],[18,19],[19,20]);function Ly(e){e.gestures=[],e.landmarks=[],e.worldLandmarks=[],e.handedness=[]}function Dy(e){return e.gestures.length===0?{gestures:[],landmarks:[],worldLandmarks:[],handedness:[],handednesses:[]}:{gestures:e.gestures,landmarks:e.landmarks,worldLandmarks:e.worldLandmarks,handedness:e.handedness,handednesses:e.handedness}}function Uy(e,t=!0){const r=[];for(const o of e){var i=bc(o);e=[];for(const a of i.g())i=t&&Dr(a,1)!=null?Dr(a,1)??0:-1,e.push({score:lt(a,2)??0,index:i,categoryName:Fr(a,3)??""??"",displayName:Fr(a,4)??""??""});r.push(e)}return r}var gr=class extends cr{constructor(e,t){super(new Br(e,t),"image_in","norm_rect",!1),this.gestures=[],this.landmarks=[],this.worldLandmarks=[],this.handedness=[],he(e=this.j=new s3,0,1,t=new Ye),this.s=new zp,he(this.j,0,2,this.s),this.C=new Bp,he(this.s,0,3,this.C),this.v=new n3,he(this.s,0,2,this.v),this.h=new Gx,he(this.j,0,3,this.h),oe(this.v,2,.5),oe(this.s,4,.5),oe(this.C,2,.5)}get baseOptions(){return Te(this.j,Ye,1)}set baseOptions(e){he(this.j,0,1,e)}o(e){var o,a,u,h;if(_n(this.v,3,e.numHands??1),"minHandDetectionConfidence"in e&&oe(this.v,2,e.minHandDetectionConfidence??.5),"minTrackingConfidence"in e&&oe(this.s,4,e.minTrackingConfidence??.5),"minHandPresenceConfidence"in e&&oe(this.C,2,e.minHandPresenceConfidence??.5),e.cannedGesturesClassifierOptions){var t=new Ui,r=t,i=Cf(e.cannedGesturesClassifierOptions,(o=Te(this.h,Ui,3))==null?void 0:o.h());he(r,0,2,i),he(this.h,0,3,t)}else e.cannedGesturesClassifierOptions===void 0&&((a=Te(this.h,Ui,3))==null||a.g());return e.customGesturesClassifierOptions?(he(r=t=new Ui,0,2,i=Cf(e.customGesturesClassifierOptions,(u=Te(this.h,Ui,4))==null?void 0:u.h())),he(this.h,0,4,t)):e.customGesturesClassifierOptions===void 0&&((h=Te(this.h,Ui,4))==null||h.g()),this.l(e)}Ja(e,t){return Ly(this),zr(this,e,t),Dy(this)}Ka(e,t,r){return Ly(this),kn(this,e,r,t),Dy(this)}m(){var e=new hr;Ve(e,"image_in"),Ve(e,"norm_rect"),Pe(e,"hand_gestures"),Pe(e,"hand_landmarks"),Pe(e,"world_hand_landmarks"),Pe(e,"handedness");const t=new Sr;rn(t,qx,this.j);const r=new Jt;br(r,"mediapipe.tasks.vision.gesture_recognizer.GestureRecognizerGraph"),$e(r,"IMAGE:image_in"),$e(r,"NORM_RECT:norm_rect"),Se(r,"HAND_GESTURES:hand_gestures"),Se(r,"LANDMARKS:hand_landmarks"),Se(r,"WORLD_LANDMARKS:world_hand_landmarks"),Se(r,"HANDEDNESS:handedness"),r.o(t),xr(e,r),this.g.attachProtoVectorListener("hand_landmarks",((i,o)=>{for(const a of i){i=Ka(a);const u=[];for(const h of Wn(i,Gw,1))u.push({x:lt(h,1)??0,y:lt(h,2)??0,z:lt(h,3)??0,visibility:lt(h,4)??0});this.landmarks.push(u)}Z(this,o)})),this.g.attachEmptyPacketListener("hand_landmarks",(i=>{Z(this,i)})),this.g.attachProtoVectorListener("world_hand_landmarks",((i,o)=>{for(const a of i){i=qi(a);const u=[];for(const h of Wn(i,Hw,1))u.push({x:lt(h,1)??0,y:lt(h,2)??0,z:lt(h,3)??0,visibility:lt(h,4)??0});this.worldLandmarks.push(u)}Z(this,o)})),this.g.attachEmptyPacketListener("world_hand_landmarks",(i=>{Z(this,i)})),this.g.attachProtoVectorListener("hand_gestures",((i,o)=>{this.gestures.push(...Uy(i,!1)),Z(this,o)})),this.g.attachEmptyPacketListener("hand_gestures",(i=>{Z(this,i)})),this.g.attachProtoVectorListener("handedness",((i,o)=>{this.handedness.push(...Uy(i)),Z(this,o)})),this.g.attachEmptyPacketListener("handedness",(i=>{Z(this,i)})),e=e.g(),this.setGraph(new Uint8Array(e),!0)}};function Fy(e){return{landmarks:e.landmarks,worldLandmarks:e.worldLandmarks,handednesses:e.handedness,handedness:e.handedness}}gr.prototype.recognizeForVideo=gr.prototype.Ka,gr.prototype.recognize=gr.prototype.Ja,gr.prototype.setOptions=gr.prototype.o,gr.createFromModelPath=function(e,t){return Ee(gr,e,{baseOptions:{modelAssetPath:t}})},gr.createFromModelBuffer=function(e,t){return Ee(gr,e,{baseOptions:{modelAssetBuffer:t}})},gr.createFromOptions=function(e,t){return Ee(gr,e,t)},gr.HAND_CONNECTIONS=rm;var yr=class extends cr{constructor(e,t){super(new Br(e,t),"image_in","norm_rect",!1),this.landmarks=[],this.worldLandmarks=[],this.handedness=[],he(e=this.h=new zp,0,1,t=new Ye),this.s=new Bp,he(this.h,0,3,this.s),this.j=new n3,he(this.h,0,2,this.j),_n(this.j,3,1),oe(this.j,2,.5),oe(this.s,2,.5),oe(this.h,4,.5)}get baseOptions(){return Te(this.h,Ye,1)}set baseOptions(e){he(this.h,0,1,e)}o(e){return"numHands"in e&&_n(this.j,3,e.numHands??1),"minHandDetectionConfidence"in e&&oe(this.j,2,e.minHandDetectionConfidence??.5),"minTrackingConfidence"in e&&oe(this.h,4,e.minTrackingConfidence??.5),"minHandPresenceConfidence"in e&&oe(this.s,2,e.minHandPresenceConfidence??.5),this.l(e)}D(e,t){return this.landmarks=[],this.worldLandmarks=[],this.handedness=[],zr(this,e,t),Fy(this)}F(e,t,r){return this.landmarks=[],this.worldLandmarks=[],this.handedness=[],kn(this,e,r,t),Fy(this)}m(){var e=new hr;Ve(e,"image_in"),Ve(e,"norm_rect"),Pe(e,"hand_landmarks"),Pe(e,"world_hand_landmarks"),Pe(e,"handedness");const t=new Sr;rn(t,Jx,this.h);const r=new Jt;br(r,"mediapipe.tasks.vision.hand_landmarker.HandLandmarkerGraph"),$e(r,"IMAGE:image_in"),$e(r,"NORM_RECT:norm_rect"),Se(r,"LANDMARKS:hand_landmarks"),Se(r,"WORLD_LANDMARKS:world_hand_landmarks"),Se(r,"HANDEDNESS:handedness"),r.o(t),xr(e,r),this.g.attachProtoVectorListener("hand_landmarks",((i,o)=>{for(const a of i)i=Ka(a),this.landmarks.push(Tc(i));Z(this,o)})),this.g.attachEmptyPacketListener("hand_landmarks",(i=>{Z(this,i)})),this.g.attachProtoVectorListener("world_hand_landmarks",((i,o)=>{for(const a of i)i=qi(a),this.worldLandmarks.push(xa(i));Z(this,o)})),this.g.attachEmptyPacketListener("world_hand_landmarks",(i=>{Z(this,i)})),this.g.attachProtoVectorListener("handedness",((i,o)=>{var a=this.handedness,u=a.push;const h=[];for(const d of i){i=bc(d);const p=[];for(const g of i.g())p.push({score:lt(g,2)??0,index:Dr(g,1)??0??-1,categoryName:Fr(g,3)??""??"",displayName:Fr(g,4)??""??""});h.push(p)}u.call(a,...h),Z(this,o)})),this.g.attachEmptyPacketListener("handedness",(i=>{Z(this,i)})),e=e.g(),this.setGraph(new Uint8Array(e),!0)}};yr.prototype.detectForVideo=yr.prototype.F,yr.prototype.detect=yr.prototype.D,yr.prototype.setOptions=yr.prototype.o,yr.createFromModelPath=function(e,t){return Ee(yr,e,{baseOptions:{modelAssetPath:t}})},yr.createFromModelBuffer=function(e,t){return Ee(yr,e,{baseOptions:{modelAssetBuffer:t}})},yr.createFromOptions=function(e,t){return Ee(yr,e,t)},yr.HAND_CONNECTIONS=rm;var P3=on([0,1],[1,2],[2,3],[3,7],[0,4],[4,5],[5,6],[6,8],[9,10],[11,12],[11,13],[13,15],[15,17],[15,19],[15,21],[17,19],[12,14],[14,16],[16,18],[16,20],[16,22],[18,20],[11,23],[12,24],[23,24],[23,25],[24,26],[25,27],[26,28],[27,29],[28,30],[29,31],[30,32],[27,31],[28,32]);function My(e){e.h={faceLandmarks:[],faceBlendshapes:[],poseLandmarks:[],poseWorldLandmarks:[],poseSegmentationMasks:[],leftHandLandmarks:[],leftHandWorldLandmarks:[],rightHandLandmarks:[],rightHandWorldLandmarks:[]}}function $y(e){try{if(!e.C)return e.h;e.C(e.h)}finally{Ac(e)}}function yu(e,t){e=Ka(e),t.push(Tc(e))}var Ge=class extends cr{constructor(e,t){super(new Br(e,t),"input_frames_image",null,!1),this.h={faceLandmarks:[],faceBlendshapes:[],poseLandmarks:[],poseWorldLandmarks:[],poseSegmentationMasks:[],leftHandLandmarks:[],leftHandWorldLandmarks:[],rightHandLandmarks:[],rightHandWorldLandmarks:[]},this.outputPoseSegmentationMasks=this.outputFaceBlendshapes=!1,he(e=this.j=new u3,0,1,t=new Ye),this.J=new Bp,he(this.j,0,2,this.J),this.Z=new Xx,he(this.j,0,3,this.Z),this.s=new xc,he(this.j,0,4,this.s),this.H=new Qw,he(this.j,0,5,this.H),this.v=new a3,he(this.j,0,6,this.v),this.K=new l3,he(this.j,0,7,this.K),oe(this.s,2,.5),oe(this.s,3,.3),oe(this.H,2,.5),oe(this.v,2,.5),oe(this.v,3,.3),oe(this.K,2,.5),oe(this.J,2,.5)}get baseOptions(){return Te(this.j,Ye,1)}set baseOptions(e){he(this.j,0,1,e)}o(e){return"minFaceDetectionConfidence"in e&&oe(this.s,2,e.minFaceDetectionConfidence??.5),"minFaceSuppressionThreshold"in e&&oe(this.s,3,e.minFaceSuppressionThreshold??.3),"minFacePresenceConfidence"in e&&oe(this.H,2,e.minFacePresenceConfidence??.5),"outputFaceBlendshapes"in e&&(this.outputFaceBlendshapes=!!e.outputFaceBlendshapes),"minPoseDetectionConfidence"in e&&oe(this.v,2,e.minPoseDetectionConfidence??.5),"minPoseSuppressionThreshold"in e&&oe(this.v,3,e.minPoseSuppressionThreshold??.3),"minPosePresenceConfidence"in e&&oe(this.K,2,e.minPosePresenceConfidence??.5),"outputPoseSegmentationMasks"in e&&(this.outputPoseSegmentationMasks=!!e.outputPoseSegmentationMasks),"minHandLandmarksConfidence"in e&&oe(this.J,2,e.minHandLandmarksConfidence??.5),this.l(e)}D(e,t,r){const i=typeof t!="function"?t:{};return this.C=typeof t=="function"?t:r,My(this),zr(this,e,i),$y(this)}F(e,t,r,i){const o=typeof r!="function"?r:{};return this.C=typeof r=="function"?r:i,My(this),kn(this,e,o,t),$y(this)}m(){var e=new hr;Ve(e,"input_frames_image"),Pe(e,"pose_landmarks"),Pe(e,"pose_world_landmarks"),Pe(e,"face_landmarks"),Pe(e,"left_hand_landmarks"),Pe(e,"left_hand_world_landmarks"),Pe(e,"right_hand_landmarks"),Pe(e,"right_hand_world_landmarks");const t=new Sr,r=new iy;kf(r,1,mo("type.googleapis.com/mediapipe.tasks.vision.holistic_landmarker.proto.HolisticLandmarkerGraphOptions"),""),(function(o,a){if(a!=null)if(Array.isArray(a))Me(o,2,nw(a));else{if(!(typeof a=="string"||a instanceof Bn||Ba(a)))throw Error("invalid value in Any.value field: "+a+" expected a ByteString, a base64 encoded string, a Uint8Array or a jspb array");kf(o,2,ip(a,!1),oi())}})(r,this.j.g());const i=new Jt;br(i,"mediapipe.tasks.vision.holistic_landmarker.HolisticLandmarkerGraph"),Gu(i,8,iy,r),$e(i,"IMAGE:input_frames_image"),Se(i,"POSE_LANDMARKS:pose_landmarks"),Se(i,"POSE_WORLD_LANDMARKS:pose_world_landmarks"),Se(i,"FACE_LANDMARKS:face_landmarks"),Se(i,"LEFT_HAND_LANDMARKS:left_hand_landmarks"),Se(i,"LEFT_HAND_WORLD_LANDMARKS:left_hand_world_landmarks"),Se(i,"RIGHT_HAND_LANDMARKS:right_hand_landmarks"),Se(i,"RIGHT_HAND_WORLD_LANDMARKS:right_hand_world_landmarks"),i.o(t),xr(e,i),Rc(this,e),this.g.attachProtoListener("pose_landmarks",((o,a)=>{yu(o,this.h.poseLandmarks),Z(this,a)})),this.g.attachEmptyPacketListener("pose_landmarks",(o=>{Z(this,o)})),this.g.attachProtoListener("pose_world_landmarks",((o,a)=>{var u=this.h.poseWorldLandmarks;o=qi(o),u.push(xa(o)),Z(this,a)})),this.g.attachEmptyPacketListener("pose_world_landmarks",(o=>{Z(this,o)})),this.outputPoseSegmentationMasks&&(Se(i,"POSE_SEGMENTATION_MASK:pose_segmentation_mask"),no(this,"pose_segmentation_mask"),this.g.U("pose_segmentation_mask",((o,a)=>{this.h.poseSegmentationMasks=[oo(this,o,!0,!this.C)],Z(this,a)})),this.g.attachEmptyPacketListener("pose_segmentation_mask",(o=>{this.h.poseSegmentationMasks=[],Z(this,o)}))),this.g.attachProtoListener("face_landmarks",((o,a)=>{yu(o,this.h.faceLandmarks),Z(this,a)})),this.g.attachEmptyPacketListener("face_landmarks",(o=>{Z(this,o)})),this.outputFaceBlendshapes&&(Pe(e,"extra_blendshapes"),Se(i,"FACE_BLENDSHAPES:extra_blendshapes"),this.g.attachProtoListener("extra_blendshapes",((o,a)=>{var u=this.h.faceBlendshapes;this.outputFaceBlendshapes&&(o=bc(o),u.push(Hp(o.g()??[]))),Z(this,a)})),this.g.attachEmptyPacketListener("extra_blendshapes",(o=>{Z(this,o)}))),this.g.attachProtoListener("left_hand_landmarks",((o,a)=>{yu(o,this.h.leftHandLandmarks),Z(this,a)})),this.g.attachEmptyPacketListener("left_hand_landmarks",(o=>{Z(this,o)})),this.g.attachProtoListener("left_hand_world_landmarks",((o,a)=>{var u=this.h.leftHandWorldLandmarks;o=qi(o),u.push(xa(o)),Z(this,a)})),this.g.attachEmptyPacketListener("left_hand_world_landmarks",(o=>{Z(this,o)})),this.g.attachProtoListener("right_hand_landmarks",((o,a)=>{yu(o,this.h.rightHandLandmarks),Z(this,a)})),this.g.attachEmptyPacketListener("right_hand_landmarks",(o=>{Z(this,o)})),this.g.attachProtoListener("right_hand_world_landmarks",((o,a)=>{var u=this.h.rightHandWorldLandmarks;o=qi(o),u.push(xa(o)),Z(this,a)})),this.g.attachEmptyPacketListener("right_hand_world_landmarks",(o=>{Z(this,o)})),e=e.g(),this.setGraph(new Uint8Array(e),!0)}};Ge.prototype.detectForVideo=Ge.prototype.F,Ge.prototype.detect=Ge.prototype.D,Ge.prototype.setOptions=Ge.prototype.o,Ge.createFromModelPath=function(e,t){return Ee(Ge,e,{baseOptions:{modelAssetPath:t}})},Ge.createFromModelBuffer=function(e,t){return Ee(Ge,e,{baseOptions:{modelAssetBuffer:t}})},Ge.createFromOptions=function(e,t){return Ee(Ge,e,t)},Ge.HAND_CONNECTIONS=rm,Ge.POSE_CONNECTIONS=P3,Ge.FACE_LANDMARKS_LIPS=Xp,Ge.FACE_LANDMARKS_LEFT_EYE=Yp,Ge.FACE_LANDMARKS_LEFT_EYEBROW=Qp,Ge.FACE_LANDMARKS_LEFT_IRIS=T3,Ge.FACE_LANDMARKS_RIGHT_EYE=Zp,Ge.FACE_LANDMARKS_RIGHT_EYEBROW=em,Ge.FACE_LANDMARKS_RIGHT_IRIS=R3,Ge.FACE_LANDMARKS_FACE_OVAL=tm,Ge.FACE_LANDMARKS_CONTOURS=A3,Ge.FACE_LANDMARKS_TESSELATION=C3;var Nr=class extends cr{constructor(e,t){super(new Br(e,t),"input_image","norm_rect",!0),this.j={classifications:[]},he(e=this.h=new c3,0,1,t=new Ye)}get baseOptions(){return Te(this.h,Ye,1)}set baseOptions(e){he(this.h,0,1,e)}o(e){return he(this.h,0,2,Cf(e,Te(this.h,Fp,2))),this.l(e)}sa(e,t){return this.j={classifications:[]},zr(this,e,t),this.j}ta(e,t,r){return this.j={classifications:[]},kn(this,e,r,t),this.j}m(){var e=new hr;Ve(e,"input_image"),Ve(e,"norm_rect"),Pe(e,"classifications");const t=new Sr;rn(t,Yx,this.h);const r=new Jt;br(r,"mediapipe.tasks.vision.image_classifier.ImageClassifierGraph"),$e(r,"IMAGE:input_image"),$e(r,"NORM_RECT:norm_rect"),Se(r,"CLASSIFICATIONS:classifications"),r.o(t),xr(e,r),this.g.attachProtoListener("classifications",((i,o)=>{this.j=(function(a){const u={classifications:Wn(a,Ux,1).map((h=>{var d;return Hp(((d=Te(h,Vw,4))==null?void 0:d.g())??[],Dr(h,2)??0,Fr(h,3)??"")}))};return Hu(to(a,2))!=null&&(u.timestampMs=Hu(to(a,2))??0),u})(Fx(i)),Z(this,o)})),this.g.attachEmptyPacketListener("classifications",(i=>{Z(this,i)})),e=e.g(),this.setGraph(new Uint8Array(e),!0)}};Nr.prototype.classifyForVideo=Nr.prototype.ta,Nr.prototype.classify=Nr.prototype.sa,Nr.prototype.setOptions=Nr.prototype.o,Nr.createFromModelPath=function(e,t){return Ee(Nr,e,{baseOptions:{modelAssetPath:t}})},Nr.createFromModelBuffer=function(e,t){return Ee(Nr,e,{baseOptions:{modelAssetBuffer:t}})},Nr.createFromOptions=function(e,t){return Ee(Nr,e,t)};var vr=class extends cr{constructor(e,t){super(new Br(e,t),"image_in","norm_rect",!0),this.h=new h3,this.embeddings={embeddings:[]},he(e=this.h,0,1,t=new Ye)}get baseOptions(){return Te(this.h,Ye,1)}set baseOptions(e){he(this.h,0,1,e)}o(e){var t=this.h,r=Te(this.h,py,2);return r=r?r.clone():new py,e.l2Normalize!==void 0?Oa(r,1,e.l2Normalize):"l2Normalize"in e&&Me(r,1),e.quantize!==void 0?Oa(r,2,e.quantize):"quantize"in e&&Me(r,2),he(t,0,2,r),this.l(e)}za(e,t){return zr(this,e,t),this.embeddings}Aa(e,t,r){return kn(this,e,r,t),this.embeddings}m(){var e=new hr;Ve(e,"image_in"),Ve(e,"norm_rect"),Pe(e,"embeddings_out");const t=new Sr;rn(t,Qx,this.h);const r=new Jt;br(r,"mediapipe.tasks.vision.image_embedder.ImageEmbedderGraph"),$e(r,"IMAGE:image_in"),$e(r,"NORM_RECT:norm_rect"),Se(r,"EMBEDDINGS:embeddings_out"),r.o(t),xr(e,r),this.g.attachProtoListener("embeddings_out",((i,o)=>{i=Bx(i),this.embeddings=(function(a){return{embeddings:Wn(a,$x,1).map((u=>{var d,p;const h={headIndex:Dr(u,3)??0??-1,headName:Fr(u,4)??""??""};if(lw(u,fy,Vd(u,1))!==void 0)u=ti(u=Te(u,fy,Vd(u,1)),1,Cs,ei()),h.floatEmbedding=u.slice();else{const g=new Uint8Array(0);h.quantizedEmbedding=((p=(d=Te(u,Mx,Vd(u,2)))==null?void 0:d.oa())==null?void 0:p.h())??g}return h})),timestampMs:Hu(to(a,2))??0}})(i),Z(this,o)})),this.g.attachEmptyPacketListener("embeddings_out",(i=>{Z(this,i)})),e=e.g(),this.setGraph(new Uint8Array(e),!0)}};vr.cosineSimilarity=function(e,t){if(e.floatEmbedding&&t.floatEmbedding)e=wy(e.floatEmbedding,t.floatEmbedding);else{if(!e.quantizedEmbedding||!t.quantizedEmbedding)throw Error("Cannot compute cosine similarity between quantized and float embeddings.");e=wy(vy(e.quantizedEmbedding),vy(t.quantizedEmbedding))}return e},vr.prototype.embedForVideo=vr.prototype.Aa,vr.prototype.embed=vr.prototype.za,vr.prototype.setOptions=vr.prototype.o,vr.createFromModelPath=function(e,t){return Ee(vr,e,{baseOptions:{modelAssetPath:t}})},vr.createFromModelBuffer=function(e,t){return Ee(vr,e,{baseOptions:{modelAssetBuffer:t}})},vr.createFromOptions=function(e,t){return Ee(vr,e,t)};var Of=class{constructor(e,t,r){this.confidenceMasks=e,this.categoryMask=t,this.qualityScores=r}close(){var e,t;(e=this.confidenceMasks)==null||e.forEach((r=>{r.close()})),(t=this.categoryMask)==null||t.close()}};function By(e){e.categoryMask=void 0,e.confidenceMasks=void 0,e.qualityScores=void 0}function zy(e){try{const t=new Of(e.confidenceMasks,e.categoryMask,e.qualityScores);if(!e.j)return t;e.j(t)}finally{Ac(e)}}Of.prototype.close=Of.prototype.close;var or=class extends cr{constructor(e,t){super(new Br(e,t),"image_in","norm_rect",!1),this.s=[],this.outputCategoryMask=!1,this.outputConfidenceMasks=!0,this.h=new Kp,this.v=new d3,he(this.h,0,3,this.v),he(e=this.h,0,1,t=new Ye)}get baseOptions(){return Te(this.h,Ye,1)}set baseOptions(e){he(this.h,0,1,e)}o(e){return e.displayNamesLocale!==void 0?Me(this.h,2,mo(e.displayNamesLocale)):"displayNamesLocale"in e&&Me(this.h,2),"outputCategoryMask"in e&&(this.outputCategoryMask=e.outputCategoryMask??!1),"outputConfidenceMasks"in e&&(this.outputConfidenceMasks=e.outputConfidenceMasks??!0),super.l(e)}I(){(function(e){var r,i;const t=Wn(e.da(),Jt,1).filter((o=>(Fr(o,1)??"").includes("mediapipe.tasks.TensorsToSegmentationCalculator")));if(e.s=[],t.length>1)throw Error("The graph has more than one mediapipe.tasks.TensorsToSegmentationCalculator.");t.length===1&&(((i=(r=Te(t[0],Sr,7))==null?void 0:r.l())==null?void 0:i.g())??new Map).forEach(((o,a)=>{e.s[Number(a)]=Fr(o,1)??""}))})(this)}segment(e,t,r){const i=typeof t!="function"?t:{};return this.j=typeof t=="function"?t:r,By(this),zr(this,e,i),zy(this)}Ma(e,t,r,i){const o=typeof r!="function"?r:{};return this.j=typeof r=="function"?r:i,By(this),kn(this,e,o,t),zy(this)}Da(){return this.s}m(){var e=new hr;Ve(e,"image_in"),Ve(e,"norm_rect");const t=new Sr;rn(t,p3,this.h);const r=new Jt;br(r,"mediapipe.tasks.vision.image_segmenter.ImageSegmenterGraph"),$e(r,"IMAGE:image_in"),$e(r,"NORM_RECT:norm_rect"),r.o(t),xr(e,r),Rc(this,e),this.outputConfidenceMasks&&(Pe(e,"confidence_masks"),Se(r,"CONFIDENCE_MASKS:confidence_masks"),no(this,"confidence_masks"),this.g.ca("confidence_masks",((i,o)=>{this.confidenceMasks=i.map((a=>oo(this,a,!0,!this.j))),Z(this,o)})),this.g.attachEmptyPacketListener("confidence_masks",(i=>{this.confidenceMasks=[],Z(this,i)}))),this.outputCategoryMask&&(Pe(e,"category_mask"),Se(r,"CATEGORY_MASK:category_mask"),no(this,"category_mask"),this.g.U("category_mask",((i,o)=>{this.categoryMask=oo(this,i,!1,!this.j),Z(this,o)})),this.g.attachEmptyPacketListener("category_mask",(i=>{this.categoryMask=void 0,Z(this,i)}))),Pe(e,"quality_scores"),Se(r,"QUALITY_SCORES:quality_scores"),this.g.attachFloatVectorListener("quality_scores",((i,o)=>{this.qualityScores=i,Z(this,o)})),this.g.attachEmptyPacketListener("quality_scores",(i=>{this.categoryMask=void 0,Z(this,i)})),e=e.g(),this.setGraph(new Uint8Array(e),!0)}};or.prototype.getLabels=or.prototype.Da,or.prototype.segmentForVideo=or.prototype.Ma,or.prototype.segment=or.prototype.segment,or.prototype.setOptions=or.prototype.o,or.createFromModelPath=function(e,t){return Ee(or,e,{baseOptions:{modelAssetPath:t}})},or.createFromModelBuffer=function(e,t){return Ee(or,e,{baseOptions:{modelAssetBuffer:t}})},or.createFromOptions=function(e,t){return Ee(or,e,t)};var Nf=class{constructor(e,t,r){this.confidenceMasks=e,this.categoryMask=t,this.qualityScores=r}close(){var e,t;(e=this.confidenceMasks)==null||e.forEach((r=>{r.close()})),(t=this.categoryMask)==null||t.close()}};Nf.prototype.close=Nf.prototype.close;var u5=class extends ne{constructor(e){super(e)}},Fi=[0,st,-2],Yu=[0,Dn,-3,Je,Dn,-1],Vy=[0,Yu],Wy=[0,Yu,st,-1],Xd=class extends ne{constructor(e){super(e)}},Ky=[0,Dn,-1,Je],c5=class extends ne{constructor(e){super(e)}},Hy=class extends ne{constructor(e){super(e)}},If=[1,2,3,4,5,6,7,8,9,10,14,15],j3=class extends ne{constructor(e){super(e)}};j3.prototype.g=kc([0,St,[0,If,Ie,Yu,Ie,[0,Yu,Fi],Ie,Vy,Ie,[0,Vy,Fi],Ie,Ky,Ie,[0,Dn,-3,Je,Mr],Ie,[0,Dn,-3,Je],Ie,[0,je,Dn,-2,Je,st,Je,-1,2,Dn,Fi],Ie,Wy,Ie,[0,Wy,Fi],Dn,Fi,je,Ie,[0,Dn,-3,Je,Fi,-1],Ie,[0,St,Ky]],je,[0,je,st,-1,Je]]);var gn=class extends cr{constructor(e,t){super(new Br(e,t),"image_in","norm_rect_in",!1),this.outputCategoryMask=!1,this.outputConfidenceMasks=!0,this.h=new Kp,this.s=new d3,he(this.h,0,3,this.s),he(e=this.h,0,1,t=new Ye)}get baseOptions(){return Te(this.h,Ye,1)}set baseOptions(e){he(this.h,0,1,e)}o(e){return"outputCategoryMask"in e&&(this.outputCategoryMask=e.outputCategoryMask??!1),"outputConfidenceMasks"in e&&(this.outputConfidenceMasks=e.outputConfidenceMasks??!0),super.l(e)}segment(e,t,r,i){const o=typeof r!="function"?r:{};this.j=typeof r=="function"?r:i,this.qualityScores=this.categoryMask=this.confidenceMasks=void 0,r=this.B+1,i=new j3;const a=new Hy;var u=new u5;if(_n(u,1,255),he(a,0,12,u),t.keypoint&&t.scribble)throw Error("Cannot provide both keypoint and scribble.");if(t.keypoint){var h=new Xd;Oa(h,3,!0),oe(h,1,t.keypoint.x),oe(h,2,t.keypoint.y),ka(a,5,If,h)}else{if(!t.scribble)throw Error("Must provide either a keypoint or a scribble.");for(h of(u=new c5,t.scribble))Oa(t=new Xd,3,!0),oe(t,1,h.x),oe(t,2,h.y),Gu(u,1,Xd,t);ka(a,15,If,u)}Gu(i,1,Hy,a),this.g.addProtoToStream(i.g(),"drishti.RenderData","roi_in",r),zr(this,e,o);e:{try{const p=new Nf(this.confidenceMasks,this.categoryMask,this.qualityScores);if(!this.j){var d=p;break e}this.j(p)}finally{Ac(this)}d=void 0}return d}m(){var e=new hr;Ve(e,"image_in"),Ve(e,"roi_in"),Ve(e,"norm_rect_in");const t=new Sr;rn(t,p3,this.h);const r=new Jt;br(r,"mediapipe.tasks.vision.interactive_segmenter.InteractiveSegmenterGraph"),$e(r,"IMAGE:image_in"),$e(r,"ROI:roi_in"),$e(r,"NORM_RECT:norm_rect_in"),r.o(t),xr(e,r),Rc(this,e),this.outputConfidenceMasks&&(Pe(e,"confidence_masks"),Se(r,"CONFIDENCE_MASKS:confidence_masks"),no(this,"confidence_masks"),this.g.ca("confidence_masks",((i,o)=>{this.confidenceMasks=i.map((a=>oo(this,a,!0,!this.j))),Z(this,o)})),this.g.attachEmptyPacketListener("confidence_masks",(i=>{this.confidenceMasks=[],Z(this,i)}))),this.outputCategoryMask&&(Pe(e,"category_mask"),Se(r,"CATEGORY_MASK:category_mask"),no(this,"category_mask"),this.g.U("category_mask",((i,o)=>{this.categoryMask=oo(this,i,!1,!this.j),Z(this,o)})),this.g.attachEmptyPacketListener("category_mask",(i=>{this.categoryMask=void 0,Z(this,i)}))),Pe(e,"quality_scores"),Se(r,"QUALITY_SCORES:quality_scores"),this.g.attachFloatVectorListener("quality_scores",((i,o)=>{this.qualityScores=i,Z(this,o)})),this.g.attachEmptyPacketListener("quality_scores",(i=>{this.categoryMask=void 0,Z(this,i)})),e=e.g(),this.setGraph(new Uint8Array(e),!0)}};gn.prototype.segment=gn.prototype.segment,gn.prototype.setOptions=gn.prototype.o,gn.createFromModelPath=function(e,t){return Ee(gn,e,{baseOptions:{modelAssetPath:t}})},gn.createFromModelBuffer=function(e,t){return Ee(gn,e,{baseOptions:{modelAssetBuffer:t}})},gn.createFromOptions=function(e,t){return Ee(gn,e,t)};var Ir=class extends cr{constructor(e,t){super(new Br(e,t),"input_frame_gpu","norm_rect",!1),this.j={detections:[]},he(e=this.h=new m3,0,1,t=new Ye)}get baseOptions(){return Te(this.h,Ye,1)}set baseOptions(e){he(this.h,0,1,e)}o(e){return e.displayNamesLocale!==void 0?Me(this.h,2,mo(e.displayNamesLocale)):"displayNamesLocale"in e&&Me(this.h,2),e.maxResults!==void 0?_n(this.h,3,e.maxResults):"maxResults"in e&&Me(this.h,3),e.scoreThreshold!==void 0?oe(this.h,4,e.scoreThreshold):"scoreThreshold"in e&&Me(this.h,4),e.categoryAllowlist!==void 0?qu(this.h,5,e.categoryAllowlist):"categoryAllowlist"in e&&Me(this.h,5),e.categoryDenylist!==void 0?qu(this.h,6,e.categoryDenylist):"categoryDenylist"in e&&Me(this.h,6),this.l(e)}D(e,t){return this.j={detections:[]},zr(this,e,t),this.j}F(e,t,r){return this.j={detections:[]},kn(this,e,r,t),this.j}m(){var e=new hr;Ve(e,"input_frame_gpu"),Ve(e,"norm_rect"),Pe(e,"detections");const t=new Sr;rn(t,e5,this.h);const r=new Jt;br(r,"mediapipe.tasks.vision.ObjectDetectorGraph"),$e(r,"IMAGE:input_frame_gpu"),$e(r,"NORM_RECT:norm_rect"),Se(r,"DETECTIONS:detections"),r.o(t),xr(e,r),this.g.attachProtoVectorListener("detections",((i,o)=>{for(const a of i)i=Kw(a),this.j.detections.push(y3(i));Z(this,o)})),this.g.attachEmptyPacketListener("detections",(i=>{Z(this,i)})),e=e.g(),this.setGraph(new Uint8Array(e),!0)}};Ir.prototype.detectForVideo=Ir.prototype.F,Ir.prototype.detect=Ir.prototype.D,Ir.prototype.setOptions=Ir.prototype.o,Ir.createFromModelPath=async function(e,t){return Ee(Ir,e,{baseOptions:{modelAssetPath:t}})},Ir.createFromModelBuffer=function(e,t){return Ee(Ir,e,{baseOptions:{modelAssetBuffer:t}})},Ir.createFromOptions=function(e,t){return Ee(Ir,e,t)};var Lf=class{constructor(e,t,r){this.landmarks=e,this.worldLandmarks=t,this.segmentationMasks=r}close(){var e;(e=this.segmentationMasks)==null||e.forEach((t=>{t.close()}))}};function Gy(e){e.landmarks=[],e.worldLandmarks=[],e.segmentationMasks=void 0}function qy(e){try{const t=new Lf(e.landmarks,e.worldLandmarks,e.segmentationMasks);if(!e.s)return t;e.s(t)}finally{Ac(e)}}Lf.prototype.close=Lf.prototype.close;var It=class extends cr{constructor(e,t){super(new Br(e,t),"image_in","norm_rect",!1),this.landmarks=[],this.worldLandmarks=[],this.outputSegmentationMasks=!1,he(e=this.h=new g3,0,1,t=new Ye),this.v=new l3,he(this.h,0,3,this.v),this.j=new a3,he(this.h,0,2,this.j),_n(this.j,4,1),oe(this.j,2,.5),oe(this.v,2,.5),oe(this.h,4,.5)}get baseOptions(){return Te(this.h,Ye,1)}set baseOptions(e){he(this.h,0,1,e)}o(e){return"numPoses"in e&&_n(this.j,4,e.numPoses??1),"minPoseDetectionConfidence"in e&&oe(this.j,2,e.minPoseDetectionConfidence??.5),"minTrackingConfidence"in e&&oe(this.h,4,e.minTrackingConfidence??.5),"minPosePresenceConfidence"in e&&oe(this.v,2,e.minPosePresenceConfidence??.5),"outputSegmentationMasks"in e&&(this.outputSegmentationMasks=e.outputSegmentationMasks??!1),this.l(e)}D(e,t,r){const i=typeof t!="function"?t:{};return this.s=typeof t=="function"?t:r,Gy(this),zr(this,e,i),qy(this)}F(e,t,r,i){const o=typeof r!="function"?r:{};return this.s=typeof r=="function"?r:i,Gy(this),kn(this,e,o,t),qy(this)}m(){var e=new hr;Ve(e,"image_in"),Ve(e,"norm_rect"),Pe(e,"normalized_landmarks"),Pe(e,"world_landmarks"),Pe(e,"segmentation_masks");const t=new Sr;rn(t,t5,this.h);const r=new Jt;br(r,"mediapipe.tasks.vision.pose_landmarker.PoseLandmarkerGraph"),$e(r,"IMAGE:image_in"),$e(r,"NORM_RECT:norm_rect"),Se(r,"NORM_LANDMARKS:normalized_landmarks"),Se(r,"WORLD_LANDMARKS:world_landmarks"),r.o(t),xr(e,r),Rc(this,e),this.g.attachProtoVectorListener("normalized_landmarks",((i,o)=>{this.landmarks=[];for(const a of i)i=Ka(a),this.landmarks.push(Tc(i));Z(this,o)})),this.g.attachEmptyPacketListener("normalized_landmarks",(i=>{this.landmarks=[],Z(this,i)})),this.g.attachProtoVectorListener("world_landmarks",((i,o)=>{this.worldLandmarks=[];for(const a of i)i=qi(a),this.worldLandmarks.push(xa(i));Z(this,o)})),this.g.attachEmptyPacketListener("world_landmarks",(i=>{this.worldLandmarks=[],Z(this,i)})),this.outputSegmentationMasks&&(Se(r,"SEGMENTATION_MASK:segmentation_masks"),no(this,"segmentation_masks"),this.g.ca("segmentation_masks",((i,o)=>{this.segmentationMasks=i.map((a=>oo(this,a,!0,!this.s))),Z(this,o)})),this.g.attachEmptyPacketListener("segmentation_masks",(i=>{this.segmentationMasks=[],Z(this,i)}))),e=e.g(),this.setGraph(new Uint8Array(e),!0)}};It.prototype.detectForVideo=It.prototype.F,It.prototype.detect=It.prototype.D,It.prototype.setOptions=It.prototype.o,It.createFromModelPath=function(e,t){return Ee(It,e,{baseOptions:{modelAssetPath:t}})},It.createFromModelBuffer=function(e,t){return Ee(It,e,{baseOptions:{modelAssetBuffer:t}})},It.createFromOptions=function(e,t){return Ee(It,e,t)},It.POSE_CONNECTIONS=P3;function h5(e={}){const[t,r]=T.useState(!0),[i,o]=T.useState(!1),[a,u]=T.useState(null),[h,d]=T.useState(0),[p,g]=T.useState(null),[v,_]=T.useState(null),E=T.useRef(null),S=T.useRef(null),k=T.useRef(null),x=T.useRef(0),P=T.useRef(0),L=T.useRef(null),R=T.useRef({left:[],right:[]});T.useEffect(()=>((async()=>{try{r(!0);const W=await ys.forVisionTasks("https://cdn.jsdelivr.net/npm/@mediapipe/tasks-vision@0.10.21/wasm");S.current=await It.createFromOptions(W,{baseOptions:{modelAssetPath:"https://storage.googleapis.com/mediapipe-models/pose_landmarker/pose_landmarker_lite/float16/1/pose_landmarker_lite.task",delegate:"GPU"},runningMode:"VIDEO",numPoses:1}),r(!1)}catch(W){const F=W instanceof Error?W:new Error("MediaPipe");u(F),r(!1),console.error("MediaPipe init error:",W)}})(),()=>{S.current&&S.current.close()}),[]);const U=T.useCallback(B=>{if(!S.current||!E.current)return;o(!0),P.current=0,R.current={left:[],right:[]};const W=E.current,F=W.getContext("2d");if(!F)return;const ge=new $t(F);L.current=window.setInterval(()=>{d(P.current),P.current=0},1e3);const Re=()=>{var kt,bt;if(!S.current||!B.videoWidth){k.current=requestAnimationFrame(Re);return}const ct=performance.now();if(ct<=x.current){k.current=requestAnimationFrame(Re);return}W.width=B.videoWidth,W.height=B.videoHeight;const We=S.current.detectForVideo(B,ct);if(x.current=ct,P.current++,F.drawImage(B,0,0,W.width,W.height),We.landmarks&&We.landmarks.length>0){const Ke=We.landmarks[0],ht=((kt=We.worldLandmarks)==null?void 0:kt[0])||Ke;g(Ke),_(ht),ge.drawConnectors(Ke,It.POSE_CONNECTIONS,{color:"#00FF00",lineWidth:3}),ge.drawLandmarks(Ke,{color:"#FF0000",radius:4});const be=Ke[26],H=Ke[25],ue=Ke[28],J=Ke[27];be&&ue&&(R.current.left.push({x:be.x*W.width,y:be.y*W.height}),R.current.left.length>30&&R.current.left.shift()),H&&J&&(R.current.right.push({x:H.x*W.width,y:H.y*W.height}),R.current.right.length>30&&R.current.right.shift());const j=(M,Y)=>{if(!(M.length<2)){F.beginPath(),F.moveTo(M[0].x,M[0].y);for(let q=1;q<M.length;q++)F.lineTo(M[q].x,M[q].y);F.strokeStyle=Y,F.lineWidth=4,F.lineCap="round",F.stroke(),M.forEach((q,pe)=>{const ve=pe/M.length*.6;F.beginPath(),F.arc(q.x,q.y,3,0,2*Math.PI),F.fillStyle=Y.replace("1)",`${ve})`),F.fill()})}};j(R.current.left,"rgba(0, 255, 255, 1)"),j(R.current.right,"rgba(255, 0, 255, 1)");const D=(M,Y)=>{if(!M)return;const q=M.x*W.width,pe=M.y*W.height;F.beginPath(),F.arc(q,pe,16,0,2*Math.PI),F.fillStyle=Y.replace("1)","0.3)"),F.fill(),F.beginPath(),F.arc(q,pe,8,0,2*Math.PI),F.fillStyle=Y,F.fill(),F.strokeStyle="white",F.lineWidth=2,F.stroke()};if(D(be,"rgba(0, 255, 255, 1)"),D(H,"rgba(255, 0, 255, 1)"),be&&ue){const M=(be.x-ue.x)*W.width;if(Math.abs(M)>10){const Y=be.x*W.width,q=be.y*W.height,pe=Math.min(Math.abs(M),50),ve=M>0?1:-1;F.beginPath(),F.moveTo(Y,q),F.lineTo(Y+ve*pe,q),F.strokeStyle="rgba(255, 200, 0, 0.9)",F.lineWidth=3,F.stroke();const ce=10;F.beginPath(),F.moveTo(Y+ve*pe,q),F.lineTo(Y+ve*(pe-ce),q-ce/2),F.lineTo(Y+ve*(pe-ce),q+ce/2),F.closePath(),F.fillStyle="rgba(255, 200, 0, 0.9)",F.fill()}}if(H&&J){const M=(H.x-J.x)*W.width;if(Math.abs(M)>10){const Y=H.x*W.width,q=H.y*W.height,pe=Math.min(Math.abs(M),50),ve=M>0?1:-1;F.beginPath(),F.moveTo(Y,q),F.lineTo(Y+ve*pe,q),F.strokeStyle="rgba(255, 200, 0, 0.9)",F.lineWidth=3,F.stroke();const ce=10;F.beginPath(),F.moveTo(Y+ve*pe,q),F.lineTo(Y+ve*(pe-ce),q-ce/2),F.lineTo(Y+ve*(pe-ce),q+ce/2),F.closePath(),F.fillStyle="rgba(255, 200, 0, 0.9)",F.fill()}}(bt=e.onResults)==null||bt.call(e,Ke,ht)}k.current=requestAnimationFrame(Re)};k.current=requestAnimationFrame(Re)},[e]),G=T.useCallback(()=>{o(!1),k.current&&(cancelAnimationFrame(k.current),k.current=null),L.current&&(clearInterval(L.current),L.current=null)},[]);return T.useEffect(()=>()=>{G()},[G]),{isLoading:t,isProcessing:i,error:a,fps:h,landmarks:p,worldLandmarks:v,canvasRef:E,startDetection:U,stopDetection:G}}function d5(){const e=tn(),[t,r]=T.useState(!0),[i,o]=T.useState(window.innerWidth>window.innerHeight),{videoRef:a,isReady:u,error:h,facingMode:d,switchCamera:p,startCamera:g,stopCamera:v}=Db(),{isRecording:_,duration:E,startRecording:S,stopRecording:k,addFrame:x}=Ub(),{isLoading:P,fps:L,canvasRef:R,startDetection:U,stopDetection:G}=h5({onResults:(F,ge)=>{x(F,ge)}});T.useEffect(()=>{const F=()=>{o(window.innerWidth>window.innerHeight)};return window.addEventListener("resize",F),()=>window.removeEventListener("resize",F)},[]),T.useEffect(()=>((async()=>{await g()})(),()=>{G(),v()}),[]),T.useEffect(()=>{if(u&&a.current&&!P){const F=setTimeout(()=>{a.current&&U(a.current)},100);return()=>clearTimeout(F)}},[u,P,U,a]);const B=T.useCallback(()=>{if(_){const F=k();G(),v(),sessionStorage.setItem("recordedFrames",JSON.stringify(F)),e("/results")}else r(!1),S()},[_,k,S,G,v,e]),W=F=>{const ge=Math.floor(F/60),Re=Math.floor(F%60);return`${ge.toString().padStart(2,"0")}:${Re.toString().padStart(2,"0")}`};return h?y.jsx("div",{className:"record-page",children:y.jsxs("div",{className:"error-container",children:[y.jsx("h2",{children:""}),y.jsx("p",{children:h.message}),y.jsx("button",{className:"btn btn-primary",onClick:()=>e("/"),children:""})]})}):y.jsxs("div",{className:"record-page",children:[!i&&y.jsxs("div",{className:"orientation-warning",children:[y.jsx("span",{className:"rotate-icon",children:""}),""]}),y.jsxs("div",{className:"camera-container",children:[y.jsx("video",{ref:a,autoPlay:!0,playsInline:!0,muted:!0,className:"camera-video"}),y.jsx("canvas",{ref:R,className:"pose-overlay"}),t&&!_&&y.jsxs("div",{className:"position-guide",children:[y.jsxs("svg",{viewBox:"0 0 200 300",className:"guide-silhouette",children:[y.jsx("ellipse",{cx:"100",cy:"30",rx:"20",ry:"25",stroke:"white",strokeWidth:"2",fill:"none",strokeDasharray:"5,5"}),y.jsx("line",{x1:"100",y1:"55",x2:"100",y2:"140",stroke:"white",strokeWidth:"2",strokeDasharray:"5,5"}),y.jsx("line",{x1:"100",y1:"80",x2:"60",y2:"120",stroke:"white",strokeWidth:"2",strokeDasharray:"5,5"}),y.jsx("line",{x1:"100",y1:"80",x2:"140",y2:"120",stroke:"white",strokeWidth:"2",strokeDasharray:"5,5"}),y.jsx("line",{x1:"100",y1:"140",x2:"70",y2:"220",stroke:"white",strokeWidth:"2",strokeDasharray:"5,5"}),y.jsx("line",{x1:"100",y1:"140",x2:"130",y2:"220",stroke:"white",strokeWidth:"2",strokeDasharray:"5,5"}),y.jsx("line",{x1:"70",y1:"220",x2:"65",y2:"290",stroke:"white",strokeWidth:"2",strokeDasharray:"5,5"}),y.jsx("line",{x1:"130",y1:"220",x2:"135",y2:"290",stroke:"white",strokeWidth:"2",strokeDasharray:"5,5"})]}),y.jsx("p",{className:"guide-text",children:""})]}),y.jsxs("div",{className:"status-bar",children:[y.jsxs("span",{className:"fps-display",children:[L," FPS"]}),P&&y.jsx("span",{className:"loading-text",children:"..."})]})]}),y.jsxs("div",{className:"controls-container",children:[y.jsx("button",{className:"btn btn-secondary back-button",onClick:()=>e("/"),disabled:_,children:""}),y.jsxs("div",{className:"record-control",children:[y.jsx("button",{className:`record-button ${_?"recording":""}`,onClick:B,disabled:P||!u,children:_?y.jsx("span",{className:"stop-icon"}):y.jsx("span",{className:"rec-icon"})}),y.jsx("span",{className:"duration-display",children:W(E)})]}),y.jsx("button",{className:"btn btn-secondary flip-button",onClick:p,disabled:_,children:""})]}),_&&y.jsxs("div",{className:"recording-indicator",children:[y.jsx("span",{className:"rec-dot"}),"REC"]})]})}const f5="modulepreload",p5=function(e){return"/"+e},Jy={},m5=function(t,r,i){let o=Promise.resolve();if(r&&r.length>0){let u=function(p){return Promise.all(p.map(g=>Promise.resolve(g).then(v=>({status:"fulfilled",value:v}),v=>({status:"rejected",reason:v}))))};document.getElementsByTagName("link");const h=document.querySelector("meta[property=csp-nonce]"),d=(h==null?void 0:h.nonce)||(h==null?void 0:h.getAttribute("nonce"));o=u(r.map(p=>{if(p=p5(p),p in Jy)return;Jy[p]=!0;const g=p.endsWith(".css"),v=g?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${p}"]${v}`))return;const _=document.createElement("link");if(_.rel=g?"stylesheet":f5,g||(_.as="script"),_.crossOrigin="",_.href=p,d&&_.setAttribute("nonce",d),document.head.appendChild(_),g)return new Promise((E,S)=>{_.addEventListener("load",E),_.addEventListener("error",()=>S(new Error(`Unable to preload CSS for ${p}`)))})}))}function a(u){const h=new Event("vite:preloadError",{cancelable:!0});if(h.payload=u,window.dispatchEvent(h),!h.defaultPrevented)throw u}return o.then(u=>{for(const h of u||[])h.status==="rejected"&&a(h.reason);return t().catch(a)})},wn={LEFT_HIP:23,RIGHT_HIP:24,LEFT_KNEE:25,RIGHT_KNEE:26,LEFT_ANKLE:27,RIGHT_ANKLE:28};function g5(e){return{analysis:T.useMemo(()=>{if(e.length<30)return null;const r=O3(e),i=I3(r,e.length),o=N3(e,r),a=e.length>0?(e[e.length-1].timestamp-e[0].timestamp)/1e3:0;return{stancePhases:r,gaitCycles:i,lateralThrust:o,totalFrames:e.length,duration:a}},[e]),isAnalyzing:!1}}function O3(e){if(e.length<10)return[];const t=[],r=e.map(S=>{var k;return((k=S.landmarks[wn.LEFT_ANKLE])==null?void 0:k.y)??0}),i=e.map(S=>{var k;return((k=S.landmarks[wn.RIGHT_ANKLE])==null?void 0:k.y)??0}),o=e.map(S=>{var k;return((k=S.landmarks[wn.LEFT_KNEE])==null?void 0:k.y)??0}),a=e.map(S=>{var k;return((k=S.landmarks[wn.RIGHT_KNEE])==null?void 0:k.y)??0}),u=Xy(r),h=Xy(i),d=Yy(r,5),p=Yy(i,5),g=.6,v=.6,_=.025,E=6;return Qy(d,u,o,g,_,E,"left",t),Qy(p,h,a,v,_,E,"right",t),console.log("[Consistency Check] Stance phases detected:",t.length),console.log("[Consistency Check] Left phases:",t.filter(S=>S.leg==="left").length),console.log("[Consistency Check] Right phases:",t.filter(S=>S.leg==="right").length),console.log("[Consistency Check] FIXED threshold:",g.toFixed(4),"(both legs)"),console.log("[Consistency Check] Min phase duration:",E,"frames"),console.log("[Consistency Check] Hysteresis:",_),t.sort((S,k)=>S.startFrame-k.startFrame)}function Xy(e){const t=[0];for(let r=1;r<e.length;r++)t.push(e[r]-e[r-1]);return t}function Yy(e,t){const r=[],i=Math.floor(t/2);for(let o=0;o<e.length;o++){const a=Math.max(0,o-i),u=Math.min(e.length,o+i+1),h=e.slice(a,u),d=h.reduce((p,g)=>p+g,0)/h.length;r.push(d)}return r}function Qy(e,t,r,i,o,a,u,h){let d=!1,p=0;const g=i+o,v=i-o;for(let _=0;_<e.length;_++){const E=e[_]>g,S=e[_]<v,k=Math.abs(t[_])<.012;!d&&E&&k?(d=!0,p=_):d&&(S||!k)&&(d=!1,_-p>=a&&h.push({leg:u,startFrame:p,endFrame:_-1}))}d&&e.length-p>=a&&h.push({leg:u,startFrame:p,endFrame:e.length-1})}function N3(e,t){const r=Zy(e,t.filter(u=>u.leg==="left"),"left"),i=Zy(e,t.filter(u=>u.leg==="right"),"right"),o=Math.max(r.amplitude,i.amplitude),a=o>0?Math.abs(r.amplitude-i.amplitude)/o*100:0;return{leftKnee:r,rightKnee:i,asymmetryPercent:Math.round(a)}}function Zy(e,t,r){const i=r==="left"?wn.LEFT_KNEE:wn.RIGHT_KNEE,o=r==="left"?wn.LEFT_ANKLE:wn.RIGHT_ANKLE,a=r==="left"?wn.LEFT_HIP:wn.RIGHT_HIP,u=new Array(e.length).fill(!1);for(const k of t)for(let x=k.startFrame;x<=k.endFrame;x++)x<e.length&&(u[x]=!0);const h=[],d=[];let p=0,g=0;for(let k=0;k<e.length;k++){const x=e[k].landmarks[a],P=e[k].landmarks[i],L=e[k].landmarks[o];if(x&&P&&L){const R=L.x-x.x,U=L.y-x.y,G=Math.sqrt(R*R+U*U);let B=0;G>0&&(B=Math.abs((L.x-x.x)*(x.y-P.y)-(x.x-P.x)*(L.y-x.y))/G*100),u[k]?(h.push(B),d.push(e[k].timestamp),p++):(h.push(0),d.push(e[k].timestamp),g++)}else h.push(0),d.push(e[k].timestamp)}let v=0,_=0;for(const k of t){const x=[];for(let P=k.startFrame;P<=k.endFrame&&P<h.length;P++)h[P]>0&&x.push(h[P]);if(x.length>0){const P=Math.min(...x),L=Math.max(...x),R=L-P;R>v&&(v=R);const U=Math.max(Math.abs(P),Math.abs(L));U>_&&(_=U)}}let E;v<2?E="low":v<4?E="moderate":E="high";const S={amplitude:Math.round(v*10)/10,maxDisplacement:Math.round(_*10)/10,waveform:h,timePoints:d,severity:E};return console.log("[Consistency Check] Thrust calculation - Amplitude:",S.amplitude,"Severity:",S.severity),console.log("[Consistency Check] Stance frames:",p,"/ Total:",h.length),console.log("[Consistency Check] Swing frames (excluded):",g),console.log("[Consistency Check] Stance phases used:",t.length),S}function I3(e,t){const r=[],i=e.filter(a=>a.leg==="left").sort((a,u)=>a.startFrame-u.startFrame),o=e.filter(a=>a.leg==="right").sort((a,u)=>a.startFrame-u.startFrame);return[{leg:"left",stances:i},{leg:"right",stances:o}].forEach(({leg:a,stances:u})=>{for(let h=0;h<u.length-1;h++){const d=u[h],p=u[h+1],g=d.startFrame,v=p.startFrame;if(v-g<10)continue;const E=y5(g,v,d.endFrame,a);r.push({leg:a,startFrame:g,endFrame:v,phases:E})}}),r.sort((a,u)=>a.startFrame-u.startFrame)}function y5(e,t,r,i){const o=t-e,a=[],u=[["IC",0,2],["LR",2,12],["MSt",12,31],["TSt",31,50],["PSw",50,62],["ISw",62,75],["MSw",75,87],["TSw",87,100]];for(const[h,d,p]of u){const g=Math.round(e+o*d/100),v=Math.round(e+o*p/100);a.push({leg:i,type:h,startFrame:g,endFrame:v,startPercent:d,endPercent:p})}return a}function v5(e){if(e.length<30)return null;const t=O3(e),r=I3(t,e.length),i=N3(e,t),o=e.length>0?(e[e.length-1].timestamp-e[0].timestamp)/1e3:0;return{stancePhases:t,gaitCycles:r,lateralThrust:i,totalFrames:e.length,duration:o}}const w5="GaitKneeViewDB",_5=1,En="sessions";function jc(){return new Promise((e,t)=>{const r=indexedDB.open(w5,_5);r.onerror=()=>t(r.error),r.onsuccess=()=>e(r.result),r.onupgradeneeded=i=>{const o=i.target.result;o.objectStoreNames.contains(En)||o.createObjectStore(En,{keyPath:"id"}).createIndex("timestamp","timestamp",{unique:!1})}})}async function E5(e,t,r,i){const o=await jc(),a=`session_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,u={id:a,timestamp:Date.now(),name:r||` ${new Date().toLocaleDateString("ja-JP")}`,notes:i,frames:e,analysis:t};return new Promise((h,d)=>{const v=o.transaction([En],"readwrite").objectStore(En).add(u);v.onsuccess=()=>h(a),v.onerror=()=>d(v.error)})}async function S5(){const e=await jc();return new Promise((t,r)=>{const a=e.transaction([En],"readonly").objectStore(En).getAll();a.onsuccess=()=>{const u=a.result;u.sort((h,d)=>d.timestamp-h.timestamp),t(u)},a.onerror=()=>r(a.error)})}async function ev(e){const t=await jc();return new Promise((r,i)=>{const u=t.transaction([En],"readonly").objectStore(En).get(e);u.onsuccess=()=>r(u.result||null),u.onerror=()=>i(u.error)})}async function k5(e){const t=await jc();return new Promise((r,i)=>{const u=t.transaction([En],"readwrite").objectStore(En).delete(e);u.onsuccess=()=>r(),u.onerror=()=>i(u.error)})}function b5(){var G;const e=tn(),[t,r]=T.useState(!1),[i,o]=T.useState(""),[a,u]=T.useState(""),h=T.useMemo(()=>{const B=sessionStorage.getItem("recordedFrames");if(B)try{return JSON.parse(B)}catch{return[]}return[]},[]),d=T.useMemo(()=>{const B=sessionStorage.getItem("allTrialResults");if(B)try{return JSON.parse(B)}catch{return null}return null},[]),{analysis:p}=g5(h);T.useEffect(()=>{h.length===0&&e("/")},[h,e]);const g=T.useCallback(async()=>{const B=document.querySelector(".results-content");if(B)try{const W=(await m5(async()=>{const{default:Re}=await import("./html2canvas.esm-QH1iLAAe.js");return{default:Re}},[])).default,F=await W(B),ge=document.createElement("a");ge.download=`gaitknee-result-${Date.now()}.png`,ge.href=F.toDataURL("image/png"),ge.click()}catch(W){console.error("Failed to save image:",W),alert("")}},[]),v=T.useCallback(()=>{const B={metadata:{exportDate:new Date().toISOString(),version:"1.0",totalFrames:(p==null?void 0:p.totalFrames)??0,duration:(p==null?void 0:p.duration)??0},analysis:{lateralThrust:{leftKnee:{amplitude:(p==null?void 0:p.lateralThrust.leftKnee.amplitude)??0,maxDisplacement:(p==null?void 0:p.lateralThrust.leftKnee.maxDisplacement)??0,severity:(p==null?void 0:p.lateralThrust.leftKnee.severity)??"low",waveform:(p==null?void 0:p.lateralThrust.leftKnee.waveform)??[],timePoints:(p==null?void 0:p.lateralThrust.leftKnee.timePoints)??[]},rightKnee:{amplitude:(p==null?void 0:p.lateralThrust.rightKnee.amplitude)??0,maxDisplacement:(p==null?void 0:p.lateralThrust.rightKnee.maxDisplacement)??0,severity:(p==null?void 0:p.lateralThrust.rightKnee.severity)??"low",waveform:(p==null?void 0:p.lateralThrust.rightKnee.waveform)??[],timePoints:(p==null?void 0:p.lateralThrust.rightKnee.timePoints)??[]},asymmetryPercent:(p==null?void 0:p.lateralThrust.asymmetryPercent)??0},stancePhases:(p==null?void 0:p.stancePhases)??[],gaitCycles:(p==null?void 0:p.gaitCycles)??[]},frames:h.map(ge=>({timestamp:ge.timestamp,landmarks:ge.landmarks,worldLandmarks:ge.worldLandmarks}))},W=new Blob([JSON.stringify(B,null,2)],{type:"application/json"}),F=document.createElement("a");F.download=`gaitknee-data-${Date.now()}.json`,F.href=URL.createObjectURL(W),F.click(),URL.revokeObjectURL(F.href)},[h,p]),_=T.useCallback(()=>{sessionStorage.removeItem("recordedFrames"),e("/record")},[e]),E=T.useCallback(async()=>{if(p)try{const B=await E5(h,p,i||void 0,a||void 0);console.log("Session saved:",B),alert(""),r(!1),o(""),u("")}catch(B){console.error("Failed to save session:",B),alert("")}},[h,p,i,a]),S=B=>({low:"",moderate:"",high:""})[B];if(!p)return y.jsx("div",{className:"results-page",children:y.jsxs("div",{className:"loading-container",children:[y.jsx("div",{className:"spinner"}),y.jsx("p",{children:"..."})]})});const k=B=>B>=1.5?"high":B>=.8?"moderate":"low",x=(d==null?void 0:d.averages)!=null,P=d==null?void 0:d.averages,L=((G=d==null?void 0:d.trials)==null?void 0:G.length)??1,R=x?{rightAmplitude:Number(P.rightAmplitude.toFixed(1)),leftAmplitude:Number(P.leftAmplitude.toFixed(1)),asymmetryPercent:Math.round(P.asymmetry),rightSeverity:k(P.rightAmplitude),leftSeverity:k(P.leftAmplitude)}:{rightAmplitude:p.lateralThrust.rightKnee.amplitude,leftAmplitude:p.lateralThrust.leftKnee.amplitude,asymmetryPercent:p.lateralThrust.asymmetryPercent,rightSeverity:p.lateralThrust.rightKnee.severity,leftSeverity:p.lateralThrust.leftKnee.severity},{lateralThrust:U}=p;return y.jsxs("div",{className:"results-page",children:[y.jsxs("header",{className:"results-header",children:[y.jsx("h1",{children:""}),y.jsxs("div",{className:"header-badges",children:[x&&y.jsxs("span",{className:"average-badge",children:[L,""]}),y.jsxs("span",{className:"duration-badge",children:[p.duration.toFixed(1)," / ",p.totalFrames,""]})]})]}),y.jsxs("div",{className:"results-content",children:[y.jsx("section",{className:"score-overview",children:y.jsxs("div",{className:"score-cards",children:[y.jsxs("div",{className:"score-card score-card-right",children:[y.jsx("div",{className:"score-header",children:y.jsx("span",{className:"knee-label",children:""})}),y.jsxs("div",{className:"score-main",children:[y.jsxs("div",{className:`score-badge score-badge-${R.rightSeverity}`,children:[y.jsxs("div",{className:"severity-icon",children:[R.rightSeverity==="high"&&"",R.rightSeverity==="moderate"&&"",R.rightSeverity==="low"&&""]}),y.jsx("div",{className:"severity-label",children:S(R.rightSeverity)})]}),y.jsxs("div",{className:"amplitude-display",children:[y.jsxs("span",{className:"amplitude-value",children:[R.rightAmplitude," cm"]}),y.jsx("span",{className:"amplitude-unit",children:""})]})]})]}),y.jsxs("div",{className:"score-card score-card-asymmetry",children:[y.jsx("div",{className:"asymmetry-label",children:""}),y.jsxs("div",{className:"asymmetry-value",children:[R.asymmetryPercent,y.jsx("span",{className:"asymmetry-unit",children:"%"})]}),R.asymmetryPercent>20&&y.jsx("div",{className:"asymmetry-warning",children:""})]}),y.jsxs("div",{className:"score-card score-card-left",children:[y.jsx("div",{className:"score-header",children:y.jsx("span",{className:"knee-label",children:""})}),y.jsxs("div",{className:"score-main",children:[y.jsxs("div",{className:`score-badge score-badge-${R.leftSeverity}`,children:[y.jsxs("div",{className:"severity-icon",children:[R.leftSeverity==="high"&&"",R.leftSeverity==="moderate"&&"",R.leftSeverity==="low"&&""]}),y.jsx("div",{className:"severity-label",children:S(R.leftSeverity)})]}),y.jsxs("div",{className:"amplitude-display",children:[y.jsxs("span",{className:"amplitude-value",children:[R.leftAmplitude," cm"]}),y.jsx("span",{className:"amplitude-unit",children:""})]})]})]})]})}),y.jsxs("section",{className:"chart-section",children:[y.jsx("h2",{children:"Lateral Thrust "}),y.jsxs("div",{className:"waveform-container",children:[y.jsxs("div",{className:"waveform-card",children:[y.jsxs("div",{className:"waveform-header",children:[y.jsx("span",{className:"leg-label",children:""}),y.jsx("span",{className:`badge badge-${U.rightKnee.severity}`,children:S(U.rightKnee.severity)})]}),y.jsx(tv,{data:U.rightKnee.waveform,severity:U.rightKnee.severity,gaitCycles:p.gaitCycles.filter(B=>B.leg==="right"),_leg:"right"}),y.jsx("div",{className:"waveform-stats",children:y.jsxs("span",{children:[": ",y.jsxs("strong",{children:[U.rightKnee.amplitude," cm"]})]})})]}),y.jsxs("div",{className:"waveform-card",children:[y.jsxs("div",{className:"waveform-header",children:[y.jsx("span",{className:"leg-label",children:""}),y.jsx("span",{className:`badge badge-${U.leftKnee.severity}`,children:S(U.leftKnee.severity)})]}),y.jsx(tv,{data:U.leftKnee.waveform,severity:U.leftKnee.severity,gaitCycles:p.gaitCycles.filter(B=>B.leg==="left"),_leg:"left"}),y.jsx("div",{className:"waveform-stats",children:y.jsxs("span",{children:[": ",y.jsxs("strong",{children:[U.leftKnee.amplitude," cm"]})]})})]})]})]}),y.jsxs("section",{className:"summary-section",children:[y.jsx("h2",{children:""}),y.jsxs("div",{className:"summary-cards",children:[y.jsxs("div",{className:"summary-card",children:[y.jsx("span",{className:"summary-label",children:""}),y.jsxs("span",{className:"summary-value",children:[R.asymmetryPercent,"%"]})]}),y.jsxs("div",{className:"summary-card",children:[y.jsx("span",{className:"summary-label",children:""}),y.jsx("div",{className:"summary-detail",children:y.jsx("span",{className:`badge badge-${R.rightSeverity}`,children:S(R.rightSeverity)})})]}),y.jsxs("div",{className:"summary-card",children:[y.jsx("span",{className:"summary-label",children:""}),y.jsx("div",{className:"summary-detail",children:y.jsx("span",{className:`badge badge-${R.leftSeverity}`,children:S(R.leftSeverity)})})]})]}),y.jsxs("div",{className:"auto-comment",children:[y.jsx("h3",{children:""}),y.jsx("p",{children:x5({leftKnee:{amplitude:R.leftAmplitude,severity:R.leftSeverity},rightKnee:{amplitude:R.rightAmplitude,severity:R.rightSeverity},asymmetryPercent:R.asymmetryPercent})})]})]}),d&&d.trials&&d.trials.length>0&&y.jsxs("section",{className:"trial-table-section",children:[y.jsx("h2",{children:""}),y.jsx("div",{className:"trial-table-wrapper",children:y.jsxs("table",{className:"trial-table",children:[y.jsx("thead",{children:y.jsxs("tr",{children:[y.jsx("th",{children:""}),y.jsx("th",{children:" (cm)"}),y.jsx("th",{children:" (cm)"}),y.jsx("th",{children:" (%)"})]})}),y.jsxs("tbody",{children:[d.trials.map((B,W)=>y.jsxs("tr",{className:W===d.bestTrialIndex?"best-trial":"",children:[y.jsxs("td",{children:[W+1,"",W===d.bestTrialIndex&&y.jsx("span",{className:"best-badge",children:""})]}),y.jsx("td",{children:B.lateralThrust.rightKnee.amplitude}),y.jsx("td",{children:B.lateralThrust.leftKnee.amplitude}),y.jsx("td",{children:B.lateralThrust.asymmetryPercent})]},W)),y.jsxs("tr",{className:"average-row",children:[y.jsx("td",{children:y.jsx("strong",{children:""})}),y.jsx("td",{children:y.jsx("strong",{children:R.rightAmplitude})}),y.jsx("td",{children:y.jsx("strong",{children:R.leftAmplitude})}),y.jsx("td",{children:y.jsx("strong",{children:R.asymmetryPercent})})]})]})]})})]})]}),y.jsxs("div",{className:"results-actions",children:[y.jsx("button",{className:"btn btn-secondary",onClick:_,children:""}),y.jsx("button",{className:"btn btn-outline",onClick:()=>r(!0),children:""}),y.jsx("button",{className:"btn btn-outline",onClick:v,children:" (JSON)"}),y.jsx("button",{className:"btn btn-primary",onClick:g,children:" (PNG)"})]}),t&&y.jsx("div",{className:"dialog-overlay",onClick:()=>r(!1),children:y.jsxs("div",{className:"dialog-content",onClick:B=>B.stopPropagation(),children:[y.jsx("h2",{children:""}),y.jsxs("div",{className:"dialog-body",children:[y.jsxs("div",{className:"form-group",children:[y.jsx("label",{htmlFor:"session-name",children:""}),y.jsx("input",{id:"session-name",type:"text",className:"form-input",placeholder:` ${new Date().toLocaleDateString("ja-JP")}`,value:i,onChange:B=>o(B.target.value)})]}),y.jsxs("div",{className:"form-group",children:[y.jsx("label",{htmlFor:"session-notes",children:""}),y.jsx("textarea",{id:"session-notes",className:"form-textarea",placeholder:"",rows:3,value:a,onChange:B=>u(B.target.value)})]})]}),y.jsxs("div",{className:"dialog-actions",children:[y.jsx("button",{className:"btn btn-secondary",onClick:()=>r(!1),children:""}),y.jsx("button",{className:"btn btn-primary",onClick:E,children:""})]})]})})]})}function tv({data:e,severity:t,gaitCycles:r=[],_leg:i}){if(e.length===0)return y.jsx("div",{className:"waveform-empty",children:""});const a=Math.max(1,Math.floor(e.length/100)),u=e.filter((P,L)=>L%a===0),h=100,d=40,p=2,g=Math.min(...e),v=Math.max(...e),_=v-g||1,S=`M ${u.map((P,L)=>{const R=p+L/(u.length-1)*(h-2*p),U=p+(v-P)/_*(d-2*p);return`${R},${U}`}).join(" L ")}`,k=t==="high"?"var(--color-danger)":t==="moderate"?"var(--color-warning)":"var(--color-success)",x={IC:"#4ade80",LR:"#facc15",MSt:"#60a5fa",TSt:"#a78bfa",PSw:"#fb923c",ISw:"#f472b6",MSw:"#8b5cf6",TSw:"#06b6d4"};return y.jsxs("svg",{viewBox:`0 0 ${h} ${d}`,className:"waveform-svg",preserveAspectRatio:"none",children:[y.jsx("line",{x1:p,y1:d/2,x2:h-p,y2:d/2,stroke:"var(--color-border)",strokeWidth:"0.5",strokeDasharray:"2,2"}),r.map((P,L)=>y.jsx("g",{children:P.phases.map((R,U)=>{const G=p+R.startFrame/(e.length-1)*(h-2*p),W=p+R.endFrame/(e.length-1)*(h-2*p)-G,F=x[R.type]||"#666";return y.jsxs("g",{children:[y.jsx("rect",{x:G,y:p,width:W,height:d-2*p,fill:F,opacity:"0.15"}),U===0&&y.jsx("line",{x1:G,y1:p,x2:G,y2:d-p,stroke:F,strokeWidth:"0.5",strokeDasharray:"1,1",opacity:"0.8"}),W>3&&["IC","LR","MSt","TSt","PSw","ISw"].includes(R.type)&&y.jsx("text",{x:G+W/2,y:p+3,fontSize:"2.5",fill:F,textAnchor:"middle",fontWeight:"600",children:R.type})]},`${L}-${U}`)})},L)),y.jsx("path",{d:S,fill:"none",stroke:k,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]})}function x5(e){const t=[];return e.rightKnee.amplitude>e.leftKnee.amplitude?t.push(`lateral thrust: ${e.rightKnee.amplitude} cm vs ${e.leftKnee.amplitude} cm`):e.leftKnee.amplitude>e.rightKnee.amplitude?t.push(`lateral thrust: ${e.leftKnee.amplitude} cm vs ${e.rightKnee.amplitude} cm`):t.push("lateral thrust"),e.asymmetryPercent>30&&t.push(`${e.asymmetryPercent}%`),(e.rightKnee.severity==="high"||e.leftKnee.severity==="high")&&t.push("lateral thrust"),t.join(" ")}var Ne;(function(e){e.LOAD="LOAD",e.EXEC="EXEC",e.FFPROBE="FFPROBE",e.WRITE_FILE="WRITE_FILE",e.READ_FILE="READ_FILE",e.DELETE_FILE="DELETE_FILE",e.RENAME="RENAME",e.CREATE_DIR="CREATE_DIR",e.LIST_DIR="LIST_DIR",e.DELETE_DIR="DELETE_DIR",e.ERROR="ERROR",e.DOWNLOAD="DOWNLOAD",e.PROGRESS="PROGRESS",e.LOG="LOG",e.MOUNT="MOUNT",e.UNMOUNT="UNMOUNT"})(Ne||(Ne={}));const T5=(()=>{let e=0;return()=>e++})(),R5=new Error("ffmpeg is not loaded, call `await ffmpeg.load()` first"),A5=new Error("called FFmpeg.terminate()");var wr,Ss,Un,ri,ni,Qu,Gt;class C5{constructor(){ms(this,wr,null);ms(this,Ss,{});ms(this,Un,{});ms(this,ri,[]);ms(this,ni,[]);Ht(this,"loaded",!1);ms(this,Qu,()=>{we(this,wr)&&(we(this,wr).onmessage=({data:{id:t,type:r,data:i}})=>{switch(r){case Ne.LOAD:this.loaded=!0,we(this,Ss)[t](i);break;case Ne.MOUNT:case Ne.UNMOUNT:case Ne.EXEC:case Ne.FFPROBE:case Ne.WRITE_FILE:case Ne.READ_FILE:case Ne.DELETE_FILE:case Ne.RENAME:case Ne.CREATE_DIR:case Ne.LIST_DIR:case Ne.DELETE_DIR:we(this,Ss)[t](i);break;case Ne.LOG:we(this,ri).forEach(o=>o(i));break;case Ne.PROGRESS:we(this,ni).forEach(o=>o(i));break;case Ne.ERROR:we(this,Un)[t](i);break}delete we(this,Ss)[t],delete we(this,Un)[t]})});ms(this,Gt,({type:t,data:r},i=[],o)=>we(this,wr)?new Promise((a,u)=>{const h=T5();we(this,wr)&&we(this,wr).postMessage({id:h,type:t,data:r},i),we(this,Ss)[h]=a,we(this,Un)[h]=u,o==null||o.addEventListener("abort",()=>{u(new DOMException(`Message # ${h} was aborted`,"AbortError"))},{once:!0})}):Promise.reject(R5));Ht(this,"load",({classWorkerURL:t,...r}={},{signal:i}={})=>(we(this,wr)||(la(this,wr,t?new Worker(new URL(t,import.meta.url),{type:"module"}):new Worker(new URL("/assets/worker-BAOIWoxA.js",import.meta.url),{type:"module"})),we(this,Qu).call(this)),we(this,Gt).call(this,{type:Ne.LOAD,data:r},void 0,i)));Ht(this,"exec",(t,r=-1,{signal:i}={})=>we(this,Gt).call(this,{type:Ne.EXEC,data:{args:t,timeout:r}},void 0,i));Ht(this,"ffprobe",(t,r=-1,{signal:i}={})=>we(this,Gt).call(this,{type:Ne.FFPROBE,data:{args:t,timeout:r}},void 0,i));Ht(this,"terminate",()=>{const t=Object.keys(we(this,Un));for(const r of t)we(this,Un)[r](A5),delete we(this,Un)[r],delete we(this,Ss)[r];we(this,wr)&&(we(this,wr).terminate(),la(this,wr,null),this.loaded=!1)});Ht(this,"writeFile",(t,r,{signal:i}={})=>{const o=[];return r instanceof Uint8Array&&o.push(r.buffer),we(this,Gt).call(this,{type:Ne.WRITE_FILE,data:{path:t,data:r}},o,i)});Ht(this,"mount",(t,r,i)=>{const o=[];return we(this,Gt).call(this,{type:Ne.MOUNT,data:{fsType:t,options:r,mountPoint:i}},o)});Ht(this,"unmount",t=>{const r=[];return we(this,Gt).call(this,{type:Ne.UNMOUNT,data:{mountPoint:t}},r)});Ht(this,"readFile",(t,r="binary",{signal:i}={})=>we(this,Gt).call(this,{type:Ne.READ_FILE,data:{path:t,encoding:r}},void 0,i));Ht(this,"deleteFile",(t,{signal:r}={})=>we(this,Gt).call(this,{type:Ne.DELETE_FILE,data:{path:t}},void 0,r));Ht(this,"rename",(t,r,{signal:i}={})=>we(this,Gt).call(this,{type:Ne.RENAME,data:{oldPath:t,newPath:r}},void 0,i));Ht(this,"createDir",(t,{signal:r}={})=>we(this,Gt).call(this,{type:Ne.CREATE_DIR,data:{path:t}},void 0,r));Ht(this,"listDir",(t,{signal:r}={})=>we(this,Gt).call(this,{type:Ne.LIST_DIR,data:{path:t}},void 0,r));Ht(this,"deleteDir",(t,{signal:r}={})=>we(this,Gt).call(this,{type:Ne.DELETE_DIR,data:{path:t}},void 0,r))}on(t,r){t==="log"?we(this,ri).push(r):t==="progress"&&we(this,ni).push(r)}off(t,r){t==="log"?la(this,ri,we(this,ri).filter(i=>i!==r)):t==="progress"&&la(this,ni,we(this,ni).filter(i=>i!==r))}}wr=new WeakMap,Ss=new WeakMap,Un=new WeakMap,ri=new WeakMap,ni=new WeakMap,Qu=new WeakMap,Gt=new WeakMap;var rv;(function(e){e.MEMFS="MEMFS",e.NODEFS="NODEFS",e.NODERAWFS="NODERAWFS",e.IDBFS="IDBFS",e.WORKERFS="WORKERFS",e.PROXYFS="PROXYFS"})(rv||(rv={}));const P5=new Error("failed to get response body reader"),j5=new Error("failed to complete download"),O5="Content-Length",N5=e=>new Promise((t,r)=>{const i=new FileReader;i.onload=()=>{const{result:o}=i;o instanceof ArrayBuffer?t(new Uint8Array(o)):t(new Uint8Array)},i.onerror=o=>{var a,u;r(Error(`File could not be read! Code=${((u=(a=o==null?void 0:o.target)==null?void 0:a.error)==null?void 0:u.code)||-1}`))},i.readAsArrayBuffer(e)}),I5=async e=>{let t;if(typeof e=="string")/data:_data\/([a-zA-Z]*);base64,([^"]*)/.test(e)?t=atob(e.split(",")[1]).split("").map(r=>r.charCodeAt(0)):t=await(await fetch(e)).arrayBuffer();else if(e instanceof URL)t=await(await fetch(e)).arrayBuffer();else if(e instanceof File||e instanceof Blob)t=await N5(e);else return new Uint8Array;return new Uint8Array(t)},L5=async(e,t)=>{var o;const r=await fetch(e);let i;try{const a=parseInt(r.headers.get(O5)||"-1"),u=(o=r.body)==null?void 0:o.getReader();if(!u)throw P5;const h=[];let d=0;for(;;){const{done:v,value:_}=await u.read(),E=_?_.length:0;if(v){if(a!=-1&&a!==d)throw j5;t&&t({url:e,total:a,received:d,delta:E,done:v});break}h.push(_),d+=E,t&&t({url:e,total:a,received:d,delta:E,done:v})}const p=new Uint8Array(d);let g=0;for(const v of h)p.set(v,g),g+=v.length;i=p.buffer}catch(a){console.log("failed to send download progress event: ",a),i=await r.arrayBuffer()}return i},nv=async(e,t,r=!1,i)=>{const o=r?await L5(e,i):await(await fetch(e)).arrayBuffer(),a=new Blob([o],{type:t});return URL.createObjectURL(a)};function D5(){const e=tn(),{user:t,refreshUsage:r}=$a(),[i,o]=T.useState(null),[a,u]=T.useState(null),[h,d]=T.useState(!1),[p,g]=T.useState(0),[v,_]=T.useState(null),[E,S]=T.useState(!0),[k,x]=T.useState(null),[P,L]=T.useState(null),[R,U]=T.useState(!1),[G,B]=T.useState(0),[W,F]=T.useState(0),[ge]=T.useState(5),Re=T.useRef(null),ct=T.useRef(null),We=T.useRef(null),kt=T.useRef(null),bt=T.useRef([]),Ke=T.useRef(null),[ht,be]=T.useState(!1);T.useEffect(()=>((async()=>{try{S(!0);const M=await ys.forVisionTasks("https://cdn.jsdelivr.net/npm/@mediapipe/tasks-vision@0.10.21/wasm");We.current=await It.createFromOptions(M,{baseOptions:{modelAssetPath:"https://storage.googleapis.com/mediapipe-models/pose_landmarker/pose_landmarker_lite/float16/1/pose_landmarker_lite.task",delegate:"GPU"},runningMode:"VIDEO",numPoses:1}),S(!1)}catch(M){console.error("[UploadPage] MediaPipe init error:",M),_("MediaPipe"),S(!1)}})(),()=>{We.current&&We.current.close()}),[]),T.useEffect(()=>{(async()=>{try{const M=new C5;Ke.current=M,M.on("log",({message:q})=>{console.log("[FFmpeg]",q)}),M.on("progress",({progress:q})=>{B(Math.round(q*100))});const Y="https://unpkg.com/@ffmpeg/core@0.12.6/dist/umd";await M.load({coreURL:await nv(`${Y}/ffmpeg-core.js`,"text/javascript"),wasmURL:await nv(`${Y}/ffmpeg-core.wasm`,"application/wasm")}),be(!0)}catch(M){console.error("[FFmpeg] Load error:",M)}})()},[]),T.useEffect(()=>()=>{a&&URL.revokeObjectURL(a)},[a]),T.useEffect(()=>()=>{k&&URL.revokeObjectURL(k)},[k]);const H=T.useCallback(D=>{var q;const M=(q=D.target.files)==null?void 0:q[0];if(!M)return;if(!M.type.startsWith("video/")){_("");return}if(M.size>100*1024*1024){_("100MB");return}_(null),o(M),a&&URL.revokeObjectURL(a);const Y=URL.createObjectURL(M);u(Y)},[a]),ue=T.useCallback(async D=>{if(!Ke.current||!ht)throw new Error("FFmpeg");U(!0),B(0);try{const M=Ke.current;await M.writeFile("input.webm",await I5(D)),await M.exec(["-i","input.webm","-c:v","libx264","-pix_fmt","yuv420p","-profile:v","baseline","-level","3.0","-movflags","faststart","-f","mp4","output.mp4"]);const Y=await M.readFile("output.mp4"),q=new Blob([new Uint8Array(Y)],{type:"video/mp4"});return await M.deleteFile("input.webm"),await M.deleteFile("output.mp4"),U(!1),q}catch(M){throw console.error("[FFmpeg] Conversion error:",M),U(!1),M}},[ht]),J=T.useCallback(async(D,M,Y,q,pe,ve)=>{const ce=[],Ae=D.duration;D.currentTime=0,D.playbackRate=1;let it=-1,Vr=!1;const So=1/15,an=()=>{var Le;if(Vr)return;const zt=D.currentTime;if(zt-it>=So){const ke=M.getContext("2d");ke.clearRect(0,0,M.width,M.height),ke.drawImage(D,0,0,M.width,M.height);const Jn=performance.now(),vt=Y.detectForVideo(D,Jn);if(vt.landmarks&&vt.landmarks.length>0){const Ct=vt.landmarks[0],Qt=((Le=vt.worldLandmarks)==null?void 0:Le[0])||Ct;if(ve){q.drawConnectors(Ct,It.POSE_CONNECTIONS,{color:"#00FF00",lineWidth:2}),q.drawLandmarks(Ct,{color:"#FF0000",fillColor:"#FF0000",radius:3});const Vt=Ct[26],Zt=Ct[25];Vt&&(ke.fillStyle="rgba(255, 0, 255, 0.3)",ke.beginPath(),ke.arc(Vt.x*M.width,Vt.y*M.height,16,0,2*Math.PI),ke.fill(),ke.fillStyle="#FF00FF",ke.beginPath(),ke.arc(Vt.x*M.width,Vt.y*M.height,8,0,2*Math.PI),ke.fill()),Zt&&(ke.fillStyle="rgba(0, 255, 255, 0.3)",ke.beginPath(),ke.arc(Zt.x*M.width,Zt.y*M.height,16,0,2*Math.PI),ke.fill(),ke.fillStyle="#00FFFF",ke.beginPath(),ke.arc(Zt.x*M.width,Zt.y*M.height,8,0,2*Math.PI),ke.fill())}ce.push({timestamp:zt*1e3,landmarks:Ct,worldLandmarks:Qt})}it=zt}const ln=Math.round(zt/Ae*100);g(ln),!D.paused&&!D.ended&&zt<Ae?requestAnimationFrame(an):Vr=!0};return await new Promise((zt,ln)=>{D.onended=()=>zt(),D.onerror=()=>ln(new Error("")),D.play().then(()=>{requestAnimationFrame(an)}).catch(ln),setTimeout(()=>{Vr||(D.pause(),zt())},(Ae+10)*1e3)}),Vr=!0,D.pause(),ce},[]),j=T.useCallback(async()=>{if(!Re.current||!ct.current||!We.current||!a||E)return;if(t&&!(await F2(t.id)).allowed){_(`${Ca}`);return}d(!0),g(0),_(null),x(null),F(0),sessionStorage.removeItem("recordedFrames"),sessionStorage.removeItem("allTrialResults");const D=Re.current,M=ct.current,Y=We.current;try{await new Promise((Le,ke)=>{D.readyState>=1?Le():(D.onloadedmetadata=()=>Le(),D.onerror=()=>ke(new Error("")))});const q=D.duration;M.width=D.videoWidth,M.height=D.videoHeight;const pe=M.getContext("2d");if(!pe)throw new Error("Canvas context not available");const ve=new $t(pe),ce=[],Ae=[];for(let Le=0;Le<ge;Le++){F(Le+1),g(0),console.log(`[Trial ${Le+1}/${ge}] Starting analysis...`);const ke=!0,Jn=Le===ge-1;let vt=null;if(Jn){bt.current=[];const Vt=M.captureStream(30);vt=new MediaRecorder(Vt,{mimeType:"video/webm;codecs=vp9",videoBitsPerSecond:25e5}),vt.ondataavailable=Zt=>{Zt.data.size>0&&bt.current.push(Zt.data)},vt.start(),kt.current=vt}const Ct=await J(D,M,Y,ve,Le+1,ke);if(vt&&vt.state==="recording"&&(vt.stop(),await new Promise(Vt=>{vt.onstop=async()=>{const Zt=new Blob(bt.current,{type:"video/webm"}),ko=URL.createObjectURL(Zt);L(ko);try{const li=await ue(Zt),Ga=URL.createObjectURL(li);x(Ga)}catch(li){console.error("[UploadPage] MP4 conversion error:",li),x(ko)}Vt()}})),Ct.length===0){console.warn(`[Trial ${Le+1}] No frames detected`);continue}Ae.push(Ct);const Qt=v5(Ct);Qt&&(ce.push(Qt),console.log(`[Trial ${Le+1}] Analysis complete:`,{frames:Ct.length,stancePhases:Qt.stancePhases.length,rightAmplitude:Qt.lateralThrust.rightKnee.amplitude,leftAmplitude:Qt.lateralThrust.leftKnee.amplitude})),Le<ge-1&&await new Promise(Vt=>setTimeout(Vt,500))}if(ce.length===0)throw new Error("3");const it=Ae.reduce((Le,ke,Jn,vt)=>ke.length>vt[Le].length?Jn:Le,0),Vr=Ae[it],So=ce[it];console.log(`[Analysis Summary] Best trial: ${it+1}/${ge}`),console.log(`[Analysis Summary] Total successful trials: ${ce.length}`);const an=ce.reduce((Le,ke)=>Le+ke.lateralThrust.rightKnee.amplitude,0)/ce.length,zt=ce.reduce((Le,ke)=>Le+ke.lateralThrust.leftKnee.amplitude,0)/ce.length,ln=ce.reduce((Le,ke)=>Le+ke.lateralThrust.asymmetryPercent,0)/ce.length;console.log(`[Analysis Summary] Average values across ${ce.length} trials:`,{rightAmplitude:an.toFixed(2),leftAmplitude:zt.toFixed(2),asymmetry:ln.toFixed(1)}),sessionStorage.setItem("recordedFrames",JSON.stringify(Vr)),sessionStorage.setItem("allTrialResults",JSON.stringify({trials:ce,bestTrialIndex:it,averages:{rightAmplitude:an,leftAmplitude:zt,asymmetry:ln}})),t&&(await Nb(t.id),await r()),d(!1),F(0)}catch(q){console.error("[UploadPage] Analysis error:",q),_(q instanceof Error?q.message:""),d(!1),F(0)}},[a,E,ge,J,ue]);return y.jsxs("div",{className:"upload-page",children:[y.jsxs("header",{className:"upload-header",children:[y.jsx("button",{className:"back-btn",onClick:()=>e("/"),children:" "}),y.jsx("h1",{children:""})]}),y.jsxs("main",{className:"upload-main",children:[i?y.jsxs("div",{className:"preview-container",children:[y.jsxs("div",{className:"video-wrapper",children:[y.jsx("video",{ref:Re,src:a||void 0,className:"preview-video",controls:!h,muted:!0,playsInline:!0}),y.jsx("canvas",{ref:ct,className:`analysis-overlay ${h?"visible":""}`})]}),y.jsxs("div",{className:"file-info",children:[y.jsx("span",{className:"file-name",children:i.name}),y.jsx("button",{className:"change-file-btn",onClick:()=>{o(null),a&&URL.revokeObjectURL(a),u(null),k&&URL.revokeObjectURL(k),x(null)},disabled:h,children:""})]}),h&&y.jsxs("div",{className:"progress-container",children:[y.jsx("div",{className:"progress-bar",children:y.jsx("div",{className:"progress-fill",style:{width:`${p}%`}})}),y.jsxs("span",{className:"progress-text",children:[W>0?` ${W}/${ge} `:"","... ",p,"%"]})]}),R&&y.jsxs("div",{className:"progress-container",children:[y.jsx("div",{className:"progress-bar",children:y.jsx("div",{className:"progress-fill",style:{width:`${G}%`}})}),y.jsxs("span",{className:"progress-text",children:["MP4... ",G,"%"]})]}),k&&!h&&!R&&y.jsxs("div",{className:"completion-actions",children:[y.jsx("div",{className:"success-message",children:" "}),y.jsxs("div",{className:"action-buttons",children:[y.jsx("a",{href:k,download:`gaitknee-analyzed-${Date.now()}.mp4`,className:"download-video-btn",children:" MP4"}),P&&y.jsx("a",{href:P,download:`gaitknee-analyzed-${Date.now()}.webm`,className:"download-video-btn secondary",children:" WebM"}),y.jsx("button",{onClick:()=>e("/results"),className:"view-results-btn",children:" "})]}),y.jsx("p",{className:"download-hint",children:" MP4WebM"})]})]}):y.jsxs("div",{className:"upload-zone",children:[y.jsx("input",{type:"file",accept:"video/*",onChange:H,className:"file-input",id:"video-input"}),y.jsxs("label",{htmlFor:"video-input",className:"upload-label",children:[y.jsx("div",{className:"upload-icon",children:""}),y.jsx("p",{className:"upload-text",children:""}),y.jsx("p",{className:"upload-hint",children:"MP4, MOV, WebM100MB"})]})]}),v&&y.jsx("div",{className:"error-message",children:v})]}),y.jsx("footer",{className:"upload-footer",children:y.jsx("button",{className:"btn btn-primary btn-large",onClick:j,disabled:!i||h||E,children:E?"...":h?"...":""})})]})}function U5(){const e=tn(),[t,r]=T.useState([]),[i,o]=T.useState(!0),[a,u]=T.useState([]);T.useEffect(()=>{h()},[]);const h=T.useCallback(async()=>{o(!0);try{const E=await S5();r(E)}catch(E){console.error("Failed to load sessions:",E)}finally{o(!1)}},[]),d=T.useCallback(async E=>{if(confirm(""))try{await k5(E),r(S=>S.filter(k=>k.id!==E)),u(S=>S.filter(k=>k!==E))}catch(S){console.error("Failed to delete session:",S),alert("")}},[]),p=T.useCallback(E=>{sessionStorage.setItem("recordedFrames",JSON.stringify(E.frames)),e("/results")},[e]),g=T.useCallback(E=>{u(S=>S.includes(E)?S.filter(k=>k!==E):S.length<2?[...S,E]:S)},[]),v=T.useCallback(()=>{a.length===2&&e(`/compare?sessions=${a.join(",")}`)},[a,e]),_=E=>({low:"",moderate:"",high:""})[E];return i?y.jsx("div",{className:"history-page",children:y.jsxs("div",{className:"loading-container",children:[y.jsx("div",{className:"spinner"}),y.jsx("p",{children:"..."})]})}):y.jsxs("div",{className:"history-page",children:[y.jsxs("header",{className:"history-header",children:[y.jsx("button",{className:"back-btn",onClick:()=>e("/"),children:" "}),y.jsx("h1",{children:""}),a.length===2&&y.jsx("button",{className:"compare-btn",onClick:v,children:""})]}),y.jsxs("main",{className:"history-main",children:[t.length===0?y.jsxs("div",{className:"empty-state",children:[y.jsx("p",{children:""}),y.jsx("button",{className:"btn btn-primary",onClick:()=>e("/record"),children:""})]}):y.jsx("div",{className:"sessions-list",children:t.map(E=>y.jsxs("div",{className:`session-card ${a.includes(E.id)?"selected":""}`,children:[y.jsxs("div",{className:"session-header",children:[y.jsx("input",{type:"checkbox",checked:a.includes(E.id),onChange:()=>g(E.id),disabled:a.length>=2&&!a.includes(E.id)}),y.jsxs("div",{className:"session-info",children:[y.jsx("h3",{children:E.name}),y.jsx("span",{className:"session-date",children:new Date(E.timestamp).toLocaleString("ja-JP")})]})]}),E.notes&&y.jsx("p",{className:"session-notes",children:E.notes}),y.jsxs("div",{className:"session-metrics",children:[y.jsxs("div",{className:"metric",children:[y.jsx("span",{className:"metric-label",children:""}),y.jsxs("div",{className:"metric-value",children:[y.jsx("span",{className:`badge badge-${E.analysis.lateralThrust.rightKnee.severity}`,children:_(E.analysis.lateralThrust.rightKnee.severity)}),y.jsx("span",{children:E.analysis.lateralThrust.rightKnee.amplitude})]})]}),y.jsxs("div",{className:"metric",children:[y.jsx("span",{className:"metric-label",children:""}),y.jsxs("div",{className:"metric-value",children:[y.jsx("span",{className:`badge badge-${E.analysis.lateralThrust.leftKnee.severity}`,children:_(E.analysis.lateralThrust.leftKnee.severity)}),y.jsx("span",{children:E.analysis.lateralThrust.leftKnee.amplitude})]})]}),y.jsxs("div",{className:"metric",children:[y.jsx("span",{className:"metric-label",children:""}),y.jsxs("span",{className:"metric-value",children:[E.analysis.lateralThrust.asymmetryPercent,"%"]})]})]}),y.jsxs("div",{className:"session-actions",children:[y.jsx("button",{className:"btn btn-outline btn-small",onClick:()=>p(E),children:""}),y.jsx("button",{className:"btn btn-secondary btn-small",onClick:()=>d(E.id),children:""})]})]},E.id))}),a.length>0&&a.length<2&&y.jsx("div",{className:"selection-hint",children:"1"})]})]})}function F5(){const e=tn(),[t]=_v(),[r,i]=T.useState([null,null]),[o,a]=T.useState(!0);T.useEffect(()=>{var g;const p=((g=t.get("sessions"))==null?void 0:g.split(","))||[];if(p.length!==2){e("/history");return}Promise.all([ev(p[0]),ev(p[1])]).then(([v,_])=>{if(!v||!_){alert(""),e("/history");return}i([v,_]),a(!1)})},[t,e]);const u=T.useMemo(()=>{if(!r[0]||!r[1])return null;const[p,g]=r;return{rightKneeDiff:g.analysis.lateralThrust.rightKnee.amplitude-p.analysis.lateralThrust.rightKnee.amplitude,leftKneeDiff:g.analysis.lateralThrust.leftKnee.amplitude-p.analysis.lateralThrust.leftKnee.amplitude,asymmetryDiff:g.analysis.lateralThrust.asymmetryPercent-p.analysis.lateralThrust.asymmetryPercent,rightKneeChangePercent:(g.analysis.lateralThrust.rightKnee.amplitude-p.analysis.lateralThrust.rightKnee.amplitude)/(p.analysis.lateralThrust.rightKnee.amplitude||1)*100,leftKneeChangePercent:(g.analysis.lateralThrust.leftKnee.amplitude-p.analysis.lateralThrust.leftKnee.amplitude)/(p.analysis.lateralThrust.leftKnee.amplitude||1)*100}},[r]),h=p=>Math.abs(p)<.5?"":p>0?"":"",d=p=>({low:"",moderate:"",high:""})[p];return o||!r[0]||!r[1]?y.jsx("div",{className:"compare-page",children:y.jsxs("div",{className:"loading-container",children:[y.jsx("div",{className:"spinner"}),y.jsx("p",{children:"..."})]})}):y.jsxs("div",{className:"compare-page",children:[y.jsxs("header",{className:"compare-header",children:[y.jsx("button",{className:"back-btn",onClick:()=>e("/history"),children:" "}),y.jsx("h1",{children:""})]}),y.jsxs("main",{className:"compare-main",children:[y.jsxs("div",{className:"session-headers",children:[y.jsxs("div",{className:"session-header-card",children:[y.jsx("h2",{children:r[0].name}),y.jsx("p",{className:"session-date",children:new Date(r[0].timestamp).toLocaleString("ja-JP")}),r[0].notes&&y.jsx("p",{className:"session-notes",children:r[0].notes})]}),y.jsxs("div",{className:"session-header-card",children:[y.jsx("h2",{children:r[1].name}),y.jsx("p",{className:"session-date",children:new Date(r[1].timestamp).toLocaleString("ja-JP")}),r[1].notes&&y.jsx("p",{className:"session-notes",children:r[1].notes})]})]}),y.jsxs("section",{className:"comparison-summary",children:[y.jsx("h3",{children:""}),y.jsxs("div",{className:"summary-grid",children:[y.jsxs("div",{className:"summary-item",children:[y.jsx("span",{className:"summary-label",children:" Lateral Thrust"}),y.jsxs("div",{className:"summary-values",children:[y.jsxs("span",{children:[r[0].analysis.lateralThrust.rightKnee.amplitude," cm"]}),y.jsx("span",{className:"arrow",children:""}),y.jsxs("span",{children:[r[1].analysis.lateralThrust.rightKnee.amplitude," cm"]})]}),y.jsxs("div",{className:`change-indicator ${u.rightKneeDiff>0?"negative":u.rightKneeDiff<0?"positive":"neutral"}`,children:[h(u.rightKneeDiff),Math.abs(u.rightKneeDiff)>=.5&&y.jsxs("span",{className:"change-percent",children:["(",u.rightKneeChangePercent>0?"+":"",u.rightKneeChangePercent.toFixed(1),"%)"]})]})]}),y.jsxs("div",{className:"summary-item",children:[y.jsx("span",{className:"summary-label",children:" Lateral Thrust"}),y.jsxs("div",{className:"summary-values",children:[y.jsxs("span",{children:[r[0].analysis.lateralThrust.leftKnee.amplitude," cm"]}),y.jsx("span",{className:"arrow",children:""}),y.jsxs("span",{children:[r[1].analysis.lateralThrust.leftKnee.amplitude," cm"]})]}),y.jsxs("div",{className:`change-indicator ${u.leftKneeDiff>0?"negative":u.leftKneeDiff<0?"positive":"neutral"}`,children:[h(u.leftKneeDiff),Math.abs(u.leftKneeDiff)>=.5&&y.jsxs("span",{className:"change-percent",children:["(",u.leftKneeChangePercent>0?"+":"",u.leftKneeChangePercent.toFixed(1),"%)"]})]})]}),y.jsxs("div",{className:"summary-item",children:[y.jsx("span",{className:"summary-label",children:""}),y.jsxs("div",{className:"summary-values",children:[y.jsxs("span",{children:[r[0].analysis.lateralThrust.asymmetryPercent,"%"]}),y.jsx("span",{className:"arrow",children:""}),y.jsxs("span",{children:[r[1].analysis.lateralThrust.asymmetryPercent,"%"]})]}),y.jsxs("div",{className:`change-indicator ${u.asymmetryDiff>0?"negative":u.asymmetryDiff<0?"positive":"neutral"}`,children:[h(u.asymmetryDiff),Math.abs(u.asymmetryDiff)>=1&&y.jsxs("span",{className:"change-percent",children:["(",u.asymmetryDiff>0?"+":"",u.asymmetryDiff,"%)"]})]})]})]})]}),y.jsxs("section",{className:"detailed-comparison",children:[y.jsx("h3",{children:""}),y.jsx("div",{className:"comparison-table",children:y.jsxs("table",{children:[y.jsx("thead",{children:y.jsxs("tr",{children:[y.jsx("th",{children:""}),y.jsx("th",{children:r[0].name}),y.jsx("th",{children:r[1].name})]})}),y.jsxs("tbody",{children:[y.jsxs("tr",{children:[y.jsx("td",{children:" "}),y.jsxs("td",{children:[r[0].analysis.lateralThrust.rightKnee.amplitude," cm"]}),y.jsxs("td",{children:[r[1].analysis.lateralThrust.rightKnee.amplitude," cm"]})]}),y.jsxs("tr",{children:[y.jsx("td",{children:" "}),y.jsx("td",{children:y.jsx("span",{className:`badge badge-${r[0].analysis.lateralThrust.rightKnee.severity}`,children:d(r[0].analysis.lateralThrust.rightKnee.severity)})}),y.jsx("td",{children:y.jsx("span",{className:`badge badge-${r[1].analysis.lateralThrust.rightKnee.severity}`,children:d(r[1].analysis.lateralThrust.rightKnee.severity)})})]}),y.jsxs("tr",{children:[y.jsx("td",{children:" "}),y.jsxs("td",{children:[r[0].analysis.lateralThrust.leftKnee.amplitude," cm"]}),y.jsxs("td",{children:[r[1].analysis.lateralThrust.leftKnee.amplitude," cm"]})]}),y.jsxs("tr",{children:[y.jsx("td",{children:" "}),y.jsx("td",{children:y.jsx("span",{className:`badge badge-${r[0].analysis.lateralThrust.leftKnee.severity}`,children:d(r[0].analysis.lateralThrust.leftKnee.severity)})}),y.jsx("td",{children:y.jsx("span",{className:`badge badge-${r[1].analysis.lateralThrust.leftKnee.severity}`,children:d(r[1].analysis.lateralThrust.leftKnee.severity)})})]}),y.jsxs("tr",{children:[y.jsx("td",{children:""}),y.jsxs("td",{children:[r[0].analysis.duration.toFixed(1),""]}),y.jsxs("td",{children:[r[1].analysis.duration.toFixed(1),""]})]}),y.jsxs("tr",{children:[y.jsx("td",{children:""}),y.jsx("td",{children:r[0].analysis.totalFrames}),y.jsx("td",{children:r[1].analysis.totalFrames})]})]})]})})]}),y.jsxs("section",{className:"clinical-interpretation",children:[y.jsx("h3",{children:""}),y.jsx("div",{className:"interpretation-content",children:M5(r[0],r[1],u)})]})]})]})}function M5(e,t,r){const i=[],o=Math.floor((t.timestamp-e.timestamp)/864e5);return o>0&&i.push(`${o}`),Math.abs(r.rightKneeDiff)<.5?i.push("lateral thrust"):r.rightKneeDiff>0?i.push(`lateral thrust+${r.rightKneeDiff.toFixed(1)}`):i.push(`lateral thrust${r.rightKneeDiff.toFixed(1)}`),Math.abs(r.leftKneeDiff)<.5?i.push("lateral thrust"):r.leftKneeDiff>0?i.push(`lateral thrust+${r.leftKneeDiff.toFixed(1)}`):i.push(`lateral thrust${r.leftKneeDiff.toFixed(1)}`),Math.abs(r.asymmetryDiff)>5&&i.push(`${r.asymmetryDiff>0?"":""}`),i.join(" ")}function $5(){const e=tn(),{signIn:t,signUp:r}=$a(),[i,o]=T.useState(!0),[a,u]=T.useState(""),[h,d]=T.useState(""),[p,g]=T.useState(""),[v,_]=T.useState(!1),[E,S]=T.useState(null),[k,x]=T.useState(null),P=async L=>{if(L.preventDefault(),S(null),x(null),!a||!h){S("");return}if(!i&&h!==p){S("");return}if(h.length<6){S("6");return}_(!0);try{if(i){const{error:R}=await t(a,h);R?R.message.includes("Invalid login")?S(""):S(R.message):e("/")}else{const{error:R}=await r(a,h);R?S(R.message):x("")}}catch{S("")}finally{_(!1)}};return y.jsx("div",{className:"login-page",children:y.jsxs("div",{className:"login-container",children:[y.jsxs("div",{className:"login-header",children:[y.jsx("h1",{children:"GaitKnee-View"}),y.jsx("p",{className:"login-subtitle",children:" Lateral Thrust "})]}),y.jsxs("div",{className:"login-card",children:[y.jsxs("div",{className:"login-tabs",children:[y.jsx("button",{className:`tab ${i?"active":""}`,onClick:()=>{o(!0),S(null),x(null)},children:""}),y.jsx("button",{className:`tab ${i?"":"active"}`,onClick:()=>{o(!1),S(null),x(null)},children:""})]}),y.jsxs("form",{onSubmit:P,className:"login-form",children:[y.jsxs("div",{className:"form-group",children:[y.jsx("label",{htmlFor:"email",children:""}),y.jsx("input",{type:"email",id:"email",value:a,onChange:L=>u(L.target.value),placeholder:"example@email.com",disabled:v})]}),y.jsxs("div",{className:"form-group",children:[y.jsx("label",{htmlFor:"password",children:""}),y.jsx("input",{type:"password",id:"password",value:h,onChange:L=>d(L.target.value),placeholder:"6",disabled:v})]}),!i&&y.jsxs("div",{className:"form-group",children:[y.jsx("label",{htmlFor:"confirmPassword",children:""}),y.jsx("input",{type:"password",id:"confirmPassword",value:p,onChange:L=>g(L.target.value),placeholder:"",disabled:v})]}),E&&y.jsx("div",{className:"error-message",children:E}),k&&y.jsx("div",{className:"success-message",children:k}),y.jsx("button",{type:"submit",className:"submit-btn",disabled:v,children:v?"...":i?"":""})]}),y.jsxs("div",{className:"login-info",children:[y.jsx("p",{children:" 5"}),y.jsx("p",{children:" "})]})]})]})})}var L3="clover",B5=function(t){return t===3?"v3":t},D3="https://js.stripe.com",z5="".concat(D3,"/").concat(L3,"/stripe.js"),V5=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,W5=/^https:\/\/js\.stripe\.com\/(v3|[a-z]+)\/stripe\.js(\?.*)?$/;var K5=function(t){return V5.test(t)||W5.test(t)},H5=function(){for(var t=document.querySelectorAll('script[src^="'.concat(D3,'"]')),r=0;r<t.length;r++){var i=t[r];if(K5(i.src))return i}return null},sv=function(t){var r="",i=document.createElement("script");i.src="".concat(z5).concat(r);var o=document.head||document.body;if(!o)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return o.appendChild(i),i},G5=function(t,r){!t||!t._registerWrapper||t._registerWrapper({name:"stripe-js",version:"8.6.0",startTime:r})},ga=null,vu=null,wu=null,q5=function(t){return function(r){t(new Error("Failed to load Stripe.js",{cause:r}))}},J5=function(t,r){return function(){window.Stripe?t(window.Stripe):r(new Error("Stripe.js not available"))}},X5=function(t){return ga!==null?ga:(ga=new Promise(function(r,i){if(typeof window>"u"||typeof document>"u"){r(null);return}if(window.Stripe){r(window.Stripe);return}try{var o=H5();if(!(o&&t)){if(!o)o=sv(t);else if(o&&wu!==null&&vu!==null){var a;o.removeEventListener("load",wu),o.removeEventListener("error",vu),(a=o.parentNode)===null||a===void 0||a.removeChild(o),o=sv(t)}}wu=J5(r,i),vu=q5(i),o.addEventListener("load",wu),o.addEventListener("error",vu)}catch(u){i(u);return}}),ga.catch(function(r){return ga=null,Promise.reject(r)}))},Y5=function(t,r,i){if(t===null)return null;var o=r[0],a=o.match(/^pk_test/),u=B5(t.version),h=L3;a&&u!==h&&console.warn("Stripe.js@".concat(u," was loaded on the page, but @stripe/stripe-js@").concat("8.6.0"," expected Stripe.js@").concat(h,". This may result in unexpected behavior. For more information, see https://docs.stripe.com/sdks/stripejs-versioning"));var d=t.apply(void 0,r);return G5(d,i),d},ya,U3=!1,F3=function(){return ya||(ya=X5(null).catch(function(t){return ya=null,Promise.reject(t)}),ya)};Promise.resolve().then(function(){return F3()}).catch(function(e){U3||console.warn(e)});var Q5=function(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];U3=!0;var o=Date.now();return F3().then(function(a){return Y5(a,r,o)})};const Z5="pk_live_51MY7g4FcZOGgYBHRkGUCoflQLEPkYgaD0cRUKXTRR0JjIphFzZanWHzlVn73I3gt3QDyUMi6L2ljcCNahVlPUtfD00kpPnEdPZ";Q5(Z5);const eT=[{id:"5_credits",name:"5",credits:5,price:980,priceId:"price_1SfNRfFcZOGgYBHRcFIr2QUO",description:""},{id:"10_credits",name:"10",credits:10,price:1980,priceId:"price_1SfNSDFcZOGgYBHRKXKA81SG",description:"No.1",popular:!0},{id:"30_credits",name:"30",credits:30,price:4980,priceId:"price_1SfNTCFcZOGgYBHRu1p1nFaS",description:"17%"}];function tT(){const e=tn(),[t]=_v(),{user:r,usage:i,refreshUsage:o}=$a(),[a,u]=T.useState(null),h=t.get("success"),d=t.get("canceled");h==="true"&&o();const p=async g=>{if(!r){e("/login");return}u(g.id);try{const{data:v,error:_}=await en.functions.invoke("create-checkout-session",{body:{priceId:g.priceId,credits:g.credits,userId:r.id,userEmail:r.email}});if(_){console.error("Checkout error:",_),alert("");return}v!=null&&v.url&&(window.location.href=v.url)}catch(v){console.error("Purchase error:",v),alert("")}finally{u(null)}};return y.jsxs("div",{className:"purchase-page",children:[y.jsxs("header",{className:"purchase-header",children:[y.jsx("button",{className:"back-btn",onClick:()=>e("/"),children:" "}),y.jsx("h1",{children:""})]}),y.jsxs("main",{className:"purchase-main",children:[h==="true"&&y.jsx("div",{className:"success-message",children:" "}),d==="true"&&y.jsx("div",{className:"canceled-message",children:""}),y.jsxs("div",{className:"current-credits",children:[y.jsx("span",{className:"credits-label",children:""}),y.jsx("span",{className:"credits-value",children:(i==null?void 0:i.remaining)||0})]}),y.jsx("div",{className:"packs-grid",children:eT.map(g=>y.jsxs("div",{className:`pack-card ${g.popular?"popular":""}`,children:[g.popular&&y.jsx("div",{className:"popular-badge",children:""}),y.jsx("h2",{className:"pack-name",children:g.name}),y.jsxs("div",{className:"pack-credits",children:[g.credits,""]}),y.jsxs("div",{className:"pack-price",children:[y.jsx("span",{className:"price-yen",children:""}),y.jsx("span",{className:"price-value",children:g.price.toLocaleString()})]}),y.jsxs("div",{className:"pack-unit",children:["",Math.round(g.price/g.credits),"/"]}),y.jsx("p",{className:"pack-description",children:g.description}),y.jsx("button",{className:"purchase-btn",onClick:()=>p(g),disabled:a===g.id,children:a===g.id?"...":""})]},g.id))}),y.jsxs("div",{className:"purchase-notes",children:[y.jsx("h3",{children:""}),y.jsxs("ul",{children:[y.jsx("li",{children:""}),y.jsx("li",{children:"5"}),y.jsx("li",{children:""})]})]})]})]})}function Gs({children:e}){const{user:t,loading:r}=$a();return r?y.jsxs("div",{className:"loading-screen",children:[y.jsx("div",{className:"spinner"}),y.jsx("p",{children:"..."})]}):t?y.jsx(y.Fragment,{children:e}):y.jsx(FE,{to:"/login",replace:!0})}function rT(){return y.jsxs($E,{children:[y.jsx(Ln,{path:"/login",element:y.jsx($5,{})}),y.jsx(Ln,{path:"/",element:y.jsx(Gs,{children:y.jsx(Lb,{})})}),y.jsx(Ln,{path:"/record",element:y.jsx(Gs,{children:y.jsx(d5,{})})}),y.jsx(Ln,{path:"/upload",element:y.jsx(Gs,{children:y.jsx(D5,{})})}),y.jsx(Ln,{path:"/results",element:y.jsx(Gs,{children:y.jsx(b5,{})})}),y.jsx(Ln,{path:"/history",element:y.jsx(Gs,{children:y.jsx(U5,{})})}),y.jsx(Ln,{path:"/compare",element:y.jsx(Gs,{children:y.jsx(F5,{})})}),y.jsx(Ln,{path:"/purchase",element:y.jsx(Gs,{children:y.jsx(tT,{})})})]})}function nT(){return y.jsx(Ib,{children:y.jsx(rT,{})})}function sT(){"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/service-worker.js").then(e=>{console.log("[PWA] Service Worker registered:",e.scope),setInterval(()=>{e.update()},6e4)}).catch(e=>{console.error("[PWA] Service Worker registration failed:",e)})})}function iT(){let e=null;window.addEventListener("beforeinstallprompt",t=>{t.preventDefault(),e=t,console.log("[PWA] Install prompt available")}),window.installPWA=()=>{if(!e){console.log("[PWA] Install prompt not available");return}e.prompt(),e.userChoice.then(t=>{t.outcome==="accepted"?console.log("[PWA] User accepted install prompt"):console.log("[PWA] User dismissed install prompt"),e=null})}}G4.createRoot(document.getElementById("root")).render(y.jsx(T.StrictMode,{children:y.jsx(cS,{children:y.jsx(nT,{})})}));sT();iT();
